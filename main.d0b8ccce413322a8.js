"use strict";(self.webpackChunktravel_idea=self.webpackChunktravel_idea||[]).push([[179],{2011:(Et,Fe,B)=>{B.d(Fe,{Dh:()=>Te,GT:()=>ye,cc:()=>Re,hO:()=>et,on:()=>Y,pX:()=>de,xv:()=>Ee});var c=B(4650),re=B(1274),V=B(58);Et=B.hmd(Et);const pe=["ngOnDestroy"],de=(Ae,ht,yt,Ve={})=>new Proxy(Ae,{get:(Ie,Ce)=>yt.runOutsideAngular(()=>{var Qe;if(Ae[Ce])return!(null===(Qe=Ve?.spy)||void 0===Qe)&&Qe.get&&Ve.spy.get(Ce,Ae[Ce]),Ae[Ce];if(pe.indexOf(Ce)>-1)return()=>{};const qe=ht.toPromise().then(ot=>{const se=ot&&ot[Ce];return"function"==typeof se?se.bind(ot):se&&se.then?se.then(Nt=>yt.run(()=>Nt)):yt.run(()=>se)});return new Proxy(()=>{},{get:(ot,se)=>qe[se],apply:(ot,se,Nt)=>qe.then(pt=>{var Kt;const ft=pt&&pt(...Nt);return!(null===(Kt=Ve?.spy)||void 0===Kt)&&Kt.apply&&Ve.spy.apply(Ce,Nt,ft),ft})})})}),ye=(Ae,ht)=>{ht.forEach(yt=>{Object.getOwnPropertyNames(yt.prototype||yt).forEach(Ve=>{Object.defineProperty(Ae.prototype,Ve,Object.getOwnPropertyDescriptor(yt.prototype||yt,Ve))})})};class ce{constructor(ht){return ht}}const Te=new c.OlP("angularfire2.app.options"),Ee=new c.OlP("angularfire2.app.name");function Y(Ae,ht,yt){const Ie="object"==typeof yt&&yt||{};Ie.name=Ie.name||"string"==typeof yt&&yt||"[DEFAULT]";const Qe=re.Z.apps.filter(qe=>qe&&qe.name===Ie.name)[0]||ht.runOutsideAngular(()=>re.Z.initializeApp(Ae,Ie));try{JSON.stringify(Ae)!==JSON.stringify(Qe.options)&&W("error",`${Qe.name} Firebase App already initialized with different options${Et.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ce(Qe)}const W=(Ae,...ht)=>{(0,c.X6Q)()&&typeof console<"u"&&console[Ae](...ht)},J={provide:ce,useFactory:Y,deps:[Te,c.R0b,[new c.FiY,Ee]]};let et=(()=>{class Ae{constructor(yt){re.Z.registerVersion("angularfire",V.q4.full,"core"),re.Z.registerVersion("angularfire",V.q4.full,"app-compat"),re.Z.registerVersion("angular",c.q4F.full,yt.toString())}static initializeApp(yt,Ve){return{ngModule:Ae,providers:[{provide:Te,useValue:yt},{provide:Ee,useValue:Ve}]}}}return Ae.\u0275fac=function(yt){return new(yt||Ae)(c.LFG(c.Lbi))},Ae.\u0275mod=c.oAB({type:Ae}),Ae.\u0275inj=c.cJS({providers:[J]}),Ae})();function Re(Ae,ht,yt,Ve,Ie){const[,Ce,Qe]=globalThis.\u0275AngularfireInstanceCache.find(qe=>qe[0]===Ae)||[];if(Ce)return function Le(Ae,ht){try{return Ae.toString()===ht.toString()}catch{return Ae===ht}}(Ie,Qe)||(we("error",`${ht} was already initialized on the ${yt} Firebase App with different settings.${Ke?" You may need to reload as Firebase is not HMR aware.":""}`),we("warn",{is:Ie,was:Qe})),Ce;{const qe=Ve();return globalThis.\u0275AngularfireInstanceCache.push([Ae,qe,Ie]),qe}}const Ke=!!Et.hot,we=(Ae,...ht)=>{(0,c.X6Q)()&&typeof console<"u"&&console[Ae](...ht)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},58:(Et,Fe,B)=>{B.d(Fe,{q4:()=>Xa,iC:()=>wi,HU:()=>Wl,vb:()=>rt,JM:()=>Vr});var c=B(4650),re=B(8140),V=B(5861),pe=B(2951),de=B(2090),ye=B(4859),ce=B(1877);let Ee,Y;const et=new WeakMap,Re=new WeakMap,Le=new WeakMap,Ke=new WeakMap,we=new WeakMap;let yt={get(S,T,R){if(S instanceof IDBTransaction){if("done"===T)return Re.get(S);if("objectStoreNames"===T)return S.objectStoreNames||Le.get(S);if("store"===T)return R.objectStoreNames[1]?void 0:R.objectStore(R.objectStoreNames[0])}return Qe(S[T])},set:(S,T,R)=>(S[T]=R,!0),has:(S,T)=>S instanceof IDBTransaction&&("done"===T||"store"===T)||T in S};function Ce(S){return"function"==typeof S?function Ie(S){return S!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function J(){return Y||(Y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(S)?function(...T){return S.apply(qe(this),T),Qe(et.get(this))}:function(...T){return Qe(S.apply(qe(this),T))}:function(T,...R){const j=S.call(qe(this),T,...R);return Le.set(j,T.sort?T.sort():[T]),Qe(j)}}(S):(S instanceof IDBTransaction&&function ht(S){if(Re.has(S))return;const T=new Promise((R,j)=>{const q=()=>{S.removeEventListener("complete",te),S.removeEventListener("error",De),S.removeEventListener("abort",De)},te=()=>{R(),q()},De=()=>{j(S.error||new DOMException("AbortError","AbortError")),q()};S.addEventListener("complete",te),S.addEventListener("error",De),S.addEventListener("abort",De)});Re.set(S,T)}(S),((S,T)=>T.some(R=>S instanceof R))(S,function W(){return Ee||(Ee=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(S,yt):S)}function Qe(S){if(S instanceof IDBRequest)return function Ae(S){const T=new Promise((R,j)=>{const q=()=>{S.removeEventListener("success",te),S.removeEventListener("error",De)},te=()=>{R(Qe(S.result)),q()},De=()=>{j(S.error),q()};S.addEventListener("success",te),S.addEventListener("error",De)});return T.then(R=>{R instanceof IDBCursor&&et.set(R,S)}).catch(()=>{}),we.set(T,S),T}(S);if(Ke.has(S))return Ke.get(S);const T=Ce(S);return T!==S&&(Ke.set(S,T),we.set(T,S)),T}const qe=S=>we.get(S);function ot(S,T,{blocked:R,upgrade:j,blocking:q,terminated:te}={}){const De=indexedDB.open(S,T),tt=Qe(De);return j&&De.addEventListener("upgradeneeded",Xe=>{j(Qe(De.result),Xe.oldVersion,Xe.newVersion,Qe(De.transaction))}),R&&De.addEventListener("blocked",()=>R()),tt.then(Xe=>{te&&Xe.addEventListener("close",()=>te()),q&&Xe.addEventListener("versionchange",()=>q())}).catch(()=>{}),tt}function se(S,{blocked:T}={}){const R=indexedDB.deleteDatabase(S);return T&&R.addEventListener("blocked",()=>T()),Qe(R).then(()=>{})}const Nt=["get","getKey","getAll","getAllKeys","count"],pt=["put","add","delete","clear"],Kt=new Map;function ft(S,T){if(!(S instanceof IDBDatabase)||T in S||"string"!=typeof T)return;if(Kt.get(T))return Kt.get(T);const R=T.replace(/FromIndex$/,""),j=T!==R,q=pt.includes(R);if(!(R in(j?IDBIndex:IDBObjectStore).prototype)||!q&&!Nt.includes(R))return;const te=function(){var De=(0,V.Z)(function*(tt,...Xe){const bt=this.transaction(tt,q?"readwrite":"readonly");let $t=bt.store;return j&&($t=$t.index(Xe.shift())),(yield Promise.all([$t[R](...Xe),q&&bt.done]))[0]});return function(Xe){return De.apply(this,arguments)}}();return Kt.set(T,te),te}!function Ve(S){yt=S(yt)}(S=>({...S,get:(T,R,j)=>ft(T,R)||S.get(T,R,j),has:(T,R)=>!!ft(T,R)||S.has(T,R)}));const lo="@firebase/installations",Ps="w:0.6.4",le="FIS_v2",vt=new de.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Lt(S){return S instanceof de.ZR&&S.code.includes("request-failed")}function un({projectId:S}){return`https://firebaseinstallations.googleapis.com/v1/projects/${S}/installations`}function At(S){return{token:S.token,requestStatus:2,expiresIn:Zi(S.expiresIn),creationTime:Date.now()}}function sn(S,T){return zn.apply(this,arguments)}function zn(){return(zn=(0,V.Z)(function*(S,T){const j=(yield T.json()).error;return vt.create("request-failed",{requestName:S,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function ps({apiKey:S}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S})}function tn(S,{refreshToken:T}){const R=ps(S);return R.append("Authorization",function pr(S){return`${le} ${S}`}(T)),R}function Nn(S){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,V.Z)(function*(S){const T=yield S();return T.status>=500&&T.status<600?S():T})).apply(this,arguments)}function Zi(S){return Number(S.replace("s","000"))}function gt(S,T){return gr.apply(this,arguments)}function gr(){return(gr=(0,V.Z)(function*({appConfig:S,heartbeatServiceProvider:T},{fid:R}){const j=un(S),q=ps(S),te=T.getImmediate({optional:!0});if(te){const bt=yield te.getHeartbeatsHeader();bt&&q.append("x-firebase-client",bt)}const tt={method:"POST",headers:q,body:JSON.stringify({fid:R,authVersion:le,appId:S.appId,sdkVersion:Ps})},Xe=yield Nn(()=>fetch(j,tt));if(Xe.ok){const bt=yield Xe.json();return{fid:bt.fid||R,registrationStatus:2,refreshToken:bt.refreshToken,authToken:At(bt.authToken)}}throw yield sn("Create Installation",Xe)})).apply(this,arguments)}function gs(S){return new Promise(T=>{setTimeout(T,S)})}const Ba=/^[cdef][\w-]{21}$/;function Si(){try{const S=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(S),S[0]=112+S[0]%16;const R=function Pn(S){return function mr(S){return btoa(String.fromCharCode(...S)).replace(/\+/g,"-").replace(/\//g,"_")}(S).substr(0,22)}(S);return Ba.test(R)?R:""}catch{return""}}function gn(S){return`${S.appName}!${S.appId}`}const lt=new Map;function Tt(S,T){const R=gn(S);_r(R,T),function ui(S,T){const R=function Bi(){return!Rt&&"BroadcastChannel"in self&&(Rt=new BroadcastChannel("[Firebase] FID Change"),Rt.onmessage=S=>{_r(S.data.key,S.data.fid)}),Rt}();R&&R.postMessage({key:S,fid:T}),function En(){0===lt.size&&Rt&&(Rt.close(),Rt=null)}()}(R,T)}function _r(S,T){const R=lt.get(S);if(R)for(const j of R)j(T)}let Rt=null;const Ii="firebase-installations-store";let Ki=null;function ms(){return Ki||(Ki=ot("firebase-installations-database",1,{upgrade:(S,T)=>{0===T&&S.createObjectStore(Ii)}})),Ki}function Kn(S,T){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,V.Z)(function*(S,T){const R=gn(S),q=(yield ms()).transaction(Ii,"readwrite"),te=q.objectStore(Ii),De=yield te.get(R);return yield te.put(T,R),yield q.done,(!De||De.fid!==T.fid)&&Tt(S,T.fid),T})).apply(this,arguments)}function Ls(S){return ni.apply(this,arguments)}function ni(){return(ni=(0,V.Z)(function*(S){const T=gn(S),j=(yield ms()).transaction(Ii,"readwrite");yield j.objectStore(Ii).delete(T),yield j.done})).apply(this,arguments)}function Rr(S,T){return yr.apply(this,arguments)}function yr(){return(yr=(0,V.Z)(function*(S,T){const R=gn(S),q=(yield ms()).transaction(Ii,"readwrite"),te=q.objectStore(Ii),De=yield te.get(R),tt=T(De);return void 0===tt?yield te.delete(R):yield te.put(tt,R),yield q.done,tt&&(!De||De.fid!==tt.fid)&&Tt(S,tt.fid),tt})).apply(this,arguments)}function $(S){return z.apply(this,arguments)}function z(){return(z=(0,V.Z)(function*(S){let T;const R=yield Rr(S.appConfig,j=>{const q=Q(j),te=he(S,q);return T=te.registrationPromise,te.installationEntry});return""===R.fid?{installationEntry:yield T}:{installationEntry:R,registrationPromise:T}})).apply(this,arguments)}function Q(S){return We(S||{fid:Si(),registrationStatus:0})}function he(S,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(vt.create("app-offline"))};const R={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},j=function ee(S,T){return Je.apply(this,arguments)}(S,R);return{installationEntry:R,registrationPromise:j}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:Pt(S)}:{installationEntry:T}}function Je(){return(Je=(0,V.Z)(function*(S,T){try{const R=yield gt(S,T);return Kn(S.appConfig,R)}catch(R){throw Lt(R)&&409===R.customData.serverCode?yield Ls(S.appConfig):yield Kn(S.appConfig,{fid:T.fid,registrationStatus:0}),R}})).apply(this,arguments)}function Pt(S){return zt.apply(this,arguments)}function zt(){return(zt=(0,V.Z)(function*(S){let T=yield Cn(S.appConfig);for(;1===T.registrationStatus;)yield gs(100),T=yield Cn(S.appConfig);if(0===T.registrationStatus){const{installationEntry:R,registrationPromise:j}=yield $(S);return j||R}return T})).apply(this,arguments)}function Cn(S){return Rr(S,T=>{if(!T)throw vt.create("installation-not-found");return We(T)})}function We(S){return function mt(S){return 1===S.registrationStatus&&S.registrationTime+1e4<Date.now()}(S)?{fid:S.fid,registrationStatus:0}:S}function Ct(S,T){return An.apply(this,arguments)}function An(){return(An=(0,V.Z)(function*({appConfig:S,heartbeatServiceProvider:T},R){const j=Xi(S,R),q=tn(S,R),te=T.getImmediate({optional:!0});if(te){const bt=yield te.getHeartbeatsHeader();bt&&q.append("x-firebase-client",bt)}const tt={method:"POST",headers:q,body:JSON.stringify({installation:{sdkVersion:Ps,appId:S.appId}})},Xe=yield Nn(()=>fetch(j,tt));if(Xe.ok)return At(yield Xe.json());throw yield sn("Generate Auth Token",Xe)})).apply(this,arguments)}function Xi(S,{fid:T}){return`${un(S)}/${T}/authTokens:generate`}function Tn(S){return _s.apply(this,arguments)}function _s(){return(_s=(0,V.Z)(function*(S,T=!1){let R;const j=yield Rr(S.appConfig,te=>{if(!Gt(te))throw vt.create("not-registered");const De=te.authToken;if(!T&&mn(De))return te;if(1===De.requestStatus)return R=ue(S,T),te;{if(!navigator.onLine)throw vt.create("app-offline");const tt=nn(te);return R=ze(S,tt),tt}});return R?yield R:j.authToken})).apply(this,arguments)}function ue(S,T){return oe.apply(this,arguments)}function oe(){return(oe=(0,V.Z)(function*(S,T){let R=yield Ue(S.appConfig);for(;1===R.authToken.requestStatus;)yield gs(100),R=yield Ue(S.appConfig);const j=R.authToken;return 0===j.requestStatus?Tn(S,T):j})).apply(this,arguments)}function Ue(S){return Rr(S,T=>{if(!Gt(T))throw vt.create("not-registered");return function Ji(S){return 1===S.requestStatus&&S.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function ze(S,T){return kt.apply(this,arguments)}function kt(){return(kt=(0,V.Z)(function*(S,T){try{const R=yield Ct(S,T),j=Object.assign(Object.assign({},T),{authToken:R});return yield Kn(S.appConfig,j),R}catch(R){if(!Lt(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const j=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield Kn(S.appConfig,j)}else yield Ls(S.appConfig);throw R}})).apply(this,arguments)}function Gt(S){return void 0!==S&&2===S.registrationStatus}function mn(S){return 2===S.requestStatus&&!function $n(S){const T=Date.now();return T<S.creationTime||S.creationTime+S.expiresIn<T+36e5}(S)}function nn(S){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},S),{authToken:T})}function Or(){return(Or=(0,V.Z)(function*(S){const T=S,{installationEntry:R,registrationPromise:j}=yield $(T);return j?j.catch(console.error):Tn(T).catch(console.error),R.fid})).apply(this,arguments)}function Vc(){return(Vc=(0,V.Z)(function*(S,T=!1){const R=S;return yield _n(R),(yield Tn(R,T)).token})).apply(this,arguments)}function _n(S){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,V.Z)(function*(S){const{registrationPromise:T}=yield $(S);T&&(yield T)})).apply(this,arguments)}function Ai(S){return vt.create("missing-app-config-values",{valueName:S})}const vr="installations",sa=S=>{const T=S.getProvider("app").getImmediate(),R=function af(S){if(!S||!S.options)throw Ai("App Configuration");if(!S.name)throw Ai("App Name");const T=["projectId","apiKey","appId"];for(const R of T)if(!S.options[R])throw Ai(R);return{appName:S.name,projectId:S.options.projectId,apiKey:S.options.apiKey,appId:S.options.appId}}(T);return{app:T,appConfig:R,heartbeatServiceProvider:(0,pe._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},Bs=S=>{const T=S.getProvider("app").getImmediate(),R=(0,pe._getProvider)(T,vr).getImmediate();return{getId:()=>function qr(S){return Or.apply(this,arguments)}(R),getToken:q=>function Dl(S){return Vc.apply(this,arguments)}(R,q)}};(function ys(){(0,pe._registerComponent)(new ye.wA(vr,sa,"PUBLIC")),(0,pe._registerComponent)(new ye.wA("installations-internal",Bs,"PRIVATE"))})(),(0,pe.registerVersion)(lo,"0.6.4"),(0,pe.registerVersion)(lo,"0.6.4","esm2017");const Ua="@firebase/remote-config",Fn=new de.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Yr{constructor(T,R,j,q){this.client=T,this.storage=R,this.storageCache=j,this.logger=q}isCachedDataFresh(T,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-R,q=j<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${q}.`),q}fetch(T){var R=this;return(0,V.Z)(function*(){const[j,q]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(q&&R.isCachedDataFresh(T.cacheMaxAgeMillis,j))return q;T.eTag=q&&q.eTag;const te=yield R.client.fetch(T),De=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===te.status&&De.push(R.storage.setLastSuccessfulFetchResponse(te)),yield Promise.all(De),te})()}}function gd(S=navigator){return S.languages&&S.languages[0]||S.language}class Sl{constructor(T,R,j,q,te,De){this.firebaseInstallations=T,this.sdkVersion=R,this.namespace=j,this.projectId=q,this.apiKey=te,this.appId=De}fetch(T){var R=this;return(0,V.Z)(function*(){const[j,q]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),De=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,tt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},Xe={sdk_version:R.sdkVersion,app_instance_id:j,app_instance_id_token:q,app_id:R.appId,language_code:gd()},bt={method:"POST",headers:tt,body:JSON.stringify(Xe)},$t=fetch(De,bt),Ut=new Promise((Br,ts)=>{T.signal.addEventListener(()=>{const ql=new Error("The operation was aborted.");ql.name="AbortError",ts(ql)})});let tr;try{yield Promise.race([$t,Ut]),tr=yield $t}catch(Br){let ts="fetch-client-network";throw"AbortError"===Br?.name&&(ts="fetch-timeout"),Fn.create(ts,{originalErrorMessage:Br?.message})}let ji=tr.status;const Ja=tr.headers.get("ETag")||void 0;let Fd,Go;if(200===tr.status){let Br;try{Br=yield tr.json()}catch(ts){throw Fn.create("fetch-client-parse",{originalErrorMessage:ts?.message})}Fd=Br.entries,Go=Br.state}if("INSTANCE_STATE_UNSPECIFIED"===Go?ji=500:"NO_CHANGE"===Go?ji=304:("NO_TEMPLATE"===Go||"EMPTY_CONFIG"===Go)&&(Fd={}),304!==ji&&200!==ji)throw Fn.create("fetch-status",{httpStatus:ji});return{status:ji,eTag:Ja,config:Fd}})()}}class Ag{constructor(T,R){this.client=T,this.storage=R}fetch(T){var R=this;return(0,V.Z)(function*(){const j=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(T,j)})()}attemptFetch(T,{throttleEndTimeMillis:R,backoffCount:j}){var q=this;return(0,V.Z)(function*(){yield function md(S,T){return new Promise((R,j)=>{const q=Math.max(T-Date.now(),0),te=setTimeout(R,q);S.addEventListener(()=>{clearTimeout(te),j(Fn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,R);try{const te=yield q.client.fetch(T);return yield q.storage.deleteThrottleMetadata(),te}catch(te){if(!function zc(S){if(!(S instanceof de.ZR&&S.customData))return!1;const T=Number(S.customData.httpStatus);return 429===T||500===T||503===T||504===T}(te))throw te;const De={throttleEndTimeMillis:Date.now()+(0,de.$s)(j),backoffCount:j+1};return yield q.storage.setThrottleMetadata(De),q.attemptFetch(T,De)}})()}}class Tg{constructor(T,R,j,q,te){this.app=T,this._client=R,this._storageCache=j,this._storage=q,this._logger=te,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Hi(S,T){const R=S.target.error||void 0;return Fn.create(T,{originalErrorMessage:R&&R?.message})}const cr="app_namespace_store";class T0{constructor(T,R,j,q=function Wc(){return new Promise((S,T)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=j=>{T(Hi(j,"storage-open"))},R.onsuccess=j=>{S(j.target.result)},R.onupgradeneeded=j=>{0===j.oldVersion&&j.target.result.createObjectStore(cr,{keyPath:"compositeKey"})}}catch(R){T(Fn.create("storage-open",{originalErrorMessage:R?.message}))}})}()){this.appId=T,this.appName=R,this.namespace=j,this.openDbPromise=q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var R=this;return(0,V.Z)(function*(){const j=yield R.openDbPromise;return new Promise((q,te)=>{const tt=j.transaction([cr],"readonly").objectStore(cr),Xe=R.createCompositeKey(T);try{const bt=tt.get(Xe);bt.onerror=$t=>{te(Hi($t,"storage-get"))},bt.onsuccess=$t=>{const Ut=$t.target.result;q(Ut?Ut.value:void 0)}}catch(bt){te(Fn.create("storage-get",{originalErrorMessage:bt?.message}))}})})()}set(T,R){var j=this;return(0,V.Z)(function*(){const q=yield j.openDbPromise;return new Promise((te,De)=>{const Xe=q.transaction([cr],"readwrite").objectStore(cr),bt=j.createCompositeKey(T);try{const $t=Xe.put({compositeKey:bt,value:R});$t.onerror=Ut=>{De(Hi(Ut,"storage-set"))},$t.onsuccess=()=>{te()}}catch($t){De(Fn.create("storage-set",{originalErrorMessage:$t?.message}))}})})()}delete(T){var R=this;return(0,V.Z)(function*(){const j=yield R.openDbPromise;return new Promise((q,te)=>{const tt=j.transaction([cr],"readwrite").objectStore(cr),Xe=R.createCompositeKey(T);try{const bt=tt.delete(Xe);bt.onerror=$t=>{te(Hi($t,"storage-delete"))},bt.onsuccess=()=>{q()}}catch(bt){te(Fn.create("storage-delete",{originalErrorMessage:bt?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class ri{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,V.Z)(function*(){const R=T.storage.getLastFetchStatus(),j=T.storage.getLastSuccessfulFetchTimestampMillis(),q=T.storage.getActiveConfig(),te=yield R;te&&(T.lastFetchStatus=te);const De=yield j;De&&(T.lastSuccessfulFetchTimestampMillis=De);const tt=yield q;tt&&(T.activeConfig=tt)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function br(){return yd.apply(this,arguments)}function yd(){return(yd=(0,V.Z)(function*(){if(!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}!function Ro(){(0,pe._registerComponent)(new ye.wA("remote-config",function S(T,{instanceIdentifier:R}){const j=T.getProvider("app").getImmediate(),q=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Fn.create("registration-window");if(!(0,de.hl)())throw Fn.create("indexed-db-unavailable");const{projectId:te,apiKey:De,appId:tt}=j.options;if(!te)throw Fn.create("registration-project-id");if(!De)throw Fn.create("registration-api-key");if(!tt)throw Fn.create("registration-app-id");const Xe=new T0(tt,j.name,R=R||"firebase"),bt=new ri(Xe),$t=new ce.Yd(Ua);$t.logLevel=ce.in.ERROR;const Ut=new Sl(q,pe.SDK_VERSION,R,te,De,tt),tr=new Ag(Ut,Xe),ji=new Yr(tr,Xe,bt,$t),Ja=new Tg(j,ji,bt,Xe,$t);return function J_(S){const T=(0,de.m9)(S);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Ja),Ja},"PUBLIC").setMultipleInstances(!0)),(0,pe.registerVersion)(Ua,"0.4.4"),(0,pe.registerVersion)(Ua,"0.4.4","esm2017")}();const qc="/firebase-messaging-sw.js",Il="/firebase-cloud-messaging-push-scope",si="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Oo="google.c.a.c_id",gf="google.c.a.c_l",bs="google.c.a.ts",oa="google.c.a.e";var Mt=(()=>{return(S=Mt||(Mt={})).PUSH_RECEIVED="push-received",S.NOTIFICATION_CLICKED="notification-clicked",Mt;var S})();function Hs(S){const T=new Uint8Array(S);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function mf(S){const R=(S+"=".repeat((4-S.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(R),q=new Uint8Array(j.length);for(let te=0;te<j.length;++te)q[te]=j.charCodeAt(te);return q}const Al="fcm_token_details_db",vd="fcm_token_object_Store";function yf(S){return Tl.apply(this,arguments)}function Tl(){return Tl=(0,V.Z)(function*(S){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(te=>te.name).includes(Al))return null;let T=null;return(yield ot(Al,5,{upgrade:(j=(0,V.Z)(function*(q,te,De,tt){var Xe;if(te<2||!q.objectStoreNames.contains(vd))return;const bt=tt.objectStore(vd),$t=yield bt.index("fcmSenderId").get(S);if(yield bt.clear(),$t)if(2===te){const Ut=$t;if(!Ut.auth||!Ut.p256dh||!Ut.endpoint)return;T={token:Ut.fcmToken,createTime:null!==(Xe=Ut.createTime)&&void 0!==Xe?Xe:Date.now(),subscriptionOptions:{auth:Ut.auth,p256dh:Ut.p256dh,endpoint:Ut.endpoint,swScope:Ut.swScope,vapidKey:"string"==typeof Ut.vapidKey?Ut.vapidKey:Hs(Ut.vapidKey)}}}else if(3===te){const Ut=$t;T={token:Ut.fcmToken,createTime:Ut.createTime,subscriptionOptions:{auth:Hs(Ut.auth),p256dh:Hs(Ut.p256dh),endpoint:Ut.endpoint,swScope:Ut.swScope,vapidKey:Hs(Ut.vapidKey)}}}else if(4===te){const Ut=$t;T={token:Ut.fcmToken,createTime:Ut.createTime,subscriptionOptions:{auth:Hs(Ut.auth),p256dh:Hs(Ut.p256dh),endpoint:Ut.endpoint,swScope:Ut.swScope,vapidKey:Hs(Ut.vapidKey)}}}}),function(te,De,tt,Xe){return j.apply(this,arguments)})})).close(),yield se(Al),yield se("fcm_vapid_details_db"),yield se("undefined"),vf(T)?T:null;var j}),Tl.apply(this,arguments)}function vf(S){if(!S||!S.subscriptionOptions)return!1;const{subscriptionOptions:T}=S;return"number"==typeof S.createTime&&S.createTime>0&&"string"==typeof S.token&&S.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Us="firebase-messaging-store";let Ml=null;function Qn(){return Ml||(Ml=ot("firebase-messaging-database",1,{upgrade:(S,T)=>{0===T&&S.createObjectStore(Us)}})),Ml}function Yc(S){return ho.apply(this,arguments)}function ho(){return(ho=(0,V.Z)(function*(S){const T=Hn(S),j=yield(yield Qn()).transaction(Us).objectStore(Us).get(T);if(j)return j;{const q=yield yf(S.appConfig.senderId);if(q)return yield ur(S,q),q}})).apply(this,arguments)}function ur(S,T){return aa.apply(this,arguments)}function aa(){return(aa=(0,V.Z)(function*(S,T){const R=Hn(S),q=(yield Qn()).transaction(Us,"readwrite");return yield q.objectStore(Us).put(T,R),yield q.done,T})).apply(this,arguments)}function bd(S){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,V.Z)(function*(S){const T=Hn(S),j=(yield Qn()).transaction(Us,"readwrite");yield j.objectStore(Us).delete(T),yield j.done})).apply(this,arguments)}function Hn({appConfig:S}){return S.appId}const Ui=new de.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function er(S,T){return js.apply(this,arguments)}function js(){return(js=(0,V.Z)(function*(S,T){const R=yield bf(S),j=Qc(T),q={method:"POST",headers:R,body:JSON.stringify(j)};let te;try{te=yield(yield fetch(No(S.appConfig),q)).json()}catch(De){throw Ui.create("token-subscribe-failed",{errorInfo:De?.toString()})}if(te.error)throw Ui.create("token-subscribe-failed",{errorInfo:te.error.message});if(!te.token)throw Ui.create("token-subscribe-no-token");return te.token})).apply(this,arguments)}function wd(S,T){return ws.apply(this,arguments)}function ws(){return(ws=(0,V.Z)(function*(S,T){const R=yield bf(S),j=Qc(T.subscriptionOptions),q={method:"PATCH",headers:R,body:JSON.stringify(j)};let te;try{te=yield(yield fetch(`${No(S.appConfig)}/${T.token}`,q)).json()}catch(De){throw Ui.create("token-update-failed",{errorInfo:De?.toString()})}if(te.error)throw Ui.create("token-update-failed",{errorInfo:te.error.message});if(!te.token)throw Ui.create("token-update-no-token");return te.token})).apply(this,arguments)}function Kr(S,T){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,V.Z)(function*(S,T){const j={method:"DELETE",headers:yield bf(S)};try{const te=yield(yield fetch(`${No(S.appConfig)}/${T}`,j)).json();if(te.error)throw Ui.create("token-unsubscribe-failed",{errorInfo:te.error.message})}catch(q){throw Ui.create("token-unsubscribe-failed",{errorInfo:q?.toString()})}})).apply(this,arguments)}function No({projectId:S}){return`https://fcmregistrations.googleapis.com/v1/projects/${S}/registrations`}function bf(S){return ja.apply(this,arguments)}function ja(){return(ja=(0,V.Z)(function*({appConfig:S,installations:T}){const R=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Qc({p256dh:S,auth:T,endpoint:R,vapidKey:j}){const q={web:{endpoint:R,auth:T,p256dh:S}};return j!==si&&(q.web.applicationPubKey=j),q}const kl=6048e5;function Xc(S){return Es.apply(this,arguments)}function Es(){return(Es=(0,V.Z)(function*(S){const T=yield Cf(S.swRegistration,S.vapidKey),R={vapidKey:S.vapidKey,swScope:S.swRegistration.scope,endpoint:T.endpoint,auth:Hs(T.getKey("auth")),p256dh:Hs(T.getKey("p256dh"))},j=yield Yc(S.firebaseDependencies);if(j){if(Df(j.subscriptionOptions,R))return Date.now()>=j.createTime+kl?Jc(S,{token:j.token,createTime:Date.now(),subscriptionOptions:R}):j.token;try{yield Kr(S.firebaseDependencies,j.token)}catch(q){console.warn(q)}return Ef(S.firebaseDependencies,R)}return Ef(S.firebaseDependencies,R)})).apply(this,arguments)}function wf(S){return xl.apply(this,arguments)}function xl(){return(xl=(0,V.Z)(function*(S){const T=yield Yc(S.firebaseDependencies);T&&(yield Kr(S.firebaseDependencies,T.token),yield bd(S.firebaseDependencies));const R=yield S.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function Jc(S,T){return la.apply(this,arguments)}function la(){return(la=(0,V.Z)(function*(S,T){try{const R=yield wd(S.firebaseDependencies,T),j=Object.assign(Object.assign({},T),{token:R,createTime:Date.now()});return yield ur(S.firebaseDependencies,j),R}catch(R){throw yield wf(S),R}})).apply(this,arguments)}function Ef(S,T){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,V.Z)(function*(S,T){const j={token:yield er(S,T),createTime:Date.now(),subscriptionOptions:T};return yield ur(S,j),j.token})).apply(this,arguments)}function Cf(S,T){return za.apply(this,arguments)}function za(){return(za=(0,V.Z)(function*(S,T){return(yield S.pushManager.getSubscription())||S.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:mf(T)})})).apply(this,arguments)}function Df(S,T){return T.vapidKey===S.vapidKey&&T.endpoint===S.endpoint&&T.auth===S.auth&&T.p256dh===S.p256dh}function xg(S){const T={from:S.from,collapseKey:S.collapse_key,messageId:S.fcmMessageId};return function wr(S,T){if(!T.notification)return;S.notification={};const R=T.notification.title;R&&(S.notification.title=R);const j=T.notification.body;j&&(S.notification.body=j);const q=T.notification.image;q&&(S.notification.image=q);const te=T.notification.icon;te&&(S.notification.icon=te)}(T,S),function fo(S,T){!T.data||(S.data=T.data)}(T,S),function Xn(S,T){var R,j,q,te,De;if(!(T.fcmOptions||null!==(R=T.notification)&&void 0!==R&&R.click_action))return;S.fcmOptions={};const tt=null!==(q=null===(j=T.fcmOptions)||void 0===j?void 0:j.link)&&void 0!==q?q:null===(te=T.notification)||void 0===te?void 0:te.click_action;tt&&(S.fcmOptions.link=tt);const Xe=null===(De=T.fcmOptions)||void 0===De?void 0:De.analytics_label;Xe&&(S.fcmOptions.analyticsLabel=Xe)}(T,S),T}function Ed(S){return"object"==typeof S&&!!S&&Oo in S}function Rg(S,T){const R=[];for(let j=0;j<S.length;j++)R.push(S.charAt(j)),j<T.length&&R.push(T.charAt(j));return R.join("")}function Sf(S){return Ui.create("missing-app-config-values",{valueName:S})}Rg("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Rg("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class If{constructor(T,R,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const q=function Cd(S){if(!S||!S.options)throw Sf("App Configuration Object");if(!S.name)throw Sf("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:R}=S;for(const j of T)if(!R[j])throw Sf(j);return{appName:S.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:q,installations:R,analyticsProvider:j}}_delete(){return Promise.resolve()}}function Af(S){return ca.apply(this,arguments)}function ca(){return(ca=(0,V.Z)(function*(S){try{S.swRegistration=yield navigator.serviceWorker.register(qc,{scope:Il}),S.swRegistration.update().catch(()=>{})}catch(T){throw Ui.create("failed-service-worker-registration",{browserErrorMessage:T?.message})}})).apply(this,arguments)}function eu(S,T){return Po.apply(this,arguments)}function Po(){return(Po=(0,V.Z)(function*(S,T){if(!T&&!S.swRegistration&&(yield Af(S)),T||!S.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Ui.create("invalid-sw-registration");S.swRegistration=T}})).apply(this,arguments)}function Tf(S,T){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,V.Z)(function*(S,T){T?S.vapidKey=T:S.vapidKey||(S.vapidKey=si)})).apply(this,arguments)}function po(){return(po=(0,V.Z)(function*(S,T){if(!navigator)throw Ui.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Ui.create("permission-blocked");return yield Tf(S,T?.vapidKey),yield eu(S,T?.serviceWorkerRegistration),Xc(S)})).apply(this,arguments)}function Nl(S,T,R){return tu.apply(this,arguments)}function tu(){return(tu=(0,V.Z)(function*(S,T,R){const j=ty(T);(yield S.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:R[Oo],message_name:R[gf],message_time:R[bs],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ty(S){switch(S){case Mt.NOTIFICATION_CLICKED:return"notification_open";case Mt.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Pl(){return(Pl=(0,V.Z)(function*(S,T){const R=T.data;if(!R.isFirebaseMessaging)return;S.onMessageHandler&&R.messageType===Mt.PUSH_RECEIVED&&("function"==typeof S.onMessageHandler?S.onMessageHandler(xg(R)):S.onMessageHandler.next(xg(R)));const j=R.data;Ed(j)&&"1"===j[oa]&&(yield Nl(S,R.messageType,j))})).apply(this,arguments)}const Ng="@firebase/messaging",kf=S=>{const T=new If(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),S.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function go(S,T){return Pl.apply(this,arguments)}(T,R)),T},nu=S=>{const T=S.getProvider("messaging").getImmediate();return{getToken:j=>function Og(S,T){return po.apply(this,arguments)}(T,j)}};function Fl(){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,V.Z)(function*(){try{yield(0,de.eu)()}catch{return!1}return typeof window<"u"&&(0,de.hl)()&&(0,de.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function iu(){(0,pe._registerComponent)(new ye.wA("messaging",kf,"PUBLIC")),(0,pe._registerComponent)(new ye.wA("messaging-internal",nu,"PRIVATE")),(0,pe.registerVersion)(Ng,"0.12.4"),(0,pe.registerVersion)(Ng,"0.12.4","esm2017")}();const Gs="analytics",Fo="firebase_id",Qr="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ad="https://www.googletagmanager.com/gtag/js",Wn=new ce.Yd("@firebase/analytics"),vi=new de.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function $a(S){if(!S.startsWith(Ad)){const T=vi.create("invalid-gtag-resource",{gtagURL:S});return Wn.warn(T.message),""}return S}function Vl(S){return Promise.all(S.map(T=>T.catch(R=>R)))}function au(S,T){const R=function ua(S,T){let R;return window.trustedTypes&&(R=window.trustedTypes.createPolicy(S,T)),R}("firebase-js-sdk-policy",{createScriptURL:$a}),j=document.createElement("script"),q=`${Ad}?l=${S}&id=${T}`;j.src=R?R?.createScriptURL(q):q,j.async=!0,document.head.appendChild(j)}function Bl(S,T,R,j,q,te){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,V.Z)(function*(S,T,R,j,q,te){const De=j[q];try{if(De)yield T[De];else{const Xe=(yield Vl(R)).find(bt=>bt.measurementId===q);Xe&&(yield T[Xe.appId])}}catch(tt){Wn.error(tt)}S("config",q,te)})).apply(this,arguments)}function ny(S,T,R,j,q){return $s.apply(this,arguments)}function $s(){return($s=(0,V.Z)(function*(S,T,R,j,q){try{let te=[];if(q&&q.send_to){let De=q.send_to;Array.isArray(De)||(De=[De]);const tt=yield Vl(R);for(const Xe of De){const bt=tt.find(Ut=>Ut.measurementId===Xe),$t=bt&&T[bt.appId];if(!$t){te=[];break}te.push($t)}}0===te.length&&(te=Object.values(T)),yield Promise.all(te),S("event",j,q||{})}catch(te){Wn.error(te)}})).apply(this,arguments)}function xf(S){const T=window.document.getElementsByTagName("script");for(const R of Object.values(T))if(R.src&&R.src.includes(Ad)&&R.src.includes(S))return R;return null}const Jn=new class Lg{constructor(T={},R=1e3){this.throttleMetadata=T,this.intervalMillis=R}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,R){this.throttleMetadata[T]=R}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Md(S){return new Headers({Accept:"application/json","x-goog-api-key":S})}function Ul(S){return kd.apply(this,arguments)}function kd(){return(kd=(0,V.Z)(function*(S){var T;const{appId:R,apiKey:j}=S,q={method:"GET",headers:Md(j)},te=Qr.replace("{app-id}",R),De=yield fetch(te,q);if(200!==De.status&&304!==De.status){let tt="";try{const Xe=yield De.json();null!==(T=Xe.error)&&void 0!==T&&T.message&&(tt=Xe.error.message)}catch{}throw vi.create("config-fetch-failed",{httpStatus:De.status,responseMessage:tt})}return De.json()})).apply(this,arguments)}function lu(S){return mo.apply(this,arguments)}function mo(){return(mo=(0,V.Z)(function*(S,T=Jn,R){const{appId:j,apiKey:q,measurementId:te}=S.options;if(!j)throw vi.create("no-app-id");if(!q){if(te)return{measurementId:te,appId:j};throw vi.create("no-api-key")}const De=T.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},tt=new Vo;return setTimeout((0,V.Z)(function*(){tt.abort()}),void 0!==R?R:6e4),qa({appId:j,apiKey:q,measurementId:te},De,tt,T)})).apply(this,arguments)}function qa(S,T,R){return _o.apply(this,arguments)}function _o(){return(_o=(0,V.Z)(function*(S,{throttleEndTimeMillis:T,backoffCount:R},j,q=Jn){var te;const{appId:De,measurementId:tt}=S;try{yield Of(j,T)}catch(Xe){if(tt)return Wn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${tt} provided in the "measurementId" field in the local Firebase config. [${Xe?.message}]`),{appId:De,measurementId:tt};throw Xe}try{const Xe=yield Ul(S);return q.deleteThrottleMetadata(De),Xe}catch(Xe){const bt=Xe;if(!Ya(bt)){if(q.deleteThrottleMetadata(De),tt)return Wn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${tt} provided in the "measurementId" field in the local Firebase config. [${bt?.message}]`),{appId:De,measurementId:tt};throw Xe}const $t=503===Number(null===(te=bt?.customData)||void 0===te?void 0:te.httpStatus)?(0,de.$s)(R,q.intervalMillis,30):(0,de.$s)(R,q.intervalMillis),Ut={throttleEndTimeMillis:Date.now()+$t,backoffCount:R+1};return q.setThrottleMetadata(De,Ut),Wn.debug(`Calling attemptFetch again in ${$t} millis`),qa(S,Ut,j,q)}})).apply(this,arguments)}function Of(S,T){return new Promise((R,j)=>{const q=Math.max(T-Date.now(),0),te=setTimeout(R,q);S.addEventListener(()=>{clearTimeout(te),j(vi.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Ya(S){if(!(S instanceof de.ZR&&S.customData))return!1;const T=Number(S.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Vo{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Za,di;function bn(){return(bn=(0,V.Z)(function*(S,T,R,j,q){if(q&&q.global)S("event",R,j);else{const te=yield T;S("event",R,Object.assign(Object.assign({},j),{send_to:te}))}})).apply(this,arguments)}function zl(S){di=S}function Pr(S){Za=S}function ry(){return Rd.apply(this,arguments)}function Rd(){return(Rd=(0,V.Z)(function*(){if(!(0,de.hl)())return Wn.warn(vi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,de.eu)()}catch(S){return Wn.warn(vi.create("indexeddb-unavailable",{errorInfo:S?.toString()}).message),!1}return!0})).apply(this,arguments)}function Xr(){return(Xr=(0,V.Z)(function*(S,T,R,j,q,te,De){var tt;const Xe=lu(S);Xe.then(ji=>{R[ji.measurementId]=ji.appId,S.options.measurementId&&ji.measurementId!==S.options.measurementId&&Wn.warn(`The measurement ID in the local Firebase config (${S.options.measurementId}) does not match the measurement ID fetched from the server (${ji.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ji=>Wn.error(ji)),T.push(Xe);const bt=ry().then(ji=>{if(ji)return j.getId()}),[$t,Ut]=yield Promise.all([Xe,bt]);xf(te)||au(te,$t.measurementId),di&&(q("consent","default",di),zl(void 0)),q("js",new Date);const tr=null!==(tt=De?.config)&&void 0!==tt?tt:{};return tr.origin="firebase",tr.update=!0,null!=Ut&&(tr[Fo]=Ut),q("config",$t.measurementId,tr),Za&&(q("set",Za),Pr(void 0)),$t.measurementId})).apply(this,arguments)}class Hg{constructor(T){this.app=T}_delete(){return delete Jr[this.app.options.appId],Promise.resolve()}}let Jr={},ha=[];const Od={};let sy,Bo,Nd="dataLayer",uu=!1;function Gl(S,T,R){!function Ff(){const S=[];if((0,de.ru)()&&S.push("This is a browser extension environment."),(0,de.zI)()||S.push("Cookies are not available."),S.length>0){const T=S.map((j,q)=>`(${q+1}) ${j}`).join(" "),R=vi.create("invalid-analytics-context",{errorInfo:T});Wn.warn(R.message)}}();const j=S.options.appId;if(!j)throw vi.create("no-app-id");if(!S.options.apiKey){if(!S.options.measurementId)throw vi.create("no-api-key");Wn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${S.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Jr[j])throw vi.create("already-exists",{id:j});if(!uu){!function Fg(S){let T=[];Array.isArray(window[S])?T=window[S]:window[S]=T}(Nd);const{wrappedGtag:te,gtagCore:De}=function Lo(S,T,R,j,q){let te=function(...De){window[j].push(arguments)};return window[q]&&"function"==typeof window[q]&&(te=window[q]),window[q]=function Hl(S,T,R,j){function te(){return(te=(0,V.Z)(function*(De,...tt){try{if("event"===De){const[Xe,bt]=tt;yield ny(S,T,R,Xe,bt)}else if("config"===De){const[Xe,bt]=tt;yield Bl(S,T,R,j,Xe,bt)}else if("consent"===De){const[Xe]=tt;S("consent","update",Xe)}else if("get"===De){const[Xe,bt,$t]=tt;S("get",Xe,bt,$t)}else if("set"===De){const[Xe]=tt;S("set",Xe)}else S(De,...tt)}catch(Xe){Wn.error(Xe)}})).apply(this,arguments)}return function q(De){return te.apply(this,arguments)}}(te,S,T,R),{gtagCore:te,wrappedGtag:window[q]}}(Jr,ha,Od,Nd,"gtag");Bo=te,sy=De,uu=!0}return Jr[j]=function Ti(S,T,R,j,q,te,De){return Xr.apply(this,arguments)}(S,ha,Od,T,sy,Nd,R),new Hg(S)}function Lf(){return Vf.apply(this,arguments)}function Vf(){return(Vf=(0,V.Z)(function*(){if((0,de.ru)()||!(0,de.zI)()||!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}const Sn="@firebase/analytics";!function zg(){(0,pe._registerComponent)(new ye.wA(Gs,(T,{options:R})=>Gl(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,pe._registerComponent)(new ye.wA("analytics-internal",function S(T){try{const R=T.getProvider(Gs).getImmediate();return{logEvent:(j,q,te)=>function hi(S,T,R,j){S=(0,de.m9)(S),function jl(S,T,R,j,q){return bn.apply(this,arguments)}(Bo,Jr[S.app.options.appId],T,R,j).catch(q=>Wn.error(q))}(R,j,q,te)}}catch(R){throw vi.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,pe.registerVersion)(Sn,"0.10.0"),(0,pe.registerVersion)(Sn,"0.10.0","esm2017")}();var Gg=B(4408),ei=B(7565);const fi=new class ki extends ei.v{}(class $l extends Gg.o{constructor(T,R){super(T,R),this.scheduler=T,this.work=R}schedule(T,R=0){return R>0?super.schedule(T,R):(this.delay=R,this.state=T,this.scheduler.flush(this),this)}execute(T,R){return R>0||this.closed?super.execute(T,R):this._execute(T,R)}requestAsyncId(T,R,j=0){return null!=j&&j>0||null==j&&this.delay>0?super.requestAsyncId(T,R,j):(T.flush(this),0)}});var Jt=B(4986),hu=B(8505),pa=B(9468),Ds=B(5363);const Xa=new c.GfV("7.6.1"),Pd="__angularfire_symbol__analyticsIsSupportedValue",oi="__angularfire_symbol__analyticsIsSupported",fu="__angularfire_symbol__remoteConfigIsSupportedValue",Ho="__angularfire_symbol__remoteConfigIsSupported",ve="__angularfire_symbol__messagingIsSupportedValue",bi="__angularfire_symbol__messagingIsSupported";function Vr(S,T,R){if(T){if(1===T.length)return T[0];const te=T.filter(De=>De.app===R);if(1===te.length)return te[0]}return R.container.getProvider(S).getImmediate({optional:!0})}globalThis[oi]||(globalThis[oi]=Lf().then(S=>globalThis[Pd]=S).catch(()=>globalThis[Pd]=!1)),globalThis[bi]||(globalThis[bi]=Fl().then(S=>globalThis[ve]=S).catch(()=>globalThis[ve]=!1)),globalThis[Ho]||(globalThis[Ho]=br().then(S=>globalThis[fu]=S).catch(()=>globalThis[fu]=!1));const rt=(S,T)=>{const R=T?[T]:(0,re.C6)(),j=[];return R.forEach(q=>{q.container.getProvider(S).instances.forEach(De=>{j.includes(De)||j.push(De)})}),j};function Uo(){}class xt{constructor(T,R=fi){this.zone=T,this.delegate=R}now(){return this.delegate.now()}schedule(T,R,j){const q=this.zone;return this.delegate.schedule(function(De){q.runGuarded(()=>{T.apply(this,[De])})},R,j)}}class jo{constructor(T){this.zone=T,this.task=null}call(T,R){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Uo,{},Uo,Uo)),R.pipe((0,hu.b)({next:j,complete:j,error:j})).subscribe(T).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Wl=(()=>{class S{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new xt(Zone.current)),this.insideAngular=R.run(()=>new xt(Zone.current,Jt.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return S.\u0275fac=function(R){return new(R||S)(c.LFG(c.R0b))},S.\u0275prov=c.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function zo(){const S=globalThis.\u0275AngularFireScheduler;if(!S)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return S}function wi(S){return zo(),function ma(S){return function(R){return(R=R.lift(new jo(S.ngZone))).pipe((0,pa.R)(S.outsideAngular),(0,Ds.Q)(S.insideAngular))}}(zo())(S)}},2090:(Et,Fe,B)=>{B.d(Fe,{$s:()=>Ls,BH:()=>Ce,DV:()=>Zi,Dv:()=>_r,G6:()=>Ps,GJ:()=>Nn,L:()=>Ee,LL:()=>be,Pz:()=>Ie,Sg:()=>Qe,UG:()=>se,UI:()=>gt,US:()=>ye,Wj:()=>Bi,Wl:()=>At,Yr:()=>Mo,ZB:()=>J,ZR:()=>xe,aH:()=>Ve,b$:()=>Kt,cI:()=>un,dS:()=>ia,eu:()=>ie,g5:()=>V,gK:()=>ui,gQ:()=>Pn,h$:()=>Te,hl:()=>le,hu:()=>re,jU:()=>Nt,lb:()=>En,m9:()=>yr,ne:()=>gn,p$:()=>W,pd:()=>Si,r3:()=>Gn,ru:()=>pt,tV:()=>Y,uI:()=>ot,ug:()=>dn,vZ:()=>gr,w1:()=>lo,w9:()=>tn,xO:()=>Ba,xb:()=>pr,z$:()=>qe,zI:()=>ke,zd:()=>Wr});const re=function($,z){if(!$)throw V(z)},V=function($){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+$)},pe=function($){const z=[];let Q=0;for(let he=0;he<$.length;he++){let ee=$.charCodeAt(he);ee<128?z[Q++]=ee:ee<2048?(z[Q++]=ee>>6|192,z[Q++]=63&ee|128):55296==(64512&ee)&&he+1<$.length&&56320==(64512&$.charCodeAt(he+1))?(ee=65536+((1023&ee)<<10)+(1023&$.charCodeAt(++he)),z[Q++]=ee>>18|240,z[Q++]=ee>>12&63|128,z[Q++]=ee>>6&63|128,z[Q++]=63&ee|128):(z[Q++]=ee>>12|224,z[Q++]=ee>>6&63|128,z[Q++]=63&ee|128)}return z},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,z){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Q=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,he=[];for(let ee=0;ee<$.length;ee+=3){const Je=$[ee],Pt=ee+1<$.length,zt=Pt?$[ee+1]:0,Cn=ee+2<$.length,We=Cn?$[ee+2]:0;let An=(15&zt)<<2|We>>6,Xi=63&We;Cn||(Xi=64,Pt||(An=64)),he.push(Q[Je>>2],Q[(3&Je)<<4|zt>>4],Q[An],Q[Xi])}return he.join("")},encodeString($,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa($):this.encodeByteArray(pe($),z)},decodeString($,z){return this.HAS_NATIVE_SUPPORT&&!z?atob($):function($){const z=[];let Q=0,he=0;for(;Q<$.length;){const ee=$[Q++];if(ee<128)z[he++]=String.fromCharCode(ee);else if(ee>191&&ee<224){const Je=$[Q++];z[he++]=String.fromCharCode((31&ee)<<6|63&Je)}else if(ee>239&&ee<365){const Cn=((7&ee)<<18|(63&$[Q++])<<12|(63&$[Q++])<<6|63&$[Q++])-65536;z[he++]=String.fromCharCode(55296+(Cn>>10)),z[he++]=String.fromCharCode(56320+(1023&Cn))}else{const Je=$[Q++],Pt=$[Q++];z[he++]=String.fromCharCode((15&ee)<<12|(63&Je)<<6|63&Pt)}}return z.join("")}(this.decodeStringToByteArray($,z))},decodeStringToByteArray($,z){this.init_();const Q=z?this.charToByteMapWebSafe_:this.charToByteMap_,he=[];for(let ee=0;ee<$.length;){const Je=Q[$.charAt(ee++)],zt=ee<$.length?Q[$.charAt(ee)]:0;++ee;const We=ee<$.length?Q[$.charAt(ee)]:64;++ee;const Ct=ee<$.length?Q[$.charAt(ee)]:64;if(++ee,null==Je||null==zt||null==We||null==Ct)throw new ce;he.push(Je<<2|zt>>4),64!==We&&(he.push(zt<<4&240|We>>2),64!==Ct&&he.push(We<<6&192|Ct))}return he},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}};class ce extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Te=function($){const z=pe($);return ye.encodeByteArray(z,!0)},Ee=function($){return Te($).replace(/\./g,"")},Y=function($){try{return ye.decodeString($,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function W($){return J(void 0,$)}function J($,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return z}for(const Q in z)!z.hasOwnProperty(Q)||!et(Q)||($[Q]=J($[Q],z[Q]));return $}function et($){return"__proto__"!==$}const Ae=()=>{try{return function Re(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const $=process.env.__FIREBASE_DEFAULTS__;return $?JSON.parse($):void 0})()||(()=>{if(typeof document>"u")return;let $;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const z=$&&Y($[1]);return z&&JSON.parse(z)})()}catch($){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`)}},Ve=()=>{var $;return null===($=Ae())||void 0===$?void 0:$.config},Ie=$=>{var z;return null===(z=Ae())||void 0===z?void 0:z[`_${$}`]};class Ce{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,Q)=>{this.resolve=z,this.reject=Q})}wrapCallback(z){return(Q,he)=>{Q?this.reject(Q):this.resolve(he),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(Q):z(Q,he))}}}function Qe($,z){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const he=z||"demo-project",ee=$.iat||0,Je=$.sub||$.user_id;if(!Je)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Pt=Object.assign({iss:`https://securetoken.google.com/${he}`,aud:he,iat:ee,exp:ee+3600,auth_time:ee,sub:Je,user_id:Je,firebase:{sign_in_provider:"custom",identities:{}}},$);return[Ee(JSON.stringify({alg:"none",type:"JWT"})),Ee(JSON.stringify(Pt)),""].join(".")}function qe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ot(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function se(){var $;const z=null===($=Ae())||void 0===$?void 0:$.forceEnvironment;if("node"===z)return!0;if("browser"===z)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Nt(){return"object"==typeof self&&self.self===self}function pt(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function Kt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function lo(){const $=qe();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function Mo(){return!1}function Ps(){return!se()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function le(){try{return"object"==typeof indexedDB}catch{return!1}}function ie(){return new Promise(($,z)=>{try{let Q=!0;const he="validate-browser-context-for-indexeddb-analytics-module",ee=self.indexedDB.open(he);ee.onsuccess=()=>{ee.result.close(),Q||self.indexedDB.deleteDatabase(he),$(!0)},ee.onupgradeneeded=()=>{Q=!1},ee.onerror=()=>{var Je;z((null===(Je=ee.error)||void 0===Je?void 0:Je.message)||"")}}catch(Q){z(Q)}})}function ke(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class xe extends Error{constructor(z,Q,he){super(Q),this.code=z,this.customData=he,this.name="FirebaseError",Object.setPrototypeOf(this,xe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,be.prototype.create)}}class be{constructor(z,Q,he){this.service=z,this.serviceName=Q,this.errors=he}create(z,...Q){const he=Q[0]||{},ee=`${this.service}/${z}`,Je=this.errors[z],Pt=Je?function vt($,z){return $.replace(Lt,(Q,he)=>{const ee=z[he];return null!=ee?String(ee):`<${he}?>`})}(Je,he):"Error";return new xe(ee,`${this.serviceName}: ${Pt} (${ee}).`,he)}}const Lt=/\{\$([^}]+)}/g;function un($){return JSON.parse($)}function At($){return JSON.stringify($)}const sn=function($){let z={},Q={},he={},ee="";try{const Je=$.split(".");z=un(Y(Je[0])||""),Q=un(Y(Je[1])||""),ee=Je[2],he=Q.d||{},delete Q.d}catch{}return{header:z,claims:Q,data:he,signature:ee}},tn=function($){const Q=sn($).claims;return!!Q&&"object"==typeof Q&&Q.hasOwnProperty("iat")},Nn=function($){const z=sn($).claims;return"object"==typeof z&&!0===z.admin};function Gn($,z){return Object.prototype.hasOwnProperty.call($,z)}function Zi($,z){if(Object.prototype.hasOwnProperty.call($,z))return $[z]}function pr($){for(const z in $)if(Object.prototype.hasOwnProperty.call($,z))return!1;return!0}function gt($,z,Q){const he={};for(const ee in $)Object.prototype.hasOwnProperty.call($,ee)&&(he[ee]=z.call(Q,$[ee],ee,$));return he}function gr($,z){if($===z)return!0;const Q=Object.keys($),he=Object.keys(z);for(const ee of Q){if(!he.includes(ee))return!1;const Je=$[ee],Pt=z[ee];if(gs(Je)&&gs(Pt)){if(!gr(Je,Pt))return!1}else if(Je!==Pt)return!1}for(const ee of he)if(!Q.includes(ee))return!1;return!0}function gs($){return null!==$&&"object"==typeof $}function Ba($){const z=[];for(const[Q,he]of Object.entries($))Array.isArray(he)?he.forEach(ee=>{z.push(encodeURIComponent(Q)+"="+encodeURIComponent(ee))}):z.push(encodeURIComponent(Q)+"="+encodeURIComponent(he));return z.length?"&"+z.join("&"):""}function Wr($){const z={};return $.replace(/^\?/,"").split("&").forEach(he=>{if(he){const[ee,Je]=he.split("=");z[decodeURIComponent(ee)]=decodeURIComponent(Je)}}),z}function Si($){const z=$.indexOf("?");if(!z)return"";const Q=$.indexOf("#",z);return $.substring(z,Q>0?Q:void 0)}class Pn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(z,Q){Q||(Q=0);const he=this.W_;if("string"==typeof z)for(let Ct=0;Ct<16;Ct++)he[Ct]=z.charCodeAt(Q)<<24|z.charCodeAt(Q+1)<<16|z.charCodeAt(Q+2)<<8|z.charCodeAt(Q+3),Q+=4;else for(let Ct=0;Ct<16;Ct++)he[Ct]=z[Q]<<24|z[Q+1]<<16|z[Q+2]<<8|z[Q+3],Q+=4;for(let Ct=16;Ct<80;Ct++){const An=he[Ct-3]^he[Ct-8]^he[Ct-14]^he[Ct-16];he[Ct]=4294967295&(An<<1|An>>>31)}let We,mt,ee=this.chain_[0],Je=this.chain_[1],Pt=this.chain_[2],zt=this.chain_[3],Cn=this.chain_[4];for(let Ct=0;Ct<80;Ct++){Ct<40?Ct<20?(We=zt^Je&(Pt^zt),mt=1518500249):(We=Je^Pt^zt,mt=1859775393):Ct<60?(We=Je&Pt|zt&(Je|Pt),mt=2400959708):(We=Je^Pt^zt,mt=3395469782);const An=(ee<<5|ee>>>27)+We+Cn+mt+he[Ct]&4294967295;Cn=zt,zt=Pt,Pt=4294967295&(Je<<30|Je>>>2),Je=ee,ee=An}this.chain_[0]=this.chain_[0]+ee&4294967295,this.chain_[1]=this.chain_[1]+Je&4294967295,this.chain_[2]=this.chain_[2]+Pt&4294967295,this.chain_[3]=this.chain_[3]+zt&4294967295,this.chain_[4]=this.chain_[4]+Cn&4294967295}update(z,Q){if(null==z)return;void 0===Q&&(Q=z.length);const he=Q-this.blockSize;let ee=0;const Je=this.buf_;let Pt=this.inbuf_;for(;ee<Q;){if(0===Pt)for(;ee<=he;)this.compress_(z,ee),ee+=this.blockSize;if("string"==typeof z){for(;ee<Q;)if(Je[Pt]=z.charCodeAt(ee),++Pt,++ee,Pt===this.blockSize){this.compress_(Je),Pt=0;break}}else for(;ee<Q;)if(Je[Pt]=z[ee],++Pt,++ee,Pt===this.blockSize){this.compress_(Je),Pt=0;break}}this.inbuf_=Pt,this.total_+=Q}digest(){const z=[];let Q=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ee=this.blockSize-1;ee>=56;ee--)this.buf_[ee]=255&Q,Q/=256;this.compress_(this.buf_);let he=0;for(let ee=0;ee<5;ee++)for(let Je=24;Je>=0;Je-=8)z[he]=this.chain_[ee]>>Je&255,++he;return z}}function gn($,z){const Q=new lt($,z);return Q.subscribe.bind(Q)}class lt{constructor(z,Q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Q,this.task.then(()=>{z(this)}).catch(he=>{this.error(he)})}next(z){this.forEachObserver(Q=>{Q.next(z)})}error(z){this.forEachObserver(Q=>{Q.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,Q,he){let ee;if(void 0===z&&void 0===Q&&void 0===he)throw new Error("Missing Observer.");ee=function In($,z){if("object"!=typeof $||null===$)return!1;for(const Q of z)if(Q in $&&"function"==typeof $[Q])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:Q,complete:he},void 0===ee.next&&(ee.next=Fs),void 0===ee.error&&(ee.error=Fs),void 0===ee.complete&&(ee.complete=Fs);const Je=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ee.error(this.finalError):ee.complete()}catch{}}),this.observers.push(ee),Je}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let Q=0;Q<this.observers.length;Q++)this.sendOne(Q,z)}sendOne(z,Q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{Q(this.observers[z])}catch(he){typeof console<"u"&&console.error&&console.error(he)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Fs(){}const _r=function($,z,Q,he){let ee;if(he<z?ee="at least "+z:he>Q&&(ee=0===Q?"none":"no more than "+Q),ee)throw new Error($+" failed: Was called with "+he+(1===he?" argument.":" arguments.")+" Expects "+ee+".")};function ui($,z){return`${$} failed: ${z} argument `}function Bi($,z,Q,he){if((!he||Q)&&"function"!=typeof Q)throw new Error(ui($,z)+"must be a valid function.")}function En($,z,Q,he){if((!he||Q)&&("object"!=typeof Q||null===Q))throw new Error(ui($,z)+"must be a valid context object.")}const ia=function($){const z=[];let Q=0;for(let he=0;he<$.length;he++){let ee=$.charCodeAt(he);if(ee>=55296&&ee<=56319){const Je=ee-55296;he++,re(he<$.length,"Surrogate pair missing trail surrogate."),ee=65536+(Je<<10)+($.charCodeAt(he)-56320)}ee<128?z[Q++]=ee:ee<2048?(z[Q++]=ee>>6|192,z[Q++]=63&ee|128):ee<65536?(z[Q++]=ee>>12|224,z[Q++]=ee>>6&63|128,z[Q++]=63&ee|128):(z[Q++]=ee>>18|240,z[Q++]=ee>>12&63|128,z[Q++]=ee>>6&63|128,z[Q++]=63&ee|128)}return z},dn=function($){let z=0;for(let Q=0;Q<$.length;Q++){const he=$.charCodeAt(Q);he<128?z++:he<2048?z+=2:he>=55296&&he<=56319?(z+=4,Q++):z+=3}return z};function Ls($,z=1e3,Q=2){const he=z*Math.pow(Q,$),ee=Math.round(.5*he*(Math.random()-.5)*2);return Math.min(144e5,he+ee)}function yr($){return $&&$._delegate?$._delegate:$}},9925:(Et,Fe,B)=>{var c=B(4650);let re=null;function V(){return re}const ce=new c.OlP("DocumentToken");let Te=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Ee(){return(0,c.LFG)(W)}()},providedIn:"platform"}),n})(),W=(()=>{class n extends Te{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return V().getBaseHref(this._doc)}onPopState(t){const i=V().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=V().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){J()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){J()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ce))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function et(){return new W((0,c.LFG)(ce))}()},providedIn:"platform"}),n})();function J(){return!!window.history.pushState}function Re(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Le(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ke(n){return n&&"?"!==n[0]?"?"+n:n}let we=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(ht)},providedIn:"root"}),n})();const Ae=new c.OlP("appBaseHref");let ht=(()=>{class n extends we{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,c.f3M)(ce).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Re(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Ke(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+Ke(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+Ke(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Te),c.LFG(Ae,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ve=(()=>{class n{constructor(t){this._subject=new c.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._baseHref=Le(Qe(i)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Ke(i))}normalize(t){return n.stripTrailingSlash(function Ce(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Qe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ke(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ke(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=Ke,n.joinWithSlash=Re,n.stripTrailingSlash=Le,n.\u0275fac=function(t){return new(t||n)(c.LFG(we))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Ie(){return new Ve((0,c.LFG)(we))}()},providedIn:"root"}),n})();function Qe(n){return n.replace(/\/index.html$/,"")}const qe={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var ot=(()=>((ot=ot||{})[ot.Decimal=0]="Decimal",ot[ot.Percent=1]="Percent",ot[ot.Currency=2]="Currency",ot[ot.Scientific=3]="Scientific",ot))(),Nt=(()=>((Nt=Nt||{})[Nt.Format=0]="Format",Nt[Nt.Standalone=1]="Standalone",Nt))(),pt=(()=>((pt=pt||{})[pt.Narrow=0]="Narrow",pt[pt.Abbreviated=1]="Abbreviated",pt[pt.Wide=2]="Wide",pt[pt.Short=3]="Short",pt))(),Kt=(()=>((Kt=Kt||{})[Kt.Short=0]="Short",Kt[Kt.Medium=1]="Medium",Kt[Kt.Long=2]="Long",Kt[Kt.Full=3]="Full",Kt))(),ft=(()=>((ft=ft||{})[ft.Decimal=0]="Decimal",ft[ft.Group=1]="Group",ft[ft.List=2]="List",ft[ft.PercentSign=3]="PercentSign",ft[ft.PlusSign=4]="PlusSign",ft[ft.MinusSign=5]="MinusSign",ft[ft.Exponential=6]="Exponential",ft[ft.SuperscriptingExponent=7]="SuperscriptingExponent",ft[ft.PerMille=8]="PerMille",ft[ft.Infinity=9]="Infinity",ft[ft.NaN=10]="NaN",ft[ft.TimeSeparator=11]="TimeSeparator",ft[ft.CurrencyDecimal=12]="CurrencyDecimal",ft[ft.CurrencyGroup=13]="CurrencyGroup",ft))();function xe(n,e){return gt((0,c.cg1)(n)[c.wAp.DateFormat],e)}function be(n,e){return gt((0,c.cg1)(n)[c.wAp.TimeFormat],e)}function vt(n,e){return gt((0,c.cg1)(n)[c.wAp.DateTimeFormat],e)}function Lt(n,e){const t=(0,c.cg1)(n),i=t[c.wAp.NumberSymbols][e];if(typeof i>"u"){if(e===ft.CurrencyDecimal)return t[c.wAp.NumberSymbols][ft.Decimal];if(e===ft.CurrencyGroup)return t[c.wAp.NumberSymbols][ft.Group]}return i}function Nn(n){if(!n[c.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[c.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function gt(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function gr(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Wr=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Si={},Pn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var gn=(()=>((gn=gn||{})[gn.Short=0]="Short",gn[gn.ShortGMT=1]="ShortGMT",gn[gn.Long=2]="Long",gn[gn.Extended=3]="Extended",gn))(),lt=(()=>((lt=lt||{})[lt.FullYear=0]="FullYear",lt[lt.Month=1]="Month",lt[lt.Date=2]="Date",lt[lt.Hours=3]="Hours",lt[lt.Minutes=4]="Minutes",lt[lt.Seconds=5]="Seconds",lt[lt.FractionalSeconds=6]="FractionalSeconds",lt[lt.Day=7]="Day",lt))(),Tt=(()=>((Tt=Tt||{})[Tt.DayPeriods=0]="DayPeriods",Tt[Tt.Days=1]="Days",Tt[Tt.Months=2]="Months",Tt[Tt.Eras=3]="Eras",Tt))();function In(n,e,t,i){let r=function ee(n){if(Pt(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[r,s=1,o=1]=n.split("-").map(d=>+d);return Fs(r,s-1,o)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match(Wr))return function Je(n){const e=new Date(0);let t=0,i=0;const r=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-t,d=Number(n[5]||0)-i,f=Number(n[6]||0),m=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,o,d,f,m),e}(i)}const e=new Date(n);if(!Pt(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=_r(t,e)||e;let d,o=[];for(;e;){if(d=Pn.exec(e),!d){o.push(e);break}{o=o.concat(d.slice(1));const v=o.pop();if(!v)break;e=v}}let f=r.getTimezoneOffset();i&&(f=z(i,f),r=function he(n,e,t){const i=t?-1:1,r=n.getTimezoneOffset();return function Q(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,i*(z(e,r)-r))}(r,i,!0));let m="";return o.forEach(v=>{const C=function $(n){if(yr[n])return yr[n];let e;switch(n){case"G":case"GG":case"GGG":e=dn(Tt.Eras,pt.Abbreviated);break;case"GGGG":e=dn(Tt.Eras,pt.Wide);break;case"GGGGG":e=dn(Tt.Eras,pt.Narrow);break;case"y":e=En(lt.FullYear,1,0,!1,!0);break;case"yy":e=En(lt.FullYear,2,0,!0,!0);break;case"yyy":e=En(lt.FullYear,3,0,!1,!0);break;case"yyyy":e=En(lt.FullYear,4,0,!1,!0);break;case"Y":e=Rr(1);break;case"YY":e=Rr(2,!0);break;case"YYY":e=Rr(3);break;case"YYYY":e=Rr(4);break;case"M":case"L":e=En(lt.Month,1,1);break;case"MM":case"LL":e=En(lt.Month,2,1);break;case"MMM":e=dn(Tt.Months,pt.Abbreviated);break;case"MMMM":e=dn(Tt.Months,pt.Wide);break;case"MMMMM":e=dn(Tt.Months,pt.Narrow);break;case"LLL":e=dn(Tt.Months,pt.Abbreviated,Nt.Standalone);break;case"LLLL":e=dn(Tt.Months,pt.Wide,Nt.Standalone);break;case"LLLLL":e=dn(Tt.Months,pt.Narrow,Nt.Standalone);break;case"w":e=ni(1);break;case"ww":e=ni(2);break;case"W":e=ni(1,!0);break;case"d":e=En(lt.Date,1);break;case"dd":e=En(lt.Date,2);break;case"c":case"cc":e=En(lt.Day,1);break;case"ccc":e=dn(Tt.Days,pt.Abbreviated,Nt.Standalone);break;case"cccc":e=dn(Tt.Days,pt.Wide,Nt.Standalone);break;case"ccccc":e=dn(Tt.Days,pt.Narrow,Nt.Standalone);break;case"cccccc":e=dn(Tt.Days,pt.Short,Nt.Standalone);break;case"E":case"EE":case"EEE":e=dn(Tt.Days,pt.Abbreviated);break;case"EEEE":e=dn(Tt.Days,pt.Wide);break;case"EEEEE":e=dn(Tt.Days,pt.Narrow);break;case"EEEEEE":e=dn(Tt.Days,pt.Short);break;case"a":case"aa":case"aaa":e=dn(Tt.DayPeriods,pt.Abbreviated);break;case"aaaa":e=dn(Tt.DayPeriods,pt.Wide);break;case"aaaaa":e=dn(Tt.DayPeriods,pt.Narrow);break;case"b":case"bb":case"bbb":e=dn(Tt.DayPeriods,pt.Abbreviated,Nt.Standalone,!0);break;case"bbbb":e=dn(Tt.DayPeriods,pt.Wide,Nt.Standalone,!0);break;case"bbbbb":e=dn(Tt.DayPeriods,pt.Narrow,Nt.Standalone,!0);break;case"B":case"BB":case"BBB":e=dn(Tt.DayPeriods,pt.Abbreviated,Nt.Format,!0);break;case"BBBB":e=dn(Tt.DayPeriods,pt.Wide,Nt.Format,!0);break;case"BBBBB":e=dn(Tt.DayPeriods,pt.Narrow,Nt.Format,!0);break;case"h":e=En(lt.Hours,1,-12);break;case"hh":e=En(lt.Hours,2,-12);break;case"H":e=En(lt.Hours,1);break;case"HH":e=En(lt.Hours,2);break;case"m":e=En(lt.Minutes,1);break;case"mm":e=En(lt.Minutes,2);break;case"s":e=En(lt.Seconds,1);break;case"ss":e=En(lt.Seconds,2);break;case"S":e=En(lt.FractionalSeconds,1);break;case"SS":e=En(lt.FractionalSeconds,2);break;case"SSS":e=En(lt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Ki(gn.Short);break;case"ZZZZZ":e=Ki(gn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Ki(gn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Ki(gn.Long);break;default:return null}return yr[n]=e,e}(v);m+=C?C(r,t,f):"''"===v?"'":v.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),m}function Fs(n,e,t){const i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function _r(n,e){const t=function xr(n){return(0,c.cg1)(n)[c.wAp.LocaleId]}(n);if(Si[t]=Si[t]||{},Si[t][e])return Si[t][e];let i="";switch(e){case"shortDate":i=xe(n,Kt.Short);break;case"mediumDate":i=xe(n,Kt.Medium);break;case"longDate":i=xe(n,Kt.Long);break;case"fullDate":i=xe(n,Kt.Full);break;case"shortTime":i=be(n,Kt.Short);break;case"mediumTime":i=be(n,Kt.Medium);break;case"longTime":i=be(n,Kt.Long);break;case"fullTime":i=be(n,Kt.Full);break;case"short":const r=_r(n,"shortTime"),s=_r(n,"shortDate");i=ui(vt(n,Kt.Short),[r,s]);break;case"medium":const o=_r(n,"mediumTime"),d=_r(n,"mediumDate");i=ui(vt(n,Kt.Medium),[o,d]);break;case"long":const f=_r(n,"longTime"),m=_r(n,"longDate");i=ui(vt(n,Kt.Long),[f,m]);break;case"full":const v=_r(n,"fullTime"),C=_r(n,"fullDate");i=ui(vt(n,Kt.Full),[v,C])}return i&&(Si[t][e]=i),i}function ui(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return null!=e&&i in e?e[i]:t})),n}function Rt(n,e,t="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=1-n:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return i&&(o=o.slice(o.length-e)),s+o}function En(n,e,t=0,i=!1,r=!1){return function(s,o){let d=function ia(n,e){switch(n){case lt.FullYear:return e.getFullYear();case lt.Month:return e.getMonth();case lt.Date:return e.getDate();case lt.Hours:return e.getHours();case lt.Minutes:return e.getMinutes();case lt.Seconds:return e.getSeconds();case lt.FractionalSeconds:return e.getMilliseconds();case lt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||d>-t)&&(d+=t),n===lt.Hours)0===d&&-12===t&&(d=12);else if(n===lt.FractionalSeconds)return function Bi(n,e){return Rt(n,3).substring(0,e)}(d,e);const f=Lt(o,ft.MinusSign);return Rt(d,e,f,i,r)}}function dn(n,e,t=Nt.Format,i=!1){return function(r,s){return function Ii(n,e,t,i,r,s){switch(t){case Tt.Months:return function le(n,e,t){const i=(0,c.cg1)(n),s=gt([i[c.wAp.MonthsFormat],i[c.wAp.MonthsStandalone]],e);return gt(s,t)}(e,r,i)[n.getMonth()];case Tt.Days:return function Ps(n,e,t){const i=(0,c.cg1)(n),s=gt([i[c.wAp.DaysFormat],i[c.wAp.DaysStandalone]],e);return gt(s,t)}(e,r,i)[n.getDay()];case Tt.DayPeriods:const o=n.getHours(),d=n.getMinutes();if(s){const m=function Gn(n){const e=(0,c.cg1)(n);return Nn(e),(e[c.wAp.ExtraData][2]||[]).map(i=>"string"==typeof i?gr(i):[gr(i[0]),gr(i[1])])}(e),v=function Zi(n,e,t){const i=(0,c.cg1)(n);Nn(i);const s=gt([i[c.wAp.ExtraData][0],i[c.wAp.ExtraData][1]],e)||[];return gt(s,t)||[]}(e,r,i),C=m.findIndex(A=>{if(Array.isArray(A)){const[M,P]=A,H=o>=M.hours&&d>=M.minutes,U=o<P.hours||o===P.hours&&d<P.minutes;if(M.hours<P.hours){if(H&&U)return!0}else if(H||U)return!0}else if(A.hours===o&&A.minutes===d)return!0;return!1});if(-1!==C)return v[C]}return function Mo(n,e,t){const i=(0,c.cg1)(n),s=gt([i[c.wAp.DayPeriodsFormat],i[c.wAp.DayPeriodsStandalone]],e);return gt(s,t)}(e,r,i)[o<12?0:1];case Tt.Eras:return function ie(n,e){return gt((0,c.cg1)(n)[c.wAp.Eras],e)}(e,i)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(r,s,n,e,t,i)}}function Ki(n){return function(e,t,i){const r=-1*i,s=Lt(t,ft.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case gn.Short:return(r>=0?"+":"")+Rt(o,2,s)+Rt(Math.abs(r%60),2,s);case gn.ShortGMT:return"GMT"+(r>=0?"+":"")+Rt(o,1,s);case gn.Long:return"GMT"+(r>=0?"+":"")+Rt(o,2,s)+":"+Rt(Math.abs(r%60),2,s);case gn.Extended:return 0===i?"Z":(r>=0?"+":"")+Rt(o,2,s)+":"+Rt(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}function Ls(n){return Fs(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function ni(n,e=!1){return function(t,i){let r;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();r=1+Math.floor((o+s)/7)}else{const s=Ls(t),o=function Qi(n){const e=Fs(n,0,1).getDay();return Fs(n,0,1+(e<=4?4:11)-e)}(s.getFullYear()),d=s.getTime()-o.getTime();r=1+Math.round(d/6048e5)}return Rt(r,n,Lt(i,ft.MinusSign))}}function Rr(n,e=!1){return function(t,i){return Rt(Ls(t).getFullYear(),n,Lt(i,ft.MinusSign),e)}}const yr={};function z(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Pt(n){return n instanceof Date&&!isNaN(n.valueOf())}const zt=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function oe(n,e,t,i,r){const o=function kt(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(";"),r=i[0],s=i[1],o=-1!==r.indexOf(".")?r.split("."):[r.substring(0,r.lastIndexOf("0")+1),r.substring(r.lastIndexOf("0")+1)],d=o[0],f=o[1]||"";t.posPre=d.substring(0,d.indexOf("#"));for(let v=0;v<f.length;v++){const C=f.charAt(v);"0"===C?t.minFrac=t.maxFrac=v+1:"#"===C?t.maxFrac=v+1:t.posSuf+=C}const m=d.split(",");if(t.gSize=m[1]?m[1].length:0,t.lgSize=m[2]||m[1]?(m[2]||m[1]).length:0,s){const v=r.length-t.posPre.length-t.posSuf.length,C=s.indexOf("#");t.negPre=s.substring(0,C).replace(/'/g,""),t.negSuf=s.slice(C+v).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function un(n,e){return(0,c.cg1)(n)[c.wAp.NumberFormats][e]}(e,ot.Currency),Lt(e,ft.MinusSign));return o.minFrac=function Ba(n){let e;const t=qe[n];return t&&(e=t[2]),"number"==typeof e?e:2}(i),o.maxFrac=o.minFrac,function ue(n,e,t,i,r,s,o=!1){let d="",f=!1;if(isFinite(n)){let m=function mn(n){let i,r,s,o,d,e=Math.abs(n)+"",t=0;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(r<0&&(r=s),r+=+e.slice(s+1),e=e.substring(0,s)):r<0&&(r=e.length),s=0;"0"===e.charAt(s);s++);if(s===(d=e.length))i=[0],r=1;else{for(d--;"0"===e.charAt(d);)d--;for(r-=s,i=[],o=0;s<=d;s++,o++)i[o]=Number(e.charAt(s))}return r>22&&(i=i.splice(0,21),t=r-1,r=1),{digits:i,exponent:t,integerLen:r}}(n);o&&(m=function Gt(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(m));let v=e.minInt,C=e.minFrac,A=e.maxFrac;if(s){const _e=s.match(zt);if(null===_e)throw new Error(`${s} is not a valid digit info`);const Oe=_e[1],je=_e[3],wt=_e[5];null!=Oe&&(v=nn(Oe)),null!=je&&(C=nn(je)),null!=wt?A=nn(wt):null!=je&&C>A&&(A=C)}!function $n(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let i=n.digits,r=i.length-n.integerLen;const s=Math.min(Math.max(e,r),t);let o=s+n.integerLen,d=i[o];if(o>0){i.splice(Math.max(n.integerLen,o));for(let C=o;C<i.length;C++)i[C]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,o=s+1),i[0]=0;for(let C=1;C<o;C++)i[C]=0}if(d>=5)if(o-1<0){for(let C=0;C>o;C--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[o-1]++;for(;r<Math.max(0,s);r++)i.push(0);let f=0!==s;const m=e+n.integerLen,v=i.reduceRight(function(C,A,M,P){return P[M]=(A+=C)<10?A:A-10,f&&(0===P[M]&&M>=m?P.pop():f=!1),A>=10?1:0},0);v&&(i.unshift(v),n.integerLen++)}(m,C,A);let M=m.digits,P=m.integerLen;const H=m.exponent;let U=[];for(f=M.every(_e=>!_e);P<v;P++)M.unshift(0);for(;P<0;P++)M.unshift(0);P>0?U=M.splice(P,M.length):(U=M,M=[0]);const K=[];for(M.length>=e.lgSize&&K.unshift(M.splice(-e.lgSize,M.length).join(""));M.length>e.gSize;)K.unshift(M.splice(-e.gSize,M.length).join(""));M.length&&K.unshift(M.join("")),d=K.join(Lt(t,i)),U.length&&(d+=Lt(t,r)+U.join("")),H&&(d+=Lt(t,ft.Exponential)+"+"+H)}else d=Lt(t,ft.Infinity);return d=n<0&&!f?e.negPre+d+e.negSuf:e.posPre+d+e.posSuf,d}(n,o,e,ft.CurrencyGroup,ft.CurrencyDecimal,r).replace("\xa4",t).replace("\xa4","").trim()}function nn(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}let _n=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,c.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,c.AaK)(i.item)}`);this._toggleClass(i.item,!0)}),t.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!0)):Object.keys(t).forEach(i=>this._toggleClass(i,!!t[i])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!1)):Object.keys(t).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(t,i){(t=t.trim())&&t.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.ZZ4),c.Y36(c.aQg),c.Y36(c.SBq),c.Y36(c.Qsj))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class cd{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Dn=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new cd(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const d=i.get(s);i.move(d,o),ko(d,r)}});for(let r=0,s=i.length;r<s;r++){const d=i.get(r).context;d.index=r,d.count=s,d.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{ko(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function ko(n,e){n.context.$implicit=e.item}let ii=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new af,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ai("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ai("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class af{constructor(){this.$implicit=null,this.ngIf=null}}function Ai(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}class vr{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let co=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),sa=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new vr(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(co,9))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),Bs=(()=>{class n{constructor(t,i,r){r._addDefault(new vr(t,i))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(co,9))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngSwitchDefault",""]],standalone:!0}),n})(),Hc=(()=>{class n{constructor(t,i,r){this._ngEl=t,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){const[r,s]=t.split("."),o=-1===r.indexOf("-")?void 0:c.JOm.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.aQg),c.Y36(c.Qsj))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),ud=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=i.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[c.TTD]}),n})();function Fn(n,e){return new c.vHH(2100,!1)}const J_=new c.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let hd=(()=>{class n{constructor(t,i){this.locale=t,this.defaultTimezone=i}transform(t,i="mediumDate",r,s){if(null==t||""===t||t!=t)return null;try{return In(t,i,s||this.locale,r??this.defaultTimezone??void 0)}catch(o){throw Fn()}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.soG,16),c.Y36(J_,24))},n.\u0275pipe=c.Yjl({name:"date",type:n,pure:!0,standalone:!0}),n})(),gd=(()=>{class n{constructor(t,i="USD"){this._locale=t,this._defaultCurrencyCode=i}transform(t,i=this._defaultCurrencyCode,r="symbol",s,o){if(!function Sl(n){return!(null==n||""===n||n!=n)}(t))return null;o=o||this._locale,"boolean"==typeof r&&(r=r?"symbol":"code");let d=i||this._defaultCurrencyCode;"code"!==r&&(d="symbol"===r||"symbol-narrow"===r?function gs(n,e,t="en"){const i=function ps(n){return(0,c.cg1)(n)[c.wAp.Currencies]}(t)[n]||qe[n]||[],r=i[1];return"narrow"===e&&"string"==typeof r?r:i[0]||n}(d,"symbol"===r?"wide":"narrow",o):r);try{return oe(function md(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),o,d,i,s)}catch(f){throw Fn()}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.soG,16),c.Y36(c.EJc,16))},n.\u0275pipe=c.Yjl({name:"currency",type:n,pure:!0,standalone:!0}),n})();let xo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const Gc="browser";function $c(n){return"server"===n}class kf extends class Mf extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function de(n){re||(re=n)}(new kf)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function iu(){return nu=nu||document.querySelector("base"),nu?nu.getAttribute("href"):null}();return null==t?null:function Dd(n){Fl=Fl||document.createElement("a"),Fl.setAttribute("href",n);const e=Fl.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){nu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Vc(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Fl,nu=null;const Ll=new c.OlP("TRANSITION_ID"),Pg=[{provide:c.ip1,useFactory:function ru(n,e,t){return()=>{t.get(c.CZH).donePromise.then(()=>{const i=V(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[Ll,ce,c.zs3],multi:!0}];let lw=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const zs=new c.OlP("EventManagerPlugins");let ou=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(zs),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Ga{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=V().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let Gs=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Fo=(()=>{class n extends Gs{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(i.appendChild(o))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(Sd),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Sd))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ce))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Sd(n){V().remove(n)}const Id={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Qr=/%COMP%/g;function ua(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?ua(n,r,t):(r=r.replace(Qr,n),t.push(r))}return t}function au(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Bl=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Wa(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case c.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new Lo(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case c.ifc.ShadowDom:return new xf(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=ua(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ou),c.LFG(Fo),c.LFG(c.AFp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Wa{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Id[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Hl(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(Hl(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=Id[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=Id[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,i,r&c.JOm.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,au(i)):this.eventManager.addEventListener(e,t,au(i))}}function Hl(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Lo extends Wa{constructor(e,t,i,r){super(e),this.component=i;const s=ua(r+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function $a(n){return"_ngcontent-%COMP%".replace(Qr,n)}(r+"-"+i.id),this.hostAttr=function Vl(n){return"_nghost-%COMP%".replace(Qr,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class xf extends Wa{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=ua(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const d=document.createElement("style");d.textContent=s[o],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Rf=(()=>{class n extends Ga{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ce))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Cs=["alt","control","meta","shift"],Lg={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Jn={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Md=(()=>{class n extends Ga{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>V().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",d=i.indexOf("code");if(d>-1&&(i.splice(d,1),o="code."),Cs.forEach(m=>{const v=i.indexOf(m);v>-1&&(i.splice(v,1),o+=m+".")}),o+=s,0!=i.length||0===s.length)return null;const f={};return f.domEventName=r,f.fullKey=o,f}static matchEventFullKeyCode(t,i){let r=Lg[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Cs.forEach(o=>{o!==r&&(0,Jn[o])(t)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ce))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Za=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:Gc},{provide:c.g9A,useValue:function _o(){kf.makeCurrent()},multi:!0},{provide:ce,useFactory:function Ya(){return(0,c.RDi)(document),document},deps:[]}]),jl=new c.OlP(""),bn=[{provide:c.rWj,useClass:class su{addToWindow(e){c.dqk.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(i=>{const r=c.dqk.getAllAngularTestabilities();let s=r.length,o=!1;const d=function(f){o=o||f,s--,0==s&&i(o)};r.forEach(function(f){f.whenStable(d)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?V().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:c.lri,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]}],xd=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function Of(){return new c.qLn},deps:[]},{provide:zs,useClass:Rf,multi:!0,deps:[ce,c.R0b,c.Lbi]},{provide:zs,useClass:Md,multi:!0,deps:[ce]},{provide:Bl,useClass:Bl,deps:[ou,Fo,c.AFp]},{provide:c.FYo,useExisting:Bl},{provide:Gs,useExisting:Fo},{provide:Fo,useClass:Fo,deps:[ce]},{provide:ou,useClass:ou,deps:[zs,c.R0b]},{provide:class qc{},useClass:lw,deps:[]},[]];let cu=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId},{provide:Ll,useExisting:c.AFp},Pg]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(jl,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[...xd,...bn],imports:[xo,c.hGG]}),n})();typeof window<"u"&&window;let du=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(t){let i=null;return i=t?new(t||n):c.LFG(Qa),i},providedIn:"root"}),n})(),Qa=(()=>{class n extends du{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case c.q3G.NONE:return i;case c.q3G.HTML:return(0,c.qzn)(i,"HTML")?(0,c.z3N)(i):(0,c.EiD)(this._doc,String(i)).toString();case c.q3G.STYLE:return(0,c.qzn)(i,"Style")?(0,c.z3N)(i):i;case c.q3G.SCRIPT:if((0,c.qzn)(i,"Script"))return(0,c.z3N)(i);throw new Error("unsafe value used in a script context");case c.q3G.URL:return(0,c.qzn)(i,"URL")?(0,c.z3N)(i):(0,c.mCW)(String(i));case c.q3G.RESOURCE_URL:if((0,c.qzn)(i,"ResourceURL"))return(0,c.z3N)(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,c.JVY)(t)}bypassSecurityTrustStyle(t){return(0,c.L6k)(t)}bypassSecurityTrustScript(t){return(0,c.eBb)(t)}bypassSecurityTrustUrl(t){return(0,c.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,c.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ce))},n.\u0275prov=c.Yz7({token:n,factory:function(t){let i=null;return i=t?new t:function ay(n){return new Qa(n.get(ce))}(c.LFG(c.zs3)),i},providedIn:"root"}),n})();var Mi=B(2011),fa=B(4986),Fr=B(8306),hi=B(8996),Er=B(3269);function Sn(...n){const e=(0,Er.yG)(n);return(0,hi.D)(n,e)}var Ln=B(58),zg=B(8189);function $l(...n){return function Gg(){return(0,zg.J)(1)}()((0,hi.D)(n,(0,Er.yG)(n)))}var ei=B(4482);function ki(...n){const e=(0,Er.yG)(n);return(0,ei.e)((t,i)=>{(e?$l(n,t,e):$l(n,t)).subscribe(i)})}var fi=B(5403);function qn(){return(0,ei.e)((n,e)=>{let t,i=!1;n.subscribe((0,fi.x)(e,r=>{const s=t;t=r,i&&e.next([s,r]),i=!0}))})}var Jt=B(4004);function hu(n,e,t,i,r){return(s,o)=>{let d=t,f=e,m=0;s.subscribe((0,fi.x)(o,v=>{const C=m++;f=d?n(f,v,C):(d=!0,v),i&&o.next(f)},r&&(()=>{d&&o.next(f),o.complete()})))}}function pa(n,e){return(0,ei.e)(hu(n,e,arguments.length>=2,!0))}var Ds=B(4671);function Xa(n,e=Ds.y){return n=n??Pd,(0,ei.e)((t,i)=>{let r,s=!0;t.subscribe((0,fi.x)(i,o=>{const d=e(o);(s||!n(r,d))&&(s=!1,r=d,i.next(o))}))})}function Pd(n,e){return n===e}function oi(n,e){return(0,ei.e)((t,i)=>{let r=0;t.subscribe((0,fi.x)(i,s=>n.call(e,s,r++)&&i.next(s)))})}B(4538);var rt,Ho=B(3942),ve=B(5861),bi=B(2951),Lr=B(4859),Ss=B(1877),F=B(2090),pu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Vr={},Uo=Uo||{},xt=pu||self;function jo(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Wl(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var gu="closure_uid_"+(1e9*Math.random()>>>0),ga=0;function $g(n,e,t){return n.call.apply(n.bind,arguments)}function ly(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function wi(n,e,t){return(wi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?$g:ly).apply(null,arguments)}function ma(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Yn(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(i,r,s){for(var o=Array(arguments.length-2),d=2;d<arguments.length;d++)o[d-2]=arguments[d];return e.prototype[r].apply(i,o)}}function yo(){this.s=this.s,this.o=this.o}yo.prototype.s=!1,yo.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function zo(n){Object.prototype.hasOwnProperty.call(n,gu)&&n[gu]||(n[gu]=++ga)}(this)},yo.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const T=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function R(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function j(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(jo(i)){const r=n.length||0,s=i.length||0;n.length=r+s;for(let o=0;o<s;o++)n[r+o]=i[o]}else n.push(i)}}function q(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}q.prototype.h=function(){this.defaultPrevented=!0};var te=function(){if(!xt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{xt.addEventListener("test",()=>{},e),xt.removeEventListener("test",()=>{},e)}catch{}return n}();function De(n){return/^[\s\xa0]*$/.test(n)}function tt(){var n=xt.navigator;return n&&(n=n.userAgent)?n:""}function Xe(n){return-1!=tt().indexOf(n)}function bt(n){return bt[" "](n),n}bt[" "]=function(){};var ts,n,Ut=Xe("Opera"),tr=Xe("Trident")||Xe("MSIE"),ji=Xe("Edge"),Ja=ji||tr,Fd=Xe("Gecko")&&!(-1!=tt().toLowerCase().indexOf("webkit")&&!Xe("Edge"))&&!(Xe("Trident")||Xe("MSIE"))&&!Xe("Edge"),Go=-1!=tt().toLowerCase().indexOf("webkit")&&!Xe("Edge");function Br(){var n=xt.document;return n?n.documentMode:void 0}e:{var ql="",Hf=(n=tt(),Fd?/rv:([^\);]+)(\)|;)/.exec(n):ji?/Edge\/([\d\.]+)/.exec(n):tr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Go?/WebKit\/(\S+)/.exec(n):Ut?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Hf&&(ql=Hf?Hf[1]:""),tr){var Uf=Br();if(null!=Uf&&Uf>parseFloat(ql)){ts=String(Uf);break e}}ts=ql}var uw=xt.document&&tr&&(Br()||parseInt(ts,10))||void 0;function Yl(n,e){if(q.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Fd){e:{try{bt(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:uy[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Yl.$.h.call(this)}}Yn(Yl,q);var uy={2:"touch",3:"pen",4:"mouse"};Yl.prototype.h=function(){Yl.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Zl="closure_listenable_"+(1e6*Math.random()|0),dw=0;function hw(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.la=r,this.key=++dw,this.fa=this.ia=!1}function jf(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Ld(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function dy(n){const e={};for(const t in n)e[t]=n[t];return e}const Cr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zf(n,e){let t,i;for(let r=1;r<arguments.length;r++){for(t in i=arguments[r],i)n[t]=i[t];for(let s=0;s<Cr.length;s++)t=Cr[s],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function Vd(n){this.src=n,this.g={},this.h=0}function Kl(n,e){var t=e.type;if(t in n.g){var s,i=n.g[t],r=T(i,e);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(jf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function xi(n,e,t,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==i)return r}return-1}Vd.prototype.add=function(n,e,t,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=xi(n,e,i,r);return-1<o?(e=n[o],t||(e.ia=!1)):((e=new hw(e,this.src,s,!!i,r)).ia=t,n.push(e)),e};var Ql="closure_lm_"+(1e6*Math.random()|0),mu={};function hy(n,e,t,i,r){if(i&&i.once)return Gf(n,e,t,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)hy(n,e[s],t,i,r);return null}return t=vu(t),n&&n[Zl]?n.O(e,t,Wl(i)?!!i.capture:!!i,r):Wg(n,e,t,!1,i,r)}function Wg(n,e,t,i,r,s){if(!e)throw Error("Invalid event type");var o=Wl(r)?!!r.capture:!!r,d=_u(n);if(d||(n[Ql]=d=new Vd(n)),(t=d.add(e,t,i,o,s)).proxy)return t;if(i=function fy(){const e=gy;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)te||(r=o),void 0===r&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(Bd(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function Gf(n,e,t,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Gf(n,e[s],t,i,r);return null}return t=vu(t),n&&n[Zl]?n.P(e,t,Wl(i)?!!i.capture:!!i,r):Wg(n,e,t,!0,i,r)}function qg(n,e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)qg(n,e[s],t,i,r);else i=Wl(i)?!!i.capture:!!i,t=vu(t),n&&n[Zl]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=xi(s=n.g[e],t,i,r))&&(jf(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=_u(n))&&(e=n.g[e.toString()],n=-1,e&&(n=xi(e,t,i,r)),(t=-1<n?e[n]:null)&&py(t))}function py(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Zl])Kl(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(Bd(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=_u(e))?(Kl(t,n),0==t.h&&(t.src=null,e[Ql]=null)):jf(n)}}}function Bd(n){return n in mu?mu[n]:mu[n]="on"+n}function gy(n,e){if(n.fa)n=!0;else{e=new Yl(e,this);var t=n.listener,i=n.la||n.src;n.ia&&py(n),n=t.call(i,e)}return n}function _u(n){return(n=n[Ql])instanceof Vd?n:null}var yu="__closure_events_fn_"+(1e9*Math.random()>>>0);function vu(n){return"function"==typeof n?n:(n[yu]||(n[yu]=function(e){return n.handleEvent(e)}),n[yu])}function nr(){yo.call(this),this.i=new Vd(this),this.S=this,this.J=null}function ir(n,e){var t,i=n.J;if(i)for(t=[];i;i=i.J)t.push(i);if(n=n.S,i=e.type||e,"string"==typeof e)e=new q(e,n);else if(e instanceof q)e.target=e.target||n;else{var r=e;zf(e=new q(i,n),r)}if(r=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];r=$f(o,i,!0,e)&&r}if(r=$f(o=e.g=n,i,!0,e)&&r,r=$f(o,i,!1,e)&&r,t)for(s=0;s<t.length;s++)r=$f(o=e.g=t[s],i,!1,e)&&r}function $f(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==t){var d=o.listener,f=o.la||o.src;o.ia&&Kl(n.i,o),r=!1!==d.call(f,i)&&r}}return r&&!i.defaultPrevented}Yn(nr,yo),nr.prototype[Zl]=!0,nr.prototype.removeEventListener=function(n,e,t,i){qg(this,n,e,t,i)},nr.prototype.N=function(){if(nr.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)jf(t[i]);delete n.g[e],n.h--}}this.J=null},nr.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},nr.prototype.P=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var Xl=xt.JSON.stringify;function my(){var n=Hd;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Zg=new class pw{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new el,n=>n.reset());class el{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function M0(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function bu(n){xt.setTimeout(()=>{throw n},0)}let _a,wu=!1,Hd=new class Yg{constructor(){this.h=this.g=null}add(e,t){const i=Zg.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}},Wf=()=>{const n=xt.Promise.resolve(void 0);_a=()=>{n.then(gw)}};var gw=()=>{for(var n;n=my();){try{n.h.call(n.g)}catch(t){bu(t)}var e=Zg;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}wu=!1};function Eu(n,e){nr.call(this),this.h=n||1,this.g=e||xt,this.j=wi(this.qb,this),this.l=Date.now()}function Kg(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function Qg(n,e,t){if("function"==typeof n)t&&(n=wi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=wi(n.handleEvent,n)}return 2147483647<Number(e)?-1:xt.setTimeout(n,e||0)}function qf(n){n.g=Qg(()=>{n.g=null,n.i&&(n.i=!1,qf(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Yn(Eu,nr),(rt=Eu.prototype).ga=!1,rt.T=null,rt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ir(this,"tick"),this.ga&&(Kg(this),this.start()))}},rt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},rt.N=function(){Eu.$.N.call(this),Kg(this),delete this.g};class mw extends yo{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:qf(this)}N(){super.N(),this.g&&(xt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cu(n){yo.call(this),this.h=n,this.g={}}Yn(Cu,yo);var Yf=[];function Xg(n,e,t,i){Array.isArray(t)||(t&&(Yf[0]=t.toString()),t=Yf);for(var r=0;r<t.length;r++){var s=hy(e,t[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function Zf(n){Ld(n.g,function(e,t){this.g.hasOwnProperty(t)&&py(e)},n),n.g={}}function Ud(){this.g=!0}function Jl(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Kf(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return Xl(t)}catch{return e}}(n,t)+(i?" "+i:"")})}Cu.prototype.N=function(){Cu.$.N.call(this),Zf(this)},Cu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ud.prototype.Ea=function(){this.g=!1},Ud.prototype.info=function(){};var tl={},yy=null;function Du(){return yy=yy||new nr}function jd(n){q.call(this,tl.Ta,n)}function zd(n){const e=Du();ir(e,new jd(e))}function em(n,e){q.call(this,tl.STAT_EVENT,n),this.stat=e}function dr(n){const e=Du();ir(e,new em(e,n))}function tm(n,e){q.call(this,tl.Ua,n),this.size=e}function ec(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return xt.setTimeout(function(){n()},e)}tl.Ta="serverreachability",Yn(jd,q),tl.STAT_EVENT="statevent",Yn(em,q),tl.Ua="timingevent",Yn(tm,q);var Gd={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},$d={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function $o(){}function Wd(){}$o.prototype.h=null;var im,tc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function qd(){q.call(this,"d")}function nc(){q.call(this,"c")}function Su(){}function ic(n,e,t,i){this.l=n,this.j=e,this.m=t,this.W=i||1,this.U=new Cu(this),this.P=rm,this.V=new Eu(n=Ja?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Qf}function Qf(){this.i=null,this.g="",this.h=!1}Yn(qd,q),Yn(nc,q),Yn(Su,$o),Su.prototype.g=function(){return new XMLHttpRequest},Su.prototype.i=function(){return{}},im=new Su;var rm=45e3,Yd={},va={};function Zd(n,e,t){n.L=1,n.v=Kd(vo(e)),n.s=t,n.S=!0,Ri(n,null)}function Ri(n,e){n.G=Date.now(),rc(n),n.A=vo(n.v);var t=n.A,i=n.W;Array.isArray(i)||(i=[String(i)]),O(t.i,"t",i),n.C=0,t=n.l.J,n.h=new Qf,n.g=Mw(n.l,t?e:null,!n.s),0<n.O&&(n.M=new mw(wi(n.Pa,n,n.g),n.O)),Xg(n.U,n.g,"readystatechange",n.nb),e=n.I?dy(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),zd(),function Jg(n,e,t,i,r,s){n.info(function(){if(n.g)if(s)for(var o="",d=s.split("&"),f=0;f<d.length;f++){var m=d[f].split("=");if(1<m.length){var v=m[0];m=m[1];var C=v.split("_");o=2<=C.length&&"type"==C[1]?o+(v+"=")+m+"&":o+(v+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.u,n.A,n.m,n.W,n.s)}function Iu(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function sm(n,e,t){let r,i=!0;for(;!n.J&&n.C<t.length;){if(r=k0(n,t),r==va){4==e&&(n.o=4,dr(14),i=!1),Jl(n.j,n.m,null,"[Incomplete Response]");break}if(r==Yd){n.o=4,dr(15),Jl(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}Jl(n.j,n.m,r,null),qs(n,r)}Iu(n)&&r!=va&&r!=Yd&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,dr(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Aw(e),e.M=!0,dr(11))):(Jl(n.j,n.m,t,"[Invalid Chunked Response]"),Wo(n),sc(n))}function k0(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?va:(t=Number(e.substring(t,i)),isNaN(t)?Yd:(i+=1)+t>e.length?va:(e=e.slice(i,i+t),n.C=i+t,e))}function rc(n){n.Y=Date.now()+n.P,Au(n,n.P)}function Au(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=ec(wi(n.lb,n),e)}function Xf(n){n.B&&(xt.clearTimeout(n.B),n.B=null)}function sc(n){0==n.l.H||n.J||nh(n.l,n)}function Wo(n){Xf(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,Kg(n.V),Zf(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function qs(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Hr(t.i,n)))if(!n.K&&Hr(t.i,n)&&3==t.H){try{var i=t.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;th(t),Sw(t)}rp(t),dr(18)}}else t.Fa=r[1],0<t.Fa-t.V&&37500>r[2]&&t.G&&0==t.A&&!t.v&&(t.v=ec(wi(t.ib,t),6e3));if(1>=Un(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else oc(t,11)}else if((n.K||t.g==n)&&th(t),!De(e))for(r=t.Ja.g.parse(e),e=0;e<r.length;e++){let m=r[e];if(t.V=m[0],m=m[1],2==t.H)if("c"==m[0]){t.K=m[1],t.pa=m[2];const v=m[3];null!=v&&(t.ra=v,t.l.info("VER="+t.ra));const C=m[4];null!=C&&(t.Ga=C,t.l.info("SVER="+t.Ga));const A=m[5];null!=A&&"number"==typeof A&&0<A&&(t.L=i=1.5*A,t.l.info("backChannelRequestTimeoutMs_="+i)),i=t;const M=n.g;if(M){const P=M.g?M.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(P){var s=i.i;s.g||-1==P.indexOf("spdy")&&-1==P.indexOf("quic")&&-1==P.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Xd(s,s.h),s.h=null))}if(i.F){const H=M.g?M.g.getResponseHeader("X-HTTP-Session-Id"):null;H&&(i.Da=H,hn(i.I,i.F,H))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var o=n;if((i=t).wa=V0(i,i.J?i.pa:null,i.Y),o.K){Cy(i.i,o);var d=o,f=i.L;f&&d.setTimeout(f),d.B&&(Xf(d),rc(d)),i.g=o}else Ay(i);0<t.j.length&&ip(t)}else"stop"!=m[0]&&"close"!=m[0]||oc(t,7);else 3==t.H&&("stop"==m[0]||"close"==m[0]?"stop"==m[0]?oc(t,7):dm(t):"noop"!=m[0]&&t.h&&t.h.Aa(m),t.A=0)}zd()}catch{}}function am(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(jo(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function vy(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(jo(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function om(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(jo(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],t&&t[s],n)}(rt=ic.prototype).setTimeout=function(n){this.P=n},rt.nb=function(n){n=n.target;const e=this.M;e&&3==ba(n)?e.l():this.Pa(n)},rt.Pa=function(n){try{if(n==this.g)e:{const v=ba(this.g);var e=this.g.Ia();if(this.g.da(),!(3>v)&&(3!=v||Ja||this.g&&(this.h.h||this.g.ja()||ww(this.g)))){this.J||4!=v||7==e||zd(),Xf(this);var t=this.g.da();this.ca=t;t:if(Iu(this)){var i=ww(this.g);n="";var r=i.length,s=4==ba(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Wo(this),sc(this);var o="";break t}this.h.i=new xt.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=n,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==t,function _y(n,e,t,i,r,s,o){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,v,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var d,f=this.g;if((d=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!De(d)){var m=d;break t}}m=null}if(!(t=m)){this.i=!1,this.o=3,dr(12),Wo(this),sc(this);break e}Jl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qs(this,t)}this.S?(sm(this,v,o),Ja&&this.i&&3==v&&(Xg(this.U,this.V,"tick",this.mb),this.V.start())):(Jl(this.j,this.m,o,null),qs(this,o)),4==v&&Wo(this),this.i&&!this.J&&(4==v?nh(this.l,this):(this.i=!1,rc(this)))}else(function O0(n){const e={};n=(n.g&&2<=ba(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<n.length;i++){if(De(n[i]))continue;var t=M0(n[i]);const r=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[r]||[];e[r]=s,s.push(t)}!function fw(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(i){return i.join(", ")})})(this.g),400==t&&0<o.indexOf("Unknown SID")?(this.o=3,dr(12)):(this.o=0,dr(13)),Wo(this),sc(this)}}}catch{}},rt.mb=function(){if(this.g){var n=ba(this.g),e=this.g.ja();this.C<e.length&&(Xf(this),sm(this,n,e),this.i&&4!=n&&rc(this))}},rt.cancel=function(){this.J=!0,Wo(this)},rt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function ya(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(zd(),dr(17)),Wo(this),this.o=2,sc(this)):Au(this,this.Y-n)};var nl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Oi(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Oi){this.h=n.h,Tu(this,n.j),this.s=n.s,this.g=n.g,Jf(this,n.m),this.l=n.l;var e=n.i,t=new g;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),rr(this,t),this.o=n.o}else n&&(e=String(n).match(nl))?(this.h=!1,Tu(this,e[1]||"",!0),this.s=Mu(e[2]||""),this.g=Mu(e[3]||"",!0),Jf(this,e[4]),this.l=Mu(e[5]||"",!0),rr(this,e[6]||"",!0),this.o=Mu(e[7]||"")):(this.h=!1,this.i=new g(null,this.h))}function vo(n){return new Oi(n)}function Tu(n,e,t){n.j=t?Mu(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Jf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function rr(n,e,t){e instanceof g?(n.i=e,function X(n,e){e&&!n.j&&(_(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(E(this,i),O(this,r,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Qd(e,yw)),n.i=new g(e,n.h))}function hn(n,e,t){n.i.set(e,t)}function Kd(n){return hn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Mu(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Qd(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,lm),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function lm(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Oi.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Qd(e,wy,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Qd(e,wy,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Qd(t,"/"==t.charAt(0)?Ey:_w,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Qd(t,b)),n.join("")};var wy=/[#\/\?@]/g,_w=/[#\?:]/g,Ey=/[#\?]/g,yw=/[#\?@]/g,b=/#/g;function g(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function _(n){n.g||(n.g=new Map,n.h=0,n.i&&function by(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var s=n[t].substring(0,i);r=n[t].substring(i+1)}else s=n[t];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function E(n,e){_(n),e=G(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function k(n,e){return _(n),e=G(n,e),n.g.has(e)}function O(n,e,t){E(n,e),0<t.length&&(n.i=null,n.g.set(G(n,e),R(t)),n.h+=t.length)}function G(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Ye(n){this.l=n||at,n=xt.PerformanceNavigationTiming?0<(n=xt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(xt.g&&xt.g.Ka&&xt.g.Ka()&&xt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(rt=g.prototype).add=function(n,e){_(this),this.i=null,n=G(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},rt.forEach=function(n,e){_(this),this.g.forEach(function(t,i){t.forEach(function(r){n.call(e,r,i,this)},this)},this)},rt.ta=function(){_(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const r=n[i];for(let s=0;s<r.length;s++)t.push(e[i])}return t},rt.Z=function(n){_(this);let e=[];if("string"==typeof n)k(this,n)&&(e=e.concat(this.g.get(G(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},rt.set=function(n,e){return _(this),this.i=null,k(this,n=G(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},rt.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},rt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),n.push(r)}}return this.i=n.join("&")};var at=10;function ct(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Un(n){return n.h?1:n.g?n.g.size:0}function Hr(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Xd(n,e){n.g?n.g.add(e):n.h=e}function Cy(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Jd(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return R(n.i)}function Sy(){this.g=new class{stringify(n){return xt.JSON.stringify(n,void 0)}parse(n){return xt.JSON.parse(n,void 0)}}}function cm(n,e,t){const i=t||"";try{am(n,function(r,s){let o=r;Wl(r)&&(o=Xl(r)),e.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function ku(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function qo(n){this.l=n.fc||null,this.j=n.ob||!1}function xu(n,e){nr.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=eh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ye.prototype.cancel=function(){if(this.i=Jd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Yn(qo,$o),qo.prototype.g=function(){return new xu(this.l,this.j)},qo.prototype.i=function(n){return function(){return n}}({}),Yn(xu,nr);var eh=0;function ep(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Zn(n){n.readyState=4,n.l=null,n.j=null,n.A=null,um(n)}function um(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(rt=xu.prototype).open=function(n,e){if(this.readyState!=eh)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,um(this)},rt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||xt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},rt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Zn(this)),this.readyState=eh},rt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,um(this)),this.g&&(this.readyState=3,um(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof xt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ep(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},rt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Zn(this):um(this),3==this.readyState&&ep(this)}},rt.Za=function(n){this.g&&(this.response=this.responseText=n,Zn(this))},rt.Ya=function(n){this.g&&(this.response=n,Zn(this))},rt.ka=function(){this.g&&Zn(this)},rt.setRequestHeader=function(n,e){this.v.append(n,e)},rt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},rt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(xu.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var ok=xt.JSON.parse;function Ei(n){nr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=vw,this.L=this.M=!1}Yn(Ei,nr);var vw="",ak=/^https?$/i,lk=["POST","PUT"];function x0(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,R0(n),bw(n)}function R0(n){n.F||(n.F=!0,ir(n,"complete"),ir(n,"error"))}function uk(n){if(n.h&&typeof Uo<"u"&&(!n.C[1]||4!=ba(n)||2!=n.da()))if(n.v&&4==ba(n))Qg(n.La,0,n);else if(ir(n,"readystatechange"),4==ba(n)){n.h=!1;try{const o=n.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===o){var r=String(n.I).match(nl)[1]||null;!r&&xt.self&&xt.self.location&&(r=xt.self.location.protocol.slice(0,-1)),i=!ak.test(r?r.toLowerCase():"")}t=i}if(t)ir(n,"complete"),ir(n,"success");else{n.m=6;try{var s=2<ba(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",R0(n)}}finally{bw(n)}}}function bw(n,e){if(n.g){tp(n);const t=n.g,i=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||ir(n,"ready");try{t.onreadystatechange=i}catch{}}}function tp(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(xt.clearTimeout(n.A),n.A=null)}function ba(n){return n.g?n.g.readyState:0}function ww(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case vw:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Ew(n){let e="";return Ld(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function Cw(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=Ew(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):hn(n,e,t))}function np(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Dw(n){this.Ga=0,this.j=[],this.l=new Ud,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=np("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=np("baseRetryDelayMs",5e3,n),this.hb=np("retryDelaySeedMs",1e4,n),this.eb=np("forwardChannelMaxRetries",2,n),this.xa=np("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new Ye(n&&n.concurrentRequestLimit),this.Ja=new Sy,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function dm(n){if(N0(n),3==n.H){var e=n.W++,t=vo(n.I);if(hn(t,"SID",n.K),hn(t,"RID",e),hn(t,"TYPE","terminate"),wa(n,t),(e=new ic(n,n.l,e)).L=2,e.v=Kd(vo(t)),t=!1,xt.navigator&&xt.navigator.sendBeacon)try{t=xt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&xt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Mw(e.l,null),e.g.ha(e.v)),e.G=Date.now(),rc(e)}L0(n)}function Sw(n){n.g&&(Aw(n),n.g.cancel(),n.g=null)}function N0(n){Sw(n),n.u&&(xt.clearTimeout(n.u),n.u=null),th(n),n.i.cancel(),n.m&&("number"==typeof n.m&&xt.clearTimeout(n.m),n.m=null)}function ip(n){if(!ct(n.i)&&!n.m){n.m=!0;var e=n.Na;_a||Wf(),wu||(_a(),wu=!0),Hd.add(e,n),n.C=0}}function Iw(n,e){var t;t=e?e.m:n.W++;const i=vo(n.I);hn(i,"SID",n.K),hn(i,"RID",t),hn(i,"AID",n.V),wa(n,i),n.o&&n.s&&Cw(i,n.o,n.s),t=new ic(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=F0(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Xd(n.i,t),Zd(t,i,e)}function wa(n,e){n.na&&Ld(n.na,function(t,i){hn(e,i,t)}),n.h&&am({},function(t,i){hn(e,i,t)})}function F0(n,e,t){t=Math.min(n.j.length,t);var i=n.h?wi(n.h.Va,n.h,n):null;e:{var r=n.j;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=r[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let d=!0;for(let f=0;f<t;f++){let m=r[f].g;const v=r[f].map;if(m-=s,0>m)s=Math.max(0,r[f].g-100),d=!1;else try{cm(v,o,"req"+m+"_")}catch{i&&i(v)}}if(d){i=o.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,i}function Ay(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;_a||Wf(),wu||(_a(),wu=!0),Hd.add(e,n),n.A=0}}function rp(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=ec(wi(n.Ma,n),Tw(n,n.A)),n.A++,0))}function Aw(n){null!=n.B&&(xt.clearTimeout(n.B),n.B=null)}function Ty(n){n.g=new ic(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=vo(n.wa);hn(e,"RID","rpc"),hn(e,"SID",n.K),hn(e,"AID",n.V),hn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&hn(e,"TO",n.qa),hn(e,"TYPE","xmlhttp"),wa(n,e),n.o&&n.s&&Cw(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=Kd(vo(e)),t.s=null,t.S=!0,Ri(t,n)}function th(n){null!=n.v&&(xt.clearTimeout(n.v),n.v=null)}function nh(n,e){var t=null;if(n.g==e){th(n),Aw(n),n.g=null;var i=2}else{if(!Hr(n.i,e))return;t=e.F,Cy(n.i,e),i=1}if(0!=n.H)if(e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.G;var r=n.C;ir(i=Du(),new tm(i,t)),ip(n)}else Ay(n);else if(3==(r=e.o)||0==r&&0<e.ca||!(1==i&&function P0(n,e){return!(Un(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=ec(wi(n.Na,n,e),Tw(n,n.C)),n.C++,0)))}(n,e)||2==i&&rp(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),r){case 1:oc(n,5);break;case 4:oc(n,10);break;case 3:oc(n,6);break;default:oc(n,2)}}function Tw(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function oc(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var i=wi(n.pb,n);t||(t=new Oi("//www.google.com/images/cleardot.gif"),xt.location&&"http"==xt.location.protocol||Tu(t,"https"),Kd(t)),function Iy(n,e){const t=new Ud;if(xt.Image){const i=new Image;i.onload=ma(ku,t,i,"TestLoadImage: loaded",!0,e),i.onerror=ma(ku,t,i,"TestLoadImage: error",!1,e),i.onabort=ma(ku,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=ma(ku,t,i,"TestLoadImage: timeout",!1,e),xt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else dr(2);n.H=0,n.h&&n.h.za(e),L0(n),N0(n)}function L0(n){if(n.H=0,n.ma=[],n.h){const e=Jd(n.i);(0!=e.length||0!=n.j.length)&&(j(n.ma,e),j(n.ma,n.j),n.i.i.length=0,R(n.j),n.j.length=0),n.h.ya()}}function V0(n,e,t){var i=t instanceof Oi?vo(t):new Oi(t);if(""!=i.g)e&&(i.g=e+"."+i.g),Jf(i,i.m);else{var r=xt.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new Oi(null);i&&Tu(s,i),e&&(s.g=e),r&&Jf(s,r),t&&(s.l=t),i=s}return e=n.Da,(t=n.F)&&e&&hn(i,t,e),hn(i,"VER",n.ra),wa(n,i),i}function Mw(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ei(t&&n.Ha&&!n.va?new qo({ob:!0}):n.va)).Oa(n.J),e}function ih(){}function My(){if(tr&&!(10<=Number(uw)))throw Error("Environmental error: no available transport.")}function bo(n,e){nr.call(this),this.g=new Dw(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!De(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!De(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ru(this)}function B0(n){qd.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function H0(){nc.call(this),this.status=1}function Ru(n){this.g=n}function Yo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function kw(n,e,t){t||(t=0);var i=Array(16);if("string"==typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(r=0;16>r;++r)i[r]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],o=(e=n.g[0])+(s^(t=n.g[1])&((r=n.g[2])^s))+i[0]+3614090360&4294967295;o=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=t+(o<<7&4294967295|o>>>25))+((o=s+(r^e&(t^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(t^s&(e^t))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^r&(s^e))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(t^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(t^s&(e^t))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^r&(s^e))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(t^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(t^s&(e^t))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^r&(s^e))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(t^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(t^s&(e^t))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^r&(s^e))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^s&(t^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^r&(e^t))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^t&(s^e))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(t^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^r&(e^t))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^t&(s^e))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(t^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^r&(e^t))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^t&(s^e))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(t^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^r&(e^t))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^t&(s^e))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(t^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^t)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=t+(r^s^e)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^t)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=t+(r^s^e)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^t)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=t+(r^s^e)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^t)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=t+(r^s^e)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(r^(t|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~t))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(r|~e))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(t|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~t))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(r|~e))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(t|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~t))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(r|~e))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=t+((o=e+(r^(t|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(e^(s|~t))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+i[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+r&4294967295,n.g[3]=n.g[3]+s&4294967295}function xn(n,e){this.h=e;for(var t=[],i=!0,r=n.length-1;0<=r;r--){var s=0|n[r];i&&s==e||(t[r]=s,i=!1)}this.g=t}(rt=Ei.prototype).Oa=function(n){this.M=n},rt.ha=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():im.g(),this.C=function nm(n){return n.h||(n.h=n.i())}(this.u?this.u:im),this.g.onreadystatechange=wi(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void x0(this,s)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)t.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const s of i.keys())t.set(s,i.get(s))}i=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),r=xt.FormData&&n instanceof xt.FormData,!(0<=T(lk,e))||i||r||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{tp(this),0<this.B&&((this.L=function ck(n){return tr&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=wi(this.ua,this)):this.A=Qg(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){x0(this,s)}},rt.ua=function(){typeof Uo<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ir(this,"timeout"),this.abort(8))},rt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ir(this,"complete"),ir(this,"abort"),bw(this))},rt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),bw(this,!0)),Ei.$.N.call(this)},rt.La=function(){this.s||(this.G||this.v||this.l?uk(this):this.kb())},rt.kb=function(){uk(this)},rt.isActive=function(){return!!this.g},rt.da=function(){try{return 2<ba(this)?this.g.status:-1}catch{return-1}},rt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},rt.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),ok(e)}},rt.Ia=function(){return this.m},rt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(rt=Dw.prototype).ra=8,rt.H=1,rt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const r=new ic(this,this.l,n);let s=this.s;if(this.U&&(s?(s=dy(s),zf(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var i=this.j[t];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=F0(this,r,e),hn(t=vo(this.I),"RID",n),hn(t,"CVER",22),this.F&&hn(t,"X-HTTP-Session-Id",this.F),wa(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(Ew(s)))+"&"+e:this.o&&Cw(t,this.o,s)),Xd(this.i,r),this.bb&&hn(t,"TYPE","init"),this.P?(hn(t,"$req",e),hn(t,"SID","null"),r.aa=!0,Zd(r,t,null)):Zd(r,t,e),this.H=2}}else 3==this.H&&(n?Iw(this,n):0==this.j.length||ct(this.i)||Iw(this))},rt.Ma=function(){if(this.u=null,Ty(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=ec(wi(this.jb,this),n)}},rt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,dr(10),Sw(this),Ty(this))},rt.ib=function(){null!=this.v&&(this.v=null,Sw(this),rp(this),dr(19))},rt.pb=function(n){n?(this.l.info("Successfully pinged google.com"),dr(2)):(this.l.info("Failed to ping google.com"),dr(1))},rt.isActive=function(){return!!this.h&&this.h.isActive(this)},(rt=ih.prototype).Ba=function(){},rt.Aa=function(){},rt.za=function(){},rt.ya=function(){},rt.isActive=function(){return!0},rt.Va=function(){},My.prototype.g=function(n,e){return new bo(n,e)},Yn(bo,nr),bo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;dr(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=V0(n,null,n.Y),ip(n)},bo.prototype.close=function(){dm(this.g)},bo.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Xl(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&ip(e)},bo.prototype.N=function(){this.g.h=null,delete this.j,dm(this.g),delete this.g,bo.$.N.call(this)},Yn(B0,qd),Yn(H0,nc),Yn(Ru,ih),Ru.prototype.Ba=function(){ir(this.g,"a")},Ru.prototype.Aa=function(n){ir(this.g,new B0(n))},Ru.prototype.za=function(n){ir(this.g,new H0)},Ru.prototype.ya=function(){ir(this.g,"b")},Yn(Yo,function dk(){this.blockSize=-1}),Yo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Yo.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(0==r)for(;s<=t;)kw(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(i[r++]=n.charCodeAt(s++),r==this.blockSize){kw(this,i),r=0;break}}else for(;s<e;)if(i[r++]=n[s++],r==this.blockSize){kw(this,i),r=0;break}}this.h=r,this.i+=e},Yo.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var i=0;32>i;i+=8)n[t++]=this.g[e]>>>i&255;return n};var lF={};function xw(n){return-128<=n&&128>n?function $t(n,e){var t=lF;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new xn([0|e],0>e?-1:0)}):new xn([0|n],0>n?-1:0)}function Ys(n){if(isNaN(n)||!isFinite(n))return il;if(0>n)return Ur(Ys(-n));for(var e=[],t=1,i=0;n>=t;i++)e[i]=n/t|0,t*=Ou;return new xn(e,0)}var Ou=4294967296,il=xw(0),Rw=xw(1),hk=xw(16777216);function rl(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Zo(n){return-1==n.h}function Ur(n){for(var e=n.g.length,t=[],i=0;i<e;i++)t[i]=~n.g[i];return new xn(t,~n.h).add(Rw)}function ky(n,e){return n.add(Ur(e))}function hm(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function sp(n,e){this.g=n,this.h=e}function op(n,e){if(rl(e))throw Error("division by zero");if(rl(n))return new sp(il,il);if(Zo(n))return e=op(Ur(n),e),new sp(Ur(e.g),Ur(e.h));if(Zo(e))return e=op(n,Ur(e)),new sp(Ur(e.g),e.h);if(30<n.g.length){if(Zo(n)||Zo(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Rw,i=e;0>=i.X(n);)t=xy(t),i=xy(i);var r=ap(t,1),s=ap(i,1);for(i=ap(i,2),t=ap(t,2);!rl(i);){var o=s.add(i);0>=o.X(n)&&(r=r.add(t),s=o),i=ap(i,1),t=ap(t,1)}return e=ky(n,r.R(e)),new sp(r,e)}for(r=il;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),i=48>=(i=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,i-48),o=(s=Ys(t)).R(e);Zo(o)||0<o.X(n);)o=(s=Ys(t-=i)).R(e);rl(s)&&(s=Rw),r=r.add(s),n=ky(n,o)}return new sp(r,n)}function xy(n){for(var e=n.g.length+1,t=[],i=0;i<e;i++)t[i]=n.D(i)<<1|n.D(i-1)>>>31;return new xn(t,n.h)}function ap(n,e){var t=e>>5;e%=32;for(var i=n.g.length-t,r=[],s=0;s<i;s++)r[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new xn(r,n.h)}(rt=xn.prototype).ea=function(){if(Zo(this))return-Ur(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var i=this.D(t);n+=(0<=i?i:Ou+i)*e,e*=Ou}return n},rt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(rl(this))return"0";if(Zo(this))return"-"+Ur(this).toString(n);for(var e=Ys(Math.pow(n,6)),t=this,i="";;){var r=op(t,e).g,s=((0<(t=ky(t,r.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(rl(t=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},rt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},rt.X=function(n){return Zo(n=ky(this,n))?-1:rl(n)?0:1},rt.abs=function(){return Zo(this)?Ur(this):this},rt.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0,r=0;r<=e;r++){var s=i+(65535&this.D(r))+(65535&n.D(r)),o=(s>>>16)+(this.D(r)>>>16)+(n.D(r)>>>16);i=o>>>16,t[r]=(o&=65535)<<16|(s&=65535)}return new xn(t,-2147483648&t[t.length-1]?-1:0)},rt.R=function(n){if(rl(this)||rl(n))return il;if(Zo(this))return Zo(n)?Ur(this).R(Ur(n)):Ur(Ur(this).R(n));if(Zo(n))return Ur(this.R(Ur(n)));if(0>this.X(hk)&&0>n.X(hk))return Ys(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],i=0;i<2*e;i++)t[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<n.g.length;r++){var s=this.D(i)>>>16,o=65535&this.D(i),d=n.D(r)>>>16,f=65535&n.D(r);t[2*i+2*r]+=o*f,hm(t,2*i+2*r),t[2*i+2*r+1]+=s*f,hm(t,2*i+2*r+1),t[2*i+2*r+1]+=o*d,hm(t,2*i+2*r+1),t[2*i+2*r+2]+=s*d,hm(t,2*i+2*r+2)}for(i=0;i<e;i++)t[i]=t[2*i+1]<<16|t[2*i];for(i=e;i<2*e;i++)t[i]=0;return new xn(t,0)},rt.gb=function(n){return op(this,n).h},rt.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)&n.D(i);return new xn(t,this.h&n.h)},rt.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)|n.D(i);return new xn(t,this.h|n.h)},rt.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)^n.D(i);return new xn(t,this.h^n.h)},My.prototype.createWebChannel=My.prototype.g,bo.prototype.send=bo.prototype.u,bo.prototype.open=bo.prototype.m,bo.prototype.close=bo.prototype.close,Gd.NO_ERROR=0,Gd.TIMEOUT=8,Gd.HTTP_ERROR=6,$d.COMPLETE="complete",Wd.EventType=tc,tc.OPEN="a",tc.CLOSE="b",tc.ERROR="c",tc.MESSAGE="d",nr.prototype.listen=nr.prototype.O,Ei.prototype.listenOnce=Ei.prototype.P,Ei.prototype.getLastError=Ei.prototype.Sa,Ei.prototype.getLastErrorCode=Ei.prototype.Ia,Ei.prototype.getStatus=Ei.prototype.da,Ei.prototype.getResponseJson=Ei.prototype.Wa,Ei.prototype.getResponseText=Ei.prototype.ja,Ei.prototype.send=Ei.prototype.ha,Ei.prototype.setWithCredentials=Ei.prototype.Oa,Yo.prototype.digest=Yo.prototype.l,Yo.prototype.reset=Yo.prototype.reset,Yo.prototype.update=Yo.prototype.j,xn.prototype.add=xn.prototype.add,xn.prototype.multiply=xn.prototype.R,xn.prototype.modulo=xn.prototype.gb,xn.prototype.compare=xn.prototype.X,xn.prototype.toNumber=xn.prototype.ea,xn.prototype.toString=xn.prototype.toString,xn.prototype.getBits=xn.prototype.D,xn.fromNumber=Ys,xn.fromString=function U0(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Ur(U0(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Ys(Math.pow(e,8)),i=il,r=0;r<n.length;r+=8){var s=Math.min(8,n.length-r),o=parseInt(n.substring(r,r+s),e);8>s?(s=Ys(Math.pow(e,s)),i=i.R(s).add(Ys(o))):i=(i=i.R(t)).add(Ys(o))}return i};var Ow=Vr.createWebChannelTransport=function(){return new My},fm=Vr.getStatEventTarget=function(){return Du()},Nw=Vr.ErrorCode=Gd,fk=Vr.EventType=$d,pk=Vr.Event=tl,j0=Vr.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},gk=Vr.FetchXmlHttpFactory=qo,Ry=Vr.WebChannel=Wd,mk=Vr.XhrIo=Ei,lp=Vr.Md5=Yo,Zs=Vr.Integer=xn;const z0="@firebase/firestore";class Dr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dr.UNAUTHENTICATED=new Dr(null),Dr.GOOGLE_CREDENTIALS=new Dr("google-credentials-uid"),Dr.FIRST_PARTY=new Dr("first-party-uid"),Dr.MOCK_USER=new Dr("mock-user");let pm="9.23.0";const rh=new Ss.Yd("@firebase/firestore");function Oy(){return rh.logLevel}function Ge(n,...e){if(rh.logLevel<=Ss.in.DEBUG){const t=e.map(Pw);rh.debug(`Firestore (${pm}): ${n}`,...t)}}function sr(n,...e){if(rh.logLevel<=Ss.in.ERROR){const t=e.map(Pw);rh.error(`Firestore (${pm}): ${n}`,...t)}}function wo(n,...e){if(rh.logLevel<=Ss.in.WARN){const t=e.map(Pw);rh.warn(`Firestore (${pm}): ${n}`,...t)}}function Pw(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ut(n="Unexpected state"){const e=`FIRESTORE (${pm}) INTERNAL ASSERTION FAILED: `+n;throw sr(e),new Error(e)}function Dt(n,e){n||ut()}function Ze(n,e){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends F.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class hr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class G0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Dr.UNAUTHENTICATED))}shutdown(){}}class vk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class $0{constructor(e){this.t=e,this.currentUser=Dr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let r=this.i;const s=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let o=new hr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new hr,e.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const m=o;e.enqueueRetryable((0,ve.Z)(function*(){yield m.promise,yield s(i.currentUser)}))},f=m=>{Ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(m=>f(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(Ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new hr)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Dt("string"==typeof i.accessToken),new G0(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Dt(null===e||"string"==typeof e),new Dr(e)}}class bk{constructor(e,t,i){this.h=e,this.l=t,this.m=i,this.type="FirstParty",this.user=Dr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class wk{constructor(e,t,i){this.h=e,this.l=t,this.m=i}getToken(){return Promise.resolve(new bk(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Dr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class W0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Zt{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const i=s=>{null!=s.error&&Ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.T;return this.T=s.token,Ge("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{Ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?r(s):Ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Dt("string"==typeof t.token),this.T=t.token,new W0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function q0(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class Fw{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=q0(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}}function Yt(n,e){return n<e?-1:n>e?1:0}function cp(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function Lw(n){return n+"\0"}class pi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pi.fromMillis(Date.now())}static fromDate(e){return pi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new pi(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Yt(this.nanoseconds,e.nanoseconds):Yt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class St{constructor(e){this.timestamp=e}static fromTimestamp(e){return new St(e)}static min(){return new St(new pi(0,0))}static max(){return new St(new pi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class gm{constructor(e,t,i){void 0===t?t=0:t>e.length&&ut(),void 0===i?i=e.length-t:i>e.length-t&&ut(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===gm.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof gm?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class wn extends gm{construct(e,t,i){return new wn(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Pe(fe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new wn(t)}static emptyPath(){return new wn([])}}const uF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ci extends gm{construct(e,t,i){return new Ci(e,t,i)}static isValidIdentifier(e){return uF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ci.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ci(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(0===i.length)throw new Pe(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let o=!1;for(;r<e.length;){const d=e[r];if("\\"===d){if(r+1===e.length)throw new Pe(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[r+1];if("\\"!==f&&"."!==f&&"`"!==f)throw new Pe(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,r+=2}else"`"===d?(o=!o,r++):"."!==d||o?(i+=d,r++):(s(),r++)}if(s(),o)throw new Pe(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ci(t)}static emptyPath(){return new Ci([])}}class it{constructor(e){this.path=e}static fromPath(e){return new it(wn.fromString(e))}static fromName(e){return new it(wn.fromString(e).popFirst(5))}static empty(){return new it(wn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===wn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return wn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new it(new wn(e.slice()))}}class sl{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function Vw(n){return n.fields.find(e=>2===e.kind)}function ac(n){return n.fields.filter(e=>2!==e.kind)}sl.UNKNOWN_ID=-1;class Ny{constructor(e,t){this.fieldPath=e,this.kind=t}}class Py{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Py(0,Ks.min())}}function Ck(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=St.fromTimestamp(1e9===i?new pi(t+1,0):new pi(t,i));return new Ks(r,it.empty(),e)}function Y0(n){return new Ks(n.readTime,n.key,-1)}class Ks{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ks(St.min(),it.empty(),-1)}static max(){return new Ks(St.max(),it.empty(),-1)}}function Z0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=it.comparator(n.documentKey,e.documentKey),0!==t?t:Yt(n.largestBatchId,e.largestBatchId))}const K0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sh{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Nu(n){return Fy.apply(this,arguments)}function Fy(){return Fy=(0,ve.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==K0)throw n;Ge("LocalStore","Unexpectedly lost primary lease")}),Fy.apply(this,arguments)}class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ut(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,i)=>{t(e)})}static reject(e){return new ae((t,i)=>{i(e)})}static waitFor(e){return new ae((t,i)=>{let r=0,s=0,o=!1;e.forEach(d=>{++r,d.next(()=>{++s,o&&s===r&&t()},f=>i(f))}),o=!0,s===r&&t()})}static or(e){let t=ae.resolve(!1);for(const i of e)t=t.next(r=>r?ae.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new ae((i,r)=>{const s=e.length,o=new Array(s);let d=0;for(let f=0;f<s;f++){const m=f;t(e[m]).next(v=>{o[m]=v,++d,d===s&&i(o)},v=>r(v))}})}static doWhile(e,t){return new ae((i,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):i()};s()})}}class Ly{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new hr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new mm(e,t.error)):this.v.resolve()},this.transaction.onerror=i=>{const r=Uw(i.target.error);this.v.reject(new mm(e,r))}}static open(e,t,i,r){try{return new Ly(t,e.transaction(r,i))}catch(s){throw new mm(t,s)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Ge("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Sk(t)}}class Ko{constructor(e,t,i){this.name=e,this.version=t,this.V=i,12.2===Ko.S((0,F.z$)())&&sr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ge("SimpleDb","Removing database:",e),oh(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,F.hl)())return!1;if(Ko.C())return!0;const e=(0,F.z$)(),t=Ko.S(e),i=0<t&&t<10,r=Ko.N(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static N(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}$(e){var t=this;return(0,ve.Z)(function*(){return t.db||(Ge("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,r)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{i(o.target.result)},s.onblocked=()=>{r(new mm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const d=o.target.error;r("VersionError"===d.name?new Pe(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Pe(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new mm(e,d))},s.onupgradeneeded=o=>{Ge("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.V.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{Ge("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=i=>t.F(i)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){var s=this;return(0,ve.Z)(function*(){const o="readonly"===t;let d=0;for(;;){++d;try{s.db=yield s.$(e);const f=Ly.open(s.db,e,o?"readonly":"readwrite",i),m=r(f).next(v=>(f.P(),v)).catch(v=>(f.abort(v),ae.reject(v))).toPromise();return m.catch(()=>{}),yield f.R,m}catch(f){const m=f,v="FirebaseError"!==m.name&&d<3;if(Ge("SimpleDb","Transaction failed with error:",m.message,"Retrying:",v),s.close(),!v)return Promise.reject(m)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Dk{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return oh(this.L.delete())}}class mm extends Pe{constructor(e,t){super(fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Pu(n){return"IndexedDbTransactionError"===n.name}class Sk{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(Ge("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(Ge("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),oh(i)}add(e){return Ge("SimpleDb","ADD",this.store.name,e,e),oh(this.store.add(e))}get(e){return oh(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ge("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ge("SimpleDb","DELETE",this.store.name,e),oh(this.store.delete(e))}count(){return Ge("SimpleDb","COUNT",this.store.name),oh(this.store.count())}j(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.W(r,(o,d)=>{s.push(d)}).next(()=>s)}{const r=this.store.getAll(i.range);return new ae((s,o)=>{r.onerror=d=>{o(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}}H(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new ae((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}J(e,t){Ge("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.Y=!1;const r=this.cursor(i);return this.W(r,(s,o,d)=>d.delete())}X(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.W(r,t)}Z(e){const t=this.cursor({});return new ae((i,r)=>{t.onerror=s=>{const o=Uw(s.target.error);r(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(d=>{d?o.continue():i()}):i()}})}W(e,t){const i=[];return new ae((r,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const d=o.target.result;if(!d)return void r();const f=new Dk(d),m=t(d.primaryKey,d.value,f);if(m instanceof ae){const v=m.catch(C=>(f.done(),ae.reject(C)));i.push(v)}f.isDone?r():null===f.K?d.continue():d.continue(f.K)}}).next(()=>ae.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.Y?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function oh(n){return new ae((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const r=Uw(i.target.error);t(r)}})}let Hw=!1;function Uw(n){const e=Ko.S((0,F.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Hw||(Hw=!0,setTimeout(()=>{throw i},0)),i}}return n}class Q0{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Ge("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ve.Z)(function*(){t.task=null;try{Ge("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(i){Pu(i)?Ge("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield Nu(i)}yield t.et(6e4)}))}}class X0{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,ve.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.st(i,e))})()}st(e,t){const i=new Set;let r=t,s=!0;return ae.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!i.has(o))return Ge("IndexBackiller",`Processing collection: ${o}`),this.it(e,o,r).next(d=>{r-=d,i.add(o)});s=!1})).next(()=>t-r)}it(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.rt(r,s)).next(d=>(Ge("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>o.size)}))}rt(e,t){let i=e;return t.changes.forEach((r,s)=>{const o=Y0(s);Z0(o,i)>0&&(i=o)}),new Ks(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Is=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>i.writeSequenceNumber(r))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Vy(n){return null==n}function ah(n){return 0===n&&1/n==-1/0}function J0(n){return"number"==typeof n&&Number.isInteger(n)&&!ah(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function As(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=jw(e)),e=up(n.get(t),e);return jw(e)}function up(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function jw(n){return n+"\x01\x01"}function Ea(n){const e=n.length;if(Dt(e>=2),2===e)return Dt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),wn.emptyPath();const t=e-2,i=[];let r="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&ut(),n.charAt(o+1)){case"\x01":const d=n.substring(s,o);let f;0===r.length?f=d:(r+=d,f=r,r=""),i.push(f);break;case"\x10":r+=n.substring(s,o),r+="\0";break;case"\x11":r+=n.substring(s,o+1);break;default:ut()}s=o+2}return new wn(i)}const _m=["userId","batchId"];function Qs(n,e){return[n,As(e)]}function zw(n,e,t){return[n,As(e),t]}const Ik={},Gw=["prefixPath","collectionGroup","readTime","documentId"],lc=["prefixPath","collectionGroup","documentId"],$w=["collectionGroup","readTime","prefixPath","documentId"],eS=["canonicalId","targetId"],Ww=["targetId","path"],hF=["path","targetId"],tS=["collectionId","parent"],fF=["indexId","uid"],By=["uid","sequenceNumber"],Hy=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],qw=["indexId","uid","orderedDocumentKey"],Yw=["userId","collectionPath","documentId"],Zw=["userId","collectionPath","largestBatchId"],pF=["userId","collectionGroup","largestBatchId"],nS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ak=[...nS,"documentOverlays"],iS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],rS=iS,sS=[...rS,"indexConfiguration","indexState","indexEntries"];class oS extends sh{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Sr(n,e){const t=Ze(n);return Ko.M(t.ht,e)}function Tk(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function cc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Kw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class ti{constructor(e,t){this.comparator=e,this.root=t||ns.EMPTY}insert(e,t){return new ti(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ns.BLACK,null,null))}remove(e){return new ti(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ns.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dp(this.root,e,this.comparator,!1)}getReverseIterator(){return new dp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dp(this.root,e,this.comparator,!0)}}class dp{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ns{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??ns.RED,this.left=r??ns.EMPTY,this.right=s??ns.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new ns(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ns.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ns.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ns.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ns.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ut();const e=this.left.check();if(e!==this.right.check())throw ut();return e+(this.isRed()?0:1)}}ns.EMPTY=null,ns.RED=!0,ns.BLACK=!1,ns.EMPTY=new class{constructor(){this.size=0}get key(){throw ut()}get value(){throw ut()}get color(){throw ut()}get left(){throw ut()}get right(){throw ut()}copy(n,e,t,i,r){return this}insert(n,e,t){return new ns(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class gi{constructor(e){this.comparator=e,this.data=new ti(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Mk(this.data.getIterator())}getIteratorFrom(e){return new Mk(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof gi)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new gi(this.comparator);return t.data=e,t}}class Mk{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ym(n){return n.hasNext()?n.getNext():void 0}class Eo{constructor(e){this.fields=e,e.sort(Ci.comparator)}static empty(){return new Eo([])}unionWith(e){let t=new gi(Ci.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Eo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return cp(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class kk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ir{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new kk("Invalid base64 string: "+r):r}}(e);return new Ir(t)}static fromUint8Array(e){const t=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(e);return new Ir(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Yt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ir.EMPTY_BYTE_STRING=new Ir("");const mF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lh(n){if(Dt(!!n),"string"==typeof n){let e=0;const t=mF.exec(n);if(Dt(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Vn(n.seconds),nanos:Vn(n.nanos)}}function Vn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ca(n){return"string"==typeof n?Ir.fromBase64String(n):Ir.fromUint8Array(n)}function Uy(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function vm(n){const e=n.mapValue.fields.__previous_value__;return Uy(e)?vm(e):e}function ch(n){const e=lh(n.mapValue.fields.__local_write_time__.timestampValue);return new pi(e.seconds,e.nanos)}class aS{constructor(e,t,i,r,s,o,d,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m}}class ol{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ol("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ol&&e.projectId===this.projectId&&e.database===this.database}}const Fu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Da={nullValue:"NULL_VALUE"};function uc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Uy(n)?4:jy(n)?9007199254740991:10:ut()}function al(n,e){if(n===e)return!0;const t=uc(n);if(t!==uc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ch(n).isEqual(ch(e));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=lh(i.timestampValue),o=lh(r.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return r=e,Ca(n.bytesValue).isEqual(Ca(r.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,r){return Vn(i.geoPointValue.latitude)===Vn(r.geoPointValue.latitude)&&Vn(i.geoPointValue.longitude)===Vn(r.geoPointValue.longitude)}(n,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Vn(i.integerValue)===Vn(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=Vn(i.doubleValue),o=Vn(r.doubleValue);return s===o?ah(s)===ah(o):isNaN(s)&&isNaN(o)}return!1}(n,e);case 9:return cp(n.arrayValue.values||[],e.arrayValue.values||[],al);case 10:return function(i,r){const s=i.mapValue.fields||{},o=r.mapValue.fields||{};if(Tk(s)!==Tk(o))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===o[d]||!al(s[d],o[d])))return!1;return!0}(n,e);default:return ut()}var r}function bm(n,e){return void 0!==(n.values||[]).find(t=>al(t,e))}function dc(n,e){if(n===e)return 0;const t=uc(n),i=uc(e);if(t!==i)return Yt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Yt(n.booleanValue,e.booleanValue);case 2:return function(r,s){const o=Vn(r.integerValue||r.doubleValue),d=Vn(s.integerValue||s.doubleValue);return o<d?-1:o>d?1:o===d?0:isNaN(o)?isNaN(d)?0:-1:1}(n,e);case 3:return lS(n.timestampValue,e.timestampValue);case 4:return lS(ch(n),ch(e));case 5:return Yt(n.stringValue,e.stringValue);case 6:return function(r,s){const o=Ca(r),d=Ca(s);return o.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(r,s){const o=r.split("/"),d=s.split("/");for(let f=0;f<o.length&&f<d.length;f++){const m=Yt(o[f],d[f]);if(0!==m)return m}return Yt(o.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,s){const o=Yt(Vn(r.latitude),Vn(s.latitude));return 0!==o?o:Yt(Vn(r.longitude),Vn(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(r,s){const o=r.values||[],d=s.values||[];for(let f=0;f<o.length&&f<d.length;++f){const m=dc(o[f],d[f]);if(m)return m}return Yt(o.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(r,s){if(r===Fu.mapValue&&s===Fu.mapValue)return 0;if(r===Fu.mapValue)return 1;if(s===Fu.mapValue)return-1;const o=r.fields||{},d=Object.keys(o),f=s.fields||{},m=Object.keys(f);d.sort(),m.sort();for(let v=0;v<d.length&&v<m.length;++v){const C=Yt(d[v],m[v]);if(0!==C)return C;const A=dc(o[d[v]],f[m[v]]);if(0!==A)return A}return Yt(d.length,m.length)}(n.mapValue,e.mapValue);default:throw ut()}}function lS(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Yt(n,e);const t=lh(n),i=lh(e),r=Yt(t.seconds,i.seconds);return 0!==r?r:Yt(t.nanos,i.nanos)}function hp(n){return fp(n)}function fp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=lh(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ca(n.bytesValue).toBase64():"referenceValue"in n?it.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const o of i.values||[])s?s=!1:r+=",",r+=fp(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",o=!0;for(const d of r)o?o=!1:s+=",",s+=`${d}:${fp(i.fields[d])}`;return s+"}"}(n.mapValue):ut();var e}function fc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Lu(n){return!!n&&"integerValue"in n}function uh(n){return!!n&&"arrayValue"in n}function wm(n){return!!n&&"nullValue"in n}function Qw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Em(n){return!!n&&"mapValue"in n}function dh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return cc(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=dh(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=dh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function jy(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function cS(n){return"nullValue"in n?Da:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?fc(ol.empty(),it.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ut()}function Xw(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?fc(ol.empty(),it.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Fu:ut()}function uS(n,e){const t=dc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function xk(n,e){const t=dc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class jr{constructor(e){this.value=e}static empty(){return new jr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Em(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=dh(t)}setAll(e){let t=Ci.emptyPath(),i={},r=[];e.forEach((o,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,i,r),i={},r=[],t=d.popLast()}o?i[d.lastSegment()]=dh(o):r.push(d.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());Em(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return al(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Em(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){cc(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new jr(dh(this.value))}}function Jw(n){const e=[];return cc(n.fields,(t,i)=>{const r=new Ci([t]);if(Em(i)){const s=Jw(i.mapValue).fields;if(0===s.length)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new Eo(e)}class ai{constructor(e,t,i,r,s,o,d){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=d}static newInvalidDocument(e){return new ai(e,0,St.min(),St.min(),St.min(),jr.empty(),0)}static newFoundDocument(e,t,i,r){return new ai(e,1,t,St.min(),i,r,0)}static newNoDocument(e,t){return new ai(e,2,t,St.min(),St.min(),jr.empty(),0)}static newUnknownDocument(e,t){return new ai(e,3,t,St.min(),St.min(),jr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(St.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=St.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ai&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ai(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class pc{constructor(e,t){this.position=e,this.inclusive=t}}function eE(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],o=n.position[r];if(i=s.field.isKeyField()?it.comparator(it.fromName(o.referenceValue),t.key):dc(o,t.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function dS(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!al(n.position[t],e.position[t]))return!1;return!0}class Ar{constructor(e,t="asc"){this.field=e,this.dir=t}}function hS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class fS{}class yn extends fS{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,i):new Rk(e,t,i):"array-contains"===t?new Nk(e,i):"in"===t?new Sa(e,i):"not-in"===t?new oE(e,i):"array-contains-any"===t?new Pk(e,i):new yn(e,t,i)}static createKeyFieldInFilter(e,t,i){return"in"===t?new Ok(e,i):new mS(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(dc(t,this.value)):null!==t&&uc(this.value)===uc(t)&&this.matchesComparison(dc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ut()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Bn extends fS{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Bn(e,t)}matches(e){return Vu(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Vu(n){return"and"===n.op}function zy(n){return"or"===n.op}function tE(n){return pS(n)&&Vu(n)}function pS(n){for(const e of n.filters)if(e instanceof Bn)return!1;return!0}function nE(n){if(n instanceof yn)return n.field.canonicalString()+n.op.toString()+hp(n.value);if(tE(n))return n.filters.map(e=>nE(e)).join(",");{const e=n.filters.map(t=>nE(t)).join(",");return`${n.op}(${e})`}}function iE(n,e){return n instanceof yn?(t=n,(i=e)instanceof yn&&t.op===i.op&&t.field.isEqual(i.field)&&al(t.value,i.value)):n instanceof Bn?function(t,i){return i instanceof Bn&&t.op===i.op&&t.filters.length===i.filters.length&&t.filters.reduce((r,s,o)=>r&&iE(s,i.filters[o]),!0)}(n,e):void ut();var t,i}function gS(n,e){const t=n.filters.concat(e);return Bn.create(t,n.op)}function rE(n){return n instanceof yn?`${(e=n).field.canonicalString()} ${e.op} ${hp(e.value)}`:n instanceof Bn?function(e){return e.op.toString()+" {"+e.getFilters().map(rE).join(" ,")+"}"}(n):"Filter";var e}class Rk extends yn{constructor(e,t,i){super(e,t,i),this.key=it.fromName(i.referenceValue)}matches(e){const t=it.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ok extends yn{constructor(e,t){super(e,"in",t),this.keys=sE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class mS extends yn{constructor(e,t){super(e,"not-in",t),this.keys=sE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function sE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>it.fromName(i.referenceValue))}class Nk extends yn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return uh(t)&&bm(t.arrayValue,this.value)}}class Sa extends yn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&bm(this.value.arrayValue,t)}}class oE extends yn{constructor(e,t){super(e,"not-in",t)}matches(e){if(bm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!bm(this.value.arrayValue,t)}}class Pk extends yn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!uh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>bm(this.value.arrayValue,i))}}class Fk{constructor(e,t=null,i=[],r=[],s=null,o=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=d,this.dt=null}}function _S(n,e=null,t=[],i=[],r=null,s=null,o=null){return new Fk(n,e,t,i,r,s,o)}function Bu(n){const e=Ze(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>nE(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),Vy(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>hp(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>hp(i)).join(",")),e.dt=t}return e.dt}function Cm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!hS(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!iE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!dS(n.startAt,e.startAt)&&dS(n.endAt,e.endAt)}function Gy(n){return it.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function $y(n,e){return n.filters.filter(t=>t instanceof yn&&t.field.isEqual(e))}function Wy(n,e,t){let i=Da,r=!0;for(const s of $y(n,e)){let o=Da,d=!0;switch(s.op){case"<":case"<=":o=cS(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,d=!1;break;case"!=":case"not-in":o=Da}uS({value:i,inclusive:r},{value:o,inclusive:d})<0&&(i=o,r=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];uS({value:i,inclusive:r},{value:o,inclusive:t.inclusive})<0&&(i=o,r=t.inclusive);break}return{value:i,inclusive:r}}function yS(n,e,t){let i=Fu,r=!0;for(const s of $y(n,e)){let o=Fu,d=!0;switch(s.op){case">=":case">":o=Xw(s.value),d=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,d=!1;break;case"!=":case"not-in":o=Fu}xk({value:i,inclusive:r},{value:o,inclusive:d})>0&&(i=o,r=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];xk({value:i,inclusive:r},{value:o,inclusive:t.inclusive})>0&&(i=o,r=t.inclusive);break}return{value:i,inclusive:r}}class gc{constructor(e,t=null,i=[],r=[],s=null,o="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=d,this.endAt=f,this.wt=null,this._t=null}}function Dm(n,e,t,i,r,s,o,d){return new gc(n,e,t,i,r,s,o,d)}function Hu(n){return new gc(n)}function Sm(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function vS(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function pp(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function bS(n){return null!==n.collectionGroup}function Uu(n){const e=Ze(n);if(null===e.wt){e.wt=[];const t=pp(e),i=vS(e);if(null!==t&&null===i)t.isKeyField()||e.wt.push(new Ar(t)),e.wt.push(new Ar(Ci.keyField(),"asc"));else{let r=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Ar(Ci.keyField(),s))}}}return e.wt}function is(n){const e=Ze(n);if(!e._t)if("F"===e.limitType)e._t=_S(e.path,e.collectionGroup,Uu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Uu(e))t.push(new Ar(s.field,"desc"===s.dir?"asc":"desc"));const i=e.endAt?new pc(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new pc(e.startAt.position,e.startAt.inclusive):null;e._t=_S(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}return e._t}function qy(n,e){e.getFirstInequalityField(),pp(n);const t=n.filters.concat([e]);return new gc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Im(n,e,t){return new gc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hh(n,e){return Cm(is(n),is(e))&&n.limitType===e.limitType}function ll(n){return`${Bu(is(n))}|lt:${n.limitType}`}function gp(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(i=>rE(i)).join(", ")}]`),Vy(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(i=>{return`${(r=i).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>hp(i)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>hp(i)).join(",")),`Target(${t})`}(is(n))}; limitType=${n.limitType})`}function ju(n,e){return e.isFoundDocument()&&function(t,i){const r=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(r):it.isDocumentKey(t.path)?t.path.isEqual(r):t.path.isImmediateParentOf(r)}(n,e)&&function(t,i){for(const r of Uu(t))if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,e)&&function(t,i){for(const r of t.filters)if(!r.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(r,s,o){const d=eE(r,s,o);return r.inclusive?d<=0:d<0}(t.startAt,Uu(t),i)||t.endAt&&!function(r,s,o){const d=eE(r,s,o);return r.inclusive?d>=0:d>0}(t.endAt,Uu(t),i)));var t,i}function mp(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function wS(n){return(e,t)=>{let i=!1;for(const r of Uu(n)){const s=aE(r,e,t);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function aE(n,e,t){const i=n.field.isKeyField()?it.comparator(e.key,t.key):function(r,s,o){const d=s.data.field(r),f=o.data.field(r);return null!==d&&null!==f?dc(d,f):ut()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ut()}}class cl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){cc(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return Kw(this.inner)}size(){return this.innerSize}}const Lk=new ti(it.comparator);function Xs(){return Lk}const _p=new ti(it.comparator);function Am(...n){let e=_p;for(const t of n)e=e.insert(t.key,t);return e}function Vk(n){let e=_p;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function ul(){return Tm()}function Bk(){return Tm()}function Tm(){return new cl(n=>n.toString(),(n,e)=>n.isEqual(e))}const Hk=new ti(it.comparator),Uk=new gi(it.comparator);function Qt(...n){let e=Uk;for(const t of n)e=e.add(t);return e}const lE=new gi(Yt);function cE(){return lE}function Yy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ah(e)?"-0":e}}function ES(n){return{integerValue:""+n}}function CS(n,e){return J0(e)?ES(e):Yy(n,e)}class Zy{constructor(){this._=void 0}}function jk(n,e,t){return n instanceof mc?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&Uy(r)&&(r=vm(r)),r&&(s.fields.__previous_value__=r),{mapValue:s}}(t,e):n instanceof Co?Gk(n,e):n instanceof Ia?SS(n,e):function(i,r){const s=DS(i,r),o=Ky(s)+Ky(i.gt);return Lu(s)&&Lu(i.gt)?ES(o):Yy(i.serializer,o)}(n,e)}function zk(n,e,t){return n instanceof Co?Gk(n,e):n instanceof Ia?SS(n,e):t}function DS(n,e){return n instanceof yp?Lu(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class mc extends Zy{}class Co extends Zy{constructor(e){super(),this.elements=e}}function Gk(n,e){const t=IS(e);for(const i of n.elements)t.some(r=>al(r,i))||t.push(i);return{arrayValue:{values:t}}}class Ia extends Zy{constructor(e){super(),this.elements=e}}function SS(n,e){let t=IS(e);for(const i of n.elements)t=t.filter(r=>!al(r,i));return{arrayValue:{values:t}}}class yp extends Zy{constructor(e,t){super(),this.serializer=e,this.gt=t}}function Ky(n){return Vn(n.integerValue||n.doubleValue)}function IS(n){return uh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Js{constructor(e,t){this.field=e,this.transform=t}}class rs{constructor(e,t){this.version=e,this.transformResults=t}}class Rn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Rn}static exists(e){return new Rn(void 0,e)}static updateTime(e){return new Rn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fh(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Ts{}function Qy(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new yh(n.key,Rn.none()):new Aa(n.key,n.data,Rn.none());{const t=n.data,i=jr.empty();let r=new gi(Ci.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?i.delete(s):i.set(s,o),r=r.add(s)}return new eo(n.key,i,new Eo(r.toArray()),Rn.none())}}function vp(n,e,t){n instanceof Aa?function(i,r,s){const o=i.value.clone(),d=mh(i.fieldTransforms,r,s.transformResults);o.setAll(d),r.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(n,e,t):n instanceof eo?function(i,r,s){if(!fh(i.precondition,r))return void r.convertToUnknownDocument(s.version);const o=mh(i.fieldTransforms,r,s.transformResults),d=r.data;d.setAll(gh(i)),d.setAll(o),r.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function dl(n,e,t,i){return n instanceof Aa?function(r,s,o,d){if(!fh(r.precondition,s))return o;const f=r.value.clone(),m=_h(r.fieldTransforms,d,s);return f.setAll(m),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null}(n,e,t,i):n instanceof eo?function(r,s,o,d){if(!fh(r.precondition,s))return o;const f=_h(r.fieldTransforms,d,s),m=s.data;return m.setAll(gh(r)),m.setAll(f),s.convertToFoundDocument(s.version,m).setHasLocalMutations(),null===o?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(v=>v.field))}(n,e,t,i):(o=t,fh(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function bp(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),s=DS(i.transform,r||null);null!=s&&(null===t&&(t=jr.empty()),t.set(i.field,s))}return t||null}function ph(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&cp(t,i,(r,s)=>function Mm(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof Co&&i instanceof Co||t instanceof Ia&&i instanceof Ia?cp(t.elements,i.elements,al):t instanceof yp&&i instanceof yp?al(t.gt,i.gt):t instanceof mc&&i instanceof mc);var t,i}(r,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}class Aa extends Ts{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class eo extends Ts{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function gh(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function mh(n,e,t){const i=new Map;Dt(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],o=s.transform,d=e.data.field(s.field);i.set(s.field,zk(o,d,t[r]))}return i}function _h(n,e,t){const i=new Map;for(const r of n){const s=r.transform,o=t.data.field(r.field);i.set(r.field,jk(s,o,e))}return i}class yh extends Ts{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Xy extends Ts{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Jy{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&vp(s,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=dl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=dl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Bk();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let d=this.applyToLocalView(o,s.mutatedFields);d=t.has(r.key)?null:d;const f=Qy(o,d);null!==f&&i.set(r.key,f),o.isValidDocument()||o.convertToNoDocument(St.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Qt())}isEqual(e){return this.batchId===e.batchId&&cp(this.mutations,e.mutations,(t,i)=>ph(t,i))&&cp(this.baseMutations,e.baseMutations,(t,i)=>ph(t,i))}}class ev{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Dt(e.mutations.length===i.length);let r=Hk;const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new ev(e,t,i,r)}}class tv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class TS{constructor(e,t){this.count=e,this.unchangedNames=t}}var zi,vn;function MS(n){switch(n){default:return ut();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function kS(n){if(void 0===n)return sr("GRPC error has no .code"),fe.UNKNOWN;switch(n){case zi.OK:return fe.OK;case zi.CANCELLED:return fe.CANCELLED;case zi.UNKNOWN:return fe.UNKNOWN;case zi.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case zi.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case zi.INTERNAL:return fe.INTERNAL;case zi.UNAVAILABLE:return fe.UNAVAILABLE;case zi.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case zi.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case zi.NOT_FOUND:return fe.NOT_FOUND;case zi.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case zi.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case zi.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case zi.ABORTED:return fe.ABORTED;case zi.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case zi.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case zi.DATA_LOSS:return fe.DATA_LOSS;default:return ut()}}(vn=zi||(zi={}))[vn.OK=0]="OK",vn[vn.CANCELLED=1]="CANCELLED",vn[vn.UNKNOWN=2]="UNKNOWN",vn[vn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vn[vn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vn[vn.NOT_FOUND=5]="NOT_FOUND",vn[vn.ALREADY_EXISTS=6]="ALREADY_EXISTS",vn[vn.PERMISSION_DENIED=7]="PERMISSION_DENIED",vn[vn.UNAUTHENTICATED=16]="UNAUTHENTICATED",vn[vn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vn[vn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vn[vn.ABORTED=10]="ABORTED",vn[vn.OUT_OF_RANGE=11]="OUT_OF_RANGE",vn[vn.UNIMPLEMENTED=12]="UNIMPLEMENTED",vn[vn.INTERNAL=13]="INTERNAL",vn[vn.UNAVAILABLE=14]="UNAVAILABLE",vn[vn.DATA_LOSS=15]="DATA_LOSS";class nv{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return iv}static getOrCreateInstance(){return null===iv&&(iv=new nv),iv}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let iv=null;function uE(){return new TextEncoder}const dE=new Zs([4294967295,4294967295],0);function rv(n){const e=uE().encode(n),t=new lp;return t.update(e),new Uint8Array(t.digest())}function xS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Zs([t,i],0),new Zs([r,s],0)]}class wp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new zu(`Invalid padding: ${t}`);if(i<0)throw new zu(`Invalid hash count: ${i}`);if(e.length>0&&0===this.hashCount)throw new zu(`Invalid hash count: ${i}`);if(0===e.length&&0!==t)throw new zu(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Zs.fromNumber(this.It)}Et(e,t,i){let r=e.add(t.multiply(Zs.fromNumber(i)));return 1===r.compare(dE)&&(r=new Zs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=rv(e),[i,r]=xS(t);for(let s=0;s<this.hashCount;s++){const o=this.Et(i,r,s);if(!this.At(o))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new wp(s,r,t);return i.forEach(d=>o.insert(d)),o}insert(e){if(0===this.It)return;const t=rv(e),[i,r]=xS(t);for(let s=0;s<this.hashCount;s++){const o=this.Et(i,r,s);this.Rt(o)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class zu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class vh{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,km.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new vh(St.min(),r,new ti(Yt),Xs(),Qt())}}class km{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new km(i,t,Qt(),Qt(),Qt())}}class bh{constructor(e,t,i,r){this.Pt=e,this.removedTargetIds=t,this.key=i,this.bt=r}}class xm{constructor(e,t){this.targetId=e,this.Vt=t}}class sv{constructor(e,t,i=Ir.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class hE{constructor(){this.St=0,this.Dt=gE(),this.Ct=Ir.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Qt(),t=Qt(),i=Qt();return this.Dt.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:ut()}}),new km(this.Ct,this.xt,e,t,i)}Ft(){this.Nt=!1,this.Dt=gE()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class fE{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Xs(),this.zt=pE(),this.Wt=new ti(Yt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const i=this.Zt(t);switch(e.state){case 0:this.te(t)&&i.$t(e.resumeToken);break;case 1:i.Ut(),i.kt||i.Ft(),i.$t(e.resumeToken);break;case 2:i.Ut(),i.kt||this.removeTarget(t);break;case 3:this.te(t)&&(i.Kt(),i.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),i.$t(e.resumeToken));break;default:ut()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((i,r)=>{this.te(r)&&t(r)})}ne(e){var t;const i=e.targetId,r=e.Vt.count,s=this.se(i);if(s){const o=s.target;if(Gy(o))if(0===r){const d=new it(o.path);this.Yt(i,d,ai.newNoDocument(d,St.min()))}else Dt(1===r);else{const d=this.ie(i);if(d!==r){const f=this.re(e,d);0!==f&&(this.ee(i),this.Wt=this.Wt.insert(i,2===f?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=nv.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(m,v,C){var A,M,P,H,U,K;const _e={localCacheCount:v,existenceFilterCount:C.count},Oe=C.unchangedNames;return Oe&&(_e.bloomFilter={applied:0===m,hashCount:null!==(A=Oe?.hashCount)&&void 0!==A?A:0,bitmapLength:null!==(H=null===(P=null===(M=Oe?.bits)||void 0===M?void 0:M.bitmap)||void 0===P?void 0:P.length)&&void 0!==H?H:0,padding:null!==(K=null===(U=Oe?.bits)||void 0===U?void 0:U.padding)&&void 0!==K?K:0}),_e}(f,d,e.Vt))}}}}re(e,t){const{unchangedNames:i,count:r}=e.Vt;if(!i||!i.bits)return 1;const{bits:{bitmap:s="",padding:o=0},hashCount:d=0}=i;let f,m;try{f=Ca(s).toUint8Array()}catch(v){if(v instanceof kk)return wo("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw v}try{m=new wp(f,o,d)}catch(v){return wo(v instanceof zu?"BloomFilter error: ":"Applying bloom filter failed: ",v),1}return 0===m.It?1:r!==t-this.oe(e.targetId,m)?2:0}oe(e,t){const i=this.Gt.getRemoteKeysForTarget(e);let r=0;return i.forEach(s=>{const o=this.Gt.ue(),d=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.vt(d)||(this.Yt(e,s,null),r++)}),r}ce(e){const t=new Map;this.Qt.forEach((s,o)=>{const d=this.se(o);if(d){if(s.current&&Gy(d.target)){const f=new it(d.target.path);null!==this.jt.get(f)||this.ae(o,f)||this.Yt(o,f,ai.newNoDocument(f,e))}s.Mt&&(t.set(o,s.Ot()),s.Ft())}});let i=Qt();this.zt.forEach((s,o)=>{let d=!0;o.forEachWhile(f=>{const m=this.se(f);return!m||"TargetPurposeLimboResolution"===m.purpose||(d=!1,!1)}),d&&(i=i.add(s))}),this.jt.forEach((s,o)=>o.setReadTime(e));const r=new vh(e,t,this.Wt,this.jt,i);return this.jt=Xs(),this.zt=pE(),this.Wt=new ti(Yt),r}Jt(e,t){if(!this.te(e))return;const i=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,i),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,i){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),i&&(this.jt=this.jt.insert(t,i))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new hE,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new gi(Yt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Ge("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new hE),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function pE(){return new ti(it.comparator)}function gE(){return new ti(it.comparator)}const mE={asc:"ASCENDING",desc:"DESCENDING"},_E={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$k={and:"AND",or:"OR"};class RS{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ov(n,e){return n.useProto3Json||Vy(e)?e:{value:e}}function wh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Wk(n,e){return wh(n,e.toTimestamp())}function Ni(n){return Dt(!!n),St.fromTimestamp(function(e){const t=lh(e);return new pi(t.seconds,t.nanos)}(n))}function av(n,e){return(t=n,new wn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function vE(n){const e=wn.fromString(n);return Dt(IE(e)),e}function Eh(n,e){return av(n.databaseId,e.path)}function Ta(n,e){const t=vE(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new it(wE(t))}function lv(n,e){return av(n.databaseId,e)}function bE(n){const e=vE(n);return 4===e.length?wn.emptyPath():wE(e)}function Ep(n){return new wn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function wE(n){return Dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function EE(n,e,t){return{name:Eh(n,e),fields:t.value.mapValue.fields}}function CE(n,e,t){const i=Ta(n,e.name),r=Ni(e.updateTime),s=e.createTime?Ni(e.createTime):St.min(),o=new jr({mapValue:{fields:e.fields}}),d=ai.newFoundDocument(i,r,s,o);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Rm(n,e){let t;if(e instanceof Aa)t={update:EE(n,e.key,e.value)};else if(e instanceof yh)t={delete:Eh(n,e.key)};else if(e instanceof eo)t={update:EE(n,e.key,e.data),updateMask:Zk(e.fieldMask)};else{if(!(e instanceof Xy))return ut();t={verify:Eh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(r,s){const o=s.transform;if(o instanceof mc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Co)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Ia)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof yp)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw ut()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(r=e.precondition).updateTime?{updateTime:Wk(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:ut()),t;var r}function DE(n,e){const t=e.currentDocument?void 0!==(r=e.currentDocument).updateTime?Rn.updateTime(Ni(r.updateTime)):void 0!==r.exists?Rn.exists(r.exists):Rn.none():Rn.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(s,o){let d=null;"setToServerValue"in o?(Dt("REQUEST_TIME"===o.setToServerValue),d=new mc):"appendMissingElements"in o?d=new Co(o.appendMissingElements.values||[]):"removeAllFromArray"in o?d=new Ia(o.removeAllFromArray.values||[]):"increment"in o?d=new yp(s,o.increment):ut();const f=Ci.fromServerFormat(o.fieldPath);return new Js(f,d)}(n,r)):[];var r;if(e.update){const r=Ta(n,e.update.name),s=new jr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Eo((e.updateMask.fieldPaths||[]).map(m=>Ci.fromServerFormat(m)));return new eo(r,s,o,t,i)}return new Aa(r,s,t,i)}if(e.delete){const r=Ta(n,e.delete);return new yh(r,t)}if(e.verify){const r=Ta(n,e.verify);return new Xy(r,t)}return ut()}function PS(n,e){return{documents:[lv(n,e.path)]}}function Gi(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=lv(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=lv(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(f){if(0!==f.length)return BS(Bn.create(f,"and"))}(e.filters);r&&(t.structuredQuery.where=r);const s=function(f){if(0!==f.length)return f.map(m=>{return{field:_c((v=m).field),direction:LS(v.dir)};var v})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=ov(n,e.limit);var d,f;return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(f=e.endAt).inclusive,values:f.position}),t}function SE(n){let e=bE(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){Dt(1===i);const v=t.from[0];v.allDescendants?r=v.collectionId:e=e.child(v.collectionId)}let s=[];t.where&&(s=function(v){const C=FS(v);return C instanceof Bn&&tE(C)?C.getFilters():[C]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(v=>{return new Ar(Ma((C=v).field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction));var C}));let d=null;t.limit&&(d=function(v){let C;return C="object"==typeof v?v.value:v,Vy(C)?null:C}(t.limit));let f=null;var v;t.startAt&&(f=new pc((v=t.startAt).values||[],!!v.before));let m=null;return t.endAt&&(m=function(v){return new pc(v.values||[],!v.before)}(t.endAt)),Dm(e,r,o,s,d,"F",f,m)}function FS(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ma(e.unaryFilter.field);return yn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const i=Ma(e.unaryFilter.field);return yn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ma(e.unaryFilter.field);return yn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Ma(e.unaryFilter.field);return yn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ut()}}(n):void 0!==n.fieldFilter?yn.create(Ma((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ut()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Bn.create(e.compositeFilter.filters.map(t=>FS(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ut()}}(e.compositeFilter.op))}(n):ut();var e}function LS(n){return mE[n]}function Yk(n){return _E[n]}function VS(n){return $k[n]}function _c(n){return{fieldPath:n.canonicalString()}}function Ma(n){return Ci.fromServerFormat(n.fieldPath)}function BS(n){return n instanceof yn?function(e){if("=="===e.op){if(Qw(e.value))return{unaryFilter:{field:_c(e.field),op:"IS_NAN"}};if(wm(e.value))return{unaryFilter:{field:_c(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Qw(e.value))return{unaryFilter:{field:_c(e.field),op:"IS_NOT_NAN"}};if(wm(e.value))return{unaryFilter:{field:_c(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_c(e.field),op:Yk(e.op),value:e.value}}}(n):n instanceof Bn?function(e){const t=e.getFilters().map(i=>BS(i));return 1===t.length?t[0]:{compositeFilter:{op:VS(e.op),filters:t}}}(n):ut()}function Zk(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function IE(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class yc{constructor(e,t,i,r,s=St.min(),o=St.min(),d=Ir.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new yc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new yc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class AE{constructor(e){this.fe=e}}function cv(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Cp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:Eh(r=n.fe,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:wh(r,s.version.toTimestamp()),createTime:wh(r,s.createTime.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:ss(e.version)};else{if(!e.isUnknownDocument())return ut();i.unknownDocument={path:t.path.toArray(),version:ss(e.version)}}var r,s;return i}function Cp(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ss(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ch(n){const e=new pi(n.seconds,n.nanoseconds);return St.fromTimestamp(e)}function Dh(n,e){const t=(e.baseMutations||[]).map(s=>DE(n.fe,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(o.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const i=e.mutations.map(s=>DE(n.fe,s)),r=pi.fromMillis(e.localWriteTimeMs);return new Jy(e.batchId,r,t,i)}function to(n){const e=Ch(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ch(n.lastLimboFreeSnapshotVersion):St.min();let i;var r;return void 0!==n.query.documents?(Dt(1===(r=n.query).documents.length),i=is(Hu(bE(r.documents[0])))):i=is(SE(n.query)),new yc(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ir.fromBase64String(n.resumeToken))}function Qo(n,e){const t=ss(e.snapshotVersion),i=ss(e.lastLimboFreeSnapshotVersion);let r;r=Gy(e.target)?PS(n.fe,e.target):Gi(n.fe,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Bu(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function Do(n){const e=SE({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Im(e,e.limit,"L"):e}function uv(n,e){return new tv(e.largestBatchId,DE(n.fe,e.overlayMutation))}function TE(n,e){const t=e.path.lastSegment();return[n,As(e.path.popLast()),t]}function HS(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:ss(i.readTime),documentKey:As(i.documentKey.path),largestBatchId:i.largestBatchId}}class Kk{getBundleMetadata(e,t){return US(e).get(t).next(i=>{if(i)return{id:(r=i).bundleId,createTime:Ch(r.createTime),version:r.version};var r})}saveBundleMetadata(e,t){return US(e).put({bundleId:(i=t).id,createTime:ss(Ni(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return jS(e).get(t).next(i=>{if(i)return{name:(r=i).name,query:Do(r.bundledQuery),readTime:Ch(r.readTime)};var r})}saveNamedQuery(e,t){return jS(e).put({name:(i=t).name,readTime:ss(Ni(i.readTime)),bundledQuery:i.bundledQuery});var i}}function US(n){return Sr(n,"bundles")}function jS(n){return Sr(n,"namedQueries")}class Dp{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new Dp(e,t.uid||"")}getOverlay(e,t){return vc(e).get(TE(this.userId,t)).next(i=>i?uv(this.serializer,i):null)}getOverlays(e,t){const i=ul();return ae.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){const r=[];return i.forEach((s,o)=>{const d=new tv(t,o);r.push(this.we(e,d))}),ae.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(o=>r.add(As(o.getCollectionPath())));const s=[];return r.forEach(o=>{const d=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);s.push(vc(e).J("collectionPathOverlayIndex",d))}),ae.waitFor(s)}getOverlaysForCollection(e,t,i){const r=ul(),s=As(t),o=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return vc(e).j("collectionPathOverlayIndex",o).next(d=>{for(const f of d){const m=uv(this.serializer,f);r.set(m.getKey(),m)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const s=ul();let o;const d=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return vc(e).X({index:"collectionGroupOverlayIndex",range:d},(f,m,v)=>{const C=uv(this.serializer,m);s.size()<r||C.largestBatchId===o?(s.set(C.getKey(),C),o=C.largestBatchId):v.done()}).next(()=>s)}we(e,t){return vc(e).put(function(i,r,s){const[o,d,f]=TE(r,s.mutation.key);return{userId:r,collectionPath:d,documentId:f,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Rm(i.fe,s.mutation)}}(this.serializer,this.userId,t))}}function vc(n){return Sr(n,"documentOverlays")}class Sh{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Vn(e.integerValue));else if("doubleValue"in e){const i=Vn(e.doubleValue);isNaN(i)?this.ye(t,13):(this.ye(t,15),ah(i)?t.pe(0):t.pe(i))}else if("timestampValue"in e){const i=e.timestampValue;this.ye(t,20),"string"==typeof i?t.Ie(i):(t.Ie(`${i.seconds||""}`),t.pe(i.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Ca(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.ye(t,45),t.pe(i.latitude||0),t.pe(i.longitude||0)}else"mapValue"in e?jy(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):ut()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const i=e.fields||{};this.ye(t,55);for(const r of Object.keys(i))this.Te(r,t),this.me(i[r],t)}Pe(e,t){const i=e.values||[];this.ye(t,50);for(const r of i)this.me(r,t)}ve(e,t){this.ye(t,37),it.fromName(e).path.forEach(i=>{this.ye(t,60),this.be(i,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function zS(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function GS(n){const e=64-function(t){let i=0;for(let r=0;r<8;++r){const s=zS(255&t[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(e/8)}Sh.Ve=new Sh;class $S{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.De(i.value),i=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ne(i.value),i=t.next();this.ke()}Me(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{const r=t.codePointAt(0);this.De(240|r>>>18),this.De(128|63&r>>>12),this.De(128|63&r>>>6),this.De(128|63&r)}}this.Ce()}$e(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{const r=t.codePointAt(0);this.Ne(240|r>>>18),this.Ne(128|63&r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r)}}this.ke()}Oe(e){const t=this.Fe(e),i=GS(t);this.Be(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Le(e){const t=this.Fe(e),i=GS(t);this.Be(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class WS{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class dv{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Om{constructor(){this.je=new $S,this.ze=new WS(this.je),this.We=new dv(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Gu{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new Gu(this.indexId,this.documentKey,this.arrayValue,i)}}function bc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=hv(n.arrayValue,e.arrayValue),0!==t?t:(t=hv(n.directionalValue,e.directionalValue),0!==t?t:it.comparator(n.documentKey,e.documentKey)))}function hv(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class fv{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const i=t;i.isInequality()?this.Ze=i:this.Xe.push(i)}}tn(e){Dt(e.collectionGroup===this.collectionId);const t=Vw(e);if(void 0!==t&&!this.en(t))return!1;const i=ac(e);let r=new Set,s=0,o=0;for(;s<i.length&&this.en(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){const d=i[s];if(!this.nn(this.Ze,d)||!this.sn(this.Ye[o++],d))return!1}++s}for(;s<i.length;++s){const d=i[s];if(o>=this.Ye.length||!this.sn(this.Ye[o++],d))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function ME(n){var e,t;if(Dt(n instanceof yn||n instanceof Bn),n instanceof yn){if(n instanceof Sa){const r=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>yn.create(n.field,"==",s)))||[];return Bn.create(r,"or")}return n}const i=n.filters.map(r=>ME(r));return Bn.create(i,n.op)}function qS(n){if(0===n.getFilters().length)return[];const e=mv(ME(n));return Dt(kE(e)),pv(e)||gv(e)?[e]:e.getFilters()}function pv(n){return n instanceof yn}function gv(n){return n instanceof Bn&&tE(n)}function kE(n){return pv(n)||gv(n)||function(e){if(e instanceof Bn&&zy(e)){for(const t of e.getFilters())if(!pv(t)&&!gv(t))return!1;return!0}return!1}(n)}function mv(n){if(Dt(n instanceof yn||n instanceof Bn),n instanceof yn)return n;if(1===n.filters.length)return mv(n.filters[0]);const e=n.filters.map(i=>mv(i));let t=Bn.create(e,n.op);return t=Nm(t),kE(t)?t:(Dt(t instanceof Bn),Dt(Vu(t)),Dt(t.filters.length>1),t.filters.reduce((i,r)=>_v(i,r)))}function _v(n,e){let t;return Dt(n instanceof yn||n instanceof Bn),Dt(e instanceof yn||e instanceof Bn),t=n instanceof yn?e instanceof yn?Bn.create([n,e],"and"):xE(n,e):e instanceof yn?xE(e,n):function(i,r){if(Dt(i.filters.length>0&&r.filters.length>0),Vu(i)&&Vu(r))return gS(i,r.getFilters());const s=zy(i)?i:r,o=zy(i)?r:i,d=s.filters.map(f=>_v(f,o));return Bn.create(d,"or")}(n,e),Nm(t)}function xE(n,e){if(Vu(e))return gS(e,n.getFilters());{const t=e.filters.map(i=>_v(n,i));return Bn.create(t,"or")}}function Nm(n){if(Dt(n instanceof yn||n instanceof Bn),n instanceof yn)return n;const e=n.getFilters();if(1===e.length)return Nm(e[0]);if(pS(n))return n;const t=e.map(r=>Nm(r)),i=[];return t.forEach(r=>{r instanceof yn?i.push(r):r instanceof Bn&&(r.op===n.op?i.push(...r.filters):i.push(r))}),1===i.length?i[0]:Bn.create(i,n.op)}class Qk{constructor(){this.rn=new RE}addToCollectionParentIndex(e,t){return this.rn.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(Ks.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(Ks.min())}updateCollectionGroup(e,t,i){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class RE{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new gi(wn.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new gi(wn.comparator)).toArray()}}const yv=new Uint8Array(0);class Xk{constructor(e,t){this.user=e,this.databaseId=t,this.on=new RE,this.un=new cl(i=>Bu(i),(i,r)=>Cm(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const s={collectionId:i,parent:As(r)};return YS(e).put(s)}return ae.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[Lw(t),""],!1,!0);return YS(e).j(r).next(s=>{for(const o of s){if(o.collectionId!==t)break;i.push(Ea(o.parent))}return i})}addFieldIndex(e,t){const i=vv(e),r={indexId:(o=t).indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var o;delete r.indexId;const s=i.add(r);if(t.indexState){const o=Fm(e);return s.next(d=>{o.put(HS(d,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const i=vv(e),r=Fm(e),s=Pm(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=Pm(e);let r=!0;const s=new Map;return ae.forEach(this.cn(t),o=>this.an(e,o).next(d=>{r&&(r=!!d),s.set(o,d)})).next(()=>{if(r){let o=Qt();const d=[];return ae.forEach(s,(f,m)=>{var v;Ge("IndexedDbIndexManager",`Using index ${v=f,`id=${v.indexId}|cg=${v.collectionGroup}|f=${v.fields.map(Oe=>`${Oe.fieldPath}:${Oe.kind}`).join(",")}`} to execute ${Bu(t)}`);const C=function(Oe,je){const wt=Vw(je);if(void 0===wt)return null;for(const _t of $y(Oe,wt.fieldPath))switch(_t.op){case"array-contains-any":return _t.value.arrayValue.values||[];case"array-contains":return[_t.value]}return null}(m,f),A=function(Oe,je){const wt=new Map;for(const _t of ac(je))for(const Bt of $y(Oe,_t.fieldPath))switch(Bt.op){case"==":case"in":wt.set(_t.fieldPath.canonicalString(),Bt.value);break;case"not-in":case"!=":return wt.set(_t.fieldPath.canonicalString(),Bt.value),Array.from(wt.values())}return null}(m,f),M=function(Oe,je){const wt=[];let _t=!0;for(const Bt of ac(je)){const Wt=0===Bt.kind?Wy(Oe,Bt.fieldPath,Oe.startAt):yS(Oe,Bt.fieldPath,Oe.startAt);wt.push(Wt.value),_t&&(_t=Wt.inclusive)}return new pc(wt,_t)}(m,f),P=function(Oe,je){const wt=[];let _t=!0;for(const Bt of ac(je)){const Wt=0===Bt.kind?yS(Oe,Bt.fieldPath,Oe.endAt):Wy(Oe,Bt.fieldPath,Oe.endAt);wt.push(Wt.value),_t&&(_t=Wt.inclusive)}return new pc(wt,_t)}(m,f),H=this.hn(f,m,M),U=this.hn(f,m,P),K=this.ln(f,m,A),_e=this.fn(f.indexId,C,H,M.inclusive,U,P.inclusive,K);return ae.forEach(_e,Oe=>i.H(Oe,t.limit).next(je=>{je.forEach(wt=>{const _t=it.fromSegments(wt.documentKey);o.has(_t)||(o=o.add(_t),d.push(_t))})}))}).next(()=>d)}return ae.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:qS(Bn.create(e.filters,"and")).map(i=>_S(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,i,r,s,o,d){const f=(null!=t?t.length:1)*Math.max(i.length,s.length),m=f/(null!=t?t.length:1),v=[];for(let C=0;C<f;++C){const A=t?this.dn(t[C/m]):yv,M=this.wn(e,A,i[C%m],r),P=this._n(e,A,s[C%m],o),H=d.map(U=>this.wn(e,A,U,!0));v.push(...this.createRange(M,P,H))}return v}wn(e,t,i,r){const s=new Gu(e,it.empty(),t,i);return r?s:s.Je()}_n(e,t,i,r){const s=new Gu(e,it.empty(),t,i);return r?s.Je():s}an(e,t){const i=new fv(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let o=null;for(const d of s)i.tn(d)&&(!o||d.fields.length>o.fields.length)&&(o=d);return o})}getIndexType(e,t){let i=2;const r=this.cn(t);return ae.forEach(r,s=>this.an(e,s).next(o=>{o?0!==i&&o.fields.length<function(d){let f=new gi(Ci.comparator),m=!1;for(const v of d.filters)for(const C of v.getFlattenedFilters())C.field.isKeyField()||("array-contains"===C.op||"array-contains-any"===C.op?m=!0:f=f.add(C.field));for(const v of d.orderBy)v.field.isKeyField()||(f=f.add(v.field));return f.size+(m?1:0)}(s)&&(i=1):i=0})).next(()=>null!==t.limit&&r.length>1&&2===i?1:i)}mn(e,t){const i=new Om;for(const r of ac(e)){const s=t.data.field(r.fieldPath);if(null==s)return null;const o=i.He(r.kind);Sh.Ve._e(s,o)}return i.Qe()}dn(e){const t=new Om;return Sh.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const i=new Om;return Sh.Ve._e(fc(this.databaseId,t),i.He(function(r){const s=ac(r);return 0===s.length?0:s[s.length-1].kind}(e))),i.Qe()}ln(e,t,i){if(null===i)return[];let r=[];r.push(new Om);let s=0;for(const o of ac(e)){const d=i[s++];for(const f of r)if(this.yn(t,o.fieldPath)&&uh(d))r=this.pn(r,o,d);else{const m=f.He(o.kind);Sh.Ve._e(d,m)}}return this.In(r)}hn(e,t,i){return this.ln(e,t,i.position)}In(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Qe();return t}pn(e,t,i){const r=[...e],s=[];for(const o of i.arrayValue.values||[])for(const d of r){const f=new Om;f.seed(d.Qe()),Sh.Ve._e(o,f.He(t.kind)),s.push(f)}return s}yn(e,t){return!!e.filters.find(i=>i instanceof yn&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=vv(e),r=Fm(e);return(t?i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.j()).next(s=>{const o=[];return ae.forEach(s,d=>r.get([d.indexId,this.uid]).next(f=>{o.push(function(m,v){const C=v?new Py(v.sequenceNumber,new Ks(Ch(v.readTime),new it(Ea(v.documentKey)),v.largestBatchId)):Py.empty(),A=m.fields.map(([M,P])=>new Ny(Ci.fromServerFormat(M),P));return new sl(m.indexId,m.collectionGroup,A,C)}(d,f))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:Yt(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=vv(e),s=Fm(e);return this.Tn(e).next(o=>r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>ae.forEach(d,f=>s.put(HS(f.indexId,this.user,o,i)))))}updateIndexEntries(e,t){const i=new Map;return ae.forEach(t,(r,s)=>{const o=i.get(r.collectionGroup);return(o?ae.resolve(o):this.getFieldIndexes(e,r.collectionGroup)).next(d=>(i.set(r.collectionGroup,d),ae.forEach(d,f=>this.En(e,r,f).next(m=>{const v=this.An(s,f);return m.isEqual(v)?ae.resolve():this.vn(e,s,f,m,v)}))))})}Rn(e,t,i,r){return Pm(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(i,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,i,r){return Pm(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(i,t.key),t.key.path.toArray()])}En(e,t,i){const r=Pm(e);let s=new gi(bc);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.gn(i,t)])},(o,d)=>{s=s.add(new Gu(i.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>s)}An(e,t){let i=new gi(bc);const r=this.mn(t,e);if(null==r)return i;const s=Vw(t);if(null!=s){const o=e.data.field(s.fieldPath);if(uh(o))for(const d of o.arrayValue.values||[])i=i.add(new Gu(t.indexId,e.key,this.dn(d),r))}else i=i.add(new Gu(t.indexId,e.key,yv,r));return i}vn(e,t,i,r,s){Ge("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(d,f,m,v,C){const A=d.getIterator(),M=f.getIterator();let P=ym(A),H=ym(M);for(;P||H;){let U=!1,K=!1;if(P&&H){const _e=m(P,H);_e<0?K=!0:_e>0&&(U=!0)}else null!=P?K=!0:U=!0;U?(v(H),H=ym(M)):K?(C(P),P=ym(A)):(P=ym(A),H=ym(M))}}(r,s,bc,d=>{o.push(this.Rn(e,t,i,d))},d=>{o.push(this.Pn(e,t,i,d))}),ae.waitFor(o)}Tn(e){let t=1;return Fm(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((o,d)=>bc(o,d)).filter((o,d,f)=>!d||0!==bc(o,f[d-1]));const r=[];r.push(e);for(const o of i){const d=bc(o,e),f=bc(o,t);if(0===d)r[0]=e.Je();else if(d>0&&f<0)r.push(o),r.push(o.Je());else if(f>0)break}r.push(t);const s=[];for(let o=0;o<r.length;o+=2){if(this.bn(r[o],r[o+1]))return[];s.push(IDBKeyRange.bound([r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,yv,[]],[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,yv,[]]))}return s}bn(e,t){return bc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ZS)}getMinOffset(e,t){return ae.mapArray(this.cn(t),i=>this.an(e,i).next(r=>r||ut())).next(ZS)}}function YS(n){return Sr(n,"collectionParents")}function Pm(n){return Sr(n,"indexEntries")}function vv(n){return Sr(n,"indexConfiguration")}function Fm(n){return Sr(n,"indexState")}function ZS(n){Dt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;Z0(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new Ks(e.readTime,e.documentKey,t)}const KS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class os{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new os(e,os.DEFAULT_COLLECTION_PERCENTILE,os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function QS(n,e,t){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let d=0;const f=i.X({range:o},(v,C,A)=>(d++,A.delete()));s.push(f.next(()=>{Dt(1===d)}));const m=[];for(const v of t.mutations){const C=zw(e,v.key.path,t.batchId);s.push(r.delete(C)),m.push(v.key)}return ae.waitFor(s).next(()=>m)}function bv(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ut();e=n.noDocument}return JSON.stringify(e).length}os.DEFAULT_COLLECTION_PERCENTILE=10,os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,os.DEFAULT=new os(41943040,os.DEFAULT_COLLECTION_PERCENTILE,os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),os.DISABLED=new os(-1,0,0);class wv{constructor(e,t,i,r){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=r,this.Vn={}}static de(e,t,i,r){Dt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new wv(s,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $u(e).X({index:"userMutationsIndex",range:i},(r,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const s=Sp(e),o=$u(e);return o.add({}).next(d=>{Dt("number"==typeof d);const f=new Jy(d,t,i,r),m=function(A,M,P){const H=P.baseMutations.map(K=>Rm(A.fe,K)),U=P.mutations.map(K=>Rm(A.fe,K));return{userId:M,batchId:P.batchId,localWriteTimeMs:P.localWriteTime.toMillis(),baseMutations:H,mutations:U}}(this.serializer,this.userId,f),v=[];let C=new gi((A,M)=>Yt(A.canonicalString(),M.canonicalString()));for(const A of r){const M=zw(this.userId,A.key.path,d);C=C.add(A.key.path.popLast()),v.push(o.put(m)),v.push(s.put(M,Ik))}return C.forEach(A=>{v.push(this.indexManager.addToCollectionParentIndex(e,A))}),e.addOnCommittedListener(()=>{this.Vn[d]=f.keys()}),ae.waitFor(v).next(()=>f)})}lookupMutationBatch(e,t){return $u(e).get(t).next(i=>i?(Dt(i.userId===this.userId),Dh(this.serializer,i)):null)}Sn(e,t){return this.Vn[t]?ae.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.Vn[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return $u(e).X({index:"userMutationsIndex",range:r},(o,d,f)=>{d.userId===this.userId&&(Dt(d.batchId>=i),s=Dh(this.serializer,d)),f.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return $u(e).X({index:"userMutationsIndex",range:t,reverse:!0},(r,s,o)=>{i=s.batchId,o.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $u(e).j("userMutationsIndex",t).next(i=>i.map(r=>Dh(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Qs(this.userId,t.path),r=IDBKeyRange.lowerBound(i),s=[];return Sp(e).X({range:r},(o,d,f)=>{const[m,v,C]=o,A=Ea(v);if(m===this.userId&&t.path.isEqual(A))return $u(e).get(C).next(M=>{if(!M)throw ut();Dt(M.userId===this.userId),s.push(Dh(this.serializer,M))});f.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new gi(Yt);const r=[];return t.forEach(s=>{const o=Qs(this.userId,s.path),d=IDBKeyRange.lowerBound(o),f=Sp(e).X({range:d},(m,v,C)=>{const[A,M,P]=m,H=Ea(M);A===this.userId&&s.path.isEqual(H)?i=i.add(P):C.done()});r.push(f)}),ae.waitFor(r).next(()=>this.Dn(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,s=Qs(this.userId,i),o=IDBKeyRange.lowerBound(s);let d=new gi(Yt);return Sp(e).X({range:o},(f,m,v)=>{const[C,A,M]=f,P=Ea(A);C===this.userId&&i.isPrefixOf(P)?P.length===r&&(d=d.add(M)):v.done()}).next(()=>this.Dn(e,d))}Dn(e,t){const i=[],r=[];return t.forEach(s=>{r.push($u(e).get(s).next(o=>{if(null===o)throw ut();Dt(o.userId===this.userId),i.push(Dh(this.serializer,o))}))}),ae.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return QS(e.ht,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ae.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ae.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return Sp(e).X({range:i},(s,o,d)=>{if(s[0]===this.userId){const f=Ea(s[1]);r.push(f)}else d.done()}).next(()=>{Dt(0===r.length)})})}containsKey(e,t){return XS(e,this.userId,t)}xn(e){return OE(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function XS(n,e,t){const i=Qs(e,t.path),r=i[1],s=IDBKeyRange.lowerBound(i);let o=!1;return Sp(n).X({range:s,Y:!0},(d,f,m)=>{const[v,C,A]=d;v===e&&C===r&&(o=!0),m.done()}).next(()=>o)}function $u(n){return Sr(n,"mutations")}function Sp(n){return Sr(n,"documentMutations")}function OE(n){return Sr(n,"mutationQueues")}class Wu{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Wu(0)}static Mn(){return new Wu(-1)}}class JS{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const i=new Wu(t.highestTargetId);return t.highestTargetId=i.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>St.fromTimestamp(new pi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.$n(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.On(e,r)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(i=>(i.targetCount+=1,this.Bn(t,i),this.On(e,i))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ih(e).delete(t.targetId)).next(()=>this.$n(e)).next(i=>(Dt(i.targetCount>0),i.targetCount-=1,this.On(e,i)))}removeTargets(e,t,i){let r=0;const s=[];return Ih(e).X((o,d)=>{const f=to(d);f.sequenceNumber<=t&&null===i.get(f.targetId)&&(r++,s.push(this.removeTargetData(e,f)))}).next(()=>ae.waitFor(s)).next(()=>r)}forEachTarget(e,t){return Ih(e).X((i,r)=>{const s=to(r);t(s)})}$n(e){return NE(e).get("targetGlobalKey").next(t=>(Dt(null!==t),t))}On(e,t){return NE(e).put("targetGlobalKey",t)}Fn(e,t){return Ih(e).put(Qo(this.serializer,t))}Bn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const i=Bu(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return Ih(e).X({range:r,index:"queryTargetsIndex"},(o,d,f)=>{const m=to(d);Cm(t,m.target)&&(s=m,f.done())}).next(()=>s)}addMatchingKeys(e,t,i){const r=[],s=wc(e);return t.forEach(o=>{const d=As(o.path);r.push(s.put({targetId:i,path:d})),r.push(this.referenceDelegate.addReference(e,i,o))}),ae.waitFor(r)}removeMatchingKeys(e,t,i){const r=wc(e);return ae.forEach(t,s=>{const o=As(s.path);return ae.waitFor([r.delete([i,o]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,t){const i=wc(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=wc(e);let s=Qt();return r.X({range:i,Y:!0},(o,d,f)=>{const m=Ea(o[1]),v=new it(m);s=s.add(v)}).next(()=>s)}containsKey(e,t){const i=As(t.path),r=IDBKeyRange.bound([i],[Lw(i)],!1,!0);let s=0;return wc(e).X({index:"documentTargetsIndex",Y:!0,range:r},([o,d],f,m)=>{0!==o&&(s++,m.done())}).next(()=>s>0)}le(e,t){return Ih(e).get(t).next(i=>i?to(i):null)}}function Ih(n){return Sr(n,"targets")}function NE(n){return Sr(n,"targetGlobal")}function wc(n){return Sr(n,"targetDocuments")}function PE([n,e],[t,i]){const r=Yt(n,t);return 0===r?Yt(e,i):r}class eI{constructor(e){this.Ln=e,this.buffer=new gi(PE),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();PE(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class FE{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Ge("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ve.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){Pu(i)?Ge("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Nu(i)}yield t.Qn(3e5)}))}}class LE{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return ae.resolve(Is.ct);const i=new eI(t);return this.jn.forEachTarget(e,r=>i.Kn(r.sequenceNumber)).next(()=>this.jn.Wn(e,r=>i.Kn(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.jn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(KS)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),KS):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let i,r,s,o,d,f,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(C=>(C>this.params.maximumSequenceNumbersToCollect?(Ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),r=this.params.maximumSequenceNumbersToCollect):r=C,o=Date.now(),this.nthSequenceNumber(e,r))).next(C=>(i=C,d=Date.now(),this.removeTargets(e,i,t))).next(C=>(s=C,f=Date.now(),this.removeOrphanedDocuments(e,i))).next(C=>(m=Date.now(),Oy()<=Ss.in.DEBUG&&Ge("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-v}ms\n\tDetermined least recently used ${r} in `+(d-o)+`ms\n\tRemoved ${s} targets in `+(f-d)+`ms\n\tRemoved ${C} documents in `+(m-f)+`ms\nTotal Duration: ${m-v}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:C})))}}class Ah{constructor(e,t){this.db=e,this.garbageCollector=function Ev(n,e){return new LE(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}Jn(e){let t=0;return this.Wn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(i,r)=>t(r))}addReference(e,t,i){return Cv(e,i)}removeReference(e,t,i){return Cv(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return Cv(e,t)}Xn(e,t){return function(i,r){let s=!1;return OE(i).Z(o=>XS(i,o,r).next(d=>(d&&(s=!0),ae.resolve(!d)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Yn(e,(o,d)=>{if(d<=t){const f=this.Xn(e,o).next(m=>{if(!m)return s++,i.getEntry(e,o).next(()=>(i.removeEntry(o,St.min()),wc(e).delete([0,As(o.path)])))});r.push(f)}}).next(()=>ae.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return Cv(e,t)}Yn(e,t){const i=wc(e);let r,s=Is.ct;return i.X({index:"documentTargetsIndex"},([o,d],{path:f,sequenceNumber:m})=>{0===o?(s!==Is.ct&&t(new it(Ea(r)),s),s=m,r=f):s=Is.ct}).next(()=>{s!==Is.ct&&t(new it(Ea(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Cv(n,e){return wc(n).put((i=n.currentSequenceNumber,{targetId:0,path:As(e.path),sequenceNumber:i}));var i}class tI{constructor(){this.changes=new cl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ai.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?ae.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ip{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return qu(e).put(i)}removeEntry(e,t,i){return qu(e).delete(function(r,s){const o=r.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Cp(s),o[o.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.Zn(e,i)))}getEntry(e,t){let i=ai.newInvalidDocument(t);return qu(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ap(t))},(r,s)=>{i=this.ts(t,s)}).next(()=>i)}es(e,t){let i={size:0,document:ai.newInvalidDocument(t)};return qu(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ap(t))},(r,s)=>{i={document:this.ts(t,s),size:bv(s)}}).next(()=>i)}getEntries(e,t){let i=Xs();return this.ns(e,t,(r,s)=>{const o=this.ts(r,s);i=i.insert(r,o)}).next(()=>i)}ss(e,t){let i=Xs(),r=new ti(it.comparator);return this.ns(e,t,(s,o)=>{const d=this.ts(s,o);i=i.insert(s,d),r=r.insert(s,bv(o))}).next(()=>({documents:i,rs:r}))}ns(e,t,i){if(t.isEmpty())return ae.resolve();let r=new gi(Vt);t.forEach(f=>r=r.add(f));const s=IDBKeyRange.bound(Ap(r.first()),Ap(r.last())),o=r.getIterator();let d=o.getNext();return qu(e).X({index:"documentKeyIndex",range:s},(f,m,v)=>{const C=it.fromSegments([...m.prefixPath,m.collectionGroup,m.documentId]);for(;d&&Vt(d,C)<0;)i(d,null),d=o.getNext();d&&d.isEqual(C)&&(i(d,m),d=o.hasNext()?o.getNext():null),d?v.G(Ap(d)):v.done()}).next(()=>{for(;d;)i(d,null),d=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,i,r){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),Cp(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],d=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return qu(e).j(IDBKeyRange.bound(o,d,!0)).next(f=>{let m=Xs();for(const v of f){const C=this.ts(it.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);C.isFoundDocument()&&(ju(t,C)||r.has(C.key))&&(m=m.insert(C.key,C))}return m})}getAllFromCollectionGroup(e,t,i,r){let s=Xs();const o=tx(t,i),d=tx(t,Ks.max());return qu(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,d,!0)},(f,m,v)=>{const C=this.ts(it.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);s=s.insert(C.key,C),s.size===r&&v.done()}).next(()=>s)}newChangeBuffer(e){return new VE(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return ex(e).get("remoteDocumentGlobalKey").next(t=>(Dt(!!t),t))}Zn(e,t){return ex(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const i=function yF(n,e){let t;if(e.document)t=CE(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=it.fromSegments(e.noDocument.path),r=Ch(e.noDocument.readTime);t=ai.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ut();{const i=it.fromSegments(e.unknownDocument.path),r=Ch(e.unknownDocument.version);t=ai.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(i){const r=new pi(i[0],i[1]);return St.fromTimestamp(r)}(e.readTime)),t}(this.serializer,t);if(!i.isNoDocument()||!i.version.isEqual(St.min()))return i}return ai.newInvalidDocument(e)}}function Jk(n){return new Ip(n)}class VE extends tI{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new cl(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new gi((s,o)=>Yt(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const d=this.us.get(s);if(t.push(this.os.removeEntry(e,s,d.readTime)),o.isValidDocument()){const f=cv(this.os.serializer,o);r=r.add(s.path.popLast()),i+=bv(f)-d.size,t.push(this.os.addEntry(e,s,f))}else if(i-=d.size,this.trackRemovals){const f=cv(this.os.serializer,o.convertToNoDocument(St.min()));t.push(this.os.addEntry(e,s,f))}}),r.forEach(s=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.os.updateMetadata(e,i)),ae.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(i=>(this.us.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:i,rs:r})=>(r.forEach((s,o)=>{this.us.set(s,{size:o,readTime:i.get(s).readTime})}),i))}}function ex(n){return Sr(n,"remoteDocumentGlobal")}function qu(n){return Sr(n,"remoteDocumentsV14")}function Ap(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function tx(n,e){const t=e.documentKey.path.toArray();return[n,Cp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Vt(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<t.length-2&&s<i.length-2;++s)if(r=Yt(t[s],i[s]),r)return r;return r=Yt(t.length,i.length),r||(r=Yt(t[t.length-2],i[i.length-2]),r||Yt(t[t.length-1],i[i.length-1]))}class nx{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class nI{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(null!==i&&dl(i.mutation,r,Eo.empty(),pi.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Qt()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Qt()){const r=ul();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=Am();return s.forEach((d,f)=>{o=o.insert(d,f.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const i=ul();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Qt()))}populateOverlays(e,t,i){const r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,d)=>{t.set(o,d)})})}computeViews(e,t,i,r){let s=Xs();const o=Tm(),d=Tm();return t.forEach((f,m)=>{const v=i.get(m.key);r.has(m.key)&&(void 0===v||v.mutation instanceof eo)?s=s.insert(m.key,m):void 0!==v?(o.set(m.key,v.mutation.getFieldMask()),dl(v.mutation,m,v.mutation.getFieldMask(),pi.now())):o.set(m.key,Eo.empty())}),this.recalculateAndSaveOverlays(e,s).next(f=>(f.forEach((m,v)=>o.set(m,v)),t.forEach((m,v)=>{var C;return d.set(m,new nx(v,null!==(C=o.get(m))&&void 0!==C?C:null))}),d))}recalculateAndSaveOverlays(e,t){const i=Tm();let r=new ti((o,d)=>o-d),s=Qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const d of o)d.keys().forEach(f=>{const m=t.get(f);if(null===m)return;let v=i.get(f)||Eo.empty();v=d.applyToLocalView(m,v),i.set(f,v);const C=(r.get(d.batchId)||Qt()).add(f);r=r.insert(d.batchId,C)})}).next(()=>{const o=[],d=r.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,v=f.value,C=Bk();v.forEach(A=>{if(!s.has(A)){const M=Qy(t.get(A),i.get(A));null!==M&&C.set(A,M),s=s.add(A)}}),o.push(this.documentOverlayCache.saveOverlays(e,m,C))}return ae.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return it.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):bS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i);var r}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):ae.resolve(ul());let d=-1,f=s;return o.next(m=>ae.forEach(m,(v,C)=>(d<C.largestBatchId&&(d=C.largestBatchId),s.get(v)?ae.resolve():this.remoteDocumentCache.getEntry(e,v).next(A=>{f=f.insert(v,A)}))).next(()=>this.populateOverlays(e,m,s)).next(()=>this.computeViews(e,f,m,Qt())).next(v=>({batchId:d,changes:Vk(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new it(t)).next(i=>{let r=Am();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const r=t.collectionGroup;let s=Am();return this.indexManager.getCollectionParents(e,r).next(o=>ae.forEach(o,d=>{const f=(m=t,v=d.child(r),new gc(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,v;return this.getDocumentsMatchingCollectionQuery(e,f,i).next(m=>{m.forEach((v,C)=>{s=s.insert(v,C)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,r))).next(s=>{r.forEach((d,f)=>{const m=f.getKey();null===s.get(m)&&(s=s.insert(m,ai.newInvalidDocument(m)))});let o=Am();return s.forEach((d,f)=>{const m=r.get(d);void 0!==m&&dl(m.mutation,f,Eo.empty(),pi.now()),ju(t,f)&&(o=o.insert(d,f))}),o})}}class ix{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ae.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var i;return this.cs.set(t.id,{id:(i=t).id,version:i.version,createTime:Ni(i.createTime)}),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(i=t).name,query:Do(i.bundledQuery),readTime:Ni(i.readTime)}),ae.resolve();var i}}class Tp{constructor(){this.overlays=new ti(it.comparator),this.ls=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ul();return ae.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.we(e,t,s)}),ae.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.ls.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(i)),ae.resolve()}getOverlaysForCollection(e,t,i){const r=ul(),s=t.length+1,o=new it(t.child("")),d=this.overlays.getIteratorFrom(o);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===s&&f.largestBatchId>i&&r.set(f.getKey(),f)}return ae.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new ti((m,v)=>m-v);const o=this.overlays.getIterator();for(;o.hasNext();){const m=o.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>i){let v=s.get(m.largestBatchId);null===v&&(v=ul(),s=s.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=ul(),f=s.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,v)=>d.set(m,v)),!(d.size()>=r)););return ae.resolve(d)}we(e,t,i){const r=this.overlays.get(i.key);if(null!==r){const o=this.ls.get(r.largestBatchId).delete(i.key);this.ls.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new tv(t,i));let s=this.ls.get(t);void 0===s&&(s=Qt(),this.ls.set(t,s)),this.ls.set(t,s.add(i.key))}}class BE{constructor(){this.fs=new gi($i.ds),this.ws=new gi($i._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const i=new $i(e,t);this.fs=this.fs.add(i),this.ws=this.ws.add(i)}gs(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.ys(new $i(e,t))}ps(e,t){e.forEach(i=>this.removeReference(i,t))}Is(e){const t=new it(new wn([])),i=new $i(t,e),r=new $i(t,e+1),s=[];return this.ws.forEachInRange([i,r],o=>{this.ys(o),s.push(o.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new it(new wn([])),i=new $i(t,e),r=new $i(t,e+1);let s=Qt();return this.ws.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new $i(e,0),i=this.fs.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class $i{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return it.comparator(e.key,t.key)||Yt(e.As,t.As)}static _s(e,t){return Yt(e.As,t.As)||it.comparator(e.key,t.key)}}class Dv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new gi($i.ds)}checkEmpty(e){return ae.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,r){const s=this.vs;this.vs++;const o=new Jy(s,t,i,r);this.mutationQueue.push(o);for(const d of r)this.Rs=this.Rs.add(new $i(d.key,s)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ae.resolve(o)}lookupMutationBatch(e,t){return ae.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.bs(t+1),s=r<0?0:r;return ae.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new $i(t,0),r=new $i(t,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([i,r],o=>{const d=this.Ps(o.As);s.push(d)}),ae.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new gi(Yt);return t.forEach(r=>{const s=new $i(r,0),o=new $i(r,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,o],d=>{i=i.add(d.As)})}),ae.resolve(this.Vs(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;it.isDocumentKey(s)||(s=s.child(""));const o=new $i(new it(s),0);let d=new gi(Yt);return this.Rs.forEachWhile(f=>{const m=f.key.path;return!!i.isPrefixOf(m)&&(m.length===r&&(d=d.add(f.As)),!0)},o),ae.resolve(this.Vs(d))}Vs(e){const t=[];return e.forEach(i=>{const r=this.Ps(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){Dt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let i=this.Rs;return ae.forEach(t.mutations,r=>{const s=new $i(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=i})}Cn(e){}containsKey(e,t){const i=new $i(t,0),r=this.Rs.firstAfterOrEqual(i);return ae.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return ae.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Pi{constructor(e){this.Ds=e,this.docs=new ti(it.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.Ds(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ae.resolve(i?i.document.mutableCopy():ai.newInvalidDocument(t))}getEntries(e,t){let i=Xs();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():ai.newInvalidDocument(r))}),ae.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=Xs();const o=t.path,d=new it(o.child("")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:v}}=f.getNext();if(!o.isPrefixOf(m.path))break;m.path.length>o.length+1||Z0(Y0(v),i)<=0||(r.has(v.key)||ju(t,v))&&(s=s.insert(v.key,v.mutableCopy()))}return ae.resolve(s)}getAllFromCollectionGroup(e,t,i,r){ut()}Cs(e,t){return ae.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new vF(this)}getSize(e){return ae.resolve(this.size)}}class vF extends tI{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(i)}),ae.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class iI{constructor(e){this.persistence=e,this.xs=new cl(t=>Bu(t),Cm),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this.Ns=0,this.ks=new BE,this.targetCount=0,this.Ms=Wu.kn()}forEachTarget(e,t){return this.xs.forEach((i,r)=>t(r)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Ns&&(this.Ns=t),ae.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Wu(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.Fn(t),ae.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.xs.forEach((o,d)=>{d.sequenceNumber<=t&&null===i.get(d.targetId)&&(this.xs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,d.targetId)),r++)}),ae.waitFor(s).next(()=>r)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const i=this.xs.get(t)||null;return ae.resolve(i)}addMatchingKeys(e,t,i){return this.ks.gs(t,i),ae.resolve()}removeMatchingKeys(e,t,i){this.ks.ps(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),ae.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const i=this.ks.Es(t);return ae.resolve(i)}containsKey(e,t){return ae.resolve(this.ks.containsKey(t))}}class Sv{constructor(e,t){this.$s={},this.overlays={},this.Os=new Is(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new iI(this),this.indexManager=new Qk,this.remoteDocumentCache=new Pi(i=>this.referenceDelegate.Ls(i)),this.serializer=new AE(t),this.qs=new ix(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Tp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.$s[e.toKey()];return i||(i=new Dv(t,this.referenceDelegate),this.$s[e.toKey()]=i),i}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,i){Ge("MemoryPersistence","Starting transaction:",e);const r=new rx(this.Os.next());return this.referenceDelegate.Us(),i(r).next(s=>this.referenceDelegate.Ks(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gs(e,t){return ae.or(Object.values(this.$s).map(i=>()=>i.containsKey(e,t)))}}class rx extends sh{constructor(e){super(),this.currentSequenceNumber=e}}class Lm{constructor(e){this.persistence=e,this.Qs=new BE,this.js=null}static zs(e){return new Lm(e)}get Ws(){if(this.js)return this.js;throw ut()}addReference(e,t,i){return this.Qs.addReference(i,t),this.Ws.delete(i.toString()),ae.resolve()}removeReference(e,t,i){return this.Qs.removeReference(i,t),this.Ws.add(i.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(r=>this.Ws.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Ws.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.Ws,i=>{const r=it.fromPath(i);return this.Hs(e,r).next(s=>{s||t.removeEntry(r,St.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(i=>{i?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ae.or([()=>ae.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class rI{constructor(e){this.serializer=e}O(e,t,i,r){const s=new Ly("createOrUpgrade",t);var d;i<1&&r>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_m,{unique:!0}),d.createObjectStore("documentMutations"),HE(e),function(d){d.createObjectStore("remoteDocuments")}(e));let o=ae.resolve();return i<3&&r>=3&&(0!==i&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),HE(e)),o=o.next(()=>function(d){const f=d.store("targetGlobal"),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:St.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",m)}(s))),i<4&&r>=4&&(0!==i&&(o=o.next(()=>function(d,f){return f.store("mutations").j().next(m=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_m,{unique:!0});const v=f.store("mutations"),C=m.map(A=>v.put(A));return ae.waitFor(C)})}(e,s))),o=o.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&r>=5&&(o=o.next(()=>this.Ys(s))),i<6&&r>=6&&(o=o.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(s)))),i<7&&r>=7&&(o=o.next(()=>this.Zs(s))),i<8&&r>=8&&(o=o.next(()=>this.ti(e,s))),i<9&&r>=9&&(o=o.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&r>=10&&(o=o.next(()=>this.ei(s))),i<11&&r>=11&&(o=o.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(o=o.next(()=>{!function(d){const f=d.createObjectStore("documentOverlays",{keyPath:Yw});f.createIndex("collectionPathOverlayIndex",Zw,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",pF,{unique:!1})}(e)})),i<13&&r>=13&&(o=o.next(()=>function(d){const f=d.createObjectStore("remoteDocumentsV14",{keyPath:Gw});f.createIndex("documentKeyIndex",lc),f.createIndex("collectionGroupIndex",$w)}(e)).next(()=>this.ni(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(o=o.next(()=>this.si(e,s))),i<15&&r>=15&&(o=o.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:fF}).createIndex("sequenceNumberIndex",By,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:Hy}).createIndex("documentKeyIndex",qw,{unique:!1})}(e))),o}Xs(e){let t=0;return e.store("remoteDocuments").X((i,r)=>{t+=bv(r)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Ys(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.j().next(r=>ae.forEach(r,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.j("userMutationsIndex",o).next(d=>ae.forEach(d,f=>{Dt(f.userId===s.userId);const m=Dh(this.serializer,f);return QS(e,s.userId,m).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.X((o,d)=>{const f=new wn(o),m=[0,As(f)];s.push(t.get(m).next(v=>v?ae.resolve():t.put({targetId:0,path:As(f),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>ae.waitFor(s))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:tS});const i=t.store("collectionParents"),r=new RE,s=o=>{if(r.add(o)){const d=o.lastSegment(),f=o.popLast();return i.put({collectionId:d,parent:As(f)})}};return t.store("remoteDocuments").X({Y:!0},(o,d)=>{const f=new wn(o);return s(f.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([o,d,f],m)=>{const v=Ea(d);return s(v.popLast())}))}ei(e){const t=e.store("targets");return t.X((i,r)=>{const s=to(r),o=Qo(this.serializer,s);return t.put(o)})}ni(e,t){const i=t.store("remoteDocuments"),r=[];return i.X((s,o)=>{const d=t.store("remoteDocumentsV14"),f=(m=o,m.document?new it(wn.fromString(m.document.name).popFirst(5)):m.noDocument?it.fromSegments(m.noDocument.path):m.unknownDocument?it.fromSegments(m.unknownDocument.path):ut()).path.toArray();var m;const v={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};r.push(d.put(v))}).next(()=>ae.waitFor(r))}si(e,t){const i=t.store("mutations"),r=Jk(this.serializer),s=new Sv(Lm.zs,this.serializer.fe);return i.j().next(o=>{const d=new Map;return o.forEach(f=>{var m;let v=null!==(m=d.get(f.userId))&&void 0!==m?m:Qt();Dh(this.serializer,f).keys().forEach(C=>v=v.add(C)),d.set(f.userId,v)}),ae.forEach(d,(f,m)=>{const v=new Dr(m),C=Dp.de(this.serializer,v),A=s.getIndexManager(v),M=wv.de(v,this.serializer,A,s.referenceDelegate);return new nI(r,M,C,A).recalculateAndSaveOverlaysForDocumentKeys(new oS(t,Is.ct),f).next()})})}}function HE(n){n.createObjectStore("targetDocuments",{keyPath:Ww}).createIndex("documentTargetsIndex",hF,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",eS,{unique:!0}),n.createObjectStore("targetGlobal")}const UE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class jE{constructor(e,t,i,r,s,o,d,f,m,v,C=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.ii=s,this.window=o,this.document=d,this.ri=m,this.oi=v,this.ui=C,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=A=>Promise.resolve(),!jE.D())throw new Pe(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ah(this,r),this.di=t+"main",this.serializer=new AE(f),this.wi=new Ko(this.di,this.ui,new rI(this.serializer)),this.Bs=new JS(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Jk(this.serializer),this.qs=new Kk,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===v&&sr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(fe.FAILED_PRECONDITION,UE);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Is(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var i=(0,ve.Z)(function*(r){if(t.started)return e(r)});return function(r){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,ve.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Yu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Pu(e))return Ge("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ge("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Bm(e).get("owner").next(t=>ae.resolve(this.Ri(t)))}Pi(e){return Yu(e).delete(this.clientId)}bi(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Sr(i,"clientMetadata");return r.j().next(s=>{const o=e.Si(s,18e5),d=s.filter(f=>-1===o.indexOf(f));return ae.forEach(d,f=>r.delete(f.clientId)).next(()=>d)})}).catch(()=>[]);if(e._i)for(const i of t)e._i.removeItem(e.Di(i.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ae.resolve(!0):Bm(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Pe(fe.FAILED_PRECONDITION,UE);return!1}}return!(!this.networkEnabled||!this.inForeground)||Yu(e).j().next(i=>void 0===this.Si(i,5e3).find(r=>{if(this.clientId!==r.clientId){const o=!this.inForeground&&r.inForeground,d=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||o&&d)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ge("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new oS(t,Is.ct);return e.Ai(i).next(()=>e.Pi(i))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(i=>this.Vi(i.updateTimeMs,t)&&!this.Ci(i.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Yu(e).j().next(t=>this.Si(t,18e5).map(i=>i.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return wv.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Xk(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Dp.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,i){Ge("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=15===(o=this.ui)?sS:14===o?rS:13===o?iS:12===o?Ak:11===o?nS:void ut();var o;let d;return this.wi.runTransaction(e,r,s,f=>(d=new oS(f,this.Os?this.Os.next():Is.ct),"readwrite-primary"===t?this.Ti(d).next(m=>!!m||this.Ei(d)).next(m=>{if(!m)throw sr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Pe(fe.FAILED_PRECONDITION,K0);return i(d)}).next(m=>this.vi(d).next(()=>m)):this.Oi(d).next(()=>i(d)))).then(f=>(d.raiseOnCommittedEvent(),f))}Oi(e){return Bm(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(fe.FAILED_PRECONDITION,UE)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Bm(e).put("owner",t)}static D(){return Ko.D()}Ai(e){const t=Bm(e);return t.get("owner").next(i=>this.Ri(i)?(Ge("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ae.resolve())}Vi(e,t){const i=Date.now();return!(e<i-t||e>i&&(sr(`Detected an update time that is in the future: ${e} > ${i}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,F.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const i=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Ge("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return sr("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){sr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Bm(n){return Sr(n,"owner")}function Yu(n){return Sr(n,"clientMetadata")}function zE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class GE{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Fi=i,this.Bi=r}static Li(e,t){let i=Qt(),r=Qt();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new GE(e,t.fromCache,i,r)}}class sI{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,i,r){return this.Ki(e,t).next(s=>s||this.Gi(e,t,r,i)).next(s=>s||this.Qi(e,t))}Ki(e,t){if(Sm(t))return ae.resolve(null);let i=is(t);return this.indexManager.getIndexType(e,i).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Im(t,null,"F"),i=is(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=Qt(...s);return this.Ui.getDocuments(e,o).next(d=>this.indexManager.getMinOffset(e,i).next(f=>{const m=this.ji(t,d);return this.zi(t,m,o,f.readTime)?this.Ki(e,Im(t,null,"F")):this.Wi(e,m,t,f)}))})))}Gi(e,t,i,r){return Sm(t)||r.isEqual(St.min())?this.Qi(e,t):this.Ui.getDocuments(e,i).next(s=>{const o=this.ji(t,s);return this.zi(t,o,i,r)?this.Qi(e,t):(Oy()<=Ss.in.DEBUG&&Ge("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),gp(t)),this.Wi(e,o,t,Ck(r,-1)))})}ji(e,t){let i=new gi(wS(e));return t.forEach((r,s)=>{ju(e,s)&&(i=i.add(s))}),i}zi(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Qi(e,t){return Oy()<=Ss.in.DEBUG&&Ge("QueryEngine","Using full collection scan to execute query:",gp(t)),this.Ui.getDocumentsMatchingQuery(e,t,Ks.min())}Wi(e,t,i,r){return this.Ui.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class Iv{constructor(e,t,i,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new ti(Yt),this.Yi=new cl(s=>Bu(s),Cm),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(i)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nI(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function $E(n,e,t,i){return new Iv(n,e,t,i)}function WE(n,e){return Av.apply(this,arguments)}function Av(){return Av=(0,ve.Z)(function*(n,e){const t=Ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.tr(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],d=[];let f=Qt();for(const m of r){o.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}for(const m of s){d.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}return t.localDocuments.getDocuments(i,f).next(m=>({er:m,removedBatchIds:o,addedBatchIds:d}))})})}),Av.apply(this,arguments)}function sx(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=t.Zi.newChangeBuffer({trackRemovals:!0});return function(o,d,f,m){const v=f.batch,C=v.keys();let A=ae.resolve();return C.forEach(M=>{A=A.next(()=>m.getEntry(d,M)).next(P=>{const H=f.docVersions.get(M);Dt(null!==H),P.version.compareTo(H)<0&&(v.applyToRemoteDocument(P,f),P.isValidDocument()&&(P.setReadTime(f.commitVersion),m.addEntry(P)))})}),A.next(()=>o.mutationQueue.removeMutationBatch(d,v))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(o){let d=Qt();for(let f=0;f<o.mutationResults.length;++f)o.mutationResults[f].transformResults.length>0&&(d=d.add(o.batch.mutations[f].key));return d}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function Mp(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function Hm(n,e){const t=Ze(n),i=e.snapshotVersion;let r=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Zi.newChangeBuffer({trackRemovals:!0});r=t.Ji;const d=[];e.targetChanges.forEach((v,C)=>{const A=r.get(C);if(!A)return;d.push(t.Bs.removeMatchingKeys(s,v.removedDocuments,C).next(()=>t.Bs.addMatchingKeys(s,v.addedDocuments,C)));let M=A.withSequenceNumber(s.currentSequenceNumber);var P,H,U;null!==e.targetMismatches.get(C)?M=M.withResumeToken(Ir.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):v.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(v.resumeToken,i)),r=r.insert(C,M),H=M,U=v,(0===(P=A).resumeToken.approximateByteSize()||H.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8||U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0)&&d.push(t.Bs.updateTargetData(s,M))});let f=Xs(),m=Qt();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(s,v))}),d.push(oI(s,o,e.documentUpdates).next(v=>{f=v.nr,m=v.sr})),!i.isEqual(St.min())){const v=t.Bs.getLastRemoteSnapshotVersion(s).next(C=>t.Bs.setTargetsMetadata(s,s.currentSequenceNumber,i));d.push(v)}return ae.waitFor(d).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,f,m)).next(()=>f)}).then(s=>(t.Ji=r,s))}function oI(n,e,t){let i=Qt(),r=Qt();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=Xs();return t.forEach((d,f)=>{const m=s.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(r=r.add(d)),f.isNoDocument()&&f.version.isEqual(St.min())?(e.removeEntry(d,f.readTime),o=o.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||0===f.version.compareTo(m.version)&&m.hasPendingWrites?(e.addEntry(f),o=o.insert(d,f)):Ge("LocalStore","Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)}),{nr:o,sr:r}})}function ox(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function kp(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Bs.getTargetData(i,e).next(s=>s?(r=s,ae.resolve(r)):t.Bs.allocateTargetId(i).next(o=>(r=new yc(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.Bs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.Ji.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(i.targetId,i),t.Yi.set(e,i.targetId)),i})}function Th(n,e,t){return Tv.apply(this,arguments)}function Tv(){return Tv=(0,ve.Z)(function*(n,e,t){const i=Ze(n),r=i.Ji.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!Pu(o))throw o;Ge("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.Ji=i.Ji.remove(e),i.Yi.delete(r.target)}),Tv.apply(this,arguments)}function Um(n,e,t){const i=Ze(n);let r=St.min(),s=Qt();return i.persistence.runTransaction("Execute query","readonly",o=>function(d,f,m){const v=Ze(d),C=v.Yi.get(m);return void 0!==C?ae.resolve(v.Ji.get(C)):v.Bs.getTargetData(f,m)}(i,o,is(e)).next(d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.Bs.getMatchingKeysForTargetId(o,d.targetId).next(f=>{s=f})}).next(()=>i.Hi.getDocumentsMatchingQuery(o,e,t?r:St.min(),t?s:Qt())).next(d=>(lI(i,mp(e),d),{documents:d,ir:s})))}function aI(n,e){const t=Ze(n),i=Ze(t.Bs),r=t.Ji.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",s=>i.le(s,e).next(o=>o?o.target:null))}function qE(n,e){const t=Ze(n),i=t.Xi.get(e)||St.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.Zi.getAllFromCollectionGroup(r,e,Ck(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(lI(t,e,r),r))}function lI(n,e,t){let i=n.Xi.get(e)||St.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Xi.set(e,i)}function cI(){return cI=(0,ve.Z)(function*(n,e,t,i){const r=Ze(n);let s=Qt(),o=Xs();for(const m of t){const v=e.rr(m.metadata.name);m.document&&(s=s.add(v));const C=e.ur(m);C.setReadTime(e.cr(m.metadata.readTime)),o=o.insert(v,C)}const d=r.Zi.newChangeBuffer({trackRemovals:!0}),f=yield kp(r,(m=i,is(Hu(wn.fromString(`__bundle__/docs/${m}`)))));var m;return r.persistence.runTransaction("Apply bundle documents","readwrite",m=>oI(m,d,o).next(v=>(d.apply(m),v)).next(v=>r.Bs.removeMatchingKeysForTargetId(m,f.targetId).next(()=>r.Bs.addMatchingKeys(m,s,f.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(m,v.nr,v.sr)).next(()=>v.nr)))}),cI.apply(this,arguments)}function bF(n,e){return uI.apply(this,arguments)}function uI(){return uI=(0,ve.Z)(function*(n,e,t=Qt()){const i=yield kp(n,is(Do(e.bundledQuery))),r=Ze(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const o=Ni(e.readTime);if(i.snapshotVersion.compareTo(o)>=0)return r.qs.saveNamedQuery(s,e);const d=i.withResumeToken(Ir.EMPTY_BYTE_STRING,o);return r.Ji=r.Ji.insert(d.targetId,d),r.Bs.updateTargetData(s,d).next(()=>r.Bs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Bs.addMatchingKeys(s,t,i.targetId)).next(()=>r.qs.saveNamedQuery(s,e))})}),uI.apply(this,arguments)}function lx(n,e){return`firestore_clients_${n}_${e}`}function YE(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function xp(n,e){return`firestore_targets_${n}_${e}`}class Mv{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static ar(e,t,i){const r=JSON.parse(i);let s,o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(s=new Pe(r.error.code,r.error.message))),o?new Mv(e,t,r.state,s):(sr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jm{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static ar(e,t){const i=JSON.parse(t);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new Pe(i.error.code,i.error.message))),s?new jm(e,i.state,r):(sr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const i=JSON.parse(t);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=cE();for(let o=0;r&&o<i.activeTargetIds.length;++o)r=J0(i.activeTargetIds[o]),s=s.add(i.activeTargetIds[o]);return r?new zm(e,s):(sr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Mh{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Mh(t.clientId,t.onlineState):(sr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ZE{constructor(){this.activeTargetIds=cE()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KE{constructor(e,t,i,r,s){this.window=e,this.ii=t,this.persistenceKey=i,this.wr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new ti(Yt),this.started=!1,this.yr=[];const o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=lx(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new ZE),this.Tr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.$i();for(const r of t){if(r===e.wr)continue;const s=e.getItem(lx(e.persistenceKey,r));if(s){const o=zm.ar(r,s);o&&(e.gr=e.gr.insert(o.clientId,o))}}e.Pr();const i=e.storage.getItem(e.vr);if(i){const r=e.br(i);r&&e.Vr(r)}for(const r of e.yr)e.mr(r);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,i){this.Dr(e,t,i),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(xp(this.persistenceKey,e));if(i){const r=jm.ar(e,i);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(xp(this.persistenceKey,e))}updateQueryState(e,t,i){this.kr(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Cr(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ge("SharedClientState","READ",e,t),t}setItem(e,t){Ge("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ge("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const i=e;if(i.storageArea===this.storage){if(Ge("SharedClientState","EVENT",i.key,i.newValue),i.key===this.pr)return void sr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==i.key)if(t.Tr.test(i.key)){if(null==i.newValue){const r=t.Or(i.key);return t.Fr(r,null)}{const r=t.Br(i.key,i.newValue);if(r)return t.Fr(r.clientId,r)}}else if(t.Er.test(i.key)){if(null!==i.newValue){const r=t.Lr(i.key,i.newValue);if(r)return t.qr(r)}}else if(t.Ar.test(i.key)){if(null!==i.newValue){const r=t.Ur(i.key,i.newValue);if(r)return t.Kr(r)}}else if(i.key===t.vr){if(null!==i.newValue){const r=t.br(i.newValue);if(r)return t.Vr(r)}}else if(i.key===t.Ir){const r=function(s){let o=Is.ct;if(null!=s)try{const d=JSON.parse(s);Dt("number"==typeof d),o=d}catch(d){sr("SharedClientState","Failed to read sequence number from WebStorage",d)}return o}(i.newValue);r!==Is.ct&&t.sequenceNumberHandler(r)}else if(i.key===t.Rr){const r=t.Gr(i.newValue);yield Promise.all(r.map(s=>t.syncEngine.Qr(s)))}}else t.yr.push(i)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,i){const r=new Mv(this.currentUser,e,t,i),s=YE(this.persistenceKey,this.currentUser,e);this.setItem(s,r.hr())}Cr(e){const t=YE(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,i){const r=xp(this.persistenceKey,e),s=new jm(e,t,i);this.setItem(r,s.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const i=this.Or(e);return zm.ar(i,t)}Lr(e,t){const i=this.Er.exec(e),r=Number(i[1]);return Mv.ar(new Dr(void 0!==i[2]?i[2]:null),r,t)}Ur(e,t){const i=this.Ar.exec(e),r=Number(i[1]);return jm.ar(r,t)}br(e){return Mh.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Ge("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const i=t?this.gr.insert(e,t):this.gr.remove(e),r=this.Sr(this.gr),s=this.Sr(i),o=[],d=[];return s.forEach(f=>{r.has(f)||o.push(f)}),r.forEach(f=>{s.has(f)||d.push(f)}),this.syncEngine.Wr(o,d).then(()=>{this.gr=i})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=cE();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class dI{constructor(){this.Hr=new ZE,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,i){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new ZE,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class cx{Yr(e){}shutdown(){}}class hI{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ge("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ge("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Gm=null;function QE(){return null===Gm?Gm=268435456+Math.round(2147483648*Math.random()):Gm++,"0x"+Gm.toString(16)}const ux={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $m{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const as="WebChannelConnection";class fI extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,i,r,s){const o=QE(),d=this.To(e,t);Ge("RestConnection",`Sending RPC '${e}' ${o}:`,d,i);const f={};return this.Eo(f,r,s),this.Ao(e,d,f,i).then(m=>(Ge("RestConnection",`Received RPC '${e}' ${o}: `,m),m),m=>{throw wo("RestConnection",`RPC '${e}' ${o} failed with error: `,m,"url: ",d,"request:",i),m})}vo(e,t,i,r,s,o){return this.Io(e,t,i,r,s)}Eo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+pm,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}To(e,t){return`${this.mo}/v1/${t}:${ux[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,i,r){const s=QE();return new Promise((o,d)=>{const f=new mk;f.setWithCredentials(!0),f.listenOnce(fk.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Nw.NO_ERROR:const v=f.getResponseJson();Ge(as,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(v)),o(v);break;case Nw.TIMEOUT:Ge(as,`RPC '${e}' ${s} timed out`),d(new Pe(fe.DEADLINE_EXCEEDED,"Request time out"));break;case Nw.HTTP_ERROR:const C=f.getStatus();if(Ge(as,`RPC '${e}' ${s} failed with status:`,C,"response text:",f.getResponseText()),C>0){let A=f.getResponseJson();Array.isArray(A)&&(A=A[0]);const M=A?.error;if(M&&M.status&&M.message){const P=function(H){const U=H.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(U)>=0?U:fe.UNKNOWN}(M.status);d(new Pe(P,M.message))}else d(new Pe(fe.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Pe(fe.UNAVAILABLE,"Connection failed."));break;default:ut()}}finally{Ge(as,`RPC '${e}' ${s} completed.`)}});const m=JSON.stringify(r);Ge(as,`RPC '${e}' ${s} sending request:`,r),f.send(t,"POST",m,i,15)})}Ro(e,t,i){const r=QE(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Ow(),d=fm(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;void 0!==m&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.xmlHttpFactory=new gk({})),this.Eo(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const v=s.join("");Ge(as,`Creating RPC '${e}' stream ${r}: ${v}`,f);const C=o.createWebChannel(v,f);let A=!1,M=!1;const P=new $m({ro:U=>{M?Ge(as,`Not sending because RPC '${e}' stream ${r} is closed:`,U):(A||(Ge(as,`Opening RPC '${e}' stream ${r} transport.`),C.open(),A=!0),Ge(as,`RPC '${e}' stream ${r} sending:`,U),C.send(U))},oo:()=>C.close()}),H=(U,K,_e)=>{U.listen(K,Oe=>{try{_e(Oe)}catch(je){setTimeout(()=>{throw je},0)}})};return H(C,Ry.EventType.OPEN,()=>{M||Ge(as,`RPC '${e}' stream ${r} transport opened.`)}),H(C,Ry.EventType.CLOSE,()=>{M||(M=!0,Ge(as,`RPC '${e}' stream ${r} transport closed`),P.wo())}),H(C,Ry.EventType.ERROR,U=>{M||(M=!0,wo(as,`RPC '${e}' stream ${r} transport errored:`,U),P.wo(new Pe(fe.UNAVAILABLE,"The operation could not be completed")))}),H(C,Ry.EventType.MESSAGE,U=>{var K;if(!M){const _e=U.data[0];Dt(!!_e);const Oe=_e,je=Oe.error||(null===(K=Oe[0])||void 0===K?void 0:K.error);if(je){Ge(as,`RPC '${e}' stream ${r} received error:`,je);const wt=je.status;let _t=function(Wt){const $r=zi[Wt];if(void 0!==$r)return kS($r)}(wt),Bt=je.message;void 0===_t&&(_t=fe.INTERNAL,Bt="Unknown error status: "+wt+" with message "+je.message),M=!0,P.wo(new Pe(_t,Bt)),C.close()}else Ge(as,`RPC '${e}' stream ${r} received:`,_e),P._o(_e)}}),H(d,pk.STAT_EVENT,U=>{U.stat===j0.PROXY?Ge(as,`RPC '${e}' stream ${r} detected buffering proxy`):U.stat===j0.NOPROXY&&Ge(as,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{P.fo()},0),P}}function pI(){return typeof window<"u"?window:null}function Wm(){return typeof document<"u"?document:null}function qm(n){return new RS(n,!0)}class kv{constructor(e,t,i=1e3,r=1.5,s=6e4){this.ii=e,this.timerId=t,this.Po=i,this.bo=r,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),i=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-i);r>0&&Ge("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class gI{constructor(e,t,i,r,s,o,d,f){this.ii=e,this.$o=i,this.Oo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new kv(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,ve.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,ve.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var i=this;return(0,ve.Z)(function*(){i.Ho(),i.Jo(),i.qo.cancel(),i.Fo++,4!==e?i.qo.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(sr(t.toString()),sr("Using maximum backoff delay to prevent overloading the backend."),i.qo.xo()):t&&t.code===fe.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Yo(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Fo===t&&this.Zo(i,r)},i=>{e(()=>{const r=new Pe(fe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.tu(r)})})}Zo(e,t){const i=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{i(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(r=>{i(()=>this.tu(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Go(){var e=this;this.state=5,this.qo.No((0,ve.Z)(function*(){e.state=0,e.start()}))}tu(e){return Ge("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Ge("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class XE extends gI{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function _F(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(f=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===f?1:"REMOVE"===f?2:"CURRENT"===f?3:"RESET"===f?4:ut(),r=e.targetChange.targetIds||[],s=function(f,m){return f.useProto3Json?(Dt(void 0===m||"string"==typeof m),Ir.fromBase64String(m||"")):(Dt(void 0===m||m instanceof Uint8Array),Ir.fromUint8Array(m||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,d=o&&function(f){const m=void 0===f.code?fe.UNKNOWN:kS(f.code);return new Pe(m,f.message||"")}(o);t=new sv(i,r,s,d||null)}else if("documentChange"in e){const i=e.documentChange,r=Ta(n,i.document.name),s=Ni(i.document.updateTime),o=i.document.createTime?Ni(i.document.createTime):St.min(),d=new jr({mapValue:{fields:i.document.fields}}),f=ai.newFoundDocument(r,s,o,d);t=new bh(i.targetIds||[],i.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const i=e.documentDelete,r=Ta(n,i.document),s=i.readTime?Ni(i.readTime):St.min(),o=ai.newNoDocument(r,s);t=new bh([],i.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const i=e.documentRemove,r=Ta(n,i.document);t=new bh([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return ut();{const i=e.filter,{count:r=0,unchangedNames:s}=i,o=new TS(r,s);t=new xm(i.targetId,o)}}var f;return t}(this.serializer,e),i=function(r){if(!("targetChange"in r))return St.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?St.min():s.readTime?Ni(s.readTime):St.min()}(e);return this.listener.nu(t,i)}su(e){const t={};t.database=Ep(this.serializer),t.addTarget=function(r,s){let o;const d=s.target;if(o=Gy(d)?{documents:PS(r,d)}:{query:Gi(r,d)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=yE(r,s.resumeToken);const f=ov(r,s.expectedCount);null!==f&&(o.expectedCount=f)}else if(s.snapshotVersion.compareTo(St.min())>0){o.readTime=wh(r,s.snapshotVersion.toTimestamp());const f=ov(r,s.expectedCount);null!==f&&(o.expectedCount=f)}return o}(this.serializer,e);const i=function qk(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ut()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Wo(t)}iu(e){const t={};t.database=Ep(this.serializer),t.removeTarget=e,this.Wo(t)}}class dx extends gI{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function NS(n,e){return n&&n.length>0?(Dt(void 0!==e),n.map(t=>function(i,r){let s=Ni(i.updateTime?i.updateTime:r);return s.isEqual(St.min())&&(s=Ni(r)),new rs(s,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=Ni(e.commitTime);return this.listener.cu(i,t)}return Dt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Ep(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>Rm(this.serializer,i))};this.Wo(t)}}class mI extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new Pe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.Io(e,t,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Pe(fe.UNKNOWN,r.toString())})}vo(e,t,i,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.vo(e,t,i,s,o,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Pe(fe.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class hx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(sr(t),this.mu=!1):Ge("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class fx{constructor(e,t,i,r,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(d=>{i.enqueueAndForget((0,ve.Z)(function*(){var f;Zu(o)&&(Ge("RemoteStore","Restarting streams for network reachability change."),yield(f=(0,ve.Z)(function*(m){const v=Ze(m);v.vu.add(4),yield xh(v),v.bu.set("Unknown"),v.vu.delete(4),yield kh(v)}),function(m){return f.apply(this,arguments)})(o))}))}),this.bu=new hx(i,r)}}function kh(n){return eC.apply(this,arguments)}function eC(){return eC=(0,ve.Z)(function*(n){if(Zu(n))for(const e of n.Ru)yield e(!0)}),eC.apply(this,arguments)}function xh(n){return tC.apply(this,arguments)}function tC(){return tC=(0,ve.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),tC.apply(this,arguments)}function xv(n,e){const t=Ze(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),rC(t)?iC(t):Oh(t).Ko()&&nC(t,e))}function Ym(n,e){const t=Ze(n),i=Oh(t);t.Au.delete(e),i.Ko()&&yI(t,e),0===t.Au.size&&(i.Ko()?i.jo():Zu(t)&&t.bu.set("Unknown"))}function nC(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(St.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Oh(n).su(e)}function yI(n,e){n.Vu.qt(e),Oh(n).iu(e)}function iC(n){n.Vu=new fE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Oh(n).start(),n.bu.gu()}function rC(n){return Zu(n)&&!Oh(n).Uo()&&n.Au.size>0}function Zu(n){return 0===Ze(n).vu.size}function sC(n){n.Vu=void 0}function vI(n){return oC.apply(this,arguments)}function oC(){return oC=(0,ve.Z)(function*(n){n.Au.forEach((e,t)=>{nC(n,e)})}),oC.apply(this,arguments)}function px(n,e){return Rv.apply(this,arguments)}function Rv(){return Rv=(0,ve.Z)(function*(n,e){sC(n),rC(n)?(n.bu.Iu(e),iC(n)):n.bu.set("Unknown")}),Rv.apply(this,arguments)}function gx(n,e,t){return aC.apply(this,arguments)}function aC(){return aC=(0,ve.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof sv&&2===e.state&&e.cause)try{yield(i=(0,ve.Z)(function*(r,s){const o=s.cause;for(const d of s.targetIds)r.Au.has(d)&&(yield r.remoteSyncer.rejectListen(d,o),r.Au.delete(d),r.Vu.removeTarget(d))}),function(r,s){return i.apply(this,arguments)})(n,e)}catch(i){Ge("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Ov(n,i)}else if(e instanceof bh?n.Vu.Ht(e):e instanceof xm?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(St.min()))try{const i=yield Mp(n.localStore);t.compareTo(i)>=0&&(yield function(r,s){const o=r.Vu.ce(s);return o.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const m=r.Au.get(f);m&&r.Au.set(f,m.withResumeToken(d.resumeToken,s))}}),o.targetMismatches.forEach((d,f)=>{const m=r.Au.get(d);if(!m)return;r.Au.set(d,m.withResumeToken(Ir.EMPTY_BYTE_STRING,m.snapshotVersion)),yI(r,d);const v=new yc(m.target,d,f,m.sequenceNumber);nC(r,v)}),r.remoteSyncer.applyRemoteEvent(o)}(n,t))}catch(i){Ge("RemoteStore","Failed to raise snapshot:",i),yield Ov(n,i)}var i}),aC.apply(this,arguments)}function Ov(n,e,t){return Zm.apply(this,arguments)}function Zm(){return Zm=(0,ve.Z)(function*(n,e,t){if(!Pu(e))throw e;n.vu.add(1),yield xh(n),n.bu.set("Offline"),t||(t=()=>Mp(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){Ge("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield kh(n)}))}),Zm.apply(this,arguments)}function Nv(n,e){return e().catch(t=>Ov(n,t,e))}function Rh(n){return Km.apply(this,arguments)}function Km(){return Km=(0,ve.Z)(function*(n){const e=Ze(n),t=Ec(e);let i=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;mx(e);)try{const r=yield ox(e.localStore,i);if(null===r){0===e.Eu.length&&t.jo();break}i=r.batchId,_x(e,r)}catch(r){yield Ov(e,r)}Pv(e)&&bI(e)}),Km.apply(this,arguments)}function mx(n){return Zu(n)&&n.Eu.length<10}function _x(n,e){n.Eu.push(e);const t=Ec(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function Pv(n){return Zu(n)&&!Ec(n).Uo()&&n.Eu.length>0}function bI(n){Ec(n).start()}function wI(n){return Ku.apply(this,arguments)}function Ku(){return Ku=(0,ve.Z)(function*(n){Ec(n).hu()}),Ku.apply(this,arguments)}function yx(n){return lC.apply(this,arguments)}function lC(){return lC=(0,ve.Z)(function*(n){const e=Ec(n);for(const t of n.Eu)e.uu(t.mutations)}),lC.apply(this,arguments)}function wF(n,e,t){return Fv.apply(this,arguments)}function Fv(){return Fv=(0,ve.Z)(function*(n,e,t){const i=n.Eu.shift(),r=ev.from(i,e,t);yield Nv(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Rh(n)}),Fv.apply(this,arguments)}function cC(n,e){return uC.apply(this,arguments)}function uC(){return uC=(0,ve.Z)(function*(n,e){var t;e&&Ec(n).ou&&(yield(t=(0,ve.Z)(function*(i,r){if(MS(s=r.code)&&s!==fe.ABORTED){const o=i.Eu.shift();Ec(i).Qo(),yield Nv(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield Rh(i)}var s}),function(i,r){return t.apply(this,arguments)})(n,e)),Pv(n)&&bI(n)}),uC.apply(this,arguments)}function dC(n,e){return hC.apply(this,arguments)}function hC(){return hC=(0,ve.Z)(function*(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),Ge("RemoteStore","RemoteStore received new credentials");const i=Zu(t);t.vu.add(3),yield xh(t),i&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield kh(t)}),hC.apply(this,arguments)}function fC(n,e){return Qm.apply(this,arguments)}function Qm(){return Qm=(0,ve.Z)(function*(n,e){const t=Ze(n);e?(t.vu.delete(2),yield kh(t)):e||(t.vu.add(2),yield xh(t),t.bu.set("Unknown"))}),Qm.apply(this,arguments)}function Oh(n){return n.Su||(n.Su=function(e,t,i){const r=Ze(e);return r.fu(),new XE(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{uo:vI.bind(null,n),ao:px.bind(null,n),nu:gx.bind(null,n)}),n.Ru.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Su.Qo(),rC(n)?iC(n):n.bu.set("Unknown")):(yield n.Su.stop(),sC(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Ec(n){return n.Du||(n.Du=function(e,t,i){const r=Ze(e);return r.fu(),new dx(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{uo:wI.bind(null,n),ao:cC.bind(null,n),au:yx.bind(null,n),cu:wF.bind(null,n)}),n.Ru.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Du.Qo(),yield Rh(n)):(yield n.Du.stop(),n.Eu.length>0&&(Ge("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class Lv{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,t,i,r,s){const o=Date.now()+i,d=new Lv(e,t,o,r,s);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nh(n,e){if(sr("AsyncQueue",`${e}: ${n}`),Pu(n))return new Pe(fe.UNAVAILABLE,`${e}: ${n}`);throw n}class Rp{constructor(e){this.comparator=e?(t,i)=>e(t,i)||it.comparator(t.key,i.key):(t,i)=>it.comparator(t.key,i.key),this.keyedMap=Am(),this.sortedSet=new ti(this.comparator)}static emptySet(e){return new Rp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Rp)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new Rp;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class EI{constructor(){this.Cu=new ti(it.comparator)}track(e){const t=e.doc.key,i=this.Cu.get(t);i?0!==e.type&&3===i.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==i.type?this.Cu=this.Cu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Cu=this.Cu.remove(t):1===e.type&&2===i.type?this.Cu=this.Cu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):ut():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,i)=>{e.push(i)}),e}}class Op{constructor(e,t,i,r,s,o,d,f,m){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,i,r,s){const o=[];return t.forEach(d=>{o.push({type:0,doc:d})}),new Op(e,t,Rp.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class vx{constructor(){this.Nu=void 0,this.listeners=[]}}class CI{constructor(){this.queries=new cl(e=>ll(e),hh),this.onlineState="Unknown",this.ku=new Set}}function DI(n,e){return Vv.apply(this,arguments)}function Vv(){return Vv=(0,ve.Z)(function*(n,e){const t=Ze(n),i=e.query;let r=!1,s=t.queries.get(i);if(s||(r=!0,s=new vx),r)try{s.Nu=yield t.onListen(i)}catch(o){const d=Nh(o,`Initialization of query '${gp(e.query)}' failed`);return void e.onError(d)}t.queries.set(i,s),s.listeners.push(e),e.Mu(t.onlineState),s.Nu&&e.$u(s.Nu)&&mC(t)}),Vv.apply(this,arguments)}function pC(n,e){return gC.apply(this,arguments)}function gC(){return gC=(0,ve.Z)(function*(n,e){const t=Ze(n),i=e.query;let r=!1;const s=t.queries.get(i);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),r=0===s.listeners.length)}if(r)return t.queries.delete(i),t.onUnlisten(i)}),gC.apply(this,arguments)}function EF(n,e){const t=Ze(n);let i=!1;for(const r of e){const o=t.queries.get(r.query);if(o){for(const d of o.listeners)d.$u(r)&&(i=!0);o.Nu=r}}i&&mC(t)}function CF(n,e,t){const i=Ze(n),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(t);i.queries.delete(e)}function mC(n){n.ku.forEach(e=>{e.next()})}class _C{constructor(e,t,i){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=i||{}}$u(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new Op(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Op.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class bx{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class yC{constructor(e){this.serializer=e}rr(e){return Ta(this.serializer,e)}ur(e){return e.metadata.exists?CE(this.serializer,e.document,!1):ai.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Ni(e)}}class wx{constructor(e,t,i){this.ju=e,this.localStore=t,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=SI(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const i=wn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,i=new yC(this.serializer);for(const r of e)if(r.metadata.queries){const s=i.rr(r.metadata.name);for(const o of r.metadata.queries){const d=(t.get(o)||Qt()).add(s);t.set(o,d)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function ax(n,e,t,i){return cI.apply(this,arguments)}(e.localStore,new yC(e.serializer),e.documents,e.ju.id),i=e.Wu(e.documents);for(const r of e.queries)yield bF(e.localStore,r,i.get(r.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function SI(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class II{constructor(e){this.key=e}}class AI{constructor(e){this.key=e}}class TI{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Qt(),this.mutatedKeys=Qt(),this.tc=wS(e),this.ec=new Rp(this.tc)}get nc(){return this.Yu}sc(e,t){const i=t?t.ic:new EI,r=t?t.ec:this.ec;let s=t?t.mutatedKeys:this.mutatedKeys,o=r,d=!1;const f="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,m="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((v,C)=>{const A=r.get(v),M=ju(this.query,C)?C:null,P=!!A&&this.mutatedKeys.has(A.key),H=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let U=!1;A&&M?A.data.isEqual(M.data)?P!==H&&(i.track({type:3,doc:M}),U=!0):this.rc(A,M)||(i.track({type:2,doc:M}),U=!0,(f&&this.tc(M,f)>0||m&&this.tc(M,m)<0)&&(d=!0)):!A&&M?(i.track({type:0,doc:M}),U=!0):A&&!M&&(i.track({type:1,doc:A}),U=!0,(f||m)&&(d=!0)),U&&(M?(o=o.add(M),s=H?s.add(v):s.delete(v)):(o=o.delete(v),s=s.delete(v)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const v="F"===this.query.limitType?o.last():o.first();o=o.delete(v.key),s=s.delete(v.key),i.track({type:1,doc:v})}return{ec:o,ic:i,zi:d,mutatedKeys:s}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((m,v)=>function(C,A){const M=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut()}};return M(C)-M(A)}(m.type,v.type)||this.tc(m.doc,v.doc)),this.oc(i);const o=t?this.uc():[],d=0===this.Zu.size&&this.current?1:0,f=d!==this.Xu;return this.Xu=d,0!==s.length||f?{snapshot:new Op(this.query,e.ec,r,s,e.mutatedKeys,0===d,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new EI,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Qt(),this.ec.forEach(i=>{this.ac(i.key)&&(this.Zu=this.Zu.add(i.key))});const t=[];return e.forEach(i=>{this.Zu.has(i)||t.push(new AI(i))}),this.Zu.forEach(i=>{e.has(i)||t.push(new II(i))}),t}hc(e){this.Yu=e.ir,this.Zu=Qt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Op.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Ex{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Cx{constructor(e){this.key=e,this.fc=!1}}class Dx{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new cl(d=>ll(d),hh),this._c=new Map,this.mc=new Set,this.gc=new ti(it.comparator),this.yc=new Map,this.Ic=new BE,this.Tc={},this.Ec=new Map,this.Ac=Wu.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function Xm(n,e){return Bv.apply(this,arguments)}function Bv(){return Bv=(0,ve.Z)(function*(n,e){const t=Zv(n);let i,r;const s=t.wc.get(e);if(s)i=s.targetId,t.sharedClientState.addLocalQueryTarget(i),r=s.view.lc();else{const o=yield kp(t.localStore,is(e)),d=t.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,r=yield Hv(t,e,i,"current"===d,o.resumeToken),t.isPrimaryClient&&xv(t.remoteStore,o)}return r}),Bv.apply(this,arguments)}function Hv(n,e,t,i,r){return Uv.apply(this,arguments)}function Uv(){return Uv=(0,ve.Z)(function*(n,e,t,i,r){n.Rc=(C,A,M)=>{return(P=(0,ve.Z)(function*(H,U,K,_e){let Oe=U.view.sc(K);Oe.zi&&(Oe=yield Um(H.localStore,U.query,!1).then(({documents:_t})=>U.view.sc(_t,Oe)));const je=_e&&_e.targetChanges.get(U.targetId),wt=U.view.applyChanges(Oe,H.isPrimaryClient,je);return CC(H,U.targetId,wt.cc),wt.snapshot}),function(H,U,K,_e){return P.apply(this,arguments)})(n,C,A,M);var P};const s=yield Um(n.localStore,e,!0),o=new TI(e,s.ir),d=o.sc(s.documents),f=km.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState,r),m=o.applyChanges(d,n.isPrimaryClient,f);CC(n,t,m.cc);const v=new Ex(e,t,o);return n.wc.set(e,v),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),m.snapshot}),Uv.apply(this,arguments)}function MI(n,e){return jv.apply(this,arguments)}function jv(){return jv=(0,ve.Z)(function*(n,e){const t=Ze(n),i=t.wc.get(e),r=t._c.get(i.targetId);if(r.length>1)return t._c.set(i.targetId,r.filter(s=>!hh(s,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Th(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),Ym(t.remoteStore,i.targetId),Pp(t,i.targetId)}).catch(Nu))):(Pp(t,i.targetId),yield Th(t.localStore,i.targetId,!0))}),jv.apply(this,arguments)}function vC(){return vC=(0,ve.Z)(function*(n,e,t){const i=Kv(n);try{const r=yield function(s,o){const d=Ze(s),f=pi.now(),m=o.reduce((A,M)=>A.add(M.key),Qt());let v,C;return d.persistence.runTransaction("Locally write mutations","readwrite",A=>{let M=Xs(),P=Qt();return d.Zi.getEntries(A,m).next(H=>{M=H,M.forEach((U,K)=>{K.isValidDocument()||(P=P.add(U))})}).next(()=>d.localDocuments.getOverlayedDocuments(A,M)).next(H=>{v=H;const U=[];for(const K of o){const _e=bp(K,v.get(K.key).overlayedDocument);null!=_e&&U.push(new eo(K.key,_e,Jw(_e.value.mapValue),Rn.exists(!0)))}return d.mutationQueue.addMutationBatch(A,f,U,o)}).next(H=>{C=H;const U=H.applyToLocalDocumentSet(v,P);return d.documentOverlayCache.saveOverlays(A,H.batchId,U)})}).then(()=>({batchId:C.batchId,changes:Vk(v)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,o,d){let f=s.Tc[s.currentUser.toKey()];f||(f=new ti(Yt)),f=f.insert(o,d),s.Tc[s.currentUser.toKey()]=f}(i,r.batchId,t),yield Cc(i,r.changes),yield Rh(i.remoteStore)}catch(r){const s=Nh(r,"Failed to persist write");t.reject(s)}}),vC.apply(this,arguments)}function Sx(n,e){return zv.apply(this,arguments)}function zv(){return zv=(0,ve.Z)(function*(n,e){const t=Ze(n);try{const i=yield Hm(t.localStore,e);e.targetChanges.forEach((r,s)=>{const o=t.yc.get(s);o&&(Dt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.fc=!0:r.modifiedDocuments.size>0?Dt(o.fc):r.removedDocuments.size>0&&(Dt(o.fc),o.fc=!1))}),yield Cc(t,i,e)}catch(i){yield Nu(i)}}),zv.apply(this,arguments)}function bC(n,e,t){const i=Ze(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.wc.forEach((s,o)=>{const d=o.view.Mu(e);d.snapshot&&r.push(d.snapshot)}),function(s,o){const d=Ze(s);d.onlineState=o;let f=!1;d.queries.forEach((m,v)=>{for(const C of v.listeners)C.Mu(o)&&(f=!0)}),f&&mC(d)}(i.eventManager,e),r.length&&i.dc.nu(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function Ix(n,e,t){return wC.apply(this,arguments)}function wC(){return wC=(0,ve.Z)(function*(n,e,t){const i=Ze(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.yc.get(e),s=r&&r.key;if(s){let o=new ti(it.comparator);o=o.insert(s,ai.newNoDocument(s,St.min()));const d=Qt().add(s),f=new vh(St.min(),new Map,new ti(Yt),o,d);yield Sx(i,f),i.gc=i.gc.remove(s),i.yc.delete(e),Fp(i)}else yield Th(i.localStore,e,!1).then(()=>Pp(i,e,t)).catch(Nu)}),wC.apply(this,arguments)}function Ax(n,e){return Ph.apply(this,arguments)}function Ph(){return Ph=(0,ve.Z)(function*(n,e){const t=Ze(n),i=e.batch.batchId;try{const r=yield sx(t.localStore,e);Fh(t,i,null),Np(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Cc(t,r)}catch(r){yield Nu(r)}}),Ph.apply(this,arguments)}function Tx(n,e,t){return Jm.apply(this,arguments)}function Jm(){return Jm=(0,ve.Z)(function*(n,e,t){const i=Ze(n);try{const r=yield function(s,o){const d=Ze(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return d.mutationQueue.lookupMutationBatch(f,o).next(v=>(Dt(null!==v),m=v.keys(),d.mutationQueue.removeMutationBatch(f,v))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,m,o)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>d.localDocuments.getDocuments(f,m))})}(i.localStore,e);Fh(i,e,t),Np(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Cc(i,r)}catch(r){yield Nu(r)}}),Jm.apply(this,arguments)}function EC(){return EC=(0,ve.Z)(function*(n,e){const t=Ze(n);Zu(t.remoteStore)||Ge("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const o=Ze(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>o.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===i)return void e.resolve();const r=t.Ec.get(i)||[];r.push(e),t.Ec.set(i,r)}catch(i){const r=Nh(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}),EC.apply(this,arguments)}function Np(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function Fh(n,e,t){const i=Ze(n);let r=i.Tc[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.Tc[i.currentUser.toKey()]=r}}function Pp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n._c.get(e))n.wc.delete(i),t&&n.dc.Pc(i,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(i=>{n.Ic.containsKey(i)||xI(n,i)})}function xI(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(Ym(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),Fp(n))}function CC(n,e,t){for(const i of t)i instanceof II?(n.Ic.addReference(i.key,e),Gv(n,i)):i instanceof AI?(Ge("SyncEngine","Document no longer in limbo: "+i.key),n.Ic.removeReference(i.key,e),n.Ic.containsKey(i.key)||xI(n,i.key)):ut()}function Gv(n,e){const t=e.key,i=t.path.canonicalString();n.gc.get(t)||n.mc.has(i)||(Ge("SyncEngine","New document in limbo: "+t),n.mc.add(i),Fp(n))}function Fp(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new it(wn.fromString(e)),i=n.Ac.next();n.yc.set(i,new Cx(t)),n.gc=n.gc.insert(t,i),xv(n.remoteStore,new yc(is(Hu(t.path)),i,"TargetPurposeLimboResolution",Is.ct))}}function Cc(n,e,t){return DC.apply(this,arguments)}function DC(){return DC=(0,ve.Z)(function*(n,e,t){const i=Ze(n),r=[],s=[],o=[];var d;i.wc.isEmpty()||(i.wc.forEach((d,f)=>{o.push(i.Rc(f,e,t).then(m=>{if((m||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(f.targetId,m?.fromCache?"not-current":"current"),m){r.push(m);const v=GE.Li(f.targetId,m);s.push(v)}}))}),yield Promise.all(o),i.dc.nu(r),yield(d=(0,ve.Z)(function*(f,m){const v=Ze(f);try{yield v.persistence.runTransaction("notifyLocalViewChanges","readwrite",C=>ae.forEach(m,A=>ae.forEach(A.Fi,M=>v.persistence.referenceDelegate.addReference(C,A.targetId,M)).next(()=>ae.forEach(A.Bi,M=>v.persistence.referenceDelegate.removeReference(C,A.targetId,M)))))}catch(C){if(!Pu(C))throw C;Ge("LocalStore","Failed to update sequence numbers: "+C)}for(const C of m){const A=C.targetId;if(!C.fromCache){const M=v.Ji.get(A),H=M.withLastLimboFreeSnapshotVersion(M.snapshotVersion);v.Ji=v.Ji.insert(A,H)}}}),function(f,m){return d.apply(this,arguments)})(i.localStore,s))}),DC.apply(this,arguments)}function RI(n,e){return $v.apply(this,arguments)}function $v(){return $v=(0,ve.Z)(function*(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Ge("SyncEngine","User change. New user:",e.toKey());const i=yield WE(t.localStore,e);t.currentUser=e,(r=t).Ec.forEach(o=>{o.forEach(d=>{d.reject(new Pe(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.Ec.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Cc(t,i.er)}var r}),$v.apply(this,arguments)}function SC(n,e){const t=Ze(n),i=t.yc.get(e);if(i&&i.fc)return Qt().add(i.key);{let r=Qt();const s=t._c.get(e);if(!s)return r;for(const o of s){const d=t.wc.get(o);r=r.unionWith(d.view.nc)}return r}}function OI(n,e){return IC.apply(this,arguments)}function IC(){return IC=(0,ve.Z)(function*(n,e){const t=Ze(n),i=yield Um(t.localStore,e.query,!0),r=e.view.hc(i);return t.isPrimaryClient&&CC(t,e.targetId,r.cc),r}),IC.apply(this,arguments)}function Mx(n,e){return NI.apply(this,arguments)}function NI(){return NI=(0,ve.Z)(function*(n,e){const t=Ze(n);return qE(t.localStore,e).then(i=>Cc(t,i))}),NI.apply(this,arguments)}function AC(n,e,t,i){return e_.apply(this,arguments)}function e_(){return e_=(0,ve.Z)(function*(n,e,t,i){const r=Ze(n),s=yield function(o,d){const f=Ze(o),m=Ze(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",v=>m.Sn(v,d).next(C=>C?f.localDocuments.getDocuments(v,C):ae.resolve(null)))}(r.localStore,e);var d;null!==s?("pending"===t?yield Rh(r.remoteStore):"acknowledged"===t||"rejected"===t?(Fh(r,e,i||null),Np(r,e),d=e,Ze(Ze(r.localStore).mutationQueue).Cn(d)):ut(),yield Cc(r,s)):Ge("SyncEngine","Cannot apply mutation batch with id: "+e)}),e_.apply(this,arguments)}function t_(){return t_=(0,ve.Z)(function*(n,e){const t=Ze(n);if(Zv(t),Kv(t),!0===e&&!0!==t.vc){const i=t.sharedClientState.getAllActiveQueryTargets(),r=yield Wv(t,i.toArray());t.vc=!0,yield fC(t.remoteStore,!0);for(const s of r)xv(t.remoteStore,s)}else if(!1===e&&!1!==t.vc){const i=[];let r=Promise.resolve();t._c.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?i.push(o):r=r.then(()=>(Pp(t,o),Th(t.localStore,o,!0))),Ym(t.remoteStore,o)}),yield r,yield Wv(t,i),function(s){const o=Ze(s);o.yc.forEach((d,f)=>{Ym(o.remoteStore,f)}),o.Ic.Ts(),o.yc=new Map,o.gc=new ti(it.comparator)}(t),t.vc=!1,yield fC(t.remoteStore,!1)}}),t_.apply(this,arguments)}function Wv(n,e,t){return TC.apply(this,arguments)}function TC(){return TC=(0,ve.Z)(function*(n,e,t){const i=Ze(n),r=[],s=[];for(const o of e){let d;const f=i._c.get(o);if(f&&0!==f.length){d=yield kp(i.localStore,is(f[0]));for(const m of f){const v=i.wc.get(m),C=yield OI(i,v);C.snapshot&&s.push(C.snapshot)}}else{const m=yield aI(i.localStore,o);d=yield kp(i.localStore,m),yield Hv(i,FI(m),o,!1,d.resumeToken)}r.push(d)}return i.dc.nu(s),r}),TC.apply(this,arguments)}function FI(n){return Dm(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function kx(n){const e=Ze(n);return Ze(Ze(e.localStore).persistence).$i()}function xx(n,e,t,i){return qv.apply(this,arguments)}function qv(){return qv=(0,ve.Z)(function*(n,e,t,i){const r=Ze(n);if(r.vc)return void Ge("SyncEngine","Ignoring unexpected query state notification.");const s=r._c.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield qE(r.localStore,mp(s[0])),d=vh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Ir.EMPTY_BYTE_STRING);yield Cc(r,o,d);break}case"rejected":yield Th(r.localStore,e,!0),Pp(r,e,i);break;default:ut()}}),qv.apply(this,arguments)}function MC(n,e,t){return Yv.apply(this,arguments)}function Yv(){return Yv=(0,ve.Z)(function*(n,e,t){const i=Zv(n);if(i.vc){for(const r of e){if(i._c.has(r)){Ge("SyncEngine","Adding an already active target "+r);continue}const s=yield aI(i.localStore,r),o=yield kp(i.localStore,s);yield Hv(i,FI(s),o.targetId,!1,o.resumeToken),xv(i.remoteStore,o)}for(const r of t)i._c.has(r)&&(yield Th(i.localStore,r,!1).then(()=>{Ym(i.remoteStore,r),Pp(i,r)}).catch(Nu))}}),Yv.apply(this,arguments)}function Zv(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Sx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=SC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ix.bind(null,e),e.dc.nu=EF.bind(null,e.eventManager),e.dc.Pc=CF.bind(null,e.eventManager),e}function Kv(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ax.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Tx.bind(null,e),e}class n_{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.serializer=qm(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return $E(this.persistence,new sI,e.initialUser,this.serializer)}createPersistence(e){return new Sv(Lm.zs,this.serializer)}createSharedClientState(e){return new dI}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Qv extends n_{constructor(e,t,i){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,ve.Z)(function*(){yield t().call(i,e),yield i.Vc.initialize(i,e),yield Kv(i.Vc.syncEngine),yield Rh(i.Vc.remoteStore),yield i.persistence.Ii(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return $E(this.persistence,new sI,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new FE(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const i=new X0(t,this.persistence);return new Q0(e.asyncQueue,i)}createPersistence(e){const t=zE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?os.withCacheSize(this.cacheSizeBytes):os.DEFAULT;return new jE(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,pI(),Wm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new dI}}class BI extends Qv{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,ve.Z)(function*(){yield t().call(i,e);const r=i.Vc.syncEngine;i.sharedClientState instanceof KE&&(i.sharedClientState.syncEngine={jr:AC.bind(null,r),zr:xx.bind(null,r),Wr:MC.bind(null,r),$i:kx.bind(null,r),Qr:Mx.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.Ii(function(){var s=(0,ve.Z)(function*(o){yield function PI(n,e){return t_.apply(this,arguments)}(i.Vc.syncEngine,o),i.gcScheduler&&(o&&!i.gcScheduler.started?i.gcScheduler.start():o||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(o&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():o||i.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=pI();if(!KE.D(t))throw new Pe(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=zE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new KE(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class Lh{initialize(e,t){var i=this;return(0,ve.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>bC(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=RI.bind(null,i.syncEngine),yield fC(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new CI}createDatastore(e){const t=qm(e.databaseInfo.databaseId),i=new fI(e.databaseInfo);return new mI(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,r=e.asyncQueue,s=d=>bC(this.syncEngine,d,0),o=hI.D()?new hI:new cx,new fx(t,i,r,s,o);var t,i,r,s,o}createSyncEngine(e,t){return function(i,r,s,o,d,f,m){const v=new Dx(i,r,s,o,d,f);return m&&(v.vc=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const i=Ze(t);Ge("RemoteStore","RemoteStore shutting down."),i.vu.add(5),yield xh(i),i.Pu.shutdown(),i.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function HI(n,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Tr{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):sr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Lp{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new hr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(i=>{i&&i.Qu()?this.metadata.resolve(i.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.Gu)}`))},i=>this.metadata.reject(i))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.kc();if(null===t)return null;const i=e.xc.decode(t),r=Number(i);isNaN(r)&&e.Mc(`length string (${i}) is not valid number`);const s=yield e.$c(r);return new bx(JSON.parse(s),t.length+r)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,ve.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}$c(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const i=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class Rx{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Pe(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,ve.Z)(function*(s,o){const d=Ze(s),f=Ep(d.serializer)+"/documents",m={documents:o.map(M=>Eh(d.serializer,M))},v=yield d.vo("BatchGetDocuments",f,m,o.length),C=new Map;v.forEach(M=>{const P=function OS(n,e){return"found"in e?function(t,i){Dt(!!i.found);const r=Ta(t,i.found.name),s=Ni(i.found.updateTime),o=i.found.createTime?Ni(i.found.createTime):St.min(),d=new jr({mapValue:{fields:i.found.fields}});return ai.newFoundDocument(r,s,o,d)}(n,e):"missing"in e?function(t,i){Dt(!!i.missing),Dt(!!i.readTime);const r=Ta(t,i.missing),s=Ni(i.readTime);return ai.newNoDocument(r,s)}(n,e):ut()}(d.serializer,M);C.set(P.key.toString(),P)});const A=[];return o.forEach(M=>{const P=C.get(M.toString());Dt(!!P),A.push(P)}),A}),function(s,o){return r.apply(this,arguments)})(t.datastore,e);var r;return i.forEach(r=>t.recordVersion(r)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new yh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,r)=>{const s=it.fromPath(r);e.mutations.push(new Xy(s,e.precondition(s)))}),yield(i=(0,ve.Z)(function*(r,s){const o=Ze(r),d=Ep(o.serializer)+"/documents",f={writes:s.map(m=>Rm(o.serializer,m))};yield o.Io("Commit",d,f)}),function(r,s){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ut();t=St.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new Pe(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(St.min())?Rn.exists(!1):Rn.updateTime(t):Rn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(St.min()))throw new Pe(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rn.updateTime(t)}return Rn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Ox{constructor(e,t,i,r,s){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=s,this.Bc=i.maxAttempts,this.qo=new kv(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,ve.Z)(function*(){const t=new Rx(e.datastore),i=e.qc(t);i&&i.then(r=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(r)}).catch(s=>{e.Uc(s)}))}).catch(r=>{e.Uc(r)})}))}qc(e){try{const t=this.updateFunction(e);return!Vy(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!MS(t)}return!1}}class DF{constructor(e,t,i,r){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Dr.UNAUTHENTICATED,this.clientId=Fw.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var o=(0,ve.Z)(function*(d){Ge("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(i,o=>(Ge("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=Nh(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function kC(n,e){return Xv.apply(this,arguments)}function Xv(){return Xv=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ge("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var r=(0,ve.Z)(function*(s){i.isEqual(s)||(yield WE(e.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),Xv.apply(this,arguments)}function Jv(n,e){return Vh.apply(this,arguments)}function Vh(){return Vh=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield i_(n);Ge("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>dC(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>dC(e.remoteStore,s)),n._onlineComponents=e}),Vh.apply(this,arguments)}function UI(n){return"FirebaseError"===n.name?n.code===fe.FAILED_PRECONDITION||n.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function i_(n){return xC.apply(this,arguments)}function xC(){return xC=(0,ve.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ge("FirestoreClient","Using user provided OfflineComponentProvider");try{yield kC(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!UI(t))throw t;wo("Error using user provided cache. Falling back to memory cache: "+t),yield kC(n,new n_)}}else Ge("FirestoreClient","Using default OfflineComponentProvider"),yield kC(n,new n_);return n._offlineComponents}),xC.apply(this,arguments)}function r_(n){return RC.apply(this,arguments)}function RC(){return RC=(0,ve.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ge("FirestoreClient","Using user provided OnlineComponentProvider"),yield Jv(n,n._uninitializedComponentsProvider._online)):(Ge("FirestoreClient","Using default OnlineComponentProvider"),yield Jv(n,new Lh))),n._onlineComponents}),RC.apply(this,arguments)}function jI(n){return i_(n).then(e=>e.persistence)}function eb(n){return i_(n).then(e=>e.localStore)}function tb(n){return r_(n).then(e=>e.remoteStore)}function nb(n){return r_(n).then(e=>e.syncEngine)}function Dc(n){return s_.apply(this,arguments)}function s_(){return s_=(0,ve.Z)(function*(n){const e=yield r_(n),t=e.eventManager;return t.onListen=Xm.bind(null,e.syncEngine),t.onUnlisten=MI.bind(null,e.syncEngine),t}),s_.apply(this,arguments)}function NC(n,e,t={}){const i=new hr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(r,s,o,d,f){const m=new Tr({next:C=>{s.enqueueAndForget(()=>pC(r,v));const A=C.docs.has(o);!A&&C.fromCache?f.reject(new Pe(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&C.fromCache&&d&&"server"===d.source?f.reject(new Pe(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(C)},error:C=>f.reject(C)}),v=new _C(Hu(o.path),m,{includeMetadataChanges:!0,Ku:!0});return DI(r,v)}(yield Dc(n),n.asyncQueue,e,t,i)})),i.promise}function GI(n,e,t={}){const i=new hr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(r,s,o,d,f){const m=new Tr({next:C=>{s.enqueueAndForget(()=>pC(r,v)),C.fromCache&&"server"===d.source?f.reject(new Pe(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(C)},error:C=>f.reject(C)}),v=new _C(o,m,{includeMetadataChanges:!0,Ku:!0});return DI(r,v)}(yield Dc(n),n.asyncQueue,e,t,i)})),i.promise}function Fx(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const WI=new Map;function FC(n,e,t){if(!t)throw new Pe(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function qI(n,e,t,i){if(!0===e&&!0===i)throw new Pe(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function LC(n){if(!it.isDocumentKey(n))throw new Pe(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function VC(n){if(it.isDocumentKey(n))throw new Pe(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ib(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ut()}function on(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ib(n);throw new Pe(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function BC(n,e){if(e<=0)throw new Pe(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class YI{constructor(e){var t,i;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Fx(null!==(i=e.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(r){if(void 0!==r.timeoutSeconds){if(isNaN(r.timeoutSeconds))throw new Pe(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Pe(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Pe(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class o_{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new YI({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Pe(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new YI(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new yk;switch(t.type){case"firstParty":return new wk(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Pe(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=WI.get(e);t&&(Ge("ComponentProvider","Removing Datastore"),WI.delete(e),t.terminate())}(this),Promise.resolve()}}class li{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ka(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new li(this.firestore,e,this._key)}}class Mr{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Mr(this.firestore,e,this._query)}}class ka extends Mr{constructor(e,t,i){super(e,t,Hu(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new li(this.firestore,null,new it(e))}withConverter(e){return new ka(this.firestore,e,this._path)}}function UC(n,e,...t){if(n=(0,F.m9)(n),FC("collection","path",e),n instanceof o_){const i=wn.fromString(e,...t);return VC(i),new ka(n,null,i)}{if(!(n instanceof li||n instanceof ka))throw new Pe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(wn.fromString(e,...t));return VC(i),new ka(n.firestore,null,i)}}function rb(n,e,...t){if(n=(0,F.m9)(n),1===arguments.length&&(e=Fw.A()),FC("doc","path",e),n instanceof o_){const i=wn.fromString(e,...t);return LC(i),new li(n,null,new it(i))}{if(!(n instanceof li||n instanceof ka))throw new Pe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(wn.fromString(e,...t));return LC(i),new li(n.firestore,n instanceof ka?n.converter:null,new it(i))}}function KI(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),(n instanceof li||n instanceof ka)&&(e instanceof li||e instanceof ka)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function QI(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),n instanceof Mr&&e instanceof Mr&&n.firestore===e.firestore&&hh(n._query,e._query)&&n.converter===e.converter}class XI{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new kv(this,"async_queue_retry"),this.Xc=()=>{const t=Wm();t&&Ge("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=Wm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Wm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new hr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,ve.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Pu(t))throw t;Ge("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(i=>{throw this.Wc=i,this.Hc=!1,sr("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(i)),i}).then(i=>(this.Hc=!1,i))));return this.Gc=t,t}enqueueAfterDelay(e,t,i){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=Lv.createAndSchedule(this,e,t,i,s=>this.na(s));return this.zc.push(r),r}Zc(){this.Wc&&ut()}verifyOperationInProgress(){}sa(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function JI(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class AF{constructor(){this._progressObserver={},this._taskCompletionResolver=new hr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class mi extends o_{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new XI,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Lx(this),this._firestoreClient.terminate()}}function or(n){return n._firestoreClient||Lx(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Lx(n){var e,t,i;const r=n._freezeSettings(),s=(d=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new aS(n._databaseId,d,n._persistenceKey,(m=r).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,Fx(m.experimentalLongPollingOptions),m.useFetchStreams));var d,m;n._firestoreClient=new DF(n._authCredentials,n._appCheckCredentials,n._queue,s),(null===(t=r.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(i=r.cache)||void 0===i?void 0:i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}function jC(n,e,t){const i=new hr;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield kC(n,t),yield Jv(n,e),i.resolve()}catch(r){const s=r;if(!UI(s))throw s;wo("Error enabling indexeddb cache. Falling back to memory cache: "+s),i.reject(s)}})).then(()=>i.promise)}function rA(n){if(n._initialized||n._terminated)throw new Pe(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Sc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sc(Ir.fromBase64String(e))}catch(t){throw new Pe(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Sc(Ir.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ic{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ci(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Bh{constructor(e){this._methodName=e}}class GC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Yt(this._lat,e._lat)||Yt(this._long,e._long)}}const xF=/^__.*__$/;class RF{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new eo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Aa(e,this.data,t,this.fieldTransforms)}}class sA{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new eo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Hx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut()}}class lb{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new lb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:i,la:!1});return r.fa(e),r}da(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:i,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return c_(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Hx(this.ca)&&xF.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class OF{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||qm(e)}ya(e,t,i,r=!1){return new lb({ca:e,methodName:t,ga:i,path:Ci.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hh(n){const e=n._freezeSettings(),t=qm(n._databaseId);return new OF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function a_(n,e,t,i,r,s={}){const o=n.ya(s.merge||s.mergeFields?2:0,e,t,r);db("Data must be an object, but it was:",o,i);const d=oA(i,o);let f,m;if(s.merge)f=new Eo(o.fieldMask),m=o.fieldTransforms;else if(s.mergeFields){const v=[];for(const C of s.mergeFields){const A=Hp(e,C,t);if(!o.contains(A))throw new Pe(fe.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);aA(v,A)||v.push(A)}f=new Eo(v),m=o.fieldTransforms.filter(C=>f.covers(C.field))}else f=null,m=o.fieldTransforms;return new RF(new jr(d),f,m)}class Bp extends Bh{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bp}}function Ux(n,e,t){return new lb({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class So extends Bh{_toFieldTransform(e){return new Js(e.path,new mc)}isEqual(e){return e instanceof So}}class jx extends Bh{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=Ux(this,e,!0),i=this.pa.map(s=>Uh(s,t)),r=new Co(i);return new Js(e.path,r)}isEqual(e){return this===e}}class $C extends Bh{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=Ux(this,e,!0),i=this.pa.map(s=>Uh(s,t)),r=new Ia(i);return new Js(e.path,r)}isEqual(e){return this===e}}class zx extends Bh{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new yp(e.serializer,CS(e.serializer,this.Ia));return new Js(e.path,t)}isEqual(e){return this===e}}function no(n,e,t,i){const r=n.ya(1,e,t);db("Data must be an object, but it was:",r,i);const s=[],o=jr.empty();cc(i,(f,m)=>{const v=l_(e,f,t);m=(0,F.m9)(m);const C=r.da(v);if(m instanceof Bp)s.push(v);else{const A=Uh(m,C);null!=A&&(s.push(v),o.set(v,A))}});const d=new Eo(s);return new sA(o,d,r.fieldTransforms)}function WC(n,e,t,i,r,s){const o=n.ya(1,e,t),d=[Hp(e,i,t)],f=[r];if(s.length%2!=0)throw new Pe(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<s.length;A+=2)d.push(Hp(e,s[A])),f.push(s[A+1]);const m=[],v=jr.empty();for(let A=d.length-1;A>=0;--A)if(!aA(m,d[A])){const M=d[A];let P=f[A];P=(0,F.m9)(P);const H=o.da(M);if(P instanceof Bp)m.push(M);else{const U=Uh(P,H);null!=U&&(m.push(M),v.set(M,U))}}const C=new Eo(m);return new sA(v,C,o.fieldTransforms)}function cb(n,e,t,i=!1){return Uh(t,n.ya(i?4:3,e))}function Uh(n,e){if(ub(n=(0,F.m9)(n)))return db("Unsupported field value:",e,n),oA(n,e);if(n instanceof Bh)return function(t,i){if(!Hx(i.ca))throw i._a(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i._a(`${t._methodName}() is not currently supported inside arrays`);const r=t._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,i){const r=[];let s=0;for(const o of t){let d=Uh(o,i.wa(s));null==d&&(d={nullValue:"NULL_VALUE"}),r.push(d),s++}return{arrayValue:{values:r}}}(n,e)}return function(t,i){if(null===(t=(0,F.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return CS(i.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const r=pi.fromDate(t);return{timestampValue:wh(i.serializer,r)}}if(t instanceof pi){const r=new pi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:wh(i.serializer,r)}}if(t instanceof GC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Sc)return{bytesValue:yE(i.serializer,t._byteString)};if(t instanceof li){const r=i.databaseId,s=t.firestore._databaseId;if(!s.isEqual(r))throw i._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:av(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i._a(`Unsupported field value: ${ib(t)}`)}(n,e)}function oA(n,e){const t={};return Kw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cc(n,(i,r)=>{const s=Uh(r,e.ha(i));null!=s&&(t[i]=s)}),{mapValue:{fields:t}}}function ub(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof pi||n instanceof GC||n instanceof Sc||n instanceof li||n instanceof Bh)}function db(n,e,t){if(!ub(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=ib(t);throw e._a("an object"===i?n+" a custom object":n+" "+i)}var i}function Hp(n,e,t){if((e=(0,F.m9)(e))instanceof Ic)return e._internalPath;if("string"==typeof e)return l_(n,e);throw c_("Field path arguments must be of type string or ",n,!1,void 0,t)}const Gx=new RegExp("[~\\*/\\[\\]]");function l_(n,e,t){if(e.search(Gx)>=0)throw c_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ic(...e.split("."))._internalPath}catch{throw c_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function c_(n,e,t,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(s||o)&&(f+=" (found",s&&(f+=` in field ${i}`),o&&(f+=` in document ${r}`),f+=")"),new Pe(fe.INVALID_ARGUMENT,d+n+f)}function aA(n,e){return n.some(t=>t.isEqual(e))}class Up{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new li(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new $x(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class $x extends Up{data(){return super.data()}}function jp(n,e){return"string"==typeof e?l_(n,e):e instanceof Ic?e._internalPath:e._delegate._internalPath}function Ac(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Pe(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hb{}class jh extends hb{}function ls(n,e,...t){let i=[];e instanceof hb&&i.push(e),i=i.concat(t),function(r){const s=r.filter(d=>d instanceof zp).length,o=r.filter(d=>d instanceof u_).length;if(s>1||s>0&&o>0)throw new Pe(fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class u_ extends jh{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new u_(e,t,i)}_apply(e){const t=this._parse(e);return p_(e._query,t),new Mr(e.firestore,e.converter,qy(e._query,t))}_parse(e){const t=Hh(e.firestore);return function(r,s,o,d,f,m,v){let C;if(f.isKeyField()){if("array-contains"===m||"array-contains-any"===m)throw new Pe(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if("in"===m||"not-in"===m){f_(v,m);const A=[];for(const M of v)A.push(QC(d,r,M));C={arrayValue:{values:A}}}else C=QC(d,r,v)}else"in"!==m&&"not-in"!==m&&"array-contains-any"!==m||f_(v,m),C=cb(o,"where",v,"in"===m||"not-in"===m);return yn.create(f,m,C)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class zp extends hb{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new zp(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return 1===t.length?t[0]:Bn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,r){let s=i;const o=r.getFlattenedFilters();for(const d of o)p_(s,d),s=qy(s,d)}(e._query,t),new Mr(e.firestore,e.converter,qy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class qC extends jh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new qC(e,t)}_apply(e){const t=function(i,r,s){if(null!==i.startAt)throw new Pe(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Pe(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new Ar(r,s);return function(d,f){if(null===vS(d)){const m=pp(d);null!==m&&XC(0,m,f.field)}}(i,o),o}(e._query,this._field,this._direction);return new Mr(e.firestore,e.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new gc(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class YC extends jh{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new YC(e,t,i)}_apply(e){return new Mr(e.firestore,e.converter,Im(e._query,this._limit,this._limitType))}}class d_ extends jh{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new d_(e,t,i)}_apply(e){const t=KC(e,this.type,this._docOrFields,this._inclusive);return new Mr(e.firestore,e.converter,(r=t,new gc((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class h_ extends jh{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new h_(e,t,i)}_apply(e){const t=KC(e,this.type,this._docOrFields,this._inclusive);return new Mr(e.firestore,e.converter,(r=t,new gc((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function KC(n,e,t,i){if(t[0]=(0,F.m9)(t[0]),t[0]instanceof Up)return function(r,s,o,d,f){if(!d)throw new Pe(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const m=[];for(const v of Uu(r))if(v.field.isKeyField())m.push(fc(s,d.key));else{const C=d.data.field(v.field);if(Uy(C))throw new Pe(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+v.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===C){const A=v.field.canonicalString();throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${A}' (used as the orderBy) does not exist.`)}m.push(C)}return new pc(m,f)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=Hh(n.firestore);return function(s,o,d,f,m,v){const C=s.explicitOrderBy;if(m.length>C.length)throw new Pe(fe.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const A=[];for(let M=0;M<m.length;M++){const P=m[M];if(C[M].field.isKeyField()){if("string"!=typeof P)throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof P}`);if(!bS(s)&&-1!==P.indexOf("/"))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${P}' contains a slash.`);const H=s.path.child(wn.fromString(P));if(!it.isDocumentKey(H))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${H}' is not because it contains an odd number of segments.`);const U=new it(H);A.push(fc(o,U))}else{const H=cb(d,f,P);A.push(H)}}return new pc(A,v)}(n._query,n.firestore._databaseId,r,e,t,i)}}function QC(n,e,t){if("string"==typeof(t=(0,F.m9)(t))){if(""===t)throw new Pe(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bS(e)&&-1!==t.indexOf("/"))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(wn.fromString(t));if(!it.isDocumentKey(i))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return fc(n,new it(i))}if(t instanceof li)return fc(n,t._key);throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ib(t)}.`)}function f_(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function p_(n,e){if(e.isInequality()){const i=pp(n),r=e.field;if(null!==i&&!i.isEqual(r))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${r.toString()}'`);const s=vS(n);null!==s&&XC(0,r,s)}const t=function(i,r){for(const s of i)for(const o of s.getFlattenedFilters())if(r.indexOf(o.op)>=0)return o.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Pe(fe.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function XC(n,e,t){if(!t.isEqual(e))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class fb{convertValue(e,t="none"){switch(uc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ca(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ut()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return cc(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new GC(Vn(e.latitude),Vn(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=vm(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(ch(e));default:return null}}convertTimestamp(e){const t=lh(e);return new pi(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=wn.fromString(e);Dt(IE(i));const r=new ol(i.get(1),i.get(3)),s=new it(i.popFirst(5));return r.isEqual(t)||sr(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function g_(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class qx extends fb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new li(this.firestore,null,t)}}class zh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Tc extends Up{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(jp("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class pb extends Tc{data(e={}){return super.data(e)}}class Gh{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new zh(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new pb(this._firestore,this._userDataWriter,i.key,i,new zh(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>({type:"added",doc:new pb(i._firestore,i._userDataWriter,o.doc.key,o.doc,new zh(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>r||3!==o.type).map(o=>{const d=new pb(i._firestore,i._userDataWriter,o.doc.key,o.doc,new zh(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,m=-1;return 0!==o.type&&(f=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),m=s.indexOf(o.doc.key)),{type:HF(o.type),doc:d,oldIndex:f,newIndex:m}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function HF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut()}}function Zx(n,e){return n instanceof Tc&&e instanceof Tc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Gh&&e instanceof Gh&&n._firestore===e._firestore&&QI(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Qu extends fb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new li(this.firestore,null,t)}}function JC(n,e,t){n=on(n,li);const i=on(n.firestore,mi),r=g_(n.converter,e,t);return Mc(i,[a_(Hh(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,Rn.none())])}function mb(n,e,t,...i){n=on(n,li);const r=on(n.firestore,mi),s=Hh(r);let o;return o="string"==typeof(e=(0,F.m9)(e))||e instanceof Ic?WC(s,"updateDoc",n._key,e,t,i):no(s,"updateDoc",n._key,e),Mc(r,[o.toMutation(n._key,Rn.exists(!0))])}function _b(n,...e){var t,i,r;n=(0,F.m9)(n);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||JI(e[o])||(s=e[o],o++);const d={includeMetadataChanges:s.includeMetadataChanges};if(JI(e[o])){const C=e[o];e[o]=null===(t=C.next)||void 0===t?void 0:t.bind(C),e[o+1]=null===(i=C.error)||void 0===i?void 0:i.bind(C),e[o+2]=null===(r=C.complete)||void 0===r?void 0:r.bind(C)}let f,m,v;if(n instanceof li)m=on(n.firestore,mi),v=Hu(n._key.path),f={next:C=>{e[o]&&e[o](pA(m,n,C))},error:e[o+1],complete:e[o+2]};else{const C=on(n,Mr);m=on(C.firestore,mi),v=C._query;const A=new Qu(m);f={next:M=>{e[o]&&e[o](new Gh(m,A,C,M))},error:e[o+1],complete:e[o+2]},Ac(n._query)}return function(C,A,M,P){const H=new Tr(P),U=new _C(A,H,M);return C.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return DI(yield Dc(C),U)})),()=>{H.Dc(),C.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return pC(yield Dc(C),U)}))}}(or(m),v,d,f)}function Mc(n,e){return function(t,i){const r=new hr;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function kI(n,e,t){return vC.apply(this,arguments)}(yield nb(t),i,r)})),r.promise}(or(n),e)}function pA(n,e,t){const i=t.docs.get(e._key),r=new Qu(n);return new Tc(n,r,e._key,i,new zh(t.hasPendingWrites,t.fromCache),e.converter)}const nD={maxAttempts:5};class oR{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Hh(e)}set(e,t,i){this._verifyNotCommitted();const r=kc(e,this._firestore),s=g_(r.converter,t,i),o=a_(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(o.toMutation(r._key,Rn.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const s=kc(e,this._firestore);let o;return o="string"==typeof(t=(0,F.m9)(t))||t instanceof Ic?WC(this._dataReader,"WriteBatch.update",s._key,t,i,r):no(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Rn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=kc(e,this._firestore);return this._mutations=this._mutations.concat(new yh(t._key,Rn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function kc(n,e){if((n=(0,F.m9)(n)).firestore!==e)throw new Pe(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class iD extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Hh(e)}get(e){const t=kc(e,this._firestore),i=new qx(this._firestore);return this._transaction.lookup([t._key]).then(r=>{if(!r||1!==r.length)return ut();const s=r[0];if(s.isFoundDocument())return new Up(this._firestore,i,s.key,s,t.converter);if(s.isNoDocument())return new Up(this._firestore,i,t._key,null,t.converter);throw ut()})}set(e,t,i){const r=kc(e,this._firestore),s=g_(r.converter,t,i),o=a_(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,o),this}update(e,t,i,...r){const s=kc(e,this._firestore);let o;return o="string"==typeof(t=(0,F.m9)(t))||t instanceof Ic?WC(this._dataReader,"Transaction.update",s._key,t,i,r):no(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,o),this}delete(e){const t=kc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=kc(e,this._firestore),i=new Qu(this._firestore);return super.get(e).then(r=>new Tc(this._firestore,i,t._key,r._document,new zh(!1,!1),t.converter))}}function _A(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function yA(){if(typeof Uint8Array>"u")throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function hR(){if(!function gF(){return typeof atob<"u"}())throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){pm=bi.SDK_VERSION,(0,bi._registerComponent)(new Lr.wA("firestore",(t,{instanceIdentifier:i,options:r})=>{const s=t.getProvider("app").getImmediate(),o=new mi(new $0(t.getProvider("auth-internal")),new Zt(t.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Pe(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ol(d.options.projectId,f)}(s,i),s);return r=Object.assign({useFetchStreams:e},r),o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),(0,bi.registerVersion)(z0,"3.13.0",n),(0,bi.registerVersion)(z0,"3.13.0","esm2017")}();class yb{constructor(e){this._delegate=e}static fromBase64String(e){return hR(),new yb(Sc.fromBase64String(e))}static fromUint8Array(e){return yA(),new yb(Sc.fromUint8Array(e))}toBase64(){return hR(),this._delegate.toBase64()}toUint8Array(){return yA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function vA(n){return function QF(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class XF{enableIndexedDbPersistence(e,t){return function sb(n,e){rA(n=on(n,mi));const t=or(n);if(t._uninitializedComponentsProvider)throw new Pe(fe.FAILED_PRECONDITION,"SDK cache is already specified.");wo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=n._freezeSettings(),r=new Lh;return jC(t,r,new Qv(r,i.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function MF(n){rA(n=on(n,mi));const e=or(n);if(e._uninitializedComponentsProvider)throw new Pe(fe.FAILED_PRECONDITION,"SDK cache is already specified.");wo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),i=new Lh;return jC(e,i,new BI(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function ob(n){if(n._initialized&&!n._terminated)throw new Pe(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new hr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(i){if(!Ko.D())return Promise.resolve();const r=i+"main";yield Ko.delete(r)}),function(i){return t.apply(this,arguments)})(zE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class fR{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof ol||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&wo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function HC(n,e,t,i={}){var r;const s=(n=on(n,o_))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&wo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let d,f;if("string"==typeof i.mockUserToken)d=i.mockUserToken,f=Dr.MOCK_USER;else{d=(0,F.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new Pe(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Dr(m)}n._authCredentials=new vk(new G0(d,f))}}(this._delegate,e,t,i)}enableNetwork(){return function tA(n){return function SF(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield jI(n),t=yield tb(n);return e.setNetworkEnabled(!0),function(i){const r=Ze(i);return r.vu.delete(0),kh(r)}(t)}))}(or(n=on(n,mi)))}(this._delegate)}disableNetwork(){return function kF(n){return function zI(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield jI(n),t=yield tb(n);return e.setNetworkEnabled(!1),(i=(0,ve.Z)(function*(r){const s=Ze(r);s.vu.add(0),yield xh(s),s.bu.set("Offline")}),function(r){return i.apply(this,arguments)})(t);var i}))}(or(n=on(n,mi)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,qI("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function eA(n){return function(e){const t=new hr;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function hl(n,e){return EC.apply(this,arguments)}(yield nb(e),t)})),t.promise}(or(n=on(n,mi)))}(this._delegate)}onSnapshotsInSync(e){return function tD(n,e){return function $I(n,e){const t=new Tr(e);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return i=yield Dc(n),r=t,Ze(i).ku.add(r),void r.next();var i,r})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return i=yield Dc(n),r=t,void Ze(i).ku.delete(r);var i,r}))}}(or(n=on(n,mi)),JI(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Se(this,UC(this._delegate,e))}catch(t){throw w(t,"collection()","Firestore.collection()")}}doc(e){try{return new y(this,rb(this._delegate,e))}catch(t){throw w(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new L(this,function ZI(n,e){if(n=on(n,o_),FC("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Mr(n,null,(t=e,new gc(wn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw w(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function aR(n,e,t){n=on(n,mi);const i=Object.assign(Object.assign({},nD),t);return function(r){if(r.maxAttempts<1)throw new Pe(fe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,s,o){const d=new hr;return r.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const f=yield function OC(n){return r_(n).then(e=>e.datastore)}(r);new Ox(r.asyncQueue,f,o,s,d).run()})),d.promise}(or(n),r=>e(new iD(n,r)),i)}(this._delegate,t=>e(new u(this,t)))}batch(){return or(this._delegate),new h(new oR(this._delegate,e=>Mc(this._delegate,e)))}loadBundle(e){return function iA(n,e){const t=or(n=on(n,mi)),i=new AF;return function PC(n,e,t,i){const r=function(s,o){let d;return d="string"==typeof s?uE().encode(s):s,f=function(f,m){if(f instanceof Uint8Array)return HI(f,m);if(f instanceof ArrayBuffer)return HI(new Uint8Array(f),m);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new Lp(f,o);var f}(t,qm(e));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function LI(n,e,t){const i=Ze(n);var r;(r=(0,ve.Z)(function*(s,o,d){try{const f=yield o.getMetadata();if(yield function(A,M){const P=Ze(A),H=Ni(M.createTime);return P.persistence.runTransaction("hasNewerBundle","readonly",U=>P.qs.getBundleMetadata(U,M.id)).then(U=>!!U&&U.createTime.compareTo(H)>=0)}(s.localStore,f))return yield o.close(),d._completeWith({taskState:"Success",documentsLoaded:(A=f).totalDocuments,bytesLoaded:A.totalBytes,totalDocuments:A.totalDocuments,totalBytes:A.totalBytes}),Promise.resolve(new Set);d._updateProgress(SI(f));const m=new wx(f,s.localStore,o.serializer);let v=yield o.bc();for(;v;){const A=yield m.zu(v);A&&d._updateProgress(A),v=yield o.bc()}const C=yield m.complete();return yield Cc(s,C.Ju,void 0),yield function(A,M){const P=Ze(A);return P.persistence.runTransaction("Save bundle","readwrite",H=>P.qs.saveBundleMetadata(H,M))}(s.localStore,f),d._completeWith(C.progress),Promise.resolve(C.Hu)}catch(f){return wo("SyncEngine",`Loading bundle failed with ${f}`),d._failWith(f),Promise.resolve(new Set)}var A}),function(s,o,d){return r.apply(this,arguments)})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield nb(n),r,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function Vx(n,e){return function IF(n,e){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,i){const r=Ze(t);return r.persistence.runTransaction("Get named query","readonly",s=>r.qs.getNamedQuery(s,i))}(yield eb(n),e)}))}(or(n=on(n,mi)),e).then(t=>t?new Mr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new L(this,t):null)}}class a extends fb{constructor(e){super(),this.firestore=e}convertBytes(e){return new yb(new Sc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return y.forKey(t,this.firestore,null)}}class u{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new a(e)}get(e){const t=$e(e);return this._delegate.get(t).then(i=>new x(this._firestore,new Tc(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=$e(e);return i?(_A("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=$e(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=$e(e);return this._delegate.delete(t),this}}class h{constructor(e){this._delegate=e}set(e,t,i){const r=$e(e);return i?(_A("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=$e(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=$e(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class p{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new pb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new N(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=p.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(t);return s||(s=new p(e,new a(e),t),r.set(t,s)),s}}p.INSTANCES=new WeakMap;class y{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new a(e)}static forPath(e,t,i){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new y(t,new li(t._delegate,i,new it(e)))}static forKey(e,t,i){return new y(t,new li(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Se(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Se(this.firestore,UC(this._delegate,e))}catch(t){throw w(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,F.m9)(e))instanceof li&&KI(this._delegate,e)}set(e,t){t=_A("DocumentReference.set",t);try{return t?JC(this._delegate,e,t):JC(this._delegate,e)}catch(i){throw w(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?mb(this._delegate,e):mb(this._delegate,e,t,...i)}catch(r){throw w(r,"updateDoc()","DocumentReference.update()")}}delete(){return function eD(n){return Mc(on(n.firestore,mi),[new yh(n._key,Rn.none())])}(this._delegate)}onSnapshot(...e){const t=D(e),i=I(e,r=>new x(this.firestore,new Tc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return _b(this._delegate,t,i)}get(e){let t;return t="cache"===e?.source?function gb(n){n=on(n,li);const e=on(n.firestore,mi),t=or(e),i=new Qu(e);return function Nx(n,e){const t=new hr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(i=(0,ve.Z)(function*(r,s,o){try{const d=yield function(f,m){const v=Ze(f);return v.persistence.runTransaction("read document","readonly",C=>v.localDocuments.getDocument(C,m))}(r,s);d.isFoundDocument()?o.resolve(d):d.isNoDocument()?o.resolve(null):o.reject(new Pe(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const f=Nh(d,`Failed to get document '${s} from cache`);o.reject(f)}}),function(r,s,o){return i.apply(this,arguments)})(yield eb(n),e,t);var i})),t.promise}(t,n._key).then(r=>new Tc(e,i,n._key,r,new zh(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Kx(n){n=on(n,li);const e=on(n.firestore,mi);return NC(or(e),n._key,{source:"server"}).then(t=>pA(e,n,t))}(this._delegate):function UF(n){n=on(n,li);const e=on(n.firestore,mi);return NC(or(e),n._key).then(t=>pA(e,n,t))}(this._delegate),t.then(i=>new x(this.firestore,new Tc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new y(this.firestore,this._delegate.withConverter(e?p.getInstance(this.firestore,e):null))}}function w(n,e,t){return n.message=n.message.replace(e,t),n}function D(n){for(const e of n)if("object"==typeof e&&!vA(e))return e;return{}}function I(n,e){var t,i;let r;return r=vA(n[0])?n[0]:vA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(e(s))},error:null===(t=r.error)||void 0===t?void 0:t.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class x{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new y(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Zx(this._delegate,e._delegate)}}class N extends x{data(e){const t=this._delegate.data(e);return function _k(n,e){n||ut()}(void 0!==t),t}}class L{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new a(e)}where(e,t,i){try{return new L(this.firestore,ls(this._delegate,function NF(n,e,t){const i=e,r=jp("where",n);return u_._create(r,i,t)}(e,t,i)))}catch(r){throw w(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new L(this.firestore,ls(this._delegate,function lA(n,e="asc"){const t=e,i=jp("orderBy",n);return qC._create(i,t)}(e,t)))}catch(i){throw w(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new L(this.firestore,ls(this._delegate,function cA(n){return BC("limit",n),YC._create("limit",n,"F")}(e)))}catch(t){throw w(t,"limit()","Query.limit()")}}limitToLast(e){try{return new L(this.firestore,ls(this._delegate,function Wx(n){return BC("limitToLast",n),YC._create("limitToLast",n,"L")}(e)))}catch(t){throw w(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new L(this.firestore,ls(this._delegate,function FF(...n){return d_._create("startAt",n,!0)}(...e)))}catch(t){throw w(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new L(this.firestore,ls(this._delegate,function ZC(...n){return d_._create("startAfter",n,!1)}(...e)))}catch(t){throw w(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new L(this.firestore,ls(this._delegate,function uA(...n){return h_._create("endBefore",n,!1)}(...e)))}catch(t){throw w(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new L(this.firestore,ls(this._delegate,function dA(...n){return h_._create("endAt",n,!0)}(...e)))}catch(t){throw w(t,"endAt()","Query.endAt()")}}isEqual(e){return QI(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function fA(n){n=on(n,Mr);const e=on(n.firestore,mi),t=or(e),i=new Qu(e);return function Vp(n,e){const t=new hr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(i=(0,ve.Z)(function*(r,s,o){try{const d=yield Um(r,s,!0),f=new TI(s,d.ir),m=f.sc(d.documents),v=f.applyChanges(m,!1);o.resolve(v.snapshot)}catch(d){const f=Nh(d,`Failed to execute query '${s} against cache`);o.reject(f)}}),function(r,s,o){return i.apply(this,arguments)})(yield eb(n),e,t);var i})),t.promise}(t,n._query).then(r=>new Gh(e,i,n,r))}(this._delegate):"server"===e?.source?function $h(n){n=on(n,Mr);const e=on(n.firestore,mi),t=or(e),i=new Qu(e);return GI(t,n._query,{source:"server"}).then(r=>new Gh(e,i,n,r))}(this._delegate):function Qx(n){n=on(n,Mr);const e=on(n.firestore,mi),t=or(e),i=new Qu(e);return Ac(n._query),GI(t,n._query).then(r=>new Gh(e,i,n,r))}(this._delegate),t.then(i=>new ne(this.firestore,new Gh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=D(e),i=I(e,r=>new ne(this.firestore,new Gh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return _b(this._delegate,t,i)}withConverter(e){return new L(this.firestore,this._delegate.withConverter(e?p.getInstance(this.firestore,e):null))}}class Z{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new N(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ne{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new L(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new N(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Z(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new N(this._firestore,i))})}isEqual(e){return Zx(this._delegate,e._delegate)}}class Se extends L{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new y(this.firestore,e):null}doc(e){try{return new y(this.firestore,void 0===e?rb(this._delegate):rb(this._delegate,e))}catch(t){throw w(t,"doc()","CollectionReference.doc()")}}add(e){return function Xx(n,e){const t=on(n.firestore,mi),i=rb(n),r=g_(n.converter,e);return Mc(t,[a_(Hh(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,Rn.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new y(this.firestore,t))}isEqual(e){return KI(this._delegate,e._delegate)}withConverter(e){return new Se(this.firestore,this._delegate.withConverter(e?p.getInstance(this.firestore,e):null))}}function $e(n){return on(n,li)}class nt{constructor(...e){this._delegate=new Ic(...e)}static documentId(){return new nt(Ci.keyField().canonicalString())}isEqual(e){return(e=(0,F.m9)(e))instanceof Ic&&this._delegate._internalPath.isEqual(e._internalPath)}}class dt{constructor(e){this._delegate=e}static serverTimestamp(){const e=function WF(){return new So("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new dt(e)}static delete(){const e=function lR(){return new Bp("deleteField")}();return e._methodName="FieldValue.delete",new dt(e)}static arrayUnion(...e){const t=function qF(...n){return new jx("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new dt(t)}static arrayRemove(...e){const t=function cR(...n){return new $C("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new dt(t)}static increment(e){const t=function uR(n){return new zx("increment",n)}(e);return t._methodName="FieldValue.increment",new dt(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Ft={Firestore:fR,GeoPoint:GC,Timestamp:pi,Blob:yb,Transaction:u,WriteBatch:h,DocumentReference:y,DocumentSnapshot:x,Query:L,QueryDocumentSnapshot:N,QuerySnapshot:ne,CollectionReference:Se,FieldPath:nt,FieldValue:dt,setLogLevel:function l(n){!function cF(n){rh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function jt(n){(function He(n,e){n.INTERNAL.registerComponent(new Lr.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},Ft)))})(n,(e,t)=>new fR(e,t,new XF)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(Ho.Z);var st=B(7579),rn=B(6451),fl=B(5363),pl=B(8421);function Io(n,e){return(0,ei.e)((t,i)=>{let r=null,s=0,o=!1;const d=()=>o&&!r&&i.complete();t.subscribe((0,fi.x)(i,f=>{r?.unsubscribe();let m=0;const v=s++;(0,pl.Xf)(n(f,v)).subscribe(r=(0,fi.x)(i,C=>i.next(e?e(f,C,v,m++):C),()=>{r=null,d()}))},()=>{o=!0,d()}))})}var rD=B(6063);class sD extends st.x{constructor(e=1/0,t=1/0,i=rD.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;t||(i.push(e),!r&&i.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!e.closed;o+=i?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const o=t.now();let d=0;for(let f=1;f<i.length&&i[f]<=o;f+=2)d=f;d&&i.splice(0,d+1)}}}var m_=B(3099);function vb(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=n??1/0,(0,m_.B)({connector:()=>new sD(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}const bb=(0,B(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var wb=B(515);function Ms(n){return n<=0?()=>wb.E:(0,ei.e)((e,t)=>{let i=0;e.subscribe((0,fi.x)(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function n6(n){return(0,ei.e)((e,t)=>{let i=!1;e.subscribe((0,fi.x)(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function i6(n=r6){return(0,ei.e)((e,t)=>{let i=!1;e.subscribe((0,fi.x)(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function r6(){return new bb}var gl=B(576);function JF(n,e){return(0,gl.m)(e)?Io(()=>n,e):Io(()=>n)}var pR=B(9468);B(8140);const mR=new Map,tL={activated:!1,tokenObservers:[]},u6={initialized:!1,enabled:!1};function ar(n){return mR.get(n)||Object.assign({},tL)}function wA(){return u6}class m6{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ve.Z)(function*(){t.stop();try{t.pending=new F.BH,yield function _6(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new F.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ks=new F.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function yR(n){if(!ar(n).activated)throw ks.create("use-before-activation",{appName:n.name})}function DA(n,e){return bR.apply(this,arguments)}function bR(){return bR=(0,ve.Z)(function*({url:n,body:e},t){const i={"Content-Type":"application/json"},r=t.getImmediate({optional:!0});if(r){const C=yield r.getHeartbeatsHeader();C&&(i["X-Firebase-Client"]=C)}const s={method:"POST",body:JSON.stringify(e),headers:i};let o,d;try{o=yield fetch(n,s)}catch(C){throw ks.create("fetch-network-error",{originalErrorMessage:C?.message})}if(200!==o.status)throw ks.create("fetch-status-error",{httpStatus:o.status});try{d=yield o.json()}catch(C){throw ks.create("fetch-parse-error",{originalErrorMessage:C?.message})}const f=d.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw ks.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const m=1e3*Number(f[1]),v=Date.now();return{token:d.token,expireTimeMillis:v+m,issuedAtTimeMillis:v}}),bR.apply(this,arguments)}function iL(n,e){const{projectId:t,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:e}}}const aD="firebase-app-check-store";let SA=null;function sL(){return SA||(SA=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(ks.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},t.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(aD,{keyPath:"compositeKey"})}}catch(t){e(ks.create("storage-open",{originalErrorMessage:t?.message}))}}),SA)}function wR(){return wR=(0,ve.Z)(function*(n,e){const i=(yield sL()).transaction(aD,"readwrite"),s=i.objectStore(aD).put({compositeKey:n,value:e});return new Promise((o,d)=>{s.onsuccess=f=>{o()},i.onerror=f=>{var m;d(ks.create("storage-set",{originalErrorMessage:null===(m=f.target.error)||void 0===m?void 0:m.message}))}})}),wR.apply(this,arguments)}const lD=new Ss.Yd("@firebase/app-check");function DR(n,e){return(0,F.hl)()?function D6(n,e){return function oL(n,e){return wR.apply(this,arguments)}(function lL(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{lD.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function IR(){return wA().enabled}function AR(){return TR.apply(this,arguments)}function TR(){return TR=(0,ve.Z)(function*(){const n=wA();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),TR.apply(this,arguments)}const k6={error:"UNKNOWN_ERROR"};function x6(n){return F.US.encodeString(JSON.stringify(n),!1)}function IA(n){return MR.apply(this,arguments)}function MR(){return MR=(0,ve.Z)(function*(n,e=!1){const t=n.app;yR(t);const i=ar(t);let s,r=i.token;if(r&&!Eb(r)&&(i.token=void 0,r=void 0),!r){const f=yield i.cachedTokenPromise;f&&(Eb(f)?r=f:yield DR(t,void 0))}if(!e&&r&&Eb(r))return{token:r.token};let d,o=!1;if(IR()){i.exchangeTokenPromise||(i.exchangeTokenPromise=DA(iL(t,yield AR()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);const f=yield i.exchangeTokenPromise;return yield DR(t,f),i.token=f,{token:f.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),r=yield ar(t).exchangeTokenPromise}catch(f){"appCheck/throttled"===f.code?lD.warn(f.message):lD.error(f),s=f}return r?s?d=Eb(r)?{token:r.token,internalError:s}:hL(s):(d={token:r.token},i.token=r,yield DR(t,r)):d=hL(s),o&&dL(t,d),d}),MR.apply(this,arguments)}function kR(){return kR=(0,ve.Z)(function*(n){const e=n.app;yR(e);const{provider:t}=ar(e);if(IR()){const i=yield AR(),{token:r}=yield DA(iL(e,i),n.heartbeatServiceProvider);return{token:r}}{const{token:i}=yield t.getToken();return{token:i}}}),kR.apply(this,arguments)}function RR(n,e){const t=ar(n),i=t.tokenObservers.filter(r=>r.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function uL(n){const{app:e}=n,t=ar(e);let i=t.tokenRefresher;i||(i=function R6(n){const{app:e}=n;return new m6((0,ve.Z)(function*(){let i;if(i=ar(e).token?yield IA(n,!0):yield IA(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const t=ar(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function dL(n,e){const t=ar(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch{}}function Eb(n){return n.expireTimeMillis-Date.now()>0}function hL(n){return{token:x6(k6),error:n}}class O6{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ar(this.app);for(const t of e)RR(this.app,t.next);return Promise.resolve()}}const bL="app-check-internal";!function q6(){(0,bi._registerComponent)(new Lr.wA("app-check",n=>function N6(n,e){return new O6(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(bL).initialize()})),(0,bi._registerComponent)(new Lr.wA(bL,n=>function P6(n){return{getToken:e=>IA(n,e),getLimitedUseToken:()=>function cL(n){return kR.apply(this,arguments)}(n),addTokenListener:e=>function xR(n,e,t,i){const{app:r}=n,s=ar(r);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:i,type:e}],s.token&&Eb(s.token)){const d=s.token;Promise.resolve().then(()=>{t({token:d.token}),uL(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>uL(n))}(n,"INTERNAL",e),removeTokenListener:e=>RR(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,bi.registerVersion)("@firebase/app-check","0.8.0")}();class TA{constructor(){return(0,Ln.vb)("app-check")}}typeof window<"u"&&window;var X6=B(1274);const LR=new c.OlP("angularfire2.auth.use-emulator"),VR=new c.OlP("angularfire2.auth.settings"),BR=new c.OlP("angularfire2.auth.tenant-id"),HR=new c.OlP("angularfire2.auth.langugage-code"),UR=new c.OlP("angularfire2.auth.use-device-language"),jR=new c.OlP("angularfire.auth.persistence"),zR=(n,e,t,i,r,s,o,d)=>(0,Mi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const f=e.runOutsideAngular(()=>n.auth());if(t&&f.useEmulator(...t),i&&(f.tenantId=i),f.languageCode=r,s&&f.useDeviceLanguage(),o)for(const[m,v]of Object.entries(o))f.settings[m]=v;return d&&f.setPersistence(d),f},[t,i,r,s,o,d]);let GR=(()=>{class n{constructor(t,i,r,s,o,d,f,m,v,C,A,M){const P=new st.x,H=Sn(void 0).pipe((0,fl.Q)(o.outsideAngular),Io(()=>s.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,4538)))),(0,Jt.U)(()=>(0,Mi.on)(t,s,i)),(0,Jt.U)(U=>zR(U,s,d,m,v,C,f,A)),vb({bufferSize:1,refCount:!1}));if($c(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Sn(null);else{H.pipe(function s6(n,e){const t=arguments.length>=2;return i=>i.pipe(n?oi((r,s)=>n(r,s,i)):Ds.y,Ms(1),t?n6(e):i6(()=>new bb))}()).subscribe();const K=H.pipe(Io(je=>je.getRedirectResult().then(wt=>wt,()=>null)),Ln.iC,vb({bufferSize:1,refCount:!1})),_e=H.pipe(Io(je=>new Fr.y(wt=>({unsubscribe:s.runOutsideAngular(()=>je.onAuthStateChanged(_t=>wt.next(_t),_t=>wt.error(_t),()=>wt.complete()))})))),Oe=H.pipe(Io(je=>new Fr.y(wt=>({unsubscribe:s.runOutsideAngular(()=>je.onIdTokenChanged(_t=>wt.next(_t),_t=>wt.error(_t),()=>wt.complete()))}))));this.authState=K.pipe(JF(_e),(0,pR.R)(o.outsideAngular),(0,fl.Q)(o.insideAngular)),this.user=K.pipe(JF(Oe),(0,pR.R)(o.outsideAngular),(0,fl.Q)(o.insideAngular)),this.idToken=this.user.pipe(Io(je=>je?(0,hi.D)(je.getIdToken()):Sn(null))),this.idTokenResult=this.user.pipe(Io(je=>je?(0,hi.D)(je.getIdTokenResult()):Sn(null))),this.credential=(0,rn.T)(K,P,this.authState.pipe(oi(je=>!je))).pipe((0,Jt.U)(je=>je?.user?je:null),(0,pR.R)(o.outsideAngular),(0,fl.Q)(o.insideAngular))}return(0,Mi.pX)(this,H,s,{spy:{apply:(U,K,_e)=>{(U.startsWith("signIn")||U.startsWith("createUser"))&&_e.then(Oe=>P.next(Oe))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Mi.Dh),c.LFG(Mi.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Ln.HU),c.LFG(LR,8),c.LFG(VR,8),c.LFG(BR,8),c.LFG(HR,8),c.LFG(UR,8),c.LFG(jR,8),c.LFG(TA,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function EL(n,e){return function e$(n,e=fa.z){return new Fr.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}(n,e)}function $R(n,e){return EL(n,e).pipe((0,Jt.U)(t=>({payload:t,type:"query"})))}function MA(n,e){return $R(n,e).pipe(ki(void 0),qn(),(0,Jt.U)(([t,i])=>{const r=i.payload.docChanges(),s=r.map(o=>({type:o.type,payload:o}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((o,d)=>{const f=r.find(v=>v.doc.ref.isEqual(o.ref)),m=t?.payload.docs.find(v=>v.ref.isEqual(o.ref));f&&JSON.stringify(f.doc.metadata)===JSON.stringify(o.metadata)||!f&&m&&JSON.stringify(m.metadata)===JSON.stringify(o.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:o}})}),s}))}function CL(n,e,t){return MA(n,t).pipe(pa((i,r)=>function n$(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function i$(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return WR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return WR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return WR(n,e.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),e),[]),Xa(),(0,Jt.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function WR(n,e,t,...i){const r=n.slice();return r.splice(e,t,...i),r}function DL(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class SL{constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=MA(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Jt.U)(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(ki(void 0),qn(),oi(([i,r])=>r.length>0||!i),(0,Jt.U)(([i,r])=>r),Ln.iC)}auditTrail(e){return this.stateChanges(e).pipe(pa((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=DL(e);return CL(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ln.iC)}valueChanges(e={}){return $R(this.query,this.afs.schedulers.outsideAngular).pipe((0,Jt.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),Ln.iC)}get(e){return(0,hi.D)(this.query.get(e)).pipe(Ln.iC)}add(e){return this.ref.add(e)}doc(e){return new IL(this.ref.doc(e),this.afs)}}class IL{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:r,query:s}=ML(i,t);return new SL(r,s,this.afs)}snapshotChanges(){return function t$(n,e){return EL(n,e).pipe(ki(void 0),qn(),(0,Jt.U)(([t,i])=>i.exists?t?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ln.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Jt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,hi.D)(this.ref.get(e)).pipe(Ln.iC)}}class r${constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?MA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Jt.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),oi(t=>t.length>0),Ln.iC):MA(this.query,this.afs.schedulers.outsideAngular).pipe(Ln.iC)}auditTrail(e){return this.stateChanges(e).pipe(pa((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=DL(e);return CL(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ln.iC)}valueChanges(e={}){return $R(this.query,this.afs.schedulers.outsideAngular).pipe((0,Jt.U)(i=>i.payload.docs.map(r=>e.idField?Object.assign({[e.idField]:r.id},r.data()):r.data())),Ln.iC)}get(e){return(0,hi.D)(this.query.get(e)).pipe(Ln.iC)}}const AL=new c.OlP("angularfire2.enableFirestorePersistence"),TL=new c.OlP("angularfire2.firestore.persistenceSettings"),s$=new c.OlP("angularfire2.firestore.settings"),o$=new c.OlP("angularfire2.firestore.use-emulator");function ML(n,e=(t=>t)){return{query:e(n),ref:n}}let a$=(()=>{class n{constructor(t,i,r,s,o,d,f,m,v,C,A,M,P,H,U,K,_e){this.schedulers=f;const Oe=(0,Mi.on)(t,d,i),je=v;C&&zR(Oe,d,A,P,H,U,M,K),[this.firestore,this.persistenceEnabled$]=(0,Mi.cc)(`${Oe.name}.firestore`,"AngularFirestore",Oe.name,()=>{const wt=d.runOutsideAngular(()=>Oe.firestore());if(s&&wt.settings(s),je&&wt.useEmulator(...je),r&&!$c(o)){const _t=()=>{try{return(0,hi.D)(wt.enablePersistence(m||void 0).then(()=>!0,()=>!1))}catch(Bt){return typeof console<"u"&&console.warn(Bt),Sn(!1)}};return[wt,d.runOutsideAngular(_t)]}return[wt,Sn(!1)]},[s,je,r])}collection(t,i){let r;r="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=ML(r,i),d=this.schedulers.ngZone.run(()=>s);return new SL(d,o,this)}collectionGroup(t,i){const r=i||(o=>o),s=this.firestore.collectionGroup(t);return new r$(r(s),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const r=this.schedulers.ngZone.run(()=>i);return new IL(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Mi.Dh),c.LFG(Mi.xv,8),c.LFG(AL,8),c.LFG(s$,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Ln.HU),c.LFG(TL,8),c.LFG(o$,8),c.LFG(GR,8),c.LFG(LR,8),c.LFG(VR,8),c.LFG(BR,8),c.LFG(HR,8),c.LFG(UR,8),c.LFG(jR,8),c.LFG(TA,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),l$=(()=>{class n{constructor(){X6.Z.registerVersion("angularfire",Ln.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:AL,useValue:!0},{provide:TL,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[a$]}),n})();const{isArray:c$}=Array,{getPrototypeOf:u$,prototype:d$,keys:h$}=Object;function kL(n){if(1===n.length){const e=n[0];if(c$(e))return{args:e,keys:null};if(function f$(n){return n&&"object"==typeof n&&u$(n)===d$}(e)){const t=h$(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:p$}=Array;function qR(n){return(0,Jt.U)(e=>function g$(n,e){return p$(e)?n(...e):n(e)}(n,e))}function xL(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function RL(...n){const e=(0,Er.jO)(n),{args:t,keys:i}=kL(n),r=new Fr.y(s=>{const{length:o}=t;if(!o)return void s.complete();const d=new Array(o);let f=o,m=o;for(let v=0;v<o;v++){let C=!1;(0,pl.Xf)(t[v]).subscribe((0,fi.x)(s,A=>{C||(C=!0,m--),d[v]=A},()=>f--,void 0,()=>{(!f||!C)&&(m||s.next(i?xL(i,d):d),s.complete())}))}});return e?r.pipe(qR(e)):r}let OL=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),__=(()=>{class n extends OL{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=c.n5z(n)))(i||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const xc=new c.OlP("NgValueAccessor"),_$={provide:xc,useExisting:(0,c.Gpc)(()=>cD),multi:!0},v$=new c.OlP("CompositionEventMode");let cD=(()=>{class n extends OL{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function y$(){const n=V()?V().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(v$,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&c.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[c._Bn([_$]),c.qOj]}),n})();function Gp(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function PL(n){return null!=n&&"number"==typeof n.length}const xs=new c.OlP("NgValidators"),$p=new c.OlP("NgAsyncValidators"),w$=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class kA{static min(e){return function FL(n){return e=>{if(Gp(e.value)||Gp(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function LL(n){return e=>{if(Gp(e.value)||Gp(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function VL(n){return Gp(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function BL(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function HL(n){return Gp(n.value)||w$.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function UL(n){return e=>Gp(e.value)||!PL(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return jL(e)}static pattern(e){return function zL(n){if(!n)return xA;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(Gp(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return ZL(e)}static composeAsync(e){return KL(e)}}function jL(n){return e=>PL(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function xA(n){return null}function GL(n){return null!=n}function $L(n){return(0,c.QGY)(n)?(0,hi.D)(n):n}function WL(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function qL(n,e){return e.map(t=>t(n))}function YL(n){return n.map(e=>function E$(n){return!n.validate}(e)?e:t=>e.validate(t))}function ZL(n){if(!n)return null;const e=n.filter(GL);return 0==e.length?null:function(t){return WL(qL(t,e))}}function YR(n){return null!=n?ZL(YL(n)):null}function KL(n){if(!n)return null;const e=n.filter(GL);return 0==e.length?null:function(t){return RL(qL(t,e).map($L)).pipe((0,Jt.U)(WL))}}function ZR(n){return null!=n?KL(YL(n)):null}function QL(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function XL(n){return n._rawValidators}function JL(n){return n._rawAsyncValidators}function KR(n){return n?Array.isArray(n)?n:[n]:[]}function RA(n,e){return Array.isArray(n)?n.includes(e):n===e}function eV(n,e){const t=KR(e);return KR(n).forEach(r=>{RA(t,r)||t.push(r)}),t}function tV(n,e){return KR(e).filter(t=>!RA(n,t))}class nV{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=YR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ZR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ao extends nV{get formDirective(){return null}get path(){return null}}class Rc extends nV{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let QR=(()=>{class n extends class iV{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Rc,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&c.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[c.qOj]}),n})();const uD="VALID",NA="INVALID",Cb="PENDING",dD="DISABLED";function tO(n){return(PA(n)?n.validators:n)||null}function sV(n){return Array.isArray(n)?YR(n):n||null}function nO(n,e){return(PA(e)?e.asyncValidators:n)||null}function oV(n){return Array.isArray(n)?ZR(n):n||null}function PA(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class cV{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=sV(this._rawValidators),this._composedAsyncValidatorFn=oV(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===uD}get invalid(){return this.status===NA}get pending(){return this.status==Cb}get disabled(){return this.status===dD}get enabled(){return this.status!==dD}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=sV(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=oV(e)}addValidators(e){this.setValidators(eV(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(eV(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(tV(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(tV(e,this._rawAsyncValidators))}hasValidator(e){return RA(this._rawValidators,e)}hasAsyncValidator(e){return RA(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Cb,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=dD,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=uD,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===uD||this.status===Cb)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?dD:uD}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Cb,this._hasOwnPendingAsyncValidator=!0;const t=$L(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?dD:this.errors?NA:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Cb)?Cb:this._anyControlsHaveStatus(NA)?NA:uD}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){PA(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class iO extends cV{constructor(e,t,i){super(tO(t),nO(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function lV(n,e,t){n._forEachChild((i,r)=>{if(void 0===t[r])throw new c.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(i=>{(function aV(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new c.vHH(1e3,"");if(!i[t])throw new c.vHH(1001,"")})(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function hD(n,e){rO(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function R$(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&uV(n,e)})}(n,e),function N$(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function O$(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&uV(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function x$(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function LA(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),BA(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function VA(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function rO(n,e){const t=XL(n);null!==e.validator?n.setValidators(QL(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=JL(n);null!==e.asyncValidator?n.setAsyncValidators(QL(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();VA(e._rawValidators,r),VA(e._rawAsyncValidators,r)}function BA(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=XL(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const r=JL(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}const i=()=>{};return VA(e._rawValidators,i),VA(e._rawAsyncValidators,i),t}function uV(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function dV(n,e){rO(n,e)}function fV(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}const B$={provide:Ao,useExisting:(0,c.Gpc)(()=>Db)},fD=(()=>Promise.resolve())();let Db=(()=>{class n extends Ao{constructor(t,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new c.vpe,this.form=new iO({},YR(t),ZR(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){fD.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),hD(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){fD.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){fD.then(()=>{const i=this._findContainer(t.path),r=new iO({});dV(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){fD.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){fD.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,fV(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(xs,10),c.Y36($p,10))},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){1&t&&c.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([B$]),c.qOj]}),n})();function pV(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function gV(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const mV=class extends cV{constructor(e=null,t,i){super(tO(t),nO(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),PA(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=gV(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){pV(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){pV(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){gV(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},j$={provide:Rc,useExisting:(0,c.Gpc)(()=>HA)},vV=(()=>Promise.resolve())();let HA=(()=>{class n extends Rc{constructor(t,i,r,s,o){super(),this._changeDetectorRef=o,this.control=new mV,this._registered=!1,this.update=new c.vpe,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function oO(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===cD?t=s:function L$(n){return Object.getPrototypeOf(n.constructor)===__}(s)?i=s:r=s}),r||i||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function sO(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){hD(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){vV.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&(0,c.D6c)(i);vV.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function FA(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ao,9),c.Y36(xs,10),c.Y36($p,10),c.Y36(xc,10),c.Y36(c.sBO,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[c._Bn([j$]),c.qOj,c.TTD]}),n})();const G$={provide:xc,useExisting:(0,c.Gpc)(()=>UA),multi:!0};let UA=(()=>{class n extends __{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=i=>{t(""==i?null:parseFloat(i))}}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=c.n5z(n)))(i||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,i){1&t&&c.NdJ("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[c._Bn([G$]),c.qOj]}),n})(),bV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const Z$={provide:Ao,useExisting:(0,c.Gpc)(()=>Sb)};let Sb=(()=>{class n extends Ao{constructor(t,i){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(BA(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return hD(i,t),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){LA(t.control||null,t,!1),function V$(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,fV(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(LA(i||null,t),(n=>n instanceof mV)(r)&&(hD(r,t),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);dV(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function P$(n,e){return BA(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){rO(this.form,this),this._oldForm&&BA(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(xs,10),c.Y36($p,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&c.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([Z$]),c.qOj,c.TTD]}),n})();let y_=(()=>{class n{constructor(){this._validator=xA}ngOnChanges(t){if(this.inputName in t){const i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):xA,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,features:[c.TTD]}),n})();const d4={provide:xs,useExisting:(0,c.Gpc)(()=>hO),multi:!0};let fO,hO=(()=>{class n extends y_{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>function MV(n){return"number"==typeof n?n:parseInt(n,10)}(t),this.createValidator=t=>jL(t)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=c.n5z(n)))(i||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(t,i){2&t&&c.uIk("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},features:[c._Bn([d4]),c.qOj]}),n})(),f4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[bV]}),n})(),p4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[f4]}),n})();try{fO=typeof Intl<"u"&&Intl.v8BreakIterator}catch{fO=!1}let Ib,io=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Mg(n){return n===Gc}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!fO)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.Lbi))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const LV=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function VV(){if(Ib)return Ib;if("object"!=typeof document||!document)return Ib=new Set(LV),Ib;let n=document.createElement("input");return Ib=new Set(LV.filter(e=>(n.setAttribute("type",e),n.type===e))),Ib}let pD,v_,pO;function jA(n){return function m4(){if(null==pD&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>pD=!0}))}finally{pD=pD||!1}return pD}()?n:!!n.capture}function _4(){if(null==v_){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return v_=!1,v_;if("scrollBehavior"in document.documentElement.style)v_=!0;else{const n=Element.prototype.scrollTo;v_=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return v_}function gD(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function b_(n){return n.composedPath?n.composedPath()[0]:n.target}function gO(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var cs=B(727);class mD extends st.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function Oc(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}var ZA=B(8505);function UV(n,e=fa.z){return(0,ei.e)((t,i)=>{let r=null,s=null,o=null;const d=()=>{if(r){r.unsubscribe(),r=null;const m=s;s=null,i.next(m)}};function f(){const m=o+n,v=e.now();if(v<m)return r=this.schedule(void 0,m-v),void i.add(r);d()}t.subscribe((0,fi.x)(i,m=>{s=m,o=e.now(),r||(r=e.schedule(f,n),i.add(r))},()=>{d(),i.complete()},void 0,()=>{s=r=null}))})}var jV=B(5032);function fr(n){return(0,ei.e)((e,t)=>{(0,pl.Xf)(n).subscribe((0,fi.x)(t,()=>t.complete(),jV.Z)),!t.closed&&e.subscribe(t)})}function an(n){return null!=n&&"false"!=`${n}`}function _O(n,e=0){return zV(n)?Number(n):e}function zV(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function GV(n){return Array.isArray(n)?n:[n]}function kr(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Wh(n){return n instanceof c.SBq?n.nativeElement:n}let $V=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),x4=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){const i=Wh(t);return new Fr.y(r=>{const o=this._observeElement(i).subscribe(r);return()=>{o.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const i=new st.x,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG($V))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),R4=(()=>{class n{constructor(t,i,r){this._contentObserver=t,this._elementRef=i,this._ngZone=r,this.event=new c.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=an(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=_O(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(UV(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(x4),c.Y36(c.SBq),c.Y36(c.R0b))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),WV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[$V]}),n})();class P4 extends class ZV{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new st.x,this._typeaheadSubscription=cs.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new st.x,this.change=new st.x,e instanceof c.n_E&&e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,ZA.b)(t=>this._pressedLetters.push(t)),UV(e),oi(()=>this._pressedLetters.length>0),(0,Jt.U)(()=>this._pressedLetters.join(""))).subscribe(t=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,o=i[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||Oc(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),i="number"==typeof e?e:t.indexOf(e);this._activeItem=t[i]??null,this._activeItemIndex=i}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let i=1;i<=t.length;i++){const r=(this._activeItemIndex+e*i+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof c.n_E?this._items.toArray():this._items}}{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}let KV=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function V4(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function L4(n){try{return n.frameElement}catch{return null}}(function W4(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===XV(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=XV(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function G4(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function $4(n){return!function H4(n){return function j4(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function B4(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function U4(n){return function z4(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||QV(n))}(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(io))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function QV(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function XV(n){if(!QV(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class q4{constructor(e,t,i,r,s=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Ms(1)).subscribe(e)}}let JV=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new q4(t,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(KV),c.LFG(c.R0b),c.LFG(ce))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Y4=(()=>{class n{constructor(t,i,r){this._elementRef=t,this._focusTrapFactory=i,this._previouslyFocusedElement=null,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}get enabled(){return this.focusTrap.enabled}set enabled(t){this.focusTrap.enabled=an(t)}get autoCapture(){return this._autoCapture}set autoCapture(t){this._autoCapture=an(t)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(t){const i=t.autoCapture;i&&!i.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=gD(),this.focusTrap.focusInitialElementWhenReady()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(JV),c.Y36(ce))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["cdkTrapFocus"],features:[c.TTD]}),n})();function eB(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function tB(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const Z4=new c.OlP("cdk-input-modality-detector-options"),K4={ignoreKeys:[18,17,224,91,16]},Mb=jA({passive:!0,capture:!0});let Q4=(()=>{class n{constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new mD(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(d=>d===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=b_(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(eB(o)?"keyboard":"mouse"),this._mostRecentTarget=b_(o))},this._onTouchstart=o=>{tB(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=b_(o))},this._options={...K4,...s},this.modalityDetected=this._modality.pipe(function M4(n){return oi((e,t)=>n<=t)}(1)),this.modalityChanged=this.modalityDetected.pipe(Xa()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Mb),r.addEventListener("mousedown",this._onMousedown,Mb),r.addEventListener("touchstart",this._onTouchstart,Mb)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Mb),document.removeEventListener("mousedown",this._onMousedown,Mb),document.removeEventListener("touchstart",this._onTouchstart,Mb))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(io),c.LFG(c.R0b),c.LFG(ce),c.LFG(Z4,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const X4=new c.OlP("liveAnnouncerElement",{providedIn:"root",factory:function J4(){return null}}),eW=new c.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let tW=(()=>{class n{constructor(t,i,r,s){this._ngZone=i,this._defaultOptions=s,this._document=r,this._liveElement=t||this._createLiveElement()}announce(t,...i){const r=this._defaultOptions;let s,o;return 1===i.length&&"number"==typeof i[0]?o=i[0]:[s,o]=i,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),null==o&&r&&(o=r.duration),this._liveElement.setAttribute("aria-live",s),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(d=>this._currentResolve=d)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof o&&(this._previousTimeout=setTimeout(()=>this.clear(),o)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",i=this._document.getElementsByClassName(t),r=this._document.createElement("div");for(let s=0;s<i.length;s++)i[s].remove();return r.classList.add(t),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),this._document.body.appendChild(r),r}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(X4,8),c.LFG(c.R0b),c.LFG(ce),c.LFG(eW,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const nW=new c.OlP("cdk-focus-monitor-default-options"),KA=jA({passive:!0,capture:!0});let yO=(()=>{class n{constructor(t,i,r,s,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new st.x,this._rootNodeFocusAndBlurListener=d=>{const f=b_(d),m="focus"===d.type?this._onFocus:this._onBlur;for(let v=f;v;v=v.parentElement)m.call(this,d,v)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(t,i=!1){const r=Wh(t);if(!this._platform.isBrowser||1!==r.nodeType)return Sn(null);const s=function v4(n){if(function y4(){if(null==pO){const n=typeof document<"u"?document.head:null;pO=!(!n||!n.createShadowRoot&&!n.attachShadow)}return pO}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const d={checkChildren:i,subject:new st.x,rootNode:s};return this._elementInfo.set(r,d),this._registerGlobalListeners(d),d.subject}stopMonitoring(t){const i=Wh(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=Wh(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([d,f])=>this._originChanged(d,i,f)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=b_(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r.subject,null))}_emitOrigin(t,i){this._ngZone.run(()=>t.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,KA),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,KA)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(fr(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,KA),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,KA),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.R0b),c.LFG(io),c.LFG(Q4),c.LFG(ce,8),c.LFG(nW,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),iW=(()=>{class n{constructor(t,i){this._elementRef=t,this._focusMonitor=i,this.cdkFocusChange=new c.vpe}ngAfterViewInit(){const t=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(t,1===t.nodeType&&t.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(i=>this.cdkFocusChange.emit(i))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(yO))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"}}),n})();const iB="cdk-high-contrast-black-on-white",rB="cdk-high-contrast-white-on-black",vO="cdk-high-contrast-active";let sB=(()=>{class n{constructor(t,i){this._platform=t,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(vO),t.remove(iB),t.remove(rB),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(t.add(vO),t.add(iB)):2===i&&(t.add(vO),t.add(rB))}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(io),c.LFG(ce))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rW=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(sB))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[WV]]}),n})();const sW=new c.OlP("cdk-dir-doc",{providedIn:"root",factory:function oW(){return(0,c.f3M)(ce)}}),aW=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let ml=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new c.vpe,t){const r=t.documentElement?t.documentElement.dir:null;this.value=function lW(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?aW.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(sW,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_D=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function cW(n,e){if(1&n&&c._UZ(0,"mat-pseudo-checkbox",4),2&n){const t=c.oxw();c.Q6J("state",t.selected?"checked":"unchecked")("disabled",t.disabled)}}function uW(n,e){if(1&n&&(c.TgZ(0,"span",5),c._uU(1),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.hij("(",t.group.label,")")}}const dW=["*"],fW=new c.OlP("mat-sanity-checks",{providedIn:"root",factory:function hW(){return!0}});let zr=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!gO()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(sB),c.LFG(fW,8),c.LFG(ce))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[_D],_D]}),n})();function lB(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=an(e)}}}function yD(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function bO(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=an(e)}}}function cB(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?_O(t):this.defaultTabIndex}}}function wO(n){return class extends n{constructor(...e){super(...e),this.stateChanges=new st.x,this.errorState=!1}updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}}}const pW=new c.OlP("MAT_DATE_LOCALE",{providedIn:"root",factory:function gW(){return(0,c.f3M)(c.soG)}});class Rs{constructor(){this._localeChanges=new st.x,this.localeChanges=this._localeChanges}getValidDateOrNull(e){return this.isDateInstance(e)&&this.isValid(e)?e:null}deserialize(e){return null==e||this.isDateInstance(e)&&this.isValid(e)?e:this.invalid()}setLocale(e){this.locale=e,this._localeChanges.next()}compareDate(e,t){return this.getYear(e)-this.getYear(t)||this.getMonth(e)-this.getMonth(t)||this.getDate(e)-this.getDate(t)}sameDate(e,t){if(e&&t){let i=this.isValid(e),r=this.isValid(t);return i&&r?!this.compareDate(e,t):i==r}return e==t}clampDate(e,t,i){return t&&this.compareDate(e,t)<0?t:i&&this.compareDate(e,i)>0?i:e}}const w_=new c.OlP("mat-date-formats"),mW=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function EO(n,e){const t=Array(n);for(let i=0;i<n;i++)t[i]=e(i);return t}let _W=(()=>{class n extends Rs{constructor(t,i){super(),this.useUtcForDisplay=!1,super.setLocale(t)}getYear(t){return t.getFullYear()}getMonth(t){return t.getMonth()}getDate(t){return t.getDate()}getDayOfWeek(t){return t.getDay()}getMonthNames(t){const i=new Intl.DateTimeFormat(this.locale,{month:t,timeZone:"utc"});return EO(12,r=>this._format(i,new Date(2017,r,1)))}getDateNames(){const t=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return EO(31,i=>this._format(t,new Date(2017,0,i+1)))}getDayOfWeekNames(t){const i=new Intl.DateTimeFormat(this.locale,{weekday:t,timeZone:"utc"});return EO(7,r=>this._format(i,new Date(2017,0,r+1)))}getYearName(t){const i=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(i,t)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(t){return this.getDate(this._createDateWithOverflow(this.getYear(t),this.getMonth(t)+1,0))}clone(t){return new Date(t.getTime())}createDate(t,i,r){let s=this._createDateWithOverflow(t,i,r);return s.getMonth(),s}today(){return new Date}parse(t){return"number"==typeof t?new Date(t):t?new Date(Date.parse(t)):null}format(t,i){if(!this.isValid(t))throw Error("NativeDateAdapter: Cannot format invalid date.");const r=new Intl.DateTimeFormat(this.locale,{...i,timeZone:"utc"});return this._format(r,t)}addCalendarYears(t,i){return this.addCalendarMonths(t,12*i)}addCalendarMonths(t,i){let r=this._createDateWithOverflow(this.getYear(t),this.getMonth(t)+i,this.getDate(t));return this.getMonth(r)!=((this.getMonth(t)+i)%12+12)%12&&(r=this._createDateWithOverflow(this.getYear(r),this.getMonth(r),0)),r}addCalendarDays(t,i){return this._createDateWithOverflow(this.getYear(t),this.getMonth(t),this.getDate(t)+i)}toIso8601(t){return[t.getUTCFullYear(),this._2digit(t.getUTCMonth()+1),this._2digit(t.getUTCDate())].join("-")}deserialize(t){if("string"==typeof t){if(!t)return null;if(mW.test(t)){let i=new Date(t);if(this.isValid(i))return i}}return super.deserialize(t)}isDateInstance(t){return t instanceof Date}isValid(t){return!isNaN(t.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(t,i,r){const s=new Date;return s.setFullYear(t,i,r),s.setHours(0,0,0,0),s}_2digit(t){return("00"+t).slice(-2)}_format(t,i){const r=new Date;return r.setUTCFullYear(i.getFullYear(),i.getMonth(),i.getDate()),r.setUTCHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),t.format(r)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(pW,8),c.LFG(io))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const yW={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let vW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[{provide:Rs,useClass:_W}]}),n})(),bW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[{provide:w_,useValue:yW}],imports:[[vW]]}),n})(),vD=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class wW{constructor(e,t,i){this._renderer=e,this.element=t,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const uB={enterDuration:225,exitDuration:150},CO=jA({passive:!0}),dB=["mousedown","touchstart"],hB=["mouseup","mouseleave","touchend","touchcancel"];class fB{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Wh(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...uB,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=i.radius||function DW(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),d=e-r.left,f=t-r.top,m=s.enterDuration,v=document.createElement("div");v.classList.add("mat-ripple-element"),v.style.left=d-o+"px",v.style.top=f-o+"px",v.style.height=2*o+"px",v.style.width=2*o+"px",null!=i.color&&(v.style.backgroundColor=i.color),v.style.transitionDuration=`${m}ms`,this._containerElement.appendChild(v),function CW(n){window.getComputedStyle(n).getPropertyValue("opacity")}(v),v.style.transform="scale(1)";const C=new wW(this,v,i);return C.state=0,this._activeRipples.add(C),i.persistent||(this._mostRecentTransientRipple=C),this._runTimeoutOutsideZone(()=>{const A=C===this._mostRecentTransientRipple;C.state=1,!i.persistent&&(!A||!this._isPointerDown)&&C.fadeOut()},m),C}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const i=e.element,r={...uB,...e.config.animation};i.style.transitionDuration=`${r.exitDuration}ms`,i.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,i.remove()},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Wh(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(dB))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(hB),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=eB(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!tB(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,CO)})})}_removeTriggerEvents(){this._triggerElement&&(dB.forEach(e=>{this._triggerElement.removeEventListener(e,this,CO)}),this._pointerUpEventsRegistered&&hB.forEach(e=>{this._triggerElement.removeEventListener(e,this,CO)}))}}const pB=new c.OlP("mat-ripple-global-options");let DO=(()=>{class n{constructor(t,i,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new fB(this,i,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.R0b),c.Y36(io),c.Y36(pB,8),c.Y36(c.QbO,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&c.ekj("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),gB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[zr],zr]}),n})(),SW=(()=>{class n{constructor(t){this._animationMode=t,this.state="unchecked",this.disabled=!1}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.QbO,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(t,i){2&t&&c.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===i.state)("mat-pseudo-checkbox-checked","checked"===i.state)("mat-pseudo-checkbox-disabled",i.disabled)("_mat-animation-noopable","NoopAnimations"===i._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(t,i){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),n})(),IW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[zr]]}),n})();const mB=new c.OlP("MAT_OPTION_PARENT_COMPONENT"),_B=new c.OlP("MatOptgroup");let AW=0;class TW{constructor(e,t=!1){this.source=e,this.isUserInput=t}}let MW=(()=>{class n{constructor(t,i,r,s){this._element=t,this._changeDetectorRef=i,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+AW++,this.onSelectionChange=new c.vpe,this._stateChanges=new st.x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=an(t)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(t,i){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){(13===t.keyCode||32===t.keyCode)&&!Oc(t)&&(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue=t,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new TW(this,t))}}return n.\u0275fac=function(t){c.$Z()},n.\u0275dir=c.lG2({type:n,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),n})(),SO=(()=>{class n extends MW{constructor(t,i,r,s){super(t,i,r,s)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.sBO),c.Y36(mB,8),c.Y36(_B,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(t,i){1&t&&c.NdJ("click",function(){return i._selectViaInteraction()})("keydown",function(s){return i._handleKeydown(s)}),2&t&&(c.Ikx("id",i.id),c.uIk("tabindex",i._getTabIndex())("aria-selected",i._getAriaSelected())("aria-disabled",i.disabled.toString()),c.ekj("mat-selected",i.selected)("mat-option-multiple",i.multiple)("mat-active",i.active)("mat-option-disabled",i.disabled))},exportAs:["matOption"],features:[c.qOj],ngContentSelectors:dW,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(t,i){1&t&&(c.F$t(),c.YNc(0,cW,1,2,"mat-pseudo-checkbox",0),c.TgZ(1,"span",1),c.Hsn(2),c.qZA(),c.YNc(3,uW,2,1,"span",2),c._UZ(4,"div",3)),2&t&&(c.Q6J("ngIf",i.multiple),c.xp6(3),c.Q6J("ngIf",i.group&&i.group._inert),c.xp6(1),c.Q6J("matRippleTrigger",i._getHostElement())("matRippleDisabled",i.disabled||i.disableRipple))},dependencies:[SW,ii,DO],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),n})();function yB(n,e,t){if(t.length){let i=e.toArray(),r=t.toArray(),s=0;for(let o=0;o<n+1;o++)i[o].group&&i[o].group===r[s]&&s++;return s}return 0}let vB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[gB,xo,zr,IW]]}),n})();const xW=["mat-button",""],RW=["*"],NW=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],PW=yD(lB(bO(class{constructor(n){this._elementRef=n}})));let E_=(()=>{class n extends PW{constructor(t,i,r){super(t),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of NW)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,i){t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(yO),c.Y36(c.QbO,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,i){if(1&t&&c.Gf(DO,5),2&t){let r;c.iGM(r=c.CRH())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,i){2&t&&(c.uIk("disabled",i.disabled||null),c.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[c.qOj],attrs:xW,ngContentSelectors:RW,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,i){1&t&&(c.F$t(),c.TgZ(0,"span",0),c.Hsn(1),c.qZA(),c._UZ(2,"span",1)(3,"span",2)),2&t&&(c.xp6(2),c.ekj("mat-button-ripple-round",i.isRoundButton||i.isIconButton),c.Q6J("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},dependencies:[DO],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),bB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[gB,zr],zr]}),n})();function IO(n){return n&&"function"==typeof n.connect}class wB{applyChanges(e,t,i,r,s){e.forEachOperation((o,d,f)=>{let m,v;if(null==o.previousIndex){const C=i(o,d,f);m=t.createEmbeddedView(C.templateRef,C.context,C.index),v=1}else null==f?(t.remove(d),v=3):(m=t.get(d),t.move(m,f),v=2);s&&s({context:m?.context,operation:v,record:o})})}detach(){}}class CB{constructor(e=!1,t,i=!0){this._multiple=e,this._emitChanges=i,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new st.x,t&&t.length&&(e?t.forEach(r=>this._markSelected(r)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(t=>this._markSelected(t)),this._emitChangeEvent()}deselect(...e){this._verifyValueAssignment(e),e.forEach(t=>this._unmarkSelected(t)),this._emitChangeEvent()}toggle(e){this.isSelected(e)?this.deselect(e):this.select(e)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(e){return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}}const wD=new c.OlP("_ViewRepeater");var AO=B(5577),LW=B(1144);const VW=["addListener","removeListener"],BW=["addEventListener","removeEventListener"],HW=["on","off"];function QA(n,e,t,i){if((0,gl.m)(t)&&(i=t,t=void 0),i)return QA(n,e,t).pipe(qR(i));const[r,s]=function zW(n){return(0,gl.m)(n.addEventListener)&&(0,gl.m)(n.removeEventListener)}(n)?BW.map(o=>d=>n[o](e,d,t)):function UW(n){return(0,gl.m)(n.addListener)&&(0,gl.m)(n.removeListener)}(n)?VW.map(DB(n,e)):function jW(n){return(0,gl.m)(n.on)&&(0,gl.m)(n.off)}(n)?HW.map(DB(n,e)):[];if(!r&&(0,LW.z)(n))return(0,AO.z)(o=>QA(o,e,t))((0,pl.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new Fr.y(o=>{const d=(...f)=>o.next(1<f.length?f:f[0]);return r(d),()=>s(d)})}function DB(n,e){return t=>i=>n[t](e,i)}class SB{}const qh="*";function kb(n,e){return{type:7,name:n,definitions:e,options:{}}}function Yh(n,e=null){return{type:4,styles:e,timings:n}}function IB(n,e=null){return{type:3,steps:n,options:e}}function AB(n,e=null){return{type:2,steps:n,options:e}}function Gr(n){return{type:6,styles:n,offset:null}}function Yp(n,e,t){return{type:0,name:n,styles:e,options:t}}function TB(n){return{type:5,steps:n}}function ed(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function TO(n=null){return{type:9,options:n}}function MO(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function MB(n){Promise.resolve().then(n)}class ED{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){MB(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class kB{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?MB(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,d)=>Math.max(o,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const $W=["connectionContainer"],WW=["inputContainer"],qW=["label"];function YW(n,e){1&n&&(c.ynx(0),c.TgZ(1,"div",14),c._UZ(2,"div",15)(3,"div",16)(4,"div",17),c.qZA(),c.TgZ(5,"div",18),c._UZ(6,"div",15)(7,"div",16)(8,"div",17),c.qZA(),c.BQk())}function ZW(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",19),c.NdJ("cdkObserveContent",function(){c.CHM(t);const r=c.oxw();return c.KtG(r.updateOutlineGap())}),c.Hsn(1,1),c.qZA()}if(2&n){const t=c.oxw();c.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)}}function KW(n,e){if(1&n&&(c.ynx(0),c.Hsn(1,2),c.TgZ(2,"span"),c._uU(3),c.qZA(),c.BQk()),2&n){const t=c.oxw(2);c.xp6(3),c.Oqu(t._control.placeholder)}}function QW(n,e){1&n&&c.Hsn(0,3,["*ngSwitchCase","true"])}function XW(n,e){1&n&&(c.TgZ(0,"span",23),c._uU(1," *"),c.qZA())}function JW(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"label",20,21),c.NdJ("cdkObserveContent",function(){c.CHM(t);const r=c.oxw();return c.KtG(r.updateOutlineGap())}),c.YNc(2,KW,4,1,"ng-container",12),c.YNc(3,QW,1,0,"ng-content",12),c.YNc(4,XW,2,0,"span",22),c.qZA()}if(2&n){const t=c.oxw();c.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),c.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),c.uIk("for",t._control.id)("aria-owns",t._control.id),c.xp6(2),c.Q6J("ngSwitchCase",!1),c.xp6(1),c.Q6J("ngSwitchCase",!0),c.xp6(1),c.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function eq(n,e){1&n&&(c.TgZ(0,"div",24),c.Hsn(1,4),c.qZA())}function tq(n,e){if(1&n&&(c.TgZ(0,"div",25),c._UZ(1,"span",26),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function nq(n,e){if(1&n&&(c.TgZ(0,"div"),c.Hsn(1,5),c.qZA()),2&n){const t=c.oxw();c.Q6J("@transitionMessages",t._subscriptAnimationState)}}function iq(n,e){if(1&n&&(c.TgZ(0,"div",30),c._uU(1),c.qZA()),2&n){const t=c.oxw(2);c.Q6J("id",t._hintLabelId),c.xp6(1),c.Oqu(t.hintLabel)}}function rq(n,e){if(1&n&&(c.TgZ(0,"div",27),c.YNc(1,iq,2,2,"div",28),c.Hsn(2,6),c._UZ(3,"div",29),c.Hsn(4,7),c.qZA()),2&n){const t=c.oxw();c.Q6J("@transitionMessages",t._subscriptAnimationState),c.xp6(1),c.Q6J("ngIf",t.hintLabel)}}const sq=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],oq=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],aq=new c.OlP("MatError"),lq={transitionMessages:kb("transitionMessages",[Yp("enter",Gr({opacity:1,transform:"translateY(0%)"})),ed("void => enter",[Gr({opacity:0,transform:"translateY(-5px)"}),Yh("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let CD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n}),n})();const cq=new c.OlP("MatHint");let XA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-label"]]}),n})(),uq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const dq=new c.OlP("MatPrefix"),xB=new c.OlP("MatSuffix");let hq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["","matSuffix",""]],features:[c._Bn([{provide:xB,useExisting:n}])]}),n})(),RB=0;const pq=yD(class{constructor(n){this._elementRef=n}},"primary"),gq=new c.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),JA=new c.OlP("MatFormField");let NB=(()=>{class n extends pq{constructor(t,i,r,s,o,d,f){super(t),this._changeDetectorRef=i,this._dir=r,this._defaults=s,this._platform=o,this._ngZone=d,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new st.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+RB++,this._labelId="mat-form-field-label-"+RB++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==f,this.appearance=s&&s.appearance?s.appearance:"legacy",this._hideRequiredMarker=!(!s||null==s.hideRequiredMarker)&&s.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const i=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&i!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=an(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(ki(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(fr(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(fr(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,rn.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(ki(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(ki(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(fr(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const i=this._control?this._control.ngControl:null;return i&&i[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,QA(this._label.nativeElement,"transitionend").pipe(Ms(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?t.push(i.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,i=this._connectionContainerRef.nativeElement,r=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const v=i.querySelectorAll(`${r}, ${s}`);for(let C=0;C<v.length;C++)v[C].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let o=0,d=0;const f=i.querySelectorAll(r),m=i.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const v=i.getBoundingClientRect();if(0===v.width&&0===v.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const C=this._getStartEnd(v),A=t.children,M=this._getStartEnd(A[0].getBoundingClientRect());let P=0;for(let H=0;H<A.length;H++)P+=A[H].offsetWidth;o=Math.abs(M-C)-5,d=P>0?.75*P+10:0}for(let v=0;v<f.length;v++)f[v].style.width=`${o}px`;for(let v=0;v<m.length;v++)m[v].style.width=`${d}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const i=t.getRootNode();return i&&i!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.sBO),c.Y36(ml,8),c.Y36(gq,8),c.Y36(io),c.Y36(c.R0b),c.Y36(c.QbO,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,i,r){if(1&t&&(c.Suo(r,CD,5),c.Suo(r,CD,7),c.Suo(r,XA,5),c.Suo(r,XA,7),c.Suo(r,uq,5),c.Suo(r,aq,5),c.Suo(r,cq,5),c.Suo(r,dq,5),c.Suo(r,xB,5)),2&t){let s;c.iGM(s=c.CRH())&&(i._controlNonStatic=s.first),c.iGM(s=c.CRH())&&(i._controlStatic=s.first),c.iGM(s=c.CRH())&&(i._labelChildNonStatic=s.first),c.iGM(s=c.CRH())&&(i._labelChildStatic=s.first),c.iGM(s=c.CRH())&&(i._placeholderChild=s.first),c.iGM(s=c.CRH())&&(i._errorChildren=s),c.iGM(s=c.CRH())&&(i._hintChildren=s),c.iGM(s=c.CRH())&&(i._prefixChildren=s),c.iGM(s=c.CRH())&&(i._suffixChildren=s)}},viewQuery:function(t,i){if(1&t&&(c.Gf($W,7),c.Gf(WW,5),c.Gf(qW,5)),2&t){let r;c.iGM(r=c.CRH())&&(i._connectionContainerRef=r.first),c.iGM(r=c.CRH())&&(i._inputContainerRef=r.first),c.iGM(r=c.CRH())&&(i._label=r.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,i){2&t&&c.ekj("mat-form-field-appearance-standard","standard"==i.appearance)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-appearance-legacy","legacy"==i.appearance)("mat-form-field-invalid",i._control.errorState)("mat-form-field-can-float",i._canLabelFloat())("mat-form-field-should-float",i._shouldLabelFloat())("mat-form-field-has-label",i._hasFloatingLabel())("mat-form-field-hide-placeholder",i._hideControlPlaceholder())("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-focused",i._control.focused)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))("_mat-animation-noopable",!i._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[c._Bn([{provide:JA,useExisting:n}]),c.qOj],ngContentSelectors:oq,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,i){1&t&&(c.F$t(sq),c.TgZ(0,"div",0)(1,"div",1,2),c.NdJ("click",function(s){return i._control.onContainerClick&&i._control.onContainerClick(s)}),c.YNc(3,YW,9,0,"ng-container",3),c.YNc(4,ZW,2,1,"div",4),c.TgZ(5,"div",5,6),c.Hsn(7),c.TgZ(8,"span",7),c.YNc(9,JW,5,16,"label",8),c.qZA()(),c.YNc(10,eq,2,0,"div",9),c.qZA(),c.YNc(11,tq,2,4,"div",10),c.TgZ(12,"div",11),c.YNc(13,nq,2,1,"div",12),c.YNc(14,rq,5,2,"div",13),c.qZA()()),2&t&&(c.xp6(3),c.Q6J("ngIf","outline"==i.appearance),c.xp6(1),c.Q6J("ngIf",i._prefixChildren.length),c.xp6(5),c.Q6J("ngIf",i._hasFloatingLabel()),c.xp6(1),c.Q6J("ngIf",i._suffixChildren.length),c.xp6(1),c.Q6J("ngIf","outline"!=i.appearance),c.xp6(1),c.Q6J("ngSwitch",i._getDisplayedMessages()),c.xp6(1),c.Q6J("ngSwitchCase","error"),c.xp6(1),c.Q6J("ngSwitchCase","hint"))},dependencies:[ii,R4,co,sa],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[lq.transitionMessages]},changeDetection:0}),n})(),eT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[xo,zr,WV],zr]}),n})();const VB=new c.OlP("mat-chips-default-options");let Tq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[vD,{provide:VB,useValue:{separatorKeyCodes:[13]}}],imports:[[zr]]}),n})();var BB=B(4408);const DD={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=DD;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(s=>{t=void 0,n(s)});return new cs.w0(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=DD;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=DD;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var HB=B(7565);new class kq extends HB.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class Mq extends BB.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=DD.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(DD.cancelAnimationFrame(t),e._scheduled=void 0)}});let RO,Rq=1;const tT={};function UB(n){return n in tT&&(delete tT[n],!0)}const Oq={setImmediate(n){const e=Rq++;return tT[e]=!0,RO||(RO=Promise.resolve()),RO.then(()=>UB(e)&&n()),e},clearImmediate(n){UB(n)}},{setImmediate:Nq,clearImmediate:Pq}=Oq,nT={setImmediate(...n){const{delegate:e}=nT;return(e?.setImmediate||Nq)(...n)},clearImmediate(n){const{delegate:e}=nT;return(e?.clearImmediate||Pq)(n)},delegate:void 0};new class Lq extends HB.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class Fq extends BB.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=nT.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(nT.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}});var Hq=B(3532);function jB(n,e=fa.z){return function Bq(n){return(0,ei.e)((e,t)=>{let i=!1,r=null,s=null,o=!1;const d=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const m=r;r=null,t.next(m)}o&&t.complete()},f=()=>{s=null,o&&t.complete()};e.subscribe((0,fi.x)(t,m=>{i=!0,r=m,s||(0,pl.Xf)(n(m)).subscribe(s=(0,fi.x)(t,d,f))},()=>{o=!0,(!i||!s||s.closed)&&t.complete()}))})}(()=>function jq(n=0,e,t=fa.P){let i=-1;return null!=e&&((0,Hq.K)(e)?t=e:i=e),new Fr.y(r=>{let s=function Uq(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}(n,e))}let Gq=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new st.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Fr.y(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(jB(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Sn()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(oi(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=Wh(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>QA(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.R0b),c.LFG(io),c.LFG(ce,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),iT=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new st.x,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(jB(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(io),c.LFG(c.R0b),c.LFG(ce,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),OO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[_D,rT],_D,rT]}),n})();class NO{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class SD extends NO{constructor(e,t,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r}}class PO extends NO{constructor(e,t,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class Wq extends NO{constructor(e){super(),this.element=e instanceof c.SBq?e.nativeElement:e}}class FO{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof SD?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof PO?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof Wq?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class qq extends FO{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const d=o.element,f=this._document.createComment("dom-portal");d.parentNode.insertBefore(f,d),this.outletElement.appendChild(d),this._attachedPortal=o,super.setDisposeFn(()=>{f.parentNode&&f.parentNode.replaceChild(d,f)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||c.zs3.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context);return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let sT=(()=>{class n extends FO{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new c.vpe,this.attachDomPortal=s=>{const o=s.element,d=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(d,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{d.parentNode&&d.parentNode.replaceChild(o,d)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=i.createComponent(s,i.length,t.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c._Vd),c.Y36(c.s_b),c.Y36(ce))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[c.qOj]}),n})(),LO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const zB=_4();class Zq{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=kr(-this._previousScrollPosition.left),e.style.top=kr(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),zB&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),zB&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class Kq{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class GB{enable(){}disable(){}attach(){}}function VO(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function $B(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class Qq{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();VO(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Xq=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new GB,this.close=o=>new Kq(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new Zq(this._viewportRuler,this._document),this.reposition=o=>new Qq(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Gq),c.LFG(iT),c.LFG(c.R0b),c.LFG(ce))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class oT{constructor(e){if(this.scrollStrategy=new GB,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class Jq{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let WB=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ce))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),e5=(()=>{class n extends WB{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const d=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>d.next(r)):d.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ce),c.LFG(c.R0b,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),t5=(()=>{class n extends WB{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=b_(s)},this._clickListener=s=>{const o=b_(s),d="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const f=this._attachedOverlays.slice();for(let m=f.length-1;m>-1;m--){const v=f[m];if(v._outsidePointerEvents.observers.length<1||!v.hasAttached())continue;if(v.overlayElement.contains(o)||v.overlayElement.contains(d))break;const C=v._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>C.next(s)):C.next(s)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ce),c.LFG(io),c.LFG(c.R0b,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),BO=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||gO()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),gO()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ce),c.LFG(io))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class n5{constructor(e,t,i,r,s,o,d,f,m){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=d,this._location=f,this._outsideClickDispatcher=m,this._backdropElement=null,this._backdropClick=new st.x,this._attachments=new st.x,this._detachments=new st.x,this._locationChanges=cs.w0.EMPTY,this._backdropClickHandler=v=>this._backdropClick.next(v),this._backdropTransitionendHandler=v=>{this._disposeBackdrop(v.target)},this._keydownEvents=new st.x,this._outsidePointerEvents=new st.x,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Ms(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=kr(this._config.width),e.height=kr(this._config.height),e.minWidth=kr(this._config.minWidth),e.minHeight=kr(this._config.minHeight),e.maxWidth=kr(this._config.maxWidth),e.maxHeight=kr(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;!e||(e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500)))}_toggleClasses(e,t,i){const r=GV(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(fr((0,rn.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const qB="cdk-overlay-connected-position-bounding-box",i5=/([A-Za-z%]+)$/;class YB{constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new st.x,this._resizeSubscription=cs.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(qB),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let o;for(let d of this._preferredPositions){let f=this._getOriginPoint(e,r,d),m=this._getOverlayPoint(f,t,d),v=this._getOverlayFit(m,t,i,d);if(v.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(d,f);this._canFitWithFlexibleDimensions(v,m,i)?s.push({position:d,origin:f,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(f,d)}):(!o||o.overlayFit.visibleArea<v.visibleArea)&&(o={overlayFit:v,overlayPoint:m,originPoint:f,position:d,overlayRect:t})}if(s.length){let d=null,f=-1;for(const m of s){const v=m.boundingBoxRect.width*m.boundingBoxRect.height*(m.position.weight||1);v>f&&(f=v,d=m)}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&C_(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(qB),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,d=this._isRtl()?e.left:e.right;r="start"==i.originX?o:d}return t.left<0&&(r-=t.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=KB(t);let{x:o,y:d}=e,f=this._getOffset(r,"x"),m=this._getOffset(r,"y");f&&(o+=f),m&&(d+=m);let A=0-d,M=d+s.height-i.height,P=this._subtractOverflows(s.width,0-o,o+s.width-i.width),H=this._subtractOverflows(s.height,A,M),U=P*H;return{visibleArea:U,isCompletelyWithinViewport:s.width*s.height===U,fitsInViewportVertically:H===s.height,fitsInViewportHorizontally:P==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,o=ZB(this._overlayRef.getConfig().minHeight),d=ZB(this._overlayRef.getConfig().minWidth),m=e.fitsInViewportHorizontally||null!=d&&d<=s;return(e.fitsInViewportVertically||null!=o&&o<=r)&&m}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=KB(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),d=Math.max(e.y+r.height-s.height,0),f=Math.max(s.top-i.top-e.y,0),m=Math.max(s.left-i.left-e.x,0);let v=0,C=0;return v=r.width<=s.width?m||-o:e.x<this._viewportMargin?s.left-i.left-e.x:0,C=r.height<=s.height?f||-d:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:v,y:C},{x:e.x+v,y:e.y+C}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new Jq(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,o,d,v,C,A;if("top"===t.overlayY)o=e.y,s=i.height-o+this._viewportMargin;else if("bottom"===t.overlayY)d=i.height-e.y+2*this._viewportMargin,s=i.height-d+this._viewportMargin;else{const M=Math.min(i.bottom-e.y+i.top,e.y),P=this._lastBoundingBoxSize.height;s=2*M,o=e.y-M,s>P&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-P/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)A=i.width-e.x+this._viewportMargin,v=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)C=e.x,v=i.right-e.x;else{const M=Math.min(i.right-e.x+i.left,e.x),P=this._lastBoundingBoxSize.width;v=2*M,C=e.x-M,v>P&&!this._isInitialRender&&!this._growAfterOpen&&(C=e.x-P/2)}return{top:o,left:C,bottom:d,right:A,width:v,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=kr(i.height),r.top=kr(i.top),r.bottom=kr(i.bottom),r.width=kr(i.width),r.left=kr(i.left),r.right=kr(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=kr(s)),o&&(r.maxWidth=kr(o))}this._lastBoundingBoxSize=i,C_(this._boundingBox.style,r)}_resetBoundingBoxStyles(){C_(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){C_(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const v=this._viewportRuler.getViewportScrollPosition();C_(i,this._getExactOverlayY(t,e,v)),C_(i,this._getExactOverlayX(t,e,v))}else i.position="static";let d="",f=this._getOffset(t,"x"),m=this._getOffset(t,"y");f&&(d+=`translateX(${f}px) `),m&&(d+=`translateY(${m}px)`),i.transform=d.trim(),o.maxHeight&&(r?i.maxHeight=kr(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=kr(o.maxWidth):s&&(i.maxWidth="")),C_(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=kr(s.y),r}_getExactOverlayX(e,t,i){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=kr(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:$B(e,i),isOriginOutsideView:VO(e,i),isOverlayClipped:$B(t,i),isOverlayOutsideView:VO(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?e.offsetX??this._offsetX:e.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&GV(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof c.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function C_(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function ZB(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(i5);return t&&"px"!==t?null:parseFloat(e)}return n||null}function KB(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const QB="cdk-global-overlay-wrapper";class r5{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(QB),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:d}=i,f=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),m=!("100%"!==s&&"100vh"!==s||d&&"100%"!==d&&"100vh"!==d);e.position=this._cssPosition,e.marginLeft=f?"0":this._leftOffset,e.marginTop=m?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,f?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=m?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(QB),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let s5=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new r5}flexibleConnectedTo(t){return new YB(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(iT),c.LFG(ce),c.LFG(io),c.LFG(BO))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),o5=0,Zp=(()=>{class n{constructor(t,i,r,s,o,d,f,m,v,C,A){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=d,this._ngZone=f,this._document=m,this._directionality=v,this._location=C,this._outsideClickDispatcher=A}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new oT(t);return o.direction=o.direction||this._directionality.value,new n5(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+o5++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(c.z2F)),new qq(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Xq),c.LFG(BO),c.LFG(c._Vd),c.LFG(s5),c.LFG(e5),c.LFG(c.zs3),c.LFG(c.R0b),c.LFG(ce),c.LFG(ml),c.LFG(Ve),c.LFG(t5))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const a5=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],XB=new c.OlP("cdk-connected-overlay-scroll-strategy");let JB=(()=>{class n{constructor(t){this.elementRef=t}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),n})(),e2=(()=>{class n{constructor(t,i,r,s,o){this._overlay=t,this._dir=o,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=cs.w0.EMPTY,this._attachSubscription=cs.w0.EMPTY,this._detachSubscription=cs.w0.EMPTY,this._positionSubscription=cs.w0.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new c.vpe,this.positionChange=new c.vpe,this.attach=new c.vpe,this.detach=new c.vpe,this.overlayKeydown=new c.vpe,this.overlayOutsideClick=new c.vpe,this._templatePortal=new PO(i,r),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=an(t)}get lockPosition(){return this._lockPosition}set lockPosition(t){this._lockPosition=an(t)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(t){this._flexibleDimensions=an(t)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(t){this._growAfterOpen=an(t)}get push(){return this._push}set push(t){this._push=an(t)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(t){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),t.origin&&this.open&&this._position.apply()),t.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=a5);const t=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=t.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=t.detachments().subscribe(()=>this.detach.emit()),t.keydownEvents().subscribe(i=>{this.overlayKeydown.next(i),27===i.keyCode&&!this.disableClose&&!Oc(i)&&(i.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(i=>{this.overlayOutsideClick.next(i)})}_buildConfig(){const t=this._position=this.positionStrategy||this._createPositionStrategy(),i=new oT({direction:this._dir,positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(i.width=this.width),(this.height||0===this.height)&&(i.height=this.height),(this.minWidth||0===this.minWidth)&&(i.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(i.minHeight=this.minHeight),this.backdropClass&&(i.backdropClass=this.backdropClass),this.panelClass&&(i.panelClass=this.panelClass),i}_updatePositionStrategy(t){const i=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return t.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(i).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const t=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(t),t}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof JB?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(t=>{this.backdropClick.emit(t)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function Yq(n,e=!1){return(0,ei.e)((t,i)=>{let r=0;t.subscribe((0,fi.x)(i,s=>{const o=n(s,r++);(o||e)&&i.next(s),!o&&i.complete()}))})}(()=>this.positionChange.observers.length>0)).subscribe(t=>{this.positionChange.emit(t),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Zp),c.Y36(c.Rgc),c.Y36(c.s_b),c.Y36(XB),c.Y36(ml,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[c.TTD]}),n})();const c5={provide:XB,deps:[Zp],useFactory:function l5(n){return()=>n.scrollStrategies.reposition()}};let HO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[Zp,c5],imports:[[_D,LO,OO],OO]}),n})();const t2=jA({passive:!0});let u5=(()=>{class n{constructor(t,i){this._platform=t,this._ngZone=i,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return wb.E;const i=Wh(t),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new st.x,o="cdk-text-field-autofilled",d=f=>{"cdk-text-field-autofill-start"!==f.animationName||i.classList.contains(o)?"cdk-text-field-autofill-end"===f.animationName&&i.classList.contains(o)&&(i.classList.remove(o),this._ngZone.run(()=>s.next({target:f.target,isAutofilled:!1}))):(i.classList.add(o),this._ngZone.run(()=>s.next({target:f.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",d,t2),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",d,t2)}}),s}stopMonitoring(t){const i=Wh(t),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((t,i)=>this.stopMonitoring(i))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(io),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),n2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const r2=new c.OlP("MAT_INPUT_VALUE_ACCESSOR"),d5=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let h5=0;const f5=wO(class{constructor(n,e,t,i){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=i}});let p5=(()=>{class n extends f5{constructor(t,i,r,s,o,d,f,m,v,C){super(d,s,o,r),this._elementRef=t,this._platform=i,this._autofillMonitor=m,this._formField=C,this._uid="mat-input-"+h5++,this.focused=!1,this.stateChanges=new st.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(P=>VV().has(P)),this._iOSKeyupListener=P=>{const H=P.target;!H.value&&0===H.selectionStart&&0===H.selectionEnd&&(H.setSelectionRange(1,1),H.setSelectionRange(0,0))};const A=this._elementRef.nativeElement,M=A.nodeName.toLowerCase();this._inputValueAccessor=f||A,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&v.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===M,this._isTextarea="textarea"===M,this._isInFormField=!!C,this._isNativeSelect&&(this.controlType=A.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=an(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(kA.required)??!1}set required(t){this._required=an(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&VV().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=an(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const t=this._formField?._hideControlPlaceholder?.()?null:this.placeholder;if(t!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=t,t?i.setAttribute("placeholder",t):i.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){d5.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,i=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(io),c.Y36(Rc,10),c.Y36(Db,8),c.Y36(Sb,8),c.Y36(vD),c.Y36(r2,10),c.Y36(u5),c.Y36(c.R0b),c.Y36(JA,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,i){1&t&&c.NdJ("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&t&&(c.Ikx("disabled",i.disabled)("required",i.required),c.uIk("id",i.id)("data-placeholder",i.placeholder)("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required),c.ekj("mat-input-server",i._isServer)("mat-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[c._Bn([{provide:CD,useExisting:n}]),c.qOj,c.TTD]}),n})(),g5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[vD],imports:[[n2,eT,zr],n2,eT]}),n})();const m5=["mat-calendar-body",""];function _5(n,e){if(1&n&&(c.TgZ(0,"tr",2)(1,"td",3),c._uU(2),c.qZA()()),2&n){const t=c.oxw();c.xp6(1),c.Udp("padding-top",t._cellPadding)("padding-bottom",t._cellPadding),c.uIk("colspan",t.numCols),c.xp6(1),c.hij(" ",t.label," ")}}function y5(n,e){if(1&n&&(c.TgZ(0,"td",3),c._uU(1),c.qZA()),2&n){const t=c.oxw(2);c.Udp("padding-top",t._cellPadding)("padding-bottom",t._cellPadding),c.uIk("colspan",t._firstRowOffset),c.xp6(1),c.hij(" ",t._firstRowOffset>=t.labelMinRequiredCells?t.label:""," ")}}function v5(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"td",7)(1,"button",8),c.NdJ("click",function(r){const o=c.CHM(t).$implicit,d=c.oxw(2);return c.KtG(d._cellClicked(o,r))}),c.TgZ(2,"div",9),c._uU(3),c.qZA(),c._UZ(4,"div",10),c.qZA()()}if(2&n){const t=e.$implicit,i=e.index,r=c.oxw().index,s=c.oxw();c.Udp("width",s._cellWidth)("padding-top",s._cellPadding)("padding-bottom",s._cellPadding),c.uIk("data-mat-row",r)("data-mat-col",i),c.xp6(1),c.ekj("mat-calendar-body-disabled",!t.enabled)("mat-calendar-body-active",s._isActiveCell(r,i))("mat-calendar-body-range-start",s._isRangeStart(t.compareValue))("mat-calendar-body-range-end",s._isRangeEnd(t.compareValue))("mat-calendar-body-in-range",s._isInRange(t.compareValue))("mat-calendar-body-comparison-bridge-start",s._isComparisonBridgeStart(t.compareValue,r,i))("mat-calendar-body-comparison-bridge-end",s._isComparisonBridgeEnd(t.compareValue,r,i))("mat-calendar-body-comparison-start",s._isComparisonStart(t.compareValue))("mat-calendar-body-comparison-end",s._isComparisonEnd(t.compareValue))("mat-calendar-body-in-comparison-range",s._isInComparisonRange(t.compareValue))("mat-calendar-body-preview-start",s._isPreviewStart(t.compareValue))("mat-calendar-body-preview-end",s._isPreviewEnd(t.compareValue))("mat-calendar-body-in-preview",s._isInPreview(t.compareValue)),c.Q6J("ngClass",t.cssClasses)("tabindex",s._isActiveCell(r,i)?0:-1),c.uIk("aria-label",t.ariaLabel)("aria-disabled",!t.enabled||null)("aria-pressed",s._isSelected(t.compareValue))("aria-current",s.todayValue===t.compareValue?"date":null),c.xp6(1),c.ekj("mat-calendar-body-selected",s._isSelected(t.compareValue))("mat-calendar-body-comparison-identical",s._isComparisonIdentical(t.compareValue))("mat-calendar-body-today",s.todayValue===t.compareValue),c.xp6(1),c.hij(" ",t.displayValue," ")}}function b5(n,e){if(1&n&&(c.TgZ(0,"tr",4),c.YNc(1,y5,2,6,"td",5),c.YNc(2,v5,5,47,"td",6),c.qZA()),2&n){const t=e.$implicit,i=e.index,r=c.oxw();c.xp6(1),c.Q6J("ngIf",0===i&&r._firstRowOffset),c.xp6(1),c.Q6J("ngForOf",t)}}function w5(n,e){if(1&n&&(c.TgZ(0,"th",5)(1,"span",6),c._uU(2),c.qZA(),c.TgZ(3,"span",7),c._uU(4),c.qZA()()),2&n){const t=e.$implicit;c.xp6(2),c.Oqu(t.long),c.xp6(2),c.Oqu(t.narrow)}}const E5=["*"];function C5(n,e){}function D5(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"mat-month-view",5),c.NdJ("activeDateChange",function(r){c.CHM(t);const s=c.oxw();return c.KtG(s.activeDate=r)})("_userSelection",function(r){c.CHM(t);const s=c.oxw();return c.KtG(s._dateSelected(r))}),c.qZA()}if(2&n){const t=c.oxw();c.Q6J("activeDate",t.activeDate)("selected",t.selected)("dateFilter",t.dateFilter)("maxDate",t.maxDate)("minDate",t.minDate)("dateClass",t.dateClass)("comparisonStart",t.comparisonStart)("comparisonEnd",t.comparisonEnd)}}function S5(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"mat-year-view",6),c.NdJ("activeDateChange",function(r){c.CHM(t);const s=c.oxw();return c.KtG(s.activeDate=r)})("monthSelected",function(r){c.CHM(t);const s=c.oxw();return c.KtG(s._monthSelectedInYearView(r))})("selectedChange",function(r){c.CHM(t);const s=c.oxw();return c.KtG(s._goToDateInView(r,"month"))}),c.qZA()}if(2&n){const t=c.oxw();c.Q6J("activeDate",t.activeDate)("selected",t.selected)("dateFilter",t.dateFilter)("maxDate",t.maxDate)("minDate",t.minDate)("dateClass",t.dateClass)}}function I5(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"mat-multi-year-view",7),c.NdJ("activeDateChange",function(r){c.CHM(t);const s=c.oxw();return c.KtG(s.activeDate=r)})("yearSelected",function(r){c.CHM(t);const s=c.oxw();return c.KtG(s._yearSelectedInMultiYearView(r))})("selectedChange",function(r){c.CHM(t);const s=c.oxw();return c.KtG(s._goToDateInView(r,"year"))}),c.qZA()}if(2&n){const t=c.oxw();c.Q6J("activeDate",t.activeDate)("selected",t.selected)("dateFilter",t.dateFilter)("maxDate",t.maxDate)("minDate",t.minDate)("dateClass",t.dateClass)}}function A5(n,e){}const T5=["button"];function M5(n,e){1&n&&(c.O4$(),c.TgZ(0,"svg",3),c._UZ(1,"path",4),c.qZA())}const k5=[[["","matDatepickerToggleIcon",""]]],x5=["[matDatepickerToggleIcon]"];let ID=(()=>{class n{constructor(){this.changes=new st.x,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(t,i){return`${t} \u2013 ${i}`}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class UO{constructor(e,t,i,r,s={},o=e,d){this.value=e,this.displayValue=t,this.ariaLabel=i,this.enabled=r,this.cssClasses=s,this.compareValue=o,this.rawValue=d}}let xb=(()=>{class n{constructor(t,i){this._elementRef=t,this._ngZone=i,this.numCols=7,this.activeCell=0,this.isRange=!1,this.cellAspectRatio=1,this.previewStart=null,this.previewEnd=null,this.selectedValueChange=new c.vpe,this.previewChange=new c.vpe,this._enterHandler=r=>{if(this._skipNextFocus&&"focus"===r.type)this._skipNextFocus=!1;else if(r.target&&this.isRange){const s=this._getCellFromElement(r.target);s&&this._ngZone.run(()=>this.previewChange.emit({value:s.enabled?s:null,event:r}))}},this._leaveHandler=r=>{null!==this.previewEnd&&this.isRange&&r.target&&this._getCellFromElement(r.target)&&this._ngZone.run(()=>this.previewChange.emit({value:null,event:r}))},i.runOutsideAngular(()=>{const r=t.nativeElement;r.addEventListener("mouseenter",this._enterHandler,!0),r.addEventListener("focus",this._enterHandler,!0),r.addEventListener("mouseleave",this._leaveHandler,!0),r.addEventListener("blur",this._leaveHandler,!0)})}_cellClicked(t,i){t.enabled&&this.selectedValueChange.emit({value:t.value,event:i})}_isSelected(t){return this.startValue===t||this.endValue===t}ngOnChanges(t){const i=t.numCols,{rows:r,numCols:s}=this;(t.rows||i)&&(this._firstRowOffset=r&&r.length&&r[0].length?s-r[0].length:0),(t.cellAspectRatio||i||!this._cellPadding)&&(this._cellPadding=50*this.cellAspectRatio/s+"%"),(i||!this._cellWidth)&&(this._cellWidth=100/s+"%")}ngOnDestroy(){const t=this._elementRef.nativeElement;t.removeEventListener("mouseenter",this._enterHandler,!0),t.removeEventListener("focus",this._enterHandler,!0),t.removeEventListener("mouseleave",this._leaveHandler,!0),t.removeEventListener("blur",this._leaveHandler,!0)}_isActiveCell(t,i){let r=t*this.numCols+i;return t&&(r-=this._firstRowOffset),r==this.activeCell}_focusActiveCell(t=!0){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Ms(1)).subscribe(()=>{setTimeout(()=>{const i=this._elementRef.nativeElement.querySelector(".mat-calendar-body-active");i&&(t||(this._skipNextFocus=!0),i.focus())})})})}_isRangeStart(t){return jO(t,this.startValue,this.endValue)}_isRangeEnd(t){return zO(t,this.startValue,this.endValue)}_isInRange(t){return GO(t,this.startValue,this.endValue,this.isRange)}_isComparisonStart(t){return jO(t,this.comparisonStart,this.comparisonEnd)}_isComparisonBridgeStart(t,i,r){if(!this._isComparisonStart(t)||this._isRangeStart(t)||!this._isInRange(t))return!1;let s=this.rows[i][r-1];if(!s){const o=this.rows[i-1];s=o&&o[o.length-1]}return s&&!this._isRangeEnd(s.compareValue)}_isComparisonBridgeEnd(t,i,r){if(!this._isComparisonEnd(t)||this._isRangeEnd(t)||!this._isInRange(t))return!1;let s=this.rows[i][r+1];if(!s){const o=this.rows[i+1];s=o&&o[0]}return s&&!this._isRangeStart(s.compareValue)}_isComparisonEnd(t){return zO(t,this.comparisonStart,this.comparisonEnd)}_isInComparisonRange(t){return GO(t,this.comparisonStart,this.comparisonEnd,this.isRange)}_isComparisonIdentical(t){return this.comparisonStart===this.comparisonEnd&&t===this.comparisonStart}_isPreviewStart(t){return jO(t,this.previewStart,this.previewEnd)}_isPreviewEnd(t){return zO(t,this.previewStart,this.previewEnd)}_isInPreview(t){return GO(t,this.previewStart,this.previewEnd,this.isRange)}_getCellFromElement(t){let i;if(s2(t)?i=t:s2(t.parentNode)&&(i=t.parentNode),i){const r=i.getAttribute("data-mat-row"),s=i.getAttribute("data-mat-col");if(r&&s)return this.rows[parseInt(r)][parseInt(s)]}return null}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.R0b))},n.\u0275cmp=c.Xpm({type:n,selectors:[["","mat-calendar-body",""]],hostAttrs:[1,"mat-calendar-body"],inputs:{label:"label",rows:"rows",todayValue:"todayValue",startValue:"startValue",endValue:"endValue",labelMinRequiredCells:"labelMinRequiredCells",numCols:"numCols",activeCell:"activeCell",isRange:"isRange",cellAspectRatio:"cellAspectRatio",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",previewStart:"previewStart",previewEnd:"previewEnd"},outputs:{selectedValueChange:"selectedValueChange",previewChange:"previewChange"},exportAs:["matCalendarBody"],features:[c.TTD],attrs:m5,decls:2,vars:2,consts:[["aria-hidden","true",4,"ngIf"],["role","row",4,"ngFor","ngForOf"],["aria-hidden","true"],[1,"mat-calendar-body-label"],["role","row"],["class","mat-calendar-body-label",3,"paddingTop","paddingBottom",4,"ngIf"],["role","gridcell","class","mat-calendar-body-cell-container",3,"width","paddingTop","paddingBottom",4,"ngFor","ngForOf"],["role","gridcell",1,"mat-calendar-body-cell-container"],["type","button",1,"mat-calendar-body-cell",3,"ngClass","tabindex","click"],[1,"mat-calendar-body-cell-content","mat-focus-indicator"],["aria-hidden","true",1,"mat-calendar-body-cell-preview"]],template:function(t,i){1&t&&(c.YNc(0,_5,3,6,"tr",0),c.YNc(1,b5,3,2,"tr",1)),2&t&&(c.Q6J("ngIf",i._firstRowOffset<i.labelMinRequiredCells),c.xp6(1),c.Q6J("ngForOf",i.rows))},dependencies:[ii,Dn,_n],styles:['.mat-calendar-body{min-width:224px}.mat-calendar-body-label{height:0;line-height:0;text-align:left;padding-left:4.7142857143%;padding-right:4.7142857143%}.mat-calendar-body-cell-container{position:relative;height:0;line-height:0}.mat-calendar-body-cell{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;position:absolute;top:0;left:0;width:100%;height:100%;background:none;text-align:center;outline:none;font-family:inherit;margin:0}.mat-calendar-body-cell::-moz-focus-inner{border:0}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-cell-preview{content:"";position:absolute;top:5%;left:0;z-index:0;box-sizing:border-box;height:90%;width:100%}.mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-start::after,.mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,.mat-calendar-body-comparison-start::after,.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:5%;width:95%;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,[dir=rtl] .mat-calendar-body-comparison-start::after,[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:0;border-radius:0;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,.mat-calendar-body-comparison-end::after,.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}[dir=rtl] .mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,[dir=rtl] .mat-calendar-body-comparison-end::after,[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{left:5%;border-radius:0;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-comparison-bridge-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-bridge-end.mat-calendar-body-range-start::after{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end.mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-end.mat-calendar-body-range-start::after{width:90%}.mat-calendar-body-in-preview .mat-calendar-body-cell-preview{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:0;border-right:dashed 1px}.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:0;border-left:dashed 1px}.mat-calendar-body-disabled{cursor:default}.cdk-high-contrast-active .mat-calendar-body-disabled{opacity:.5}.mat-calendar-body-cell-content{top:5%;left:5%;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px}.mat-calendar-body-cell-content.mat-focus-indicator{position:absolute}.cdk-high-contrast-active .mat-calendar-body-cell-content{border:none}.cdk-high-contrast-active .mat-datepicker-popup:not(:empty),.cdk-high-contrast-active .mat-calendar-body-cell:not(.mat-calendar-body-in-range) .mat-calendar-body-selected{outline:solid 1px}.cdk-high-contrast-active .mat-calendar-body-today{outline:dotted 1px}.cdk-high-contrast-active .cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content,.cdk-high-contrast-active .cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content{outline:dotted 2px}.cdk-high-contrast-active .cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content.mat-calendar-body-selected,.cdk-high-contrast-active .cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content.mat-calendar-body-selected{outline:solid 3px}.cdk-high-contrast-active .mat-calendar-body-cell::before,.cdk-high-contrast-active .mat-calendar-body-cell::after,.cdk-high-contrast-active .mat-calendar-body-selected{background:none}.cdk-high-contrast-active .mat-calendar-body-in-range::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-start::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-end::before{border-top:solid 1px;border-bottom:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:0;border-right:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:0;border-left:solid 1px}.cdk-high-contrast-active .mat-calendar-body-in-comparison-range::before{border-top:dashed 1px;border-bottom:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:0;border-right:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:0;border-left:dashed 1px}[dir=rtl] .mat-calendar-body-label{text-align:right}\n'],encapsulation:2,changeDetection:0}),n})();function s2(n){return"TD"===n.nodeName}function jO(n,e,t){return null!==t&&e!==t&&n<t&&n===e}function zO(n,e,t){return null!==e&&e!==t&&n>=e&&n===t}function GO(n,e,t,i){return i&&null!==e&&null!==t&&e!==t&&n>=e&&n<=t}class Xo{constructor(e,t){this.start=e,this.end=t}}let Kp=(()=>{class n{constructor(t,i){this.selection=t,this._adapter=i,this._selectionChanged=new st.x,this.selectionChanged=this._selectionChanged,this.selection=t}updateSelection(t,i){const r=this.selection;this.selection=t,this._selectionChanged.next({selection:t,source:i,oldValue:r})}ngOnDestroy(){this._selectionChanged.complete()}_isValidDateInstance(t){return this._adapter.isDateInstance(t)&&this._adapter.isValid(t)}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),R5=(()=>{class n extends Kp{constructor(t){super(null,t)}add(t){super.updateSelection(t,this)}isValid(){return null!=this.selection&&this._isValidDateInstance(this.selection)}isComplete(){return null!=this.selection}clone(){const t=new n(this._adapter);return t.updateSelection(this.selection,this),t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Rs))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const o2={provide:Kp,deps:[[new c.FiY,new c.tp0,Kp],Rs],useFactory:function N5(n,e){return n||new R5(e)}},aT=new c.OlP("MAT_DATE_RANGE_SELECTION_STRATEGY");let a2=(()=>{class n{constructor(t,i,r,s,o){this._changeDetectorRef=t,this._dateFormats=i,this._dateAdapter=r,this._dir=s,this._rangeStrategy=o,this._rerenderSubscription=cs.w0.EMPTY,this.selectedChange=new c.vpe,this._userSelection=new c.vpe,this.activeDateChange=new c.vpe,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(t){const i=this._activeDate,r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),this._hasSameMonthAndYear(i,this._activeDate)||this._init()}get selected(){return this._selected}set selected(t){this._selected=t instanceof Xo?t:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t)),this._setRanges(this._selected)}get minDate(){return this._minDate}set minDate(t){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}get maxDate(){return this._maxDate}set maxDate(t){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(ki(null)).subscribe(()=>this._init())}ngOnChanges(t){const i=t.comparisonStart||t.comparisonEnd;i&&!i.firstChange&&this._setRanges(this.selected)}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_dateSelected(t){const i=t.value,r=this._dateAdapter.getYear(this.activeDate),s=this._dateAdapter.getMonth(this.activeDate),o=this._dateAdapter.createDate(r,s,i);let d,f;this._selected instanceof Xo?(d=this._getDateInCurrentMonth(this._selected.start),f=this._getDateInCurrentMonth(this._selected.end)):d=f=this._getDateInCurrentMonth(this._selected),(d!==i||f!==i)&&this.selectedChange.emit(o),this._userSelection.emit({value:o,event:t.event}),this._previewStart=this._previewEnd=null,this._changeDetectorRef.markForCheck()}_handleCalendarBodyKeydown(t){const i=this._activeDate,r=this._isRtl();switch(t.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case 40:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case 36:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case 33:this.activeDate=t.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case 34:this.activeDate=t.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case 13:case 32:return this._selectionKeyPressed=!0,void(this._canSelect(this._activeDate)&&t.preventDefault());case 27:return void(null!=this._previewEnd&&!Oc(t)&&(this._previewStart=this._previewEnd=null,this.selectedChange.emit(null),this._userSelection.emit({value:null,event:t}),t.preventDefault(),t.stopPropagation()));default:return}this._dateAdapter.compareDate(i,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),t.preventDefault()}_handleCalendarBodyKeyup(t){(32===t.keyCode||13===t.keyCode)&&(this._selectionKeyPressed&&this._canSelect(this._activeDate)&&this._dateSelected({value:this._dateAdapter.getDate(this._activeDate),event:t}),this._selectionKeyPressed=!1)}_init(){this._setRanges(this.selected),this._todayDate=this._getCellCompareValue(this._dateAdapter.today()),this._monthLabel=this._dateFormats.display.monthLabel?this._dateAdapter.format(this.activeDate,this._dateFormats.display.monthLabel):this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase();let t=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset=(7+this._dateAdapter.getDayOfWeek(t)-this._dateAdapter.getFirstDayOfWeek())%7,this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}_focusActiveCell(t){this._matCalendarBody._focusActiveCell(t)}_previewChanged({event:t,value:i}){if(this._rangeStrategy){const s=this._rangeStrategy.createPreview(i?i.rawValue:null,this.selected,t);this._previewStart=this._getCellCompareValue(s.start),this._previewEnd=this._getCellCompareValue(s.end),this._changeDetectorRef.detectChanges()}}_initWeekdays(){const t=this._dateAdapter.getFirstDayOfWeek(),i=this._dateAdapter.getDayOfWeekNames("narrow");let s=this._dateAdapter.getDayOfWeekNames("long").map((o,d)=>({long:o,narrow:i[d]}));this._weekdays=s.slice(t).concat(s.slice(0,t))}_createWeekCells(){const t=this._dateAdapter.getNumDaysInMonth(this.activeDate),i=this._dateAdapter.getDateNames();this._weeks=[[]];for(let r=0,s=this._firstWeekOffset;r<t;r++,s++){7==s&&(this._weeks.push([]),s=0);const o=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),r+1),d=this._shouldEnableDate(o),f=this._dateAdapter.format(o,this._dateFormats.display.dateA11yLabel),m=this.dateClass?this.dateClass(o,"month"):void 0;this._weeks[this._weeks.length-1].push(new UO(r+1,i[r],f,d,m,this._getCellCompareValue(o),o))}}_shouldEnableDate(t){return!!t&&(!this.minDate||this._dateAdapter.compareDate(t,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(t,this.maxDate)<=0)&&(!this.dateFilter||this.dateFilter(t))}_getDateInCurrentMonth(t){return t&&this._hasSameMonthAndYear(t,this.activeDate)?this._dateAdapter.getDate(t):null}_hasSameMonthAndYear(t,i){return!(!t||!i||this._dateAdapter.getMonth(t)!=this._dateAdapter.getMonth(i)||this._dateAdapter.getYear(t)!=this._dateAdapter.getYear(i))}_getCellCompareValue(t){if(t){const i=this._dateAdapter.getYear(t),r=this._dateAdapter.getMonth(t),s=this._dateAdapter.getDate(t);return new Date(i,r,s).getTime()}return null}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setRanges(t){t instanceof Xo?(this._rangeStart=this._getCellCompareValue(t.start),this._rangeEnd=this._getCellCompareValue(t.end),this._isRange=!0):(this._rangeStart=this._rangeEnd=this._getCellCompareValue(t),this._isRange=!1),this._comparisonRangeStart=this._getCellCompareValue(this.comparisonStart),this._comparisonRangeEnd=this._getCellCompareValue(this.comparisonEnd)}_canSelect(t){return!this.dateFilter||this.dateFilter(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.sBO),c.Y36(w_,8),c.Y36(Rs,8),c.Y36(ml,8),c.Y36(aT,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-month-view"]],viewQuery:function(t,i){if(1&t&&c.Gf(xb,5),2&t){let r;c.iGM(r=c.CRH())&&(i._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],features:[c.TTD],decls:7,vars:13,consts:[["role","grid",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["scope","col",4,"ngFor","ngForOf"],["aria-hidden","true","colspan","7",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","comparisonStart","comparisonEnd","previewStart","previewEnd","isRange","labelMinRequiredCells","activeCell","selectedValueChange","previewChange","keyup","keydown"],["scope","col"],[1,"cdk-visually-hidden"],["aria-hidden","true"]],template:function(t,i){1&t&&(c.TgZ(0,"table",0)(1,"thead",1)(2,"tr"),c.YNc(3,w5,5,2,"th",2),c.qZA(),c.TgZ(4,"tr"),c._UZ(5,"th",3),c.qZA()(),c.TgZ(6,"tbody",4),c.NdJ("selectedValueChange",function(s){return i._dateSelected(s)})("previewChange",function(s){return i._previewChanged(s)})("keyup",function(s){return i._handleCalendarBodyKeyup(s)})("keydown",function(s){return i._handleCalendarBodyKeydown(s)}),c.qZA()()),2&t&&(c.xp6(3),c.Q6J("ngForOf",i._weekdays),c.xp6(3),c.Q6J("label",i._monthLabel)("rows",i._weeks)("todayValue",i._todayDate)("startValue",i._rangeStart)("endValue",i._rangeEnd)("comparisonStart",i._comparisonRangeStart)("comparisonEnd",i._comparisonRangeEnd)("previewStart",i._previewStart)("previewEnd",i._previewEnd)("isRange",i._isRange)("labelMinRequiredCells",3)("activeCell",i._dateAdapter.getDate(i.activeDate)-1))},dependencies:[xb,Dn],encapsulation:2,changeDetection:0}),n})(),l2=(()=>{class n{constructor(t,i,r){this._changeDetectorRef=t,this._dateAdapter=i,this._dir=r,this._rerenderSubscription=cs.w0.EMPTY,this.selectedChange=new c.vpe,this.yearSelected=new c.vpe,this.activeDateChange=new c.vpe,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(t){let i=this._activeDate;const r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),c2(this._dateAdapter,i,this._activeDate,this.minDate,this.maxDate)||this._init()}get selected(){return this._selected}set selected(t){this._selected=t instanceof Xo?t:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t)),this._setSelectedYear(t)}get minDate(){return this._minDate}set minDate(t){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}get maxDate(){return this._maxDate}set maxDate(t){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(ki(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_init(){this._todayYear=this._dateAdapter.getYear(this._dateAdapter.today());const i=this._dateAdapter.getYear(this._activeDate)-AD(this._dateAdapter,this.activeDate,this.minDate,this.maxDate);this._years=[];for(let r=0,s=[];r<24;r++)s.push(i+r),4==s.length&&(this._years.push(s.map(o=>this._createCellForYear(o))),s=[]);this._changeDetectorRef.markForCheck()}_yearSelected(t){const i=t.value;this.yearSelected.emit(this._dateAdapter.createDate(i,0,1));let r=this._dateAdapter.getMonth(this.activeDate),s=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(i,r,1));this.selectedChange.emit(this._dateAdapter.createDate(i,r,Math.min(this._dateAdapter.getDate(this.activeDate),s)))}_handleCalendarBodyKeydown(t){const i=this._activeDate,r=this._isRtl();switch(t.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-AD(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,24-AD(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?-240:-24);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?240:24);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(i,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),t.preventDefault()}_handleCalendarBodyKeyup(t){(32===t.keyCode||13===t.keyCode)&&(this._selectionKeyPressed&&this._yearSelected({value:this._dateAdapter.getYear(this._activeDate),event:t}),this._selectionKeyPressed=!1)}_getActiveCell(){return AD(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_createCellForYear(t){const i=this._dateAdapter.createDate(t,0,1),r=this._dateAdapter.getYearName(i),s=this.dateClass?this.dateClass(i,"multi-year"):void 0;return new UO(t,r,r,this._shouldEnableYear(t),s)}_shouldEnableYear(t){if(null==t||this.maxDate&&t>this._dateAdapter.getYear(this.maxDate)||this.minDate&&t<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;for(let r=this._dateAdapter.createDate(t,0,1);this._dateAdapter.getYear(r)==t;r=this._dateAdapter.addCalendarDays(r,1))if(this.dateFilter(r))return!0;return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedYear(t){if(this._selectedYear=null,t instanceof Xo){const i=t.start||t.end;i&&(this._selectedYear=this._dateAdapter.getYear(i))}else t&&(this._selectedYear=this._dateAdapter.getYear(t))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.sBO),c.Y36(Rs,8),c.Y36(ml,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-multi-year-view"]],viewQuery:function(t,i){if(1&t&&c.Gf(xb,5),2&t){let r;c.iGM(r=c.CRH())&&(i._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],decls:5,vars:7,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"rows","todayValue","startValue","endValue","numCols","cellAspectRatio","activeCell","selectedValueChange","keyup","keydown"]],template:function(t,i){1&t&&(c.TgZ(0,"table",0)(1,"thead",1)(2,"tr"),c._UZ(3,"th",2),c.qZA()(),c.TgZ(4,"tbody",3),c.NdJ("selectedValueChange",function(s){return i._yearSelected(s)})("keyup",function(s){return i._handleCalendarBodyKeyup(s)})("keydown",function(s){return i._handleCalendarBodyKeydown(s)}),c.qZA()()),2&t&&(c.xp6(4),c.Q6J("rows",i._years)("todayValue",i._todayYear)("startValue",i._selectedYear)("endValue",i._selectedYear)("numCols",4)("cellAspectRatio",4/7)("activeCell",i._getActiveCell()))},dependencies:[xb],encapsulation:2,changeDetection:0}),n})();function c2(n,e,t,i,r){const s=n.getYear(e),o=n.getYear(t),d=u2(n,i,r);return Math.floor((s-d)/24)===Math.floor((o-d)/24)}function AD(n,e,t,i){return function V5(n,e){return(n%e+e)%e}(n.getYear(e)-u2(n,t,i),24)}function u2(n,e,t){let i=0;return t?i=n.getYear(t)-24+1:e&&(i=n.getYear(e)),i}let d2=(()=>{class n{constructor(t,i,r,s){this._changeDetectorRef=t,this._dateFormats=i,this._dateAdapter=r,this._dir=s,this._rerenderSubscription=cs.w0.EMPTY,this.selectedChange=new c.vpe,this.monthSelected=new c.vpe,this.activeDateChange=new c.vpe,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(t){let i=this._activeDate;const r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),this._dateAdapter.getYear(i)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}get selected(){return this._selected}set selected(t){this._selected=t instanceof Xo?t:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t)),this._setSelectedMonth(t)}get minDate(){return this._minDate}set minDate(t){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}get maxDate(){return this._maxDate}set maxDate(t){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(ki(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_monthSelected(t){const i=t.value,r=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),i,1);this.monthSelected.emit(r);const s=this._dateAdapter.getNumDaysInMonth(r);this.selectedChange.emit(this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),i,Math.min(this._dateAdapter.getDate(this.activeDate),s)))}_handleCalendarBodyKeydown(t){const i=this._activeDate,r=this._isRtl();switch(t.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?-10:-1);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?10:1);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(i,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),t.preventDefault()}_handleCalendarBodyKeyup(t){(32===t.keyCode||13===t.keyCode)&&(this._selectionKeyPressed&&this._monthSelected({value:this._dateAdapter.getMonth(this._activeDate),event:t}),this._selectionKeyPressed=!1)}_init(){this._setSelectedMonth(this.selected),this._todayMonth=this._getMonthInCurrentYear(this._dateAdapter.today()),this._yearLabel=this._dateAdapter.getYearName(this.activeDate);let t=this._dateAdapter.getMonthNames("short");this._months=[[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(i=>i.map(r=>this._createCellForMonth(r,t[r]))),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_getMonthInCurrentYear(t){return t&&this._dateAdapter.getYear(t)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(t):null}_createCellForMonth(t,i){const r=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),t,1),s=this._dateAdapter.format(r,this._dateFormats.display.monthYearA11yLabel),o=this.dateClass?this.dateClass(r,"year"):void 0;return new UO(t,i.toLocaleUpperCase(),s,this._shouldEnableMonth(t),o)}_shouldEnableMonth(t){const i=this._dateAdapter.getYear(this.activeDate);if(null==t||this._isYearAndMonthAfterMaxDate(i,t)||this._isYearAndMonthBeforeMinDate(i,t))return!1;if(!this.dateFilter)return!0;for(let s=this._dateAdapter.createDate(i,t,1);this._dateAdapter.getMonth(s)==t;s=this._dateAdapter.addCalendarDays(s,1))if(this.dateFilter(s))return!0;return!1}_isYearAndMonthAfterMaxDate(t,i){if(this.maxDate){const r=this._dateAdapter.getYear(this.maxDate),s=this._dateAdapter.getMonth(this.maxDate);return t>r||t===r&&i>s}return!1}_isYearAndMonthBeforeMinDate(t,i){if(this.minDate){const r=this._dateAdapter.getYear(this.minDate),s=this._dateAdapter.getMonth(this.minDate);return t<r||t===r&&i<s}return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedMonth(t){this._selectedMonth=t instanceof Xo?this._getMonthInCurrentYear(t.start)||this._getMonthInCurrentYear(t.end):this._getMonthInCurrentYear(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.sBO),c.Y36(w_,8),c.Y36(Rs,8),c.Y36(ml,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-year-view"]],viewQuery:function(t,i){if(1&t&&c.Gf(xb,5),2&t){let r;c.iGM(r=c.CRH())&&(i._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],decls:5,vars:9,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell","selectedValueChange","keyup","keydown"]],template:function(t,i){1&t&&(c.TgZ(0,"table",0)(1,"thead",1)(2,"tr"),c._UZ(3,"th",2),c.qZA()(),c.TgZ(4,"tbody",3),c.NdJ("selectedValueChange",function(s){return i._monthSelected(s)})("keyup",function(s){return i._handleCalendarBodyKeyup(s)})("keydown",function(s){return i._handleCalendarBodyKeydown(s)}),c.qZA()()),2&t&&(c.xp6(4),c.Q6J("label",i._yearLabel)("rows",i._months)("todayValue",i._todayMonth)("startValue",i._selectedMonth)("endValue",i._selectedMonth)("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",i._dateAdapter.getMonth(i.activeDate)))},dependencies:[xb],encapsulation:2,changeDetection:0}),n})(),B5=0,H5=(()=>{class n{constructor(t,i,r,s,o){this._intl=t,this.calendar=i,this._dateAdapter=r,this._dateFormats=s,this._buttonDescriptionId="mat-calendar-button-"+B5++,this.calendar.stateChanges.subscribe(()=>o.markForCheck())}get periodButtonText(){if("month"==this.calendar.currentView)return this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase();if("year"==this.calendar.currentView)return this._dateAdapter.getYearName(this.calendar.activeDate);const i=this._dateAdapter.getYear(this.calendar.activeDate)-AD(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),r=i+24-1,s=this._dateAdapter.getYearName(this._dateAdapter.createDate(i,0,1)),o=this._dateAdapter.getYearName(this._dateAdapter.createDate(r,0,1));return this._intl.formatYearRange(s,o)}get periodButtonLabel(){return"month"==this.calendar.currentView?this._intl.switchToMultiYearViewLabel:this._intl.switchToMonthViewLabel}get prevButtonLabel(){return{month:this._intl.prevMonthLabel,year:this._intl.prevYearLabel,"multi-year":this._intl.prevMultiYearLabel}[this.calendar.currentView]}get nextButtonLabel(){return{month:this._intl.nextMonthLabel,year:this._intl.nextYearLabel,"multi-year":this._intl.nextMultiYearLabel}[this.calendar.currentView]}currentPeriodClicked(){this.calendar.currentView="month"==this.calendar.currentView?"multi-year":"month"}previousClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?-1:-24)}nextClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?1:24)}previousEnabled(){return!this.calendar.minDate||!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate)}nextEnabled(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}_isSameView(t,i){return"month"==this.calendar.currentView?this._dateAdapter.getYear(t)==this._dateAdapter.getYear(i)&&this._dateAdapter.getMonth(t)==this._dateAdapter.getMonth(i):"year"==this.calendar.currentView?this._dateAdapter.getYear(t)==this._dateAdapter.getYear(i):c2(this._dateAdapter,t,i,this.calendar.minDate,this.calendar.maxDate)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ID),c.Y36((0,c.Gpc)(()=>qO)),c.Y36(Rs,8),c.Y36(w_,8),c.Y36(c.sBO))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-calendar-header"]],exportAs:["matCalendarHeader"],ngContentSelectors:E5,decls:11,vars:10,consts:[[1,"mat-calendar-header"],[1,"mat-calendar-controls"],["mat-button","","type","button","aria-live","polite",1,"mat-calendar-period-button",3,"click"],["viewBox","0 0 10 5","focusable","false",1,"mat-calendar-arrow"],["points","0,0 5,5 10,0"],[1,"mat-calendar-spacer"],["mat-icon-button","","type","button",1,"mat-calendar-previous-button",3,"disabled","click"],["mat-icon-button","","type","button",1,"mat-calendar-next-button",3,"disabled","click"]],template:function(t,i){1&t&&(c.F$t(),c.TgZ(0,"div",0)(1,"div",1)(2,"button",2),c.NdJ("click",function(){return i.currentPeriodClicked()}),c.TgZ(3,"span"),c._uU(4),c.qZA(),c.O4$(),c.TgZ(5,"svg",3),c._UZ(6,"polygon",4),c.qZA()(),c.kcU(),c._UZ(7,"div",5),c.Hsn(8),c.TgZ(9,"button",6),c.NdJ("click",function(){return i.previousClicked()}),c.qZA(),c.TgZ(10,"button",7),c.NdJ("click",function(){return i.nextClicked()}),c.qZA()()()),2&t&&(c.xp6(2),c.uIk("aria-label",i.periodButtonLabel)("aria-describedby",i._buttonDescriptionId),c.xp6(1),c.uIk("id",i._buttonDescriptionId),c.xp6(1),c.Oqu(i.periodButtonText),c.xp6(1),c.ekj("mat-calendar-invert","month"!==i.calendar.currentView),c.xp6(4),c.Q6J("disabled",!i.previousEnabled()),c.uIk("aria-label",i.prevButtonLabel),c.xp6(1),c.Q6J("disabled",!i.nextEnabled()),c.uIk("aria-label",i.nextButtonLabel))},dependencies:[E_],encapsulation:2,changeDetection:0}),n})(),qO=(()=>{class n{constructor(t,i,r,s){this._dateAdapter=i,this._dateFormats=r,this._changeDetectorRef=s,this._moveFocusOnNextTick=!1,this.startView="month",this.selectedChange=new c.vpe,this.yearSelected=new c.vpe,this.monthSelected=new c.vpe,this.viewChanged=new c.vpe(!0),this._userSelection=new c.vpe,this.stateChanges=new st.x,this._intlChanges=t.changes.subscribe(()=>{s.markForCheck(),this.stateChanges.next()})}get startAt(){return this._startAt}set startAt(t){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}get selected(){return this._selected}set selected(t){this._selected=t instanceof Xo?t:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}get minDate(){return this._minDate}set minDate(t){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}get maxDate(){return this._maxDate}set maxDate(t){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}get activeDate(){return this._clampedActiveDate}set activeDate(t){this._clampedActiveDate=this._dateAdapter.clampDate(t,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}get currentView(){return this._currentView}set currentView(t){const i=this._currentView!==t?t:null;this._currentView=t,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck(),i&&this.viewChanged.emit(i)}ngAfterContentInit(){this._calendarHeaderPortal=new SD(this.headerComponent||H5),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}ngAfterViewChecked(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}ngOnDestroy(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}ngOnChanges(t){const i=t.minDate&&!this._dateAdapter.sameDate(t.minDate.previousValue,t.minDate.currentValue)?t.minDate:void 0,r=t.maxDate&&!this._dateAdapter.sameDate(t.maxDate.previousValue,t.maxDate.currentValue)?t.maxDate:void 0,s=i||r||t.dateFilter;if(s&&!s.firstChange){const o=this._getCurrentViewComponent();o&&(this._changeDetectorRef.detectChanges(),o._init())}this.stateChanges.next()}focusActiveCell(){this._getCurrentViewComponent()._focusActiveCell(!1)}updateTodaysDate(){this._getCurrentViewComponent()._init()}_dateSelected(t){const i=t.value;(this.selected instanceof Xo||i&&!this._dateAdapter.sameDate(i,this.selected))&&this.selectedChange.emit(i),this._userSelection.emit(t)}_yearSelectedInMultiYearView(t){this.yearSelected.emit(t)}_monthSelectedInYearView(t){this.monthSelected.emit(t)}_goToDateInView(t,i){this.activeDate=t,this.currentView=i}_getCurrentViewComponent(){return this.monthView||this.yearView||this.multiYearView}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ID),c.Y36(Rs,8),c.Y36(w_,8),c.Y36(c.sBO))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-calendar"]],viewQuery:function(t,i){if(1&t&&(c.Gf(a2,5),c.Gf(d2,5),c.Gf(l2,5)),2&t){let r;c.iGM(r=c.CRH())&&(i.monthView=r.first),c.iGM(r=c.CRH())&&(i.yearView=r.first),c.iGM(r=c.CRH())&&(i.multiYearView=r.first)}},hostAttrs:[1,"mat-calendar"],inputs:{headerComponent:"headerComponent",startAt:"startAt",startView:"startView",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",_userSelection:"_userSelection"},exportAs:["matCalendar"],features:[c._Bn([o2]),c.TTD],decls:5,vars:5,consts:[[3,"cdkPortalOutlet"],["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content",3,"ngSwitch"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","activeDateChange","_userSelection",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","activeDateChange","_userSelection"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange"]],template:function(t,i){1&t&&(c.YNc(0,C5,0,0,"ng-template",0),c.TgZ(1,"div",1),c.YNc(2,D5,1,8,"mat-month-view",2),c.YNc(3,S5,1,6,"mat-year-view",3),c.YNc(4,I5,1,6,"mat-multi-year-view",4),c.qZA()),2&t&&(c.Q6J("cdkPortalOutlet",i._calendarHeaderPortal),c.xp6(1),c.Q6J("ngSwitch",i.currentView),c.xp6(1),c.Q6J("ngSwitchCase","month"),c.xp6(1),c.Q6J("ngSwitchCase","year"),c.xp6(1),c.Q6J("ngSwitchCase","multi-year"))},dependencies:[a2,d2,l2,sT,iW,co,sa],styles:['.mat-calendar{display:block}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;margin:5% calc(4.7142857143% - 16px)}.mat-calendar-controls .mat-icon-button:hover .mat-button-focus-overlay{opacity:.04}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0}.mat-calendar-arrow{display:inline-block;width:10px;height:5px;margin:0 0 0 5px;vertical-align:middle}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}.cdk-high-contrast-active .mat-calendar-arrow{fill:CanvasText}.mat-calendar-previous-button,.mat-calendar-next-button{position:relative}.mat-calendar-previous-button::after,.mat-calendar-next-button::after{top:0;left:0;right:0;bottom:0;position:absolute;content:"";margin:15.5px;border:0 solid currentColor;border-top-width:2px}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-previous-button::after{border-left-width:2px;transform:translateX(2px) rotate(-45deg)}.mat-calendar-next-button::after{border-right-width:2px;transform:translateX(-2px) rotate(45deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:"";position:absolute;top:0;left:-8px;right:-8px;height:1px}\n'],encapsulation:2,changeDetection:0}),n})();const h2={transformPanel:kb("transformPanel",[ed("void => enter-dropdown",Yh("120ms cubic-bezier(0, 0, 0.2, 1)",TB([Gr({opacity:0,transform:"scale(1, 0.8)"}),Gr({opacity:1,transform:"scale(1, 1)"})]))),ed("void => enter-dialog",Yh("150ms cubic-bezier(0, 0, 0.2, 1)",TB([Gr({opacity:0,transform:"scale(0.7)"}),Gr({transform:"none",opacity:1})]))),ed("* => void",Yh("100ms linear",Gr({opacity:0})))]),fadeInCalendar:kb("fadeInCalendar",[Yp("void",Gr({opacity:0})),Yp("enter",Gr({opacity:1})),ed("void => *",Yh("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])};let U5=0;const f2=new c.OlP("mat-datepicker-scroll-strategy"),z5={provide:f2,deps:[Zp],useFactory:function j5(n){return()=>n.scrollStrategies.reposition()}},G5=yD(class{constructor(n){this._elementRef=n}});let $5=(()=>{class n extends G5{constructor(t,i,r,s,o,d){super(t),this._changeDetectorRef=i,this._globalModel=r,this._dateAdapter=s,this._rangeSelectionStrategy=o,this._subscriptions=new cs.w0,this._animationDone=new st.x,this._actionsPortal=null,this._closeButtonText=d.closeCalendarLabel}ngOnInit(){this._model=this._actionsPortal?this._globalModel.clone():this._globalModel,this._animationState=this.datepicker.touchUi?"enter-dialog":"enter-dropdown"}ngAfterViewInit(){this._subscriptions.add(this.datepicker.stateChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})),this._calendar.focusActiveCell()}ngOnDestroy(){this._subscriptions.unsubscribe(),this._animationDone.complete()}_handleUserSelection(t){const i=this._model.selection,r=t.value,s=i instanceof Xo;if(s&&this._rangeSelectionStrategy){const o=this._rangeSelectionStrategy.selectionFinished(r,i,t.event);this._model.updateSelection(o,this)}else r&&(s||!this._dateAdapter.sameDate(r,i))&&this._model.add(r);(!this._model||this._model.isComplete())&&!this._actionsPortal&&this.datepicker.close()}_startExitAnimation(){this._animationState="void",this._changeDetectorRef.markForCheck()}_getSelected(){return this._model.selection}_applyPendingSelection(){this._model!==this._globalModel&&this._globalModel.updateSelection(this._model.selection,this)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.sBO),c.Y36(Kp),c.Y36(Rs),c.Y36(aT,8),c.Y36(ID))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-datepicker-content"]],viewQuery:function(t,i){if(1&t&&c.Gf(qO,5),2&t){let r;c.iGM(r=c.CRH())&&(i._calendar=r.first)}},hostAttrs:[1,"mat-datepicker-content"],hostVars:3,hostBindings:function(t,i){1&t&&c.WFA("@transformPanel.done",function(){return i._animationDone.next()}),2&t&&(c.d8E("@transformPanel",i._animationState),c.ekj("mat-datepicker-content-touch",i.datepicker.touchUi))},inputs:{color:"color"},exportAs:["matDatepickerContent"],features:[c.qOj],decls:5,vars:24,consts:[["cdkTrapFocus","","role","dialog",1,"mat-datepicker-content-container"],[3,"id","ngClass","startAt","startView","minDate","maxDate","dateFilter","headerComponent","selected","dateClass","comparisonStart","comparisonEnd","yearSelected","monthSelected","viewChanged","_userSelection"],[3,"cdkPortalOutlet"],["type","button","mat-raised-button","",1,"mat-datepicker-close-button",3,"color","focus","blur","click"]],template:function(t,i){if(1&t&&(c.TgZ(0,"div",0)(1,"mat-calendar",1),c.NdJ("yearSelected",function(s){return i.datepicker._selectYear(s)})("monthSelected",function(s){return i.datepicker._selectMonth(s)})("viewChanged",function(s){return i.datepicker._viewChanged(s)})("_userSelection",function(s){return i._handleUserSelection(s)}),c.qZA(),c.YNc(2,A5,0,0,"ng-template",2),c.TgZ(3,"button",3),c.NdJ("focus",function(){return i._closeButtonFocused=!0})("blur",function(){return i._closeButtonFocused=!1})("click",function(){return i.datepicker.close()}),c._uU(4),c.qZA()()),2&t){let r;c.ekj("mat-datepicker-content-container-with-custom-header",i.datepicker.calendarHeaderComponent)("mat-datepicker-content-container-with-actions",i._actionsPortal),c.uIk("aria-modal",!0)("aria-labelledby",null!==(r=i._dialogLabelId)&&void 0!==r?r:void 0),c.xp6(1),c.Q6J("id",i.datepicker.id)("ngClass",i.datepicker.panelClass)("startAt",i.datepicker.startAt)("startView",i.datepicker.startView)("minDate",i.datepicker._getMinDate())("maxDate",i.datepicker._getMaxDate())("dateFilter",i.datepicker._getDateFilter())("headerComponent",i.datepicker.calendarHeaderComponent)("selected",i._getSelected())("dateClass",i.datepicker.dateClass)("comparisonStart",i.comparisonStart)("comparisonEnd",i.comparisonEnd)("@fadeInCalendar","enter"),c.xp6(1),c.Q6J("cdkPortalOutlet",i._actionsPortal),c.xp6(1),c.ekj("cdk-visually-hidden",!i._closeButtonFocused),c.Q6J("color",i.color||"primary"),c.xp6(1),c.Oqu(i._closeButtonText)}},dependencies:[qO,E_,Y4,_n,sT],styles:[".mat-datepicker-content{display:block;border-radius:4px}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content .mat-datepicker-content-container-with-custom-header .mat-calendar{height:auto}.mat-datepicker-content .mat-datepicker-close-button{position:absolute;top:100%;left:0;margin-top:8px}.ng-animating .mat-datepicker-content .mat-datepicker-close-button{display:none}.mat-datepicker-content-container{display:flex;flex-direction:column;justify-content:space-between}.mat-datepicker-content-touch{display:block;max-height:80vh;position:relative;overflow:visible}.mat-datepicker-content-touch .mat-datepicker-content-container{min-height:312px;max-height:788px;min-width:250px;max-width:750px}.mat-datepicker-content-touch .mat-calendar{width:100%;height:auto}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-datepicker-content-container{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-datepicker-content-container{width:80vw;height:100vw}.mat-datepicker-content-touch .mat-datepicker-content-container-with-actions{height:115vw}}\n"],encapsulation:2,data:{animation:[h2.transformPanel,h2.fadeInCalendar]},changeDetection:0}),n})(),p2=(()=>{class n{constructor(t,i,r,s,o,d,f){this._overlay=t,this._ngZone=i,this._viewContainerRef=r,this._dateAdapter=o,this._dir=d,this._model=f,this._inputStateChanges=cs.w0.EMPTY,this.startView="month",this._touchUi=!1,this.xPosition="start",this.yPosition="below",this._restoreFocus=!0,this.yearSelected=new c.vpe,this.monthSelected=new c.vpe,this.viewChanged=new c.vpe(!0),this.openedStream=new c.vpe,this.closedStream=new c.vpe,this._opened=!1,this.id="mat-datepicker-"+U5++,this._focusedElementBeforeOpen=null,this._backdropHarnessClass=`${this.id}-backdrop`,this.stateChanges=new st.x,this._scrollStrategy=s}get startAt(){return this._startAt||(this.datepickerInput?this.datepickerInput.getStartValue():null)}set startAt(t){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}get color(){return this._color||(this.datepickerInput?this.datepickerInput.getThemePalette():void 0)}set color(t){this._color=t}get touchUi(){return this._touchUi}set touchUi(t){this._touchUi=an(t)}get disabled(){return void 0===this._disabled&&this.datepickerInput?this.datepickerInput.disabled:!!this._disabled}set disabled(t){const i=an(t);i!==this._disabled&&(this._disabled=i,this.stateChanges.next(void 0))}get restoreFocus(){return this._restoreFocus}set restoreFocus(t){this._restoreFocus=an(t)}get panelClass(){return this._panelClass}set panelClass(t){this._panelClass=function k4(n,e=/\s+/){const t=[];if(null!=n){const i=Array.isArray(n)?n:`${n}`.split(e);for(const r of i){const s=`${r}`.trim();s&&t.push(s)}}return t}(t)}get opened(){return this._opened}set opened(t){an(t)?this.open():this.close()}_getMinDate(){return this.datepickerInput&&this.datepickerInput.min}_getMaxDate(){return this.datepickerInput&&this.datepickerInput.max}_getDateFilter(){return this.datepickerInput&&this.datepickerInput.dateFilter}ngOnChanges(t){const i=t.xPosition||t.yPosition;if(i&&!i.firstChange&&this._overlayRef){const r=this._overlayRef.getConfig().positionStrategy;r instanceof YB&&(this._setConnectedPositions(r),this.opened&&this._overlayRef.updatePosition())}this.stateChanges.next(void 0)}ngOnDestroy(){this._destroyOverlay(),this.close(),this._inputStateChanges.unsubscribe(),this.stateChanges.complete()}select(t){this._model.add(t)}_selectYear(t){this.yearSelected.emit(t)}_selectMonth(t){this.monthSelected.emit(t)}_viewChanged(t){this.viewChanged.emit(t)}registerInput(t){return this._inputStateChanges.unsubscribe(),this.datepickerInput=t,this._inputStateChanges=t.stateChanges.subscribe(()=>this.stateChanges.next(void 0)),this._model}registerActions(t){this._actionsPortal=t}removeActions(t){t===this._actionsPortal&&(this._actionsPortal=null)}open(){this._opened||this.disabled||(this._focusedElementBeforeOpen=gD(),this._openOverlay(),this._opened=!0,this.openedStream.emit())}close(){if(!this._opened)return;if(this._componentRef){const i=this._componentRef.instance;i._startExitAnimation(),i._animationDone.pipe(Ms(1)).subscribe(()=>this._destroyOverlay())}const t=()=>{this._opened&&(this._opened=!1,this.closedStream.emit(),this._focusedElementBeforeOpen=null)};this._restoreFocus&&this._focusedElementBeforeOpen&&"function"==typeof this._focusedElementBeforeOpen.focus?(this._focusedElementBeforeOpen.focus(),setTimeout(t)):t()}_applyPendingSelection(){this._componentRef?.instance?._applyPendingSelection()}_forwardContentValues(t){t.datepicker=this,t.color=this.color,t._actionsPortal=this._actionsPortal,t._dialogLabelId=this.datepickerInput.getOverlayLabelId()}_openOverlay(){this._destroyOverlay();const t=this.touchUi,i=new SD($5,this._viewContainerRef),r=this._overlayRef=this._overlay.create(new oT({positionStrategy:t?this._getDialogStrategy():this._getDropdownStrategy(),hasBackdrop:!0,backdropClass:[t?"cdk-overlay-dark-backdrop":"mat-overlay-transparent-backdrop",this._backdropHarnessClass],direction:this._dir,scrollStrategy:t?this._overlay.scrollStrategies.block():this._scrollStrategy(),panelClass:"mat-datepicker-"+(t?"dialog":"popup")}));this._getCloseStream(r).subscribe(s=>{s&&s.preventDefault(),this.close()}),r.keydownEvents().subscribe(s=>{const o=s.keyCode;(38===o||40===o||37===o||39===o||33===o||34===o)&&s.preventDefault()}),this._componentRef=r.attach(i),this._forwardContentValues(this._componentRef.instance),t||this._ngZone.onStable.pipe(Ms(1)).subscribe(()=>r.updatePosition())}_destroyOverlay(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=this._componentRef=null)}_getDialogStrategy(){return this._overlay.position().global().centerHorizontally().centerVertically()}_getDropdownStrategy(){const t=this._overlay.position().flexibleConnectedTo(this.datepickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".mat-datepicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition();return this._setConnectedPositions(t)}_setConnectedPositions(t){const i="end"===this.xPosition?"end":"start",r="start"===i?"end":"start",s="above"===this.yPosition?"bottom":"top",o="top"===s?"bottom":"top";return t.withPositions([{originX:i,originY:o,overlayX:i,overlayY:s},{originX:i,originY:s,overlayX:i,overlayY:o},{originX:r,originY:o,overlayX:r,overlayY:s},{originX:r,originY:s,overlayX:r,overlayY:o}])}_getCloseStream(t){return(0,rn.T)(t.backdropClick(),t.detachments(),t.keydownEvents().pipe(oi(i=>27===i.keyCode&&!Oc(i)||this.datepickerInput&&Oc(i,"altKey")&&38===i.keyCode)))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Zp),c.Y36(c.R0b),c.Y36(c.s_b),c.Y36(f2),c.Y36(Rs,8),c.Y36(ml,8),c.Y36(Kp))},n.\u0275dir=c.lG2({type:n,inputs:{calendarHeaderComponent:"calendarHeaderComponent",startAt:"startAt",startView:"startView",color:"color",touchUi:"touchUi",disabled:"disabled",xPosition:"xPosition",yPosition:"yPosition",restoreFocus:"restoreFocus",dateClass:"dateClass",panelClass:"panelClass",opened:"opened"},outputs:{yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",openedStream:"opened",closedStream:"closed"},features:[c.TTD]}),n})(),W5=(()=>{class n extends p2{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=c.n5z(n)))(i||n)}}(),n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-datepicker"]],exportAs:["matDatepicker"],features:[c._Bn([o2,{provide:p2,useExisting:n}]),c.qOj],decls:0,vars:0,template:function(t,i){},encapsulation:2,changeDetection:0}),n})();class lT{constructor(e,t){this.target=e,this.targetElement=t,this.value=this.target.value}}let q5=(()=>{class n{constructor(t,i,r){this._elementRef=t,this._dateAdapter=i,this._dateFormats=r,this.dateChange=new c.vpe,this.dateInput=new c.vpe,this.stateChanges=new st.x,this._onTouched=()=>{},this._validatorOnChange=()=>{},this._cvaOnChange=()=>{},this._valueChangesSubscription=cs.w0.EMPTY,this._localeSubscription=cs.w0.EMPTY,this._parseValidator=()=>this._lastValueValid?null:{matDatepickerParse:{text:this._elementRef.nativeElement.value}},this._filterValidator=s=>{const o=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(s.value));return!o||this._matchesFilter(o)?null:{matDatepickerFilter:!0}},this._minValidator=s=>{const o=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(s.value)),d=this._getMinDate();return!d||!o||this._dateAdapter.compareDate(d,o)<=0?null:{matDatepickerMin:{min:d,actual:o}}},this._maxValidator=s=>{const o=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(s.value)),d=this._getMaxDate();return!d||!o||this._dateAdapter.compareDate(d,o)>=0?null:{matDatepickerMax:{max:d,actual:o}}},this._lastValueValid=!1,this._localeSubscription=i.localeChanges.subscribe(()=>{this._assignValueProgrammatically(this.value)})}get value(){return this._model?this._getValueFromModel(this._model.selection):this._pendingValue}set value(t){this._assignValueProgrammatically(t)}get disabled(){return!!this._disabled||this._parentDisabled()}set disabled(t){const i=an(t),r=this._elementRef.nativeElement;this._disabled!==i&&(this._disabled=i,this.stateChanges.next(void 0)),i&&this._isInitialized&&r.blur&&r.blur()}_getValidators(){return[this._parseValidator,this._minValidator,this._maxValidator,this._filterValidator]}_registerModel(t){this._model=t,this._valueChangesSubscription.unsubscribe(),this._pendingValue&&this._assignValue(this._pendingValue),this._valueChangesSubscription=this._model.selectionChanged.subscribe(i=>{if(this._shouldHandleChangeEvent(i)){const r=this._getValueFromModel(i.selection);this._lastValueValid=this._isValidValue(r),this._cvaOnChange(r),this._onTouched(),this._formatValue(r),this.dateInput.emit(new lT(this,this._elementRef.nativeElement)),this.dateChange.emit(new lT(this,this._elementRef.nativeElement))}})}ngAfterViewInit(){this._isInitialized=!0}ngOnChanges(t){(function Y5(n,e){const t=Object.keys(n);for(let i of t){const{previousValue:r,currentValue:s}=n[i];if(!e.isDateInstance(r)||!e.isDateInstance(s))return!0;if(!e.sameDate(r,s))return!0}return!1})(t,this._dateAdapter)&&this.stateChanges.next(void 0)}ngOnDestroy(){this._valueChangesSubscription.unsubscribe(),this._localeSubscription.unsubscribe(),this.stateChanges.complete()}registerOnValidatorChange(t){this._validatorOnChange=t}validate(t){return this._validator?this._validator(t):null}writeValue(t){this._assignValueProgrammatically(t)}registerOnChange(t){this._cvaOnChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_onKeydown(t){t.altKey&&40===t.keyCode&&!this._elementRef.nativeElement.readOnly&&(this._openPopup(),t.preventDefault())}_onInput(t){const i=this._lastValueValid;let r=this._dateAdapter.parse(t,this._dateFormats.parse.dateInput);this._lastValueValid=this._isValidValue(r),r=this._dateAdapter.getValidDateOrNull(r);const s=!this._dateAdapter.sameDate(r,this.value);!r||s?this._cvaOnChange(r):(t&&!this.value&&this._cvaOnChange(r),i!==this._lastValueValid&&this._validatorOnChange()),s&&(this._assignValue(r),this.dateInput.emit(new lT(this,this._elementRef.nativeElement)))}_onChange(){this.dateChange.emit(new lT(this,this._elementRef.nativeElement))}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(t){this._elementRef.nativeElement.value=null!=t?this._dateAdapter.format(t,this._dateFormats.display.dateInput):""}_assignValue(t){this._model?(this._assignValueToModel(t),this._pendingValue=null):this._pendingValue=t}_isValidValue(t){return!t||this._dateAdapter.isValid(t)}_parentDisabled(){return!1}_assignValueProgrammatically(t){t=this._dateAdapter.deserialize(t),this._lastValueValid=this._isValidValue(t),t=this._dateAdapter.getValidDateOrNull(t),this._assignValue(t),this._formatValue(t)}_matchesFilter(t){const i=this._getDateFilter();return!i||i(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(Rs,8),c.Y36(w_,8))},n.\u0275dir=c.lG2({type:n,inputs:{value:"value",disabled:"disabled"},outputs:{dateChange:"dateChange",dateInput:"dateInput"},features:[c.TTD]}),n})();const Z5={provide:xc,useExisting:(0,c.Gpc)(()=>YO),multi:!0},K5={provide:xs,useExisting:(0,c.Gpc)(()=>YO),multi:!0};let YO=(()=>{class n extends q5{constructor(t,i,r,s){super(t,i,r),this._formField=s,this._closedSubscription=cs.w0.EMPTY,this._validator=kA.compose(super._getValidators())}set matDatepicker(t){t&&(this._datepicker=t,this._closedSubscription=t.closedStream.subscribe(()=>this._onTouched()),this._registerModel(t.registerInput(this)))}get min(){return this._min}set min(t){const i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t));this._dateAdapter.sameDate(i,this._min)||(this._min=i,this._validatorOnChange())}get max(){return this._max}set max(t){const i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t));this._dateAdapter.sameDate(i,this._max)||(this._max=i,this._validatorOnChange())}get dateFilter(){return this._dateFilter}set dateFilter(t){const i=this._matchesFilter(this.value);this._dateFilter=t,this._matchesFilter(this.value)!==i&&this._validatorOnChange()}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}getOverlayLabelId(){return this._formField?this._formField.getLabelId():this._elementRef.nativeElement.getAttribute("aria-labelledby")}getThemePalette(){return this._formField?this._formField.color:void 0}getStartValue(){return this.value}ngOnDestroy(){super.ngOnDestroy(),this._closedSubscription.unsubscribe()}_openPopup(){this._datepicker&&this._datepicker.open()}_getValueFromModel(t){return t}_assignValueToModel(t){this._model&&this._model.updateSelection(t,this)}_getMinDate(){return this._min}_getMaxDate(){return this._max}_getDateFilter(){return this._dateFilter}_shouldHandleChangeEvent(t){return t.source!==this}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(Rs,8),c.Y36(w_,8),c.Y36(JA,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","matDatepicker",""]],hostAttrs:[1,"mat-datepicker-input"],hostVars:6,hostBindings:function(t,i){1&t&&c.NdJ("input",function(s){return i._onInput(s.target.value)})("change",function(){return i._onChange()})("blur",function(){return i._onBlur()})("keydown",function(s){return i._onKeydown(s)}),2&t&&(c.Ikx("disabled",i.disabled),c.uIk("aria-haspopup",i._datepicker?"dialog":null)("aria-owns",(null==i._datepicker?null:i._datepicker.opened)&&i._datepicker.id||null)("min",i.min?i._dateAdapter.toIso8601(i.min):null)("max",i.max?i._dateAdapter.toIso8601(i.max):null)("data-mat-calendar",i._datepicker?i._datepicker.id:null))},inputs:{matDatepicker:"matDatepicker",min:"min",max:"max",dateFilter:["matDatepickerFilter","dateFilter"]},exportAs:["matDatepickerInput"],features:[c._Bn([Z5,K5,{provide:r2,useExisting:n}]),c.qOj]}),n})(),Q5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["","matDatepickerToggleIcon",""]]}),n})(),X5=(()=>{class n{constructor(t,i,r){this._intl=t,this._changeDetectorRef=i,this._stateChanges=cs.w0.EMPTY;const s=Number(r);this.tabIndex=s||0===s?s:null}get disabled(){return void 0===this._disabled&&this.datepicker?this.datepicker.disabled:!!this._disabled}set disabled(t){this._disabled=an(t)}ngOnChanges(t){t.datepicker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}_open(t){this.datepicker&&!this.disabled&&(this.datepicker.open(),t.stopPropagation())}_watchStateChanges(){const t=this.datepicker?this.datepicker.stateChanges:Sn(),i=this.datepicker&&this.datepicker.datepickerInput?this.datepicker.datepickerInput.stateChanges:Sn(),r=this.datepicker?(0,rn.T)(this.datepicker.openedStream,this.datepicker.closedStream):Sn();this._stateChanges.unsubscribe(),this._stateChanges=(0,rn.T)(this._intl.changes,t,i,r).subscribe(()=>this._changeDetectorRef.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ID),c.Y36(c.sBO),c.$8M("tabindex"))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-datepicker-toggle"]],contentQueries:function(t,i,r){if(1&t&&c.Suo(r,Q5,5),2&t){let s;c.iGM(s=c.CRH())&&(i._customIcon=s.first)}},viewQuery:function(t,i){if(1&t&&c.Gf(T5,5),2&t){let r;c.iGM(r=c.CRH())&&(i._button=r.first)}},hostAttrs:[1,"mat-datepicker-toggle"],hostVars:8,hostBindings:function(t,i){1&t&&c.NdJ("click",function(s){return i._open(s)}),2&t&&(c.uIk("tabindex",null)("data-mat-calendar",i.datepicker?i.datepicker.id:null),c.ekj("mat-datepicker-toggle-active",i.datepicker&&i.datepicker.opened)("mat-accent",i.datepicker&&"accent"===i.datepicker.color)("mat-warn",i.datepicker&&"warn"===i.datepicker.color))},inputs:{datepicker:["for","datepicker"],tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],disabled:"disabled",disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],features:[c.TTD],ngContentSelectors:x5,decls:4,vars:6,consts:[["mat-icon-button","","type","button",3,"disabled","disableRipple"],["button",""],["class","mat-datepicker-toggle-default-icon","viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",4,"ngIf"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",1,"mat-datepicker-toggle-default-icon"],["d","M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"]],template:function(t,i){1&t&&(c.F$t(k5),c.TgZ(0,"button",0,1),c.YNc(2,M5,2,0,"svg",2),c.Hsn(3),c.qZA()),2&t&&(c.Q6J("disabled",i.disabled)("disableRipple",i.disableRipple),c.uIk("aria-haspopup",i.datepicker?"dialog":null)("aria-label",i.ariaLabel||i._intl.openCalendarLabel)("tabindex",i.disabled?-1:i.tabIndex),c.xp6(2),c.Q6J("ngIf",!i._customIcon))},dependencies:[E_,ii],styles:[".mat-form-field-appearance-legacy .mat-form-field-prefix .mat-datepicker-toggle-default-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-datepicker-toggle-default-icon{width:1em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-datepicker-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-datepicker-toggle-default-icon{display:block;width:1.5em;height:1.5em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-datepicker-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-datepicker-toggle-default-icon{margin:auto}.cdk-high-contrast-active .mat-datepicker-toggle-default-icon{color:CanvasText}\n"],encapsulation:2,changeDetection:0}),n})(),J5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[ID,z5],imports:[[xo,bB,HO,rW,LO,zr],rT]}),n})();function g2(n){return new Fr.y(e=>{(0,pl.Xf)(n()).subscribe(e)})}function eY(n,e){}class ZO{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const tY={dialogContainer:kb("dialogContainer",[Yp("void, exit",Gr({opacity:0,transform:"scale(0.7)"})),Yp("enter",Gr({transform:"none"})),ed("* => enter",IB([Yh("150ms cubic-bezier(0, 0, 0.2, 1)",Gr({transform:"none",opacity:1})),MO("@*",TO(),{optional:!0})])),ed("* => void, * => exit",IB([Yh("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",Gr({opacity:0})),MO("@*",TO(),{optional:!0})]))])};let nY=(()=>{class n extends FO{constructor(t,i,r,s,o,d,f,m){super(),this._elementRef=t,this._focusTrapFactory=i,this._changeDetectorRef=r,this._config=o,this._interactivityChecker=d,this._ngZone=f,this._focusMonitor=m,this._animationStateChanged=new c.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=v=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(v)),this._ariaLabelledBy=o.ariaLabelledBy||null,this._document=s}_initializeWithAttachedContent(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=gD())}attachComponentPortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const i=gD(),r=this._elementRef.nativeElement;(!i||i===this._document.body||i===r||r.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=gD();return t===i||t.contains(i)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(JV),c.Y36(c.sBO),c.Y36(ce,8),c.Y36(ZO),c.Y36(KV),c.Y36(c.R0b),c.Y36(yO))},n.\u0275dir=c.lG2({type:n,viewQuery:function(t,i){if(1&t&&c.Gf(sT,7),2&t){let r;c.iGM(r=c.CRH())&&(i._portalOutlet=r.first)}},features:[c.qOj]}),n})(),iY=(()=>{class n extends nY{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:t,totalTime:i}){"enter"===t?(this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:i}))}_onAnimationStart({toState:t,totalTime:i}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_initializeWithAttachedContent(){super._initializeWithAttachedContent(),this._config.delayFocusTrap||this._trapFocus()}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=c.n5z(n)))(i||n)}}(),n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,i){1&t&&c.WFA("@dialogContainer.start",function(s){return i._onAnimationStart(s)})("@dialogContainer.done",function(s){return i._onAnimationDone(s)}),2&t&&(c.Ikx("id",i._id),c.uIk("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),c.d8E("@dialogContainer",i._state))},features:[c.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&c.YNc(0,eY,0,0,"ng-template",0)},dependencies:[sT],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[tY.dialogContainer]}}),n})(),rY=0;class TD{constructor(e,t,i="mat-dialog-"+rY++){this._overlayRef=e,this._containerInstance=t,this.id=i,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new st.x,this._afterClosed=new st.x,this._beforeClosed=new st.x,this._state=0,t._id=i,t._animationStateChanged.pipe(oi(r=>"opened"===r.state),Ms(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(oi(r=>"closed"===r.state),Ms(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),e.keydownEvents().pipe(oi(r=>27===r.keyCode&&!this.disableClose&&!Oc(r))).subscribe(r=>{r.preventDefault(),KO(this,"keyboard")}),e.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():KO(this,"mouse")})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(oi(t=>"closing"===t.state),Ms(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(e){let t=this._getPositionStrategy();return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(e="",t=""){return this._overlayRef.updateSize({width:e,height:t}),this._overlayRef.updatePosition(),this}addPanelClass(e){return this._overlayRef.addPanelClass(e),this}removePanelClass(e){return this._overlayRef.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function KO(n,e,t){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=e),n.close(t)}const cT=new c.OlP("MatDialogData"),sY=new c.OlP("mat-dialog-default-options"),m2=new c.OlP("mat-dialog-scroll-strategy"),aY={provide:m2,deps:[Zp],useFactory:function oY(n){return()=>n.scrollStrategies.block()}};let lY=(()=>{class n{constructor(t,i,r,s,o,d,f,m,v,C){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._dialogRefConstructor=f,this._dialogContainerType=m,this._dialogDataToken=v,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new st.x,this._afterOpenedAtThisLevel=new st.x,this._ariaHiddenElements=new Map,this.afterAllClosed=g2(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ki(void 0))),this._scrollStrategy=d}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,i){i=function cY(n,e){return{...e,...n}}(i,this._defaultOptions||new ZO),i.id&&this.getDialogById(i.id);const r=this._createOverlay(i),s=this._attachDialogContainer(r,i),o=this._attachDialogContent(t,s,r,i);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(o),o.afterClosed().subscribe(()=>this._removeOpenDialog(o)),this.afterOpened.next(o),s._initializeWithAttachedContent(),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(t){const i=this._getOverlayConfig(t);return this._overlay.create(i)}_getOverlayConfig(t){const i=new oT({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachDialogContainer(t,i){const s=c.zs3.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:ZO,useValue:i}]}),o=new SD(this._dialogContainerType,i.viewContainerRef,s,i.componentFactoryResolver);return t.attach(o).instance}_attachDialogContent(t,i,r,s){const o=new this._dialogRefConstructor(r,i,s.id);if(t instanceof c.Rgc)i.attachTemplatePortal(new PO(t,null,{$implicit:s.data,dialogRef:o}));else{const d=this._createInjector(s,o,i),f=i.attachComponentPortal(new SD(t,s.viewContainerRef,d,s.componentFactoryResolver));o.componentInstance=f.instance}return o.updateSize(s.width,s.height).updatePosition(s.position),o}_createInjector(t,i,r){const s=t&&t.viewContainerRef&&t.viewContainerRef.injector,o=[{provide:this._dialogContainerType,useValue:r},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:i}];return t.direction&&(!s||!s.get(ml,null,c.XFs.Optional))&&o.push({provide:ml,useValue:{value:t.direction,change:Sn()}}),c.zs3.create({parent:s||this._injector,providers:o})}_removeOpenDialog(t){const i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,s)=>{r?s.setAttribute("aria-hidden",r):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){let s=i[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}}return n.\u0275fac=function(t){c.$Z()},n.\u0275dir=c.lG2({type:n}),n})(),uT=(()=>{class n extends lY{constructor(t,i,r,s,o,d,f,m){super(t,i,s,d,f,o,TD,iY,cT,m)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Zp),c.LFG(c.zs3),c.LFG(Ve,8),c.LFG(sY,8),c.LFG(m2),c.LFG(n,12),c.LFG(BO),c.LFG(c.QbO,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),uY=0,dY=(()=>{class n{constructor(t,i,r){this.dialogRef=t,this._elementRef=i,this._dialog=r,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=_2(this._elementRef,this._dialog.openDialogs))}ngOnChanges(t){const i=t._matDialogClose||t._matDialogCloseResult;i&&(this.dialogResult=i.currentValue)}_onButtonClick(t){KO(this.dialogRef,0===t.screenX&&0===t.screenY?"keyboard":"mouse",this.dialogResult)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(TD,8),c.Y36(c.SBq),c.Y36(uT))},n.\u0275dir=c.lG2({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(t,i){1&t&&c.NdJ("click",function(s){return i._onButtonClick(s)}),2&t&&c.uIk("aria-label",i.ariaLabel||null)("type",i.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[c.TTD]}),n})(),QO=(()=>{class n{constructor(t,i,r){this._dialogRef=t,this._elementRef=i,this._dialog=r,this.id="mat-dialog-title-"+uY++}ngOnInit(){this._dialogRef||(this._dialogRef=_2(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(TD,8),c.Y36(c.SBq),c.Y36(uT))},n.\u0275dir=c.lG2({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(t,i){2&t&&c.Ikx("id",i.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),n})(),XO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),n})(),JO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-dialog-actions"]}),n})();function _2(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-dialog-container");)t=t.parentElement;return t?e.find(i=>i.id===t.id):null}let hY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[uT,aY],imports:[[HO,LO,zr],zr]}),n})();function y2(n){return(0,ei.e)((e,t)=>{let s,i=null,r=!1;i=e.subscribe((0,fi.x)(t,void 0,void 0,o=>{s=(0,pl.Xf)(n(o,y2(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}class mY{}class Qp{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Qp?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Qp;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Qp?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(d=>-1===s.indexOf(d)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class _Y{encodeKey(e){return v2(e)}encodeValue(e){return v2(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const vY=/%(\d[a-f0-9])/gi,bY={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function v2(n){return encodeURIComponent(n).replace(vY,(e,t)=>bY[t]??e)}function dT(n){return`${n}`}class Xp{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new _Y,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function yY(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,d]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],f=t.get(o)||[];f.push(d),t.set(o,f)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(dT):[dT(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Xp({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(dT(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(dT(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class wY{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function b2(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function w2(n){return typeof Blob<"u"&&n instanceof Blob}function E2(n){return typeof FormData<"u"&&n instanceof FormData}class MD{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function EY(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Qp),this.context||(this.context=new wY),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const d=t.indexOf("?");this.urlWithParams=t+(-1===d?"?":d<t.length-1?"&":"")+o}}else this.params=new Xp,this.urlWithParams=t}serializeBody(){return null===this.body?null:b2(this.body)||w2(this.body)||E2(this.body)||function CY(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Xp?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||E2(this.body)?null:w2(this.body)?this.body.type||null:b2(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Xp?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,d=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let f=e.headers||this.headers,m=e.params||this.params;const v=e.context??this.context;return void 0!==e.setHeaders&&(f=Object.keys(e.setHeaders).reduce((C,A)=>C.set(A,e.setHeaders[A]),f)),e.setParams&&(m=Object.keys(e.setParams).reduce((C,A)=>C.set(A,e.setParams[A]),m)),new MD(t,i,s,{params:m,headers:f,context:v,reportProgress:d,responseType:r,withCredentials:o})}}var Os=(()=>((Os=Os||{})[Os.Sent=0]="Sent",Os[Os.UploadProgress=1]="UploadProgress",Os[Os.ResponseHeader=2]="ResponseHeader",Os[Os.DownloadProgress=3]="DownloadProgress",Os[Os.Response=4]="Response",Os[Os.User=5]="User",Os))();class eN extends class DY{constructor(e,t=200,i="OK"){this.headers=e.headers||new Qp,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=Os.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new eN({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function tN(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let D2=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof MD)s=t;else{let f,m;f=r.headers instanceof Qp?r.headers:new Qp(r.headers),r.params&&(m=r.params instanceof Xp?r.params:new Xp({fromObject:r.params})),s=new MD(t,i,void 0!==r.body?r.body:null,{headers:f,context:r.context,params:m,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=Sn(s).pipe(function gY(n,e){return(0,gl.m)(e)?(0,AO.z)(n,e,1):(0,AO.z)(n,1)}(f=>this.handler.handle(f)));if(t instanceof MD||"events"===r.observe)return o;const d=o.pipe(oi(f=>f instanceof eN));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return d.pipe((0,Jt.U)(f=>{if(null!==f.body&&!(f.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return f.body}));case"blob":return d.pipe((0,Jt.U)(f=>{if(null!==f.body&&!(f.body instanceof Blob))throw new Error("Response is not a Blob.");return f.body}));case"text":return d.pipe((0,Jt.U)(f=>{if(null!==f.body&&"string"!=typeof f.body)throw new Error("Response is not a string.");return f.body}));default:return d.pipe((0,Jt.U)(f=>f.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Xp).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,tN(r,i))}post(t,i,r={}){return this.request("POST",t,tN(r,i))}put(t,i,r={}){return this.request("PUT",t,tN(r,i))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(mY))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const IY=["*"];let hT;function kD(n){return function AY(){if(void 0===hT&&(hT=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(hT=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return hT}()?.createHTML(n)||n}function S2(n){return Error(`Unable to find icon with the name "${n}"`)}function I2(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function A2(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class D_{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let fT=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new D_(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){const o=this._sanitizer.sanitize(c.q3G.HTML,r);if(!o)throw A2(r);const d=kD(o);return this._addSvgIconConfig(t,i,new D_("",d,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new D_(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const s=this._sanitizer.sanitize(c.q3G.HTML,i);if(!s)throw A2(i);const o=kD(s);return this._addSvgIconSetConfig(t,new D_("",o,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(c.q3G.RESOURCE_URL,t);if(!i)throw I2(t);const r=this._cachedIconsByUrl.get(i);return r?Sn(pT(r)):this._loadSvgIconFromConfig(new D_(t,null)).pipe((0,ZA.b)(s=>this._cachedIconsByUrl.set(i,s)),(0,Jt.U)(s=>pT(s)))}getNamedSvgIcon(t,i=""){const r=T2(i,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(t,o):function fY(n,e){const t=(0,gl.m)(n)?n:()=>n,i=r=>r.error(t());return new Fr.y(e?r=>e.schedule(i,0,r):i)}(S2(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Sn(pT(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,Jt.U)(i=>pT(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?Sn(r):RL(i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(y2(d=>{const m=`Loading icon set URL: ${this._sanitizer.sanitize(c.q3G.RESOURCE_URL,o.url)} failed: ${d.message}`;return this._errorHandler.handleError(new Error(m)),Sn(null)})))).pipe((0,Jt.U)(()=>{const o=this._extractIconWithNameFromAnySet(t,i);if(!o)throw S2(t);return o}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),d=this._extractSvgIconFromSet(o,t,s.options);if(d)return d}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,ZA.b)(i=>t.svgText=i),(0,Jt.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Sn(null):this._fetchIcon(t).pipe((0,ZA.b)(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const s=t.querySelector(`[id="${i}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const d=this._svgElementFromString(kD("<svg></svg>"));return d.appendChild(o),this._setSvgAttributes(d,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(kD("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){const{name:o,value:d}=r[s];"id"!==o&&i.setAttribute(o,d)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){const{url:i,options:r}=t,s=r?.withCredentials??!1;if(!this._httpClient)throw function TY(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const o=this._sanitizer.sanitize(c.q3G.RESOURCE_URL,i);if(!o)throw I2(i);const d=this._inProgressUrlFetches.get(o);if(d)return d;const f=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe((0,Jt.U)(m=>kD(m)),function pY(n){return(0,ei.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>this._inProgressUrlFetches.delete(o)),(0,m_.B)());return this._inProgressUrlFetches.set(o,f),f}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(T2(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,t);if(s)return kY(s)?new D_(s.url,null,s.options):new D_(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(D2,8),c.LFG(du),c.LFG(ce,8),c.LFG(c.qLn))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function pT(n){return n.cloneNode(!0)}function T2(n,e){return n+":"+e}function kY(n){return!(!n.url||!n.options)}const xY=yD(class{constructor(n){this._elementRef=n}}),RY=new c.OlP("mat-icon-location",{providedIn:"root",factory:function OY(){const n=(0,c.f3M)(ce),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),M2=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],NY=M2.map(n=>`[${n}]`).join(", "),PY=/^url\(['"]?#(.*?)['"]?\)$/;let FY=(()=>{class n extends xY{constructor(t,i,r,s,o){super(t),this._iconRegistry=i,this._location=s,this._errorHandler=o,this._inline=!1,this._currentIconFetch=cs.w0.EMPTY,r||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=an(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();i!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),i&&t.classList.add(i),this._previousFontSetClass=i),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(NY),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)M2.forEach(o=>{const d=i[s],f=d.getAttribute(o),m=f?f.match(PY):null;if(m){let v=r.get(d);v||(v=[],r.set(d,v)),v.push({name:o,value:m[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Ms(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(fT),c.$8M("aria-hidden"),c.Y36(RY),c.Y36(c.qLn))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,i){2&t&&(c.uIk("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),c.ekj("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[c.qOj],ngContentSelectors:IY,decls:1,vars:0,template:function(t,i){1&t&&(c.F$t(),c.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),LY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[zr],zr]}),n})();const VY=["trigger"],BY=["panel"];function HY(n,e){if(1&n&&(c.TgZ(0,"span",8),c._uU(1),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.Oqu(t.placeholder)}}function UY(n,e){if(1&n&&(c.TgZ(0,"span",12),c._uU(1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Oqu(t.triggerValue)}}function jY(n,e){1&n&&c.Hsn(0,0,["*ngSwitchCase","true"])}function zY(n,e){if(1&n&&(c.TgZ(0,"span",9),c.YNc(1,UY,2,1,"span",10),c.YNc(2,jY,1,0,"ng-content",11),c.qZA()),2&n){const t=c.oxw();c.Q6J("ngSwitch",!!t.customTrigger),c.xp6(2),c.Q6J("ngSwitchCase",!0)}}function GY(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",13)(1,"div",14,15),c.NdJ("@transformPanel.done",function(r){c.CHM(t);const s=c.oxw();return c.KtG(s._panelDoneAnimatingStream.next(r.toState))})("keydown",function(r){c.CHM(t);const s=c.oxw();return c.KtG(s._handleKeydown(r))}),c.Hsn(3,1),c.qZA()()}if(2&n){const t=c.oxw();c.Q6J("@transformPanelWrap",void 0),c.xp6(1),c.Gre("mat-select-panel ",t._getPanelTheme(),""),c.Udp("transform-origin",t._transformOrigin)("font-size",t._triggerFontSize,"px"),c.Q6J("ngClass",t.panelClass)("@transformPanel",t.multiple?"showing-multiple":"showing"),c.uIk("id",t.id+"-panel")("aria-multiselectable",t.multiple)("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby())}}const $Y=[[["mat-select-trigger"]],"*"],WY=["mat-select-trigger","*"],k2={transformPanelWrap:kb("transformPanelWrap",[ed("* => void",MO("@transformPanel",[TO()],{optional:!0}))]),transformPanel:kb("transformPanel",[Yp("void",Gr({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),Yp("showing",Gr({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),Yp("showing-multiple",Gr({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),ed("void => *",Yh("120ms cubic-bezier(0, 0, 0.2, 1)")),ed("* => void",Yh("100ms 25ms linear",Gr({opacity:0})))])};let x2=0;const O2=new c.OlP("mat-select-scroll-strategy"),KY=new c.OlP("MAT_SELECT_CONFIG"),QY={provide:O2,deps:[Zp],useFactory:function ZY(n){return()=>n.scrollStrategies.reposition()}};class XY{constructor(e,t){this.source=e,this.value=t}}const JY=bO(cB(lB(wO(class{constructor(n,e,t,i,r){this._elementRef=n,this._defaultErrorStateMatcher=e,this._parentForm=t,this._parentFormGroup=i,this.ngControl=r}})))),e8=new c.OlP("MatSelectTrigger");let t8=(()=>{class n extends JY{constructor(t,i,r,s,o,d,f,m,v,C,A,M,P,H){super(o,s,f,m,C),this._viewportRuler=t,this._changeDetectorRef=i,this._ngZone=r,this._dir=d,this._parentFormField=v,this._liveAnnouncer=P,this._defaultOptions=H,this._panelOpen=!1,this._compareWith=(U,K)=>U===K,this._uid="mat-select-"+x2++,this._triggerAriaLabelledBy=null,this._destroy=new st.x,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+x2++,this._panelDoneAnimatingStream=new st.x,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=g2(()=>{const U=this.options;return U?U.changes.pipe(ki(U),Io(()=>(0,rn.T)(...U.map(K=>K.onSelectionChange)))):this._ngZone.onStable.pipe(Ms(1),Io(()=>this.optionSelectionChanges))}),this.openedChange=new c.vpe,this._openedStream=this.openedChange.pipe(oi(U=>U),(0,Jt.U)(()=>{})),this._closedStream=this.openedChange.pipe(oi(U=>!U),(0,Jt.U)(()=>{})),this.selectionChange=new c.vpe,this.valueChange=new c.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=H?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=H.typeaheadDebounceInterval),this._scrollStrategyFactory=M,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(A)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(kA.required)??!1}set required(t){this._required=an(t),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(t){this._multiple=an(t)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(t){this._disableOptionCentering=an(t)}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this._assignValue(t)&&this._onChange(t)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(t){this._typeaheadDebounceInterval=_O(t)}get id(){return this._id}set id(t){this._id=t||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new CB(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(Xa(),fr(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(fr(this._destroy)).subscribe(t=>{t.added.forEach(i=>i.select()),t.removed.forEach(i=>i.deselect())}),this.options.changes.pipe(ki(null),fr(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const t=this._getTriggerAriaLabelledby(),i=this.ngControl;if(t!==this._triggerAriaLabelledBy){const r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=t,t?r.setAttribute("aria-labelledby",t):r.removeAttribute("aria-labelledby")}i&&(this._previousControl!==i.control&&(void 0!==this._previousControl&&null!==i.disabled&&i.disabled!==this.disabled&&(this.disabled=i.disabled),this._previousControl=i.control),this.updateErrorState())}ngOnChanges(t){t.disabled&&this.stateChanges.next(),t.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(t){this._assignValue(t)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const t=this._selectionModel.selected.map(i=>i.viewValue);return this._isRtl()&&t.reverse(),t.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(t){this.disabled||(this.panelOpen?this._handleOpenKeydown(t):this._handleClosedKeydown(t))}_handleClosedKeydown(t){const i=t.keyCode,r=40===i||38===i||37===i||39===i,s=13===i||32===i,o=this._keyManager;if(!o.isTyping()&&s&&!Oc(t)||(this.multiple||t.altKey)&&r)t.preventDefault(),this.open();else if(!this.multiple){const d=this.selected;o.onKeydown(t);const f=this.selected;f&&d!==f&&this._liveAnnouncer.announce(f.viewValue,1e4)}}_handleOpenKeydown(t){const i=this._keyManager,r=t.keyCode,s=40===r||38===r,o=i.isTyping();if(s&&t.altKey)t.preventDefault(),this.close();else if(o||13!==r&&32!==r||!i.activeItem||Oc(t))if(!o&&this._multiple&&65===r&&t.ctrlKey){t.preventDefault();const d=this.options.some(f=>!f.disabled&&!f.selected);this.options.forEach(f=>{f.disabled||(d?f.select():f.deselect())})}else{const d=i.activeItemIndex;i.onKeydown(t),this._multiple&&s&&t.shiftKey&&i.activeItem&&i.activeItemIndex!==d&&i.activeItem._selectViaInteraction()}else t.preventDefault(),i.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(Ms(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(t){if(this._selectionModel.selected.forEach(i=>i.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&t)Array.isArray(t),t.forEach(i=>this._selectOptionByValue(i)),this._sortValues();else{const i=this._selectOptionByValue(t);i?this._keyManager.updateActiveItem(i):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(t){const i=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return null!=r.value&&this._compareWith(r.value,t)}catch{return!1}});return i&&this._selectionModel.select(i),i}_assignValue(t){return!!(t!==this._value||this._multiple&&Array.isArray(t))&&(this.options&&this._setSelectionByValue(t),this._value=t,!0)}_initKeyManager(){this._keyManager=new P4(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(fr(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(fr(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const t=(0,rn.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(fr(t)).subscribe(i=>{this._onSelect(i.source,i.isUserInput),i.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,rn.T)(...this.options.map(i=>i._stateChanges)).pipe(fr(t)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(t,i){const r=this._selectionModel.isSelected(t);null!=t.value||this._multiple?(r!==t.selected&&(t.selected?this._selectionModel.select(t):this._selectionModel.deselect(t)),i&&this._keyManager.setActiveItem(t),this.multiple&&(this._sortValues(),i&&this.focus())):(t.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(t.value)),r!==this._selectionModel.isSelected(t)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const t=this.options.toArray();this._selectionModel.sort((i,r)=>this.sortComparator?this.sortComparator(i,r,t):t.indexOf(i)-t.indexOf(r)),this.stateChanges.next()}}_propagateChanges(t){let i=null;i=this.multiple?this.selected.map(r=>r.value):this.selected?this.selected.value:t,this._value=i,this.valueChange.emit(i),this._onChange(i),this.selectionChange.emit(this._getChangeEvent(i)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(t){this._elementRef.nativeElement.focus(t)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const t=this._parentFormField?.getLabelId();return this.ariaLabelledby?(t?t+" ":"")+this.ariaLabelledby:t}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const t=this._parentFormField?.getLabelId();let i=(t?t+" ":"")+this._valueId;return this.ariaLabelledby&&(i+=" "+this.ariaLabelledby),i}_panelDoneAnimating(t){this.openedChange.emit(t)}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(iT),c.Y36(c.sBO),c.Y36(c.R0b),c.Y36(vD),c.Y36(c.SBq),c.Y36(ml,8),c.Y36(Db,8),c.Y36(Sb,8),c.Y36(JA,8),c.Y36(Rc,10),c.$8M("tabindex"),c.Y36(O2),c.Y36(tW),c.Y36(KY,8))},n.\u0275dir=c.lG2({type:n,viewQuery:function(t,i){if(1&t&&(c.Gf(VY,5),c.Gf(BY,5),c.Gf(e2,5)),2&t){let r;c.iGM(r=c.CRH())&&(i.trigger=r.first),c.iGM(r=c.CRH())&&(i.panel=r.first),c.iGM(r=c.CRH())&&(i._overlayDir=r.first)}},inputs:{panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[c.qOj,c.TTD]}),n})(),N2=(()=>{class n extends t8{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(t,i,r){const s=this._getItemHeight();return Math.min(Math.max(0,s*t-i+s/2),r)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(fr(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe(Ms(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(t){const i=yB(t,this.options,this.optionGroups),r=this._getItemHeight();this.panel.nativeElement.scrollTop=0===t&&1===i?0:function kW(n,e,t,i){return n<t?n:n+e>t+i?Math.max(0,n-i+e):t}((t+i)*r,r,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(t){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(t)}_getChangeEvent(t){return new XY(this,t)}_calculateOverlayOffsetX(){const t=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),i=this._viewportRuler.getViewportSize(),r=this._isRtl(),s=this.multiple?56:32;let o;if(this.multiple)o=40;else if(this.disableOptionCentering)o=16;else{let m=this._selectionModel.selected[0]||this.options.first;o=m&&m.group?32:16}r||(o*=-1);const d=0-(t.left+o-(r?s:0)),f=t.right+o-i.width+(r?0:s);d>0?o+=d+8:f>0&&(o-=f+8),this._overlayDir.offsetX=Math.round(o),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(t,i,r){const s=this._getItemHeight(),o=(s-this._triggerRect.height)/2,d=Math.floor(256/s);let f;return this.disableOptionCentering?0:(f=0===this._scrollTop?t*s:this._scrollTop===r?(t-(this._getItemCount()-d))*s+(s-(this._getItemCount()*s-256)%s):i-s/2,Math.round(-1*f-o))}_checkOverlayWithinViewport(t){const i=this._getItemHeight(),r=this._viewportRuler.getViewportSize(),s=this._triggerRect.top-8,o=r.height-this._triggerRect.bottom-8,d=Math.abs(this._offsetY),m=Math.min(this._getItemCount()*i,256)-d-this._triggerRect.height;m>o?this._adjustPanelUp(m,o):d>s?this._adjustPanelDown(d,s,t):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(t,i){const r=Math.round(t-i);this._scrollTop-=r,this._offsetY-=r,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(t,i,r){const s=Math.round(t-i);if(this._scrollTop+=s,this._offsetY+=s,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=r)return this._scrollTop=r,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const t=this._getItemHeight(),i=this._getItemCount(),r=Math.min(i*t,256),o=i*t-r;let d;d=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),d+=yB(d,this.options,this.optionGroups);const f=r/2;this._scrollTop=this._calculateOverlayScroll(d,f,o),this._offsetY=this._calculateOverlayOffsetY(d,f,o),this._checkOverlayWithinViewport(o)}_getOriginBasedOnOption(){const t=this._getItemHeight(),i=(t-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-i+t/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=c.n5z(n)))(i||n)}}(),n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-select"]],contentQueries:function(t,i,r){if(1&t&&(c.Suo(r,e8,5),c.Suo(r,SO,5),c.Suo(r,_B,5)),2&t){let s;c.iGM(s=c.CRH())&&(i.customTrigger=s.first),c.iGM(s=c.CRH())&&(i.options=s),c.iGM(s=c.CRH())&&(i.optionGroups=s)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(t,i){1&t&&c.NdJ("keydown",function(s){return i._handleKeydown(s)})("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()}),2&t&&(c.uIk("id",i.id)("tabindex",i.tabIndex)("aria-controls",i.panelOpen?i.id+"-panel":null)("aria-expanded",i.panelOpen)("aria-label",i.ariaLabel||null)("aria-required",i.required.toString())("aria-disabled",i.disabled.toString())("aria-invalid",i.errorState)("aria-describedby",i._ariaDescribedby||null)("aria-activedescendant",i._getAriaActiveDescendant()),c.ekj("mat-select-disabled",i.disabled)("mat-select-invalid",i.errorState)("mat-select-required",i.required)("mat-select-empty",i.empty)("mat-select-multiple",i.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[c._Bn([{provide:CD,useExisting:n},{provide:mB,useExisting:n}]),c.qOj],ngContentSelectors:WY,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(t,i){if(1&t&&(c.F$t($Y),c.TgZ(0,"div",0,1),c.NdJ("click",function(){return i.toggle()}),c.TgZ(3,"div",2),c.YNc(4,HY,2,1,"span",3),c.YNc(5,zY,3,2,"span",4),c.qZA(),c.TgZ(6,"div",5),c._UZ(7,"div",6),c.qZA()(),c.YNc(8,GY,4,14,"ng-template",7),c.NdJ("backdropClick",function(){return i.close()})("attach",function(){return i._onAttached()})("detach",function(){return i.close()})),2&t){const r=c.MAs(1);c.uIk("aria-owns",i.panelOpen?i.id+"-panel":null),c.xp6(3),c.Q6J("ngSwitch",i.empty),c.uIk("id",i._valueId),c.xp6(1),c.Q6J("ngSwitchCase",!0),c.xp6(1),c.Q6J("ngSwitchCase",!1),c.xp6(3),c.Q6J("cdkConnectedOverlayPanelClass",i._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",i._scrollStrategy)("cdkConnectedOverlayOrigin",r)("cdkConnectedOverlayOpen",i.panelOpen)("cdkConnectedOverlayPositions",i._positions)("cdkConnectedOverlayMinWidth",null==i._triggerRect?null:i._triggerRect.width)("cdkConnectedOverlayOffsetY",i._offsetY)}},dependencies:[JB,co,sa,Bs,e2,_n],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{height:16px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-form-field.mat-focused .mat-select-arrow{transform:translateX(0)}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}\n'],encapsulation:2,data:{animation:[k2.transformPanelWrap,k2.transformPanel]},changeDetection:0}),n})(),n8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[QY],imports:[[xo,HO,vB,zr],rT,eT,vB,zr]}),n})();const s8=[[["caption"]],[["colgroup"],["col"]]],o8=["caption","colgroup, col"];function nN(n){return class extends n{constructor(...e){super(...e),this._sticky=!1,this._hasStickyChanged=!1}get sticky(){return this._sticky}set sticky(e){const t=this._sticky;this._sticky=an(e),this._hasStickyChanged=t!==this._sticky}hasStickyChanged(){const e=this._hasStickyChanged;return this._hasStickyChanged=!1,e}resetStickyChanged(){this._hasStickyChanged=!1}}}const Ob=new c.OlP("CDK_TABLE");let Nb=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkCellDef",""]]}),n})(),Pb=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkHeaderCellDef",""]]}),n})(),mT=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkFooterCellDef",""]]}),n})();class u8{}const d8=nN(u8);let Zh=(()=>{class n extends d8{constructor(t){super(),this._table=t,this._stickyEnd=!1}get name(){return this._name}set name(t){this._setNameInput(t)}get stickyEnd(){return this._stickyEnd}set stickyEnd(t){const i=this._stickyEnd;this._stickyEnd=an(t),this._hasStickyChanged=i!==this._stickyEnd}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(t){t&&(this._name=t,this.cssClassFriendlyName=t.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ob,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkColumnDef",""]],contentQueries:function(t,i,r){if(1&t&&(c.Suo(r,Nb,5),c.Suo(r,Pb,5),c.Suo(r,mT,5)),2&t){let s;c.iGM(s=c.CRH())&&(i.cell=s.first),c.iGM(s=c.CRH())&&(i.headerCell=s.first),c.iGM(s=c.CRH())&&(i.footerCell=s.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[c._Bn([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),c.qOj]}),n})();class iN{constructor(e,t){t.nativeElement.classList.add(...e._columnCssClassName)}}let rN=(()=>{class n extends iN{constructor(t,i){super(t,i)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Zh),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[c.qOj]}),n})(),sN=(()=>{class n extends iN{constructor(t,i){if(super(t,i),1===t._table?._elementRef.nativeElement.nodeType){const r=t._table._elementRef.nativeElement.getAttribute("role");i.nativeElement.setAttribute("role","grid"===r||"treegrid"===r?"gridcell":"cell")}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Zh),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[c.qOj]}),n})();class F2{constructor(){this.tasks=[],this.endTasks=[]}}const oN=new c.OlP("_COALESCED_STYLE_SCHEDULER");let L2=(()=>{class n{constructor(t){this._ngZone=t,this._currentSchedule=null,this._destroyed=new st.x}schedule(t){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(t)}scheduleEnd(t){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(t)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new F2,this._getScheduleObservable().pipe(fr(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const t=this._currentSchedule;this._currentSchedule=new F2;for(const i of t.tasks)i();for(const i of t.endTasks)i()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?(0,hi.D)(Promise.resolve(void 0)):this._ngZone.onStable.pipe(Ms(1))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),aN=(()=>{class n{constructor(t,i){this.template=t,this._differs=i}ngOnChanges(t){if(!this._columnsDiffer){const i=t.columns&&t.columns.currentValue||[];this._columnsDiffer=this._differs.find(i).create(),this._columnsDiffer.diff(i)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(t){return this instanceof RD?t.headerCell.template:this instanceof OD?t.footerCell.template:t.cell.template}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,features:[c.TTD]}),n})();class h8 extends aN{}const f8=nN(h8);let RD=(()=>{class n extends f8{constructor(t,i,r){super(t,i),this._table=r}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Rgc),c.Y36(c.ZZ4),c.Y36(Ob,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[c.qOj,c.TTD]}),n})();class p8 extends aN{}const g8=nN(p8);let OD=(()=>{class n extends g8{constructor(t,i,r){super(t,i),this._table=r}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Rgc),c.Y36(c.ZZ4),c.Y36(Ob,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[c.qOj,c.TTD]}),n})(),_T=(()=>{class n extends aN{constructor(t,i,r){super(t,i),this._table=r}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Rgc),c.Y36(c.ZZ4),c.Y36(Ob,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[c.qOj]}),n})(),Kh=(()=>{class n{constructor(t){this._viewContainer=t,n.mostRecentCellOutlet=this}ngOnDestroy(){n.mostRecentCellOutlet===this&&(n.mostRecentCellOutlet=null)}}return n.mostRecentCellOutlet=null,n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkCellOutlet",""]]}),n})(),lN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&c.GkF(0,0)},dependencies:[Kh],encapsulation:2}),n})(),uN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&c.GkF(0,0)},dependencies:[Kh],encapsulation:2}),n})(),yT=(()=>{class n{constructor(t){this.templateRef=t,this._contentClassName="cdk-no-data-row"}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["ng-template","cdkNoDataRow",""]]}),n})();const V2=["top","bottom","left","right"];class m8{constructor(e,t,i,r,s=!0,o=!0,d){this._isNativeHtmlTable=e,this._stickCellCss=t,this.direction=i,this._coalescedStyleScheduler=r,this._isBrowser=s,this._needsPositionStickyOnElement=o,this._positionListener=d,this._cachedCellWidths=[],this._borderCellCss={top:`${t}-border-elem-top`,bottom:`${t}-border-elem-bottom`,left:`${t}-border-elem-left`,right:`${t}-border-elem-right`}}clearStickyPositioning(e,t){const i=[];for(const r of e)if(r.nodeType===r.ELEMENT_NODE){i.push(r);for(let s=0;s<r.children.length;s++)i.push(r.children[s])}this._coalescedStyleScheduler.schedule(()=>{for(const r of i)this._removeStickyStyle(r,t)})}updateStickyColumns(e,t,i,r=!0){if(!e.length||!this._isBrowser||!t.some(A=>A)&&!i.some(A=>A))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const s=e[0],o=s.children.length,d=this._getCellWidths(s,r),f=this._getStickyStartColumnPositions(d,t),m=this._getStickyEndColumnPositions(d,i),v=t.lastIndexOf(!0),C=i.indexOf(!0);this._coalescedStyleScheduler.schedule(()=>{const A="rtl"===this.direction,M=A?"right":"left",P=A?"left":"right";for(const H of e)for(let U=0;U<o;U++){const K=H.children[U];t[U]&&this._addStickyStyle(K,M,f[U],U===v),i[U]&&this._addStickyStyle(K,P,m[U],U===C)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===v?[]:d.slice(0,v+1).map((H,U)=>t[U]?H:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===C?[]:d.slice(C).map((H,U)=>i[U+C]?H:null).reverse()}))})}stickRows(e,t,i){if(!this._isBrowser)return;const r="bottom"===i?e.slice().reverse():e,s="bottom"===i?t.slice().reverse():t,o=[],d=[],f=[];for(let v=0,C=0;v<r.length;v++){if(!s[v])continue;o[v]=C;const A=r[v];f[v]=this._isNativeHtmlTable?Array.from(A.children):[A];const M=A.getBoundingClientRect().height;C+=M,d[v]=M}const m=s.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=>{for(let v=0;v<r.length;v++){if(!s[v])continue;const C=o[v],A=v===m;for(const M of f[v])this._addStickyStyle(M,i,C,A)}"top"===i?this._positionListener?.stickyHeaderRowsUpdated({sizes:d,offsets:o,elements:f}):this._positionListener?.stickyFooterRowsUpdated({sizes:d,offsets:o,elements:f})})}updateStickyFooterContainer(e,t){if(!this._isNativeHtmlTable)return;const i=e.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{t.some(r=>!r)?this._removeStickyStyle(i,["bottom"]):this._addStickyStyle(i,"bottom",0,!1)})}_removeStickyStyle(e,t){for(const r of t)e.style[r]="",e.classList.remove(this._borderCellCss[r]);V2.some(r=>-1===t.indexOf(r)&&e.style[r])?e.style.zIndex=this._getCalculatedZIndex(e):(e.style.zIndex="",this._needsPositionStickyOnElement&&(e.style.position=""),e.classList.remove(this._stickCellCss))}_addStickyStyle(e,t,i,r){e.classList.add(this._stickCellCss),r&&e.classList.add(this._borderCellCss[t]),e.style[t]=`${i}px`,e.style.zIndex=this._getCalculatedZIndex(e),this._needsPositionStickyOnElement&&(e.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(e){const t={top:100,bottom:10,left:1,right:1};let i=0;for(const r of V2)e.style[r]&&(i+=t[r]);return i?`${i}`:""}_getCellWidths(e,t=!0){if(!t&&this._cachedCellWidths.length)return this._cachedCellWidths;const i=[],r=e.children;for(let s=0;s<r.length;s++)i.push(r[s].getBoundingClientRect().width);return this._cachedCellWidths=i,i}_getStickyStartColumnPositions(e,t){const i=[];let r=0;for(let s=0;s<e.length;s++)t[s]&&(i[s]=r,r+=e[s]);return i}_getStickyEndColumnPositions(e,t){const i=[];let r=0;for(let s=e.length;s>0;s--)t[s]&&(i[s]=r,r+=e[s]);return i}}const dN=new c.OlP("CDK_SPL");let vT=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","rowOutlet",""]]}),n})(),bT=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","headerRowOutlet",""]]}),n})(),wT=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","footerRowOutlet",""]]}),n})(),ET=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","noDataRowOutlet",""]]}),n})(),CT=(()=>{class n{constructor(t,i,r,s,o,d,f,m,v,C,A,M){this._differs=t,this._changeDetectorRef=i,this._elementRef=r,this._dir=o,this._platform=f,this._viewRepeater=m,this._coalescedStyleScheduler=v,this._viewportRuler=C,this._stickyPositioningListener=A,this._ngZone=M,this._onDestroy=new st.x,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new c.vpe,this.viewChange=new mD({start:0,end:Number.MAX_VALUE}),s||this._elementRef.nativeElement.setAttribute("role","table"),this._document=d,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}get trackBy(){return this._trackByFn}set trackBy(t){this._trackByFn=t}get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(t){this._multiTemplateDataRows=an(t),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(t){this._fixedLayout=an(t),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((t,i)=>this.trackBy?this.trackBy(i.dataIndex,i.data):i),this._viewportRuler.change().pipe(fr(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const i=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||i,this._forceRecalculateCellWidths=i,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){[this._rowOutlet.viewContainer,this._headerRowOutlet.viewContainer,this._footerRowOutlet.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(t=>{t.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),IO(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const t=this._dataDiffer.diff(this._renderRows);if(!t)return this._updateNoDataRow(),void this.contentChanged.next();const i=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(t,i,(r,s,o)=>this._getEmbeddedViewArgs(r.item,o),r=>r.item.data,r=>{1===r.operation&&r.context&&this._renderCellTemplateForItem(r.record.item.rowDef,r.context)}),this._updateRowIndexContext(),t.forEachIdentityChange(r=>{i.get(r.currentIndex).context.$implicit=r.item.data}),this._updateNoDataRow(),this._ngZone&&c.R0b.isInAngularZone()?this._ngZone.onStable.pipe(Ms(1),fr(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(t){this._customColumnDefs.add(t)}removeColumnDef(t){this._customColumnDefs.delete(t)}addRowDef(t){this._customRowDefs.add(t)}removeRowDef(t){this._customRowDefs.delete(t)}addHeaderRowDef(t){this._customHeaderRowDefs.add(t),this._headerRowDefChanged=!0}removeHeaderRowDef(t){this._customHeaderRowDefs.delete(t),this._headerRowDefChanged=!0}addFooterRowDef(t){this._customFooterRowDefs.add(t),this._footerRowDefChanged=!0}removeFooterRowDef(t){this._customFooterRowDefs.delete(t),this._footerRowDefChanged=!0}setNoDataRow(t){this._customNoDataRow=t}updateStickyHeaderRowStyles(){const t=this._getRenderedRows(this._headerRowOutlet),r=this._elementRef.nativeElement.querySelector("thead");r&&(r.style.display=t.length?"":"none");const s=this._headerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(t,["top"]),this._stickyStyler.stickRows(t,s,"top"),this._headerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyFooterRowStyles(){const t=this._getRenderedRows(this._footerRowOutlet),r=this._elementRef.nativeElement.querySelector("tfoot");r&&(r.style.display=t.length?"":"none");const s=this._footerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(t,["bottom"]),this._stickyStyler.stickRows(t,s,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,s),this._footerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyColumnStyles(){const t=this._getRenderedRows(this._headerRowOutlet),i=this._getRenderedRows(this._rowOutlet),r=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...t,...i,...r],["left","right"]),this._stickyColumnStylesNeedReset=!1),t.forEach((s,o)=>{this._addStickyColumnStyles([s],this._headerRowDefs[o])}),this._rowDefs.forEach(s=>{const o=[];for(let d=0;d<i.length;d++)this._renderRows[d].rowDef===s&&o.push(i[d]);this._addStickyColumnStyles(o,s)}),r.forEach((s,o)=>{this._addStickyColumnStyles([s],this._footerRowDefs[o])}),Array.from(this._columnDefsByName.values()).forEach(s=>s.resetStickyChanged())}_getAllRenderRows(){const t=[],i=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let r=0;r<this._data.length;r++){let s=this._data[r];const o=this._getRenderRowsForData(s,r,i.get(s));this._cachedRenderRowsMap.has(s)||this._cachedRenderRowsMap.set(s,new WeakMap);for(let d=0;d<o.length;d++){let f=o[d];const m=this._cachedRenderRowsMap.get(f.data);m.has(f.rowDef)?m.get(f.rowDef).push(f):m.set(f.rowDef,[f]),t.push(f)}}return t}_getRenderRowsForData(t,i,r){return this._getRowDefs(t,i).map(o=>{const d=r&&r.has(o)?r.get(o):[];if(d.length){const f=d.shift();return f.dataIndex=i,f}return{data:t,rowDef:o,dataIndex:i}})}_cacheColumnDefs(){this._columnDefsByName.clear(),DT(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(i=>{this._columnDefsByName.has(i.name),this._columnDefsByName.set(i.name,i)})}_cacheRowDefs(){this._headerRowDefs=DT(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=DT(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=DT(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const t=this._rowDefs.filter(i=>!i.when);this._defaultRowDef=t[0]}_renderUpdatedColumns(){const t=(o,d)=>o||!!d.getColumnsDiff(),i=this._rowDefs.reduce(t,!1);i&&this._forceRenderDataRows();const r=this._headerRowDefs.reduce(t,!1);r&&this._forceRenderHeaderRows();const s=this._footerRowDefs.reduce(t,!1);return s&&this._forceRenderFooterRows(),i||r||s}_switchDataSource(t){this._data=[],IO(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),t||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=t}_observeRenderChanges(){if(!this.dataSource)return;let t;IO(this.dataSource)?t=this.dataSource.connect(this):function r8(n){return!!n&&(n instanceof Fr.y||(0,gl.m)(n.lift)&&(0,gl.m)(n.subscribe))}(this.dataSource)?t=this.dataSource:Array.isArray(this.dataSource)&&(t=Sn(this.dataSource)),this._renderChangeSubscription=t.pipe(fr(this._onDestroy)).subscribe(i=>{this._data=i||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((t,i)=>this._renderRow(this._headerRowOutlet,t,i)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((t,i)=>this._renderRow(this._footerRowOutlet,t,i)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(t,i){const r=Array.from(i.columns||[]).map(d=>this._columnDefsByName.get(d)),s=r.map(d=>d.sticky),o=r.map(d=>d.stickyEnd);this._stickyStyler.updateStickyColumns(t,s,o,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(t){const i=[];for(let r=0;r<t.viewContainer.length;r++){const s=t.viewContainer.get(r);i.push(s.rootNodes[0])}return i}_getRowDefs(t,i){if(1==this._rowDefs.length)return[this._rowDefs[0]];let r=[];if(this.multiTemplateDataRows)r=this._rowDefs.filter(s=>!s.when||s.when(i,t));else{let s=this._rowDefs.find(o=>o.when&&o.when(i,t))||this._defaultRowDef;s&&r.push(s)}return r}_getEmbeddedViewArgs(t,i){return{templateRef:t.rowDef.template,context:{$implicit:t.data},index:i}}_renderRow(t,i,r,s={}){const o=t.viewContainer.createEmbeddedView(i.template,s,r);return this._renderCellTemplateForItem(i,s),o}_renderCellTemplateForItem(t,i){for(let r of this._getCellTemplates(t))Kh.mostRecentCellOutlet&&Kh.mostRecentCellOutlet._viewContainer.createEmbeddedView(r,i);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const t=this._rowOutlet.viewContainer;for(let i=0,r=t.length;i<r;i++){const o=t.get(i).context;o.count=r,o.first=0===i,o.last=i===r-1,o.even=i%2==0,o.odd=!o.even,this.multiTemplateDataRows?(o.dataIndex=this._renderRows[i].dataIndex,o.renderIndex=i):o.index=this._renderRows[i].dataIndex}}_getCellTemplates(t){return t&&t.columns?Array.from(t.columns,i=>{const r=this._columnDefsByName.get(i);return t.extractCellTemplate(r)}):[]}_applyNativeTableSections(){const t=this._document.createDocumentFragment(),i=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const r of i){const s=this._document.createElement(r.tag);s.setAttribute("role","rowgroup");for(const o of r.outlets)s.appendChild(o.elementRef.nativeElement);t.appendChild(s)}this._elementRef.nativeElement.appendChild(t)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const t=(i,r)=>i||r.hasStickyChanged();this._headerRowDefs.reduce(t,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(t,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(t,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new m8(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:Sn()).pipe(fr(this._onDestroy)).subscribe(i=>{this._stickyStyler.direction=i,this.updateStickyColumnStyles()})}_getOwnDefs(t){return t.filter(i=>!i._table||i._table===this)}_updateNoDataRow(){const t=this._customNoDataRow||this._noDataRow;if(!t)return;const i=0===this._rowOutlet.viewContainer.length;if(i===this._isShowingNoDataRow)return;const r=this._noDataRowOutlet.viewContainer;if(i){const s=r.createEmbeddedView(t.templateRef),o=s.rootNodes[0];1===s.rootNodes.length&&o?.nodeType===this._document.ELEMENT_NODE&&(o.setAttribute("role","row"),o.classList.add(t._contentClassName))}else r.clear();this._isShowingNoDataRow=i}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.ZZ4),c.Y36(c.sBO),c.Y36(c.SBq),c.$8M("role"),c.Y36(ml,8),c.Y36(ce),c.Y36(io),c.Y36(wD),c.Y36(oN),c.Y36(iT),c.Y36(dN,12),c.Y36(c.R0b,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(t,i,r){if(1&t&&(c.Suo(r,yT,5),c.Suo(r,Zh,5),c.Suo(r,_T,5),c.Suo(r,RD,5),c.Suo(r,OD,5)),2&t){let s;c.iGM(s=c.CRH())&&(i._noDataRow=s.first),c.iGM(s=c.CRH())&&(i._contentColumnDefs=s),c.iGM(s=c.CRH())&&(i._contentRowDefs=s),c.iGM(s=c.CRH())&&(i._contentHeaderRowDefs=s),c.iGM(s=c.CRH())&&(i._contentFooterRowDefs=s)}},viewQuery:function(t,i){if(1&t&&(c.Gf(vT,7),c.Gf(bT,7),c.Gf(wT,7),c.Gf(ET,7)),2&t){let r;c.iGM(r=c.CRH())&&(i._rowOutlet=r.first),c.iGM(r=c.CRH())&&(i._headerRowOutlet=r.first),c.iGM(r=c.CRH())&&(i._footerRowOutlet=r.first),c.iGM(r=c.CRH())&&(i._noDataRowOutlet=r.first)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(t,i){2&t&&c.ekj("cdk-table-fixed-layout",i.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[c._Bn([{provide:Ob,useExisting:n},{provide:wD,useClass:wB},{provide:oN,useClass:L2},{provide:dN,useValue:null}])],ngContentSelectors:o8,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,i){1&t&&(c.F$t(s8),c.Hsn(0),c.Hsn(1,1),c.GkF(2,0)(3,1)(4,2)(5,3))},dependencies:[bT,vT,ET,wT],styles:[".cdk-table-fixed-layout{table-layout:fixed}\n"],encapsulation:2}),n})();function DT(n,e){return n.concat(Array.from(e))}let y8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[OO]]}),n})();var v8=B(9672);function hN(...n){const e=(0,Er.yG)(n),t=(0,Er.jO)(n),{args:i,keys:r}=kL(n);if(0===i.length)return(0,hi.D)([],e);const s=new Fr.y(function b8(n,e,t=Ds.y){return i=>{H2(e,()=>{const{length:r}=n,s=new Array(r);let o=r,d=r;for(let f=0;f<r;f++)H2(e,()=>{const m=(0,hi.D)(n[f],e);let v=!1;m.subscribe((0,fi.x)(i,C=>{s[f]=C,v||(v=!0,d--),d||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>xL(r,o):Ds.y));return t?s.pipe(qR(t)):s}function H2(n,e,t){n?(0,v8.f)(t,n,e):e()}const w8=[[["caption"]],[["colgroup"],["col"]]],E8=["caption","colgroup, col"];let U2=(()=>{class n extends CT{constructor(){super(...arguments),this.stickyCssClass="mat-table-sticky",this.needsPositionStickyOnElement=!1}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=c.n5z(n)))(i||n)}}(),n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-table"],hostVars:2,hostBindings:function(t,i){2&t&&c.ekj("mat-table-fixed-layout",i.fixedLayout)},exportAs:["matTable"],features:[c._Bn([{provide:wD,useClass:wB},{provide:CT,useExisting:n},{provide:Ob,useExisting:n},{provide:oN,useClass:L2},{provide:dN,useValue:null}]),c.qOj],ngContentSelectors:E8,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,i){1&t&&(c.F$t(w8),c.Hsn(0),c.Hsn(1,1),c.GkF(2,0)(3,1)(4,2)(5,3))},dependencies:[bT,vT,ET,wT],styles:["mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-row,tr.mat-footer-row{height:48px}th.mat-header-cell{text-align:left}[dir=rtl] th.mat-header-cell{text-align:right}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}th.mat-header-cell:first-of-type,td.mat-cell:first-of-type,td.mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] th.mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}th.mat-header-cell:last-of-type,td.mat-cell:last-of-type,td.mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] th.mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}.mat-table-sticky{position:sticky !important}.mat-table-fixed-layout{table-layout:fixed}\n"],encapsulation:2}),n})(),fN=(()=>{class n extends Nb{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=c.n5z(n)))(i||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","matCellDef",""]],features:[c._Bn([{provide:Nb,useExisting:n}]),c.qOj]}),n})(),pN=(()=>{class n extends Pb{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=c.n5z(n)))(i||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","matHeaderCellDef",""]],features:[c._Bn([{provide:Pb,useExisting:n}]),c.qOj]}),n})(),gN=(()=>{class n extends Zh{get name(){return this._name}set name(t){this._setNameInput(t)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=c.n5z(n)))(i||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[c._Bn([{provide:Zh,useExisting:n},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),c.qOj]}),n})(),mN=(()=>{class n extends rN{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=c.n5z(n)))(i||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-header-cell"],features:[c.qOj]}),n})(),_N=(()=>{class n extends sN{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=c.n5z(n)))(i||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:["role","gridcell",1,"mat-cell"],features:[c.qOj]}),n})(),j2=(()=>{class n extends RD{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=c.n5z(n)))(i||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[c._Bn([{provide:RD,useExisting:n}]),c.qOj]}),n})(),z2=(()=>{class n extends _T{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=c.n5z(n)))(i||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[c._Bn([{provide:_T,useExisting:n}]),c.qOj]}),n})(),G2=(()=>{class n extends lN{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=c.n5z(n)))(i||n)}}(),n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-header-row"],exportAs:["matHeaderRow"],features:[c._Bn([{provide:lN,useExisting:n}]),c.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&c.GkF(0,0)},dependencies:[Kh],encapsulation:2}),n})(),$2=(()=>{class n extends uN{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=c.n5z(n)))(i||n)}}(),n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-row"],exportAs:["matRow"],features:[c._Bn([{provide:uN,useExisting:n}]),c.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&c.GkF(0,0)},dependencies:[Kh],encapsulation:2}),n})(),R8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[y8,zr],zr]}),n})();class P8 extends class N8 extends class FW{}{constructor(e=[]){super(),this._renderData=new mD([]),this._filter=new mD(""),this._internalPageChanges=new st.x,this._renderChangesSubscription=null,this.sortingDataAccessor=(t,i)=>{const r=t[i];if(zV(r)){const s=Number(r);return s<9007199254740991?s:r}return r},this.sortData=(t,i)=>{const r=i.active,s=i.direction;return r&&""!=s?t.sort((o,d)=>{let f=this.sortingDataAccessor(o,r),m=this.sortingDataAccessor(d,r);const v=typeof f,C=typeof m;v!==C&&("number"===v&&(f+=""),"number"===C&&(m+=""));let A=0;return null!=f&&null!=m?f>m?A=1:f<m&&(A=-1):null!=f?A=1:null!=m&&(A=-1),A*("asc"==s?1:-1)}):t},this.filterPredicate=(t,i)=>{const r=Object.keys(t).reduce((o,d)=>o+t[d]+"\u25ec","").toLowerCase(),s=i.trim().toLowerCase();return-1!=r.indexOf(s)},this._data=new mD(e),this._updateChangeSubscription()}get data(){return this._data.value}set data(e){e=Array.isArray(e)?e:[],this._data.next(e),this._renderChangesSubscription||this._filterData(e)}get filter(){return this._filter.value}set filter(e){this._filter.next(e),this._renderChangesSubscription||this._filterData(this.data)}get sort(){return this._sort}set sort(e){this._sort=e,this._updateChangeSubscription()}get paginator(){return this._paginator}set paginator(e){this._paginator=e,this._updateChangeSubscription()}_updateChangeSubscription(){const e=this._sort?(0,rn.T)(this._sort.sortChange,this._sort.initialized):Sn(null),t=this._paginator?(0,rn.T)(this._paginator.page,this._internalPageChanges,this._paginator.initialized):Sn(null),r=hN([this._data,this._filter]).pipe((0,Jt.U)(([d])=>this._filterData(d))),s=hN([r,e]).pipe((0,Jt.U)(([d])=>this._orderData(d))),o=hN([s,t]).pipe((0,Jt.U)(([d])=>this._pageData(d)));this._renderChangesSubscription?.unsubscribe(),this._renderChangesSubscription=o.subscribe(d=>this._renderData.next(d))}_filterData(e){return this.filteredData=null==this.filter||""===this.filter?e:e.filter(t=>this.filterPredicate(t,this.filter)),this.paginator&&this._updatePaginator(this.filteredData.length),this.filteredData}_orderData(e){return this.sort?this.sortData(e.slice(),this.sort):e}_pageData(e){if(!this.paginator)return e;const t=this.paginator.pageIndex*this.paginator.pageSize;return e.slice(t,t+this.paginator.pageSize)}_updatePaginator(e){Promise.resolve().then(()=>{const t=this.paginator;if(t&&(t.length=e,t.pageIndex>0)){const i=Math.ceil(t.length/t.pageSize)-1||0,r=Math.min(t.pageIndex,i);r!==t.pageIndex&&(t.pageIndex=r,this._internalPageChanges.next())}})}connect(){return this._renderChangesSubscription||this._updateChangeSubscription(),this._renderData}disconnect(){this._renderChangesSubscription?.unsubscribe(),this._renderChangesSubscription=null}}{}function W2(n){return new c.vHH(3e3,!1)}function m9(){return typeof window<"u"&&typeof window.document<"u"}function yN(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Jp(n){switch(n.length){case 0:return new ED;case 1:return n[0];default:return new kB(n)}}function q2(n,e,t,i,r=new Map,s=new Map){const o=[],d=[];let f=-1,m=null;if(i.forEach(v=>{const C=v.get("offset"),A=C==f,M=A&&m||new Map;v.forEach((P,H)=>{let U=H,K=P;if("offset"!==H)switch(U=e.normalizePropertyName(U,o),K){case"!":K=r.get(H);break;case qh:K=s.get(H);break;default:K=e.normalizeStyleValue(H,U,K,o)}M.set(U,K)}),A||d.push(M),m=M,f=C}),o.length)throw function r9(n){return new c.vHH(3502,!1)}();return d}function vN(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&bN(t,"start",n)));break;case"done":n.onDone(()=>i(t&&bN(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&bN(t,"destroy",n)))}}function bN(n,e,t){const s=wN(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function wN(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function Ra(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function Y2(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let EN=(n,e)=>!1,Z2=(n,e,t)=>[],K2=null;function CN(n){const e=n.parentNode||n.host;return e===K2?null:e}(yN()||typeof Element<"u")&&(m9()?(K2=(()=>document.documentElement)(),EN=(n,e)=>{for(;e;){if(e===n)return!0;e=CN(e)}return!1}):EN=(n,e)=>n.contains(e),Z2=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let S_=null,Q2=!1;const X2=EN,J2=Z2;let eH=(()=>{class n{validateStyleProperty(t){return function y9(n){S_||(S_=function v9(){return typeof document<"u"?document.body:null}()||{},Q2=!!S_.style&&"WebkitAppearance"in S_.style);let e=!0;return S_.style&&!function _9(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in S_.style,!e&&Q2&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in S_.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return X2(t,i)}getParentElement(t){return CN(t)}query(t,i,r){return J2(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,d=[],f){return new ED(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),DN=(()=>{class n{}return n.NOOP=new eH,n})();const SN="ng-enter",ST="ng-leave",IT="ng-trigger",AT=".ng-trigger",nH="ng-animating",IN=".ng-animating";function Qh(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:AN(parseFloat(e[1]),e[2])}function AN(n,e){return"s"===e?1e3*n:n}function TT(n,e,t){return n.hasOwnProperty("duration")?n:function E9(n,e,t){let r,s=0,o="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push(W2()),{duration:0,delay:0,easing:""};r=AN(parseFloat(d[1]),d[2]);const f=d[3];null!=f&&(s=AN(parseFloat(f),d[4]));const m=d[5];m&&(o=m)}else r=n;if(!t){let d=!1,f=e.length;r<0&&(e.push(function F8(){return new c.vHH(3100,!1)}()),d=!0),s<0&&(e.push(function L8(){return new c.vHH(3101,!1)}()),d=!0),d&&e.splice(f,0,W2())}return{duration:r,delay:s,easing:o}}(n,e,t)}function ND(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function iH(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function eg(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function sH(n,e,t){return t?e+":"+t+";":""}function oH(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=sH(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=sH(0,I9(t),n.style[t]));n.setAttribute("style",e)}function td(n,e,t){n.style&&(e.forEach((i,r)=>{const s=MN(r);t&&!t.has(r)&&t.set(r,n.style[s]),n.style[s]=i}),yN()&&oH(n))}function I_(n,e){n.style&&(e.forEach((t,i)=>{const r=MN(i);n.style[r]=""}),yN()&&oH(n))}function PD(n){return Array.isArray(n)?1==n.length?n[0]:AB(n):n}const TN=new RegExp("{{\\s*(.+?)\\s*}}","g");function aH(n){let e=[];if("string"==typeof n){let t;for(;t=TN.exec(n);)e.push(t[1]);TN.lastIndex=0}return e}function FD(n,e,t){const i=n.toString(),r=i.replace(TN,(s,o)=>{let d=e[o];return null==d&&(t.push(function B8(n){return new c.vHH(3003,!1)}()),d=""),d.toString()});return r==i?n:r}function MT(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const S9=/-+([a-z0-9])/g;function MN(n){return n.replace(S9,(...e)=>e[1].toUpperCase())}function I9(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Oa(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function H8(n){return new c.vHH(3004,!1)}()}}function lH(n,e){return window.getComputedStyle(n)[e]}function R9(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function O9(n,e,t){if(":"==n[0]){const f=function N9(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function e9(n){return new c.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof f)return void e.push(f);n=f}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function J8(n){return new c.vHH(3015,!1)}()),e;const r=i[1],s=i[2],o=i[3];e.push(cH(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&e.push(cH(o,r))}(i,t,e)):t.push(n),t}const OT=new Set(["true","1"]),NT=new Set(["false","0"]);function cH(n,e){const t=OT.has(n)||NT.has(n),i=OT.has(e)||NT.has(e);return(r,s)=>{let o="*"==n||n==r,d="*"==e||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?OT.has(n):NT.has(n)),!d&&i&&"boolean"==typeof s&&(d=s?OT.has(e):NT.has(e)),o&&d}}const P9=new RegExp("s*:selfs*,?","g");function kN(n,e,t,i){return new F9(n).build(e,t,i)}class F9{constructor(e){this._driver=e}build(e,t,i){const r=new B9(t);return this._resetContextStyleTimingState(r),Oa(this,PD(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function j8(){return new c.vHH(3006,!1)}()),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),0==d.type){const f=d,m=f.name;m.toString().split(/\s*,\s*/).forEach(v=>{f.name=v,s.push(this.visitState(f,t))}),f.name=m}else if(1==d.type){const f=this.visitTransition(d,t);i+=f.queryCount,r+=f.depCount,o.push(f)}else t.errors.push(function z8(){return new c.vHH(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};i.styles.forEach(d=>{d instanceof Map&&d.forEach(f=>{aH(f).forEach(m=>{o.hasOwnProperty(m)||s.add(m)})})}),s.size&&(MT(s.values()),t.errors.push(function G8(n,e){return new c.vHH(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=Oa(this,PD(e.animation),t);return{type:1,matchers:R9(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:A_(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>Oa(this,i,t)),options:A_(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=i;const d=Oa(this,o,t);return r=Math.max(r,t.currentTime),d});return t.currentTime=r,{type:3,steps:s,options:A_(e.options)}}visitAnimate(e,t){const i=function U9(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return xN(TT(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=xN(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=TT(t,e);return xN(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:Gr({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,d=!1;if(!o){d=!0;const m={};i.easing&&(m.easing=i.easing),o=Gr(m)}t.currentTime+=i.duration+i.delay;const f=this.visitStyle(o,t);f.isEmptyStep=d,r=f}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let d of r)"string"==typeof d?d===qh?i.push(d):t.errors.push(new c.vHH(3002,!1)):i.push(iH(d));let s=!1,o=null;return i.forEach(d=>{if(d instanceof Map&&(d.has("easing")&&(o=d.get("easing"),d.delete("easing")),!s))for(let f of d.values())if(f.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((d,f)=>{const m=t.collectedStyles.get(t.currentQuerySelector),v=m.get(f);let C=!0;v&&(s!=r&&s>=v.startTime&&r<=v.endTime&&(t.errors.push(function W8(n,e,t,i,r){return new c.vHH(3010,!1)}()),C=!1),s=v.startTime),C&&m.set(f,{startTime:s,endTime:r}),t.options&&function D9(n,e,t){const i=e.params||{},r=aH(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function V8(n){return new c.vHH(3001,!1)}())})}(d,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function q8(){return new c.vHH(3011,!1)}()),i;let s=0;const o=[];let d=!1,f=!1,m=0;const v=e.steps.map(K=>{const _e=this._makeStyleAst(K,t);let Oe=null!=_e.offset?_e.offset:function H9(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(_e.styles),je=0;return null!=Oe&&(s++,je=_e.offset=Oe),f=f||je<0||je>1,d=d||je<m,m=je,o.push(je),_e});f&&t.errors.push(function Y8(){return new c.vHH(3012,!1)}()),d&&t.errors.push(function Z8(){return new c.vHH(3200,!1)}());const C=e.steps.length;let A=0;s>0&&s<C?t.errors.push(function K8(){return new c.vHH(3202,!1)}()):0==s&&(A=1/(C-1));const M=C-1,P=t.currentTime,H=t.currentAnimateTimings,U=H.duration;return v.forEach((K,_e)=>{const Oe=A>0?_e==M?1:A*_e:o[_e],je=Oe*U;t.currentTime=P+H.delay+je,H.duration=je,this._validateStyleAst(K,t),K.offset=Oe,i.styles.push(K)}),i}visitReference(e,t){return{type:8,animation:Oa(this,PD(e.animation),t),options:A_(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:A_(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:A_(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function L9(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(P9,"")),n=n.replace(/@\*/g,AT).replace(/@\w+/g,t=>AT+"-"+t.slice(1)).replace(/:animating/g,IN),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,Ra(t.collectedStyles,t.currentQuerySelector,new Map);const d=Oa(this,PD(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:d,originalSelector:e.selector,options:A_(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Q8(){return new c.vHH(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:TT(e.timings,t.errors,!0);return{type:12,animation:Oa(this,PD(e.animation),t),timings:i,options:null}}}class B9{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function A_(n){return n?(n=ND(n)).params&&(n.params=function V9(n){return n?ND(n):null}(n.params)):n={},n}function xN(n,e,t){return{duration:n,delay:e,easing:t}}function RN(n,e,t,i,r,s,o=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:d}}class PT{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const G9=new RegExp(":enter","g"),W9=new RegExp(":leave","g");function ON(n,e,t,i,r,s=new Map,o=new Map,d,f,m=[]){return(new q9).buildKeyframes(n,e,t,i,r,s,o,d,f,m)}class q9{buildKeyframes(e,t,i,r,s,o,d,f,m,v=[]){m=m||new PT;const C=new NN(e,t,m,r,s,v,[]);C.options=f;const A=f.delay?Qh(f.delay):0;C.currentTimeline.delayNextStep(A),C.currentTimeline.setStyles([o],null,C.errors,f),Oa(this,i,C);const M=C.timelines.filter(P=>P.containsAnimation());if(M.length&&d.size){let P;for(let H=M.length-1;H>=0;H--){const U=M[H];if(U.element===t){P=U;break}}P&&!P.allowOnlyTimelineStyles()&&P.setStyles([d],null,C.errors,f)}return M.length?M.map(P=>P.buildKeyframes()):[RN(t,[],[],[],0,A,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(const r of e){const s=r?.delay;if(s){const o="number"==typeof s?s:Qh(FD(s,r?.params??{},t.errors));i.delayNextStep(o)}}}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const o=null!=i.duration?Qh(i.duration):null,d=null!=i.delay?Qh(i.delay):null;return 0!==o&&e.forEach(f=>{const m=t.appendInstructionToTimeline(f,o,d);s=Math.max(s,m.duration+m.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Oa(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=FT);const o=Qh(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Oa(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Qh(e.options.delay):0;e.steps.forEach(o=>{const d=t.createSubContext(e.options);s&&d.delayNextStep(s),Oa(this,o,d),r=Math.max(r,d.currentTimeline.currentTime),i.push(d.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return TT(t.params?FD(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,d=t.createSubContext().currentTimeline;d.easing=i.easing,e.styles.forEach(f=>{d.forwardTime((f.offset||0)*s),d.setStyles(f.styles,f.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?Qh(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=FT);let o=i;const d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=d.length;let f=null;d.forEach((m,v)=>{t.currentQueryIndex=v;const C=t.createSubContext(e.options,m);s&&C.delayNextStep(s),m===t.element&&(f=C.currentTimeline),Oa(this,e.animation,C),C.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,C.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),f&&(t.currentTimeline.mergeTimelineCollectedStyles(f),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),d=o*(t.currentQueryTotal-1);let f=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":f=d-f;break;case"full":f=i.currentStaggerTime}const v=t.currentTimeline;f&&v.delayNextStep(f);const C=v.currentTime;Oa(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-C+(r.startTime-i.currentTimeline.startTime)}}const FT={};class NN{constructor(e,t,i,r,s,o,d,f){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=FT,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=f||new LT(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=Qh(i.duration)),null!=i.delay&&(r.delay=Qh(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(d=>{(!t||!o.hasOwnProperty(d))&&(o[d]=FD(s[d],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new NN(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=FT,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new Y9(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let d=[];if(r&&d.push(this.element),e.length>0){e=(e=e.replace(G9,"."+this._enterClassName)).replace(W9,"."+this._leaveClassName);let m=this._driver.query(this.element,e,1!=i);0!==i&&(m=i<0?m.slice(m.length+i,m.length):m.slice(0,i)),d.push(...m)}return!s&&0==d.length&&o.push(function X8(n){return new c.vHH(3014,!1)}()),d}}class LT{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new LT(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||qh),this._currentKeyframe.set(t,qh);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const s=r&&r.params||{},o=function Z9(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let s of i)t.set(s,qh)}else eg(r,t)}),t}(e,this._globalTimelineStyles);for(let[d,f]of o){const m=FD(f,s,i);this._pendingStyles.set(d,m),this._localTimelineStyles.has(d)||this._backFill.set(d,this._globalTimelineStyles.get(d)??qh),this._updateStyle(d,m)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((d,f)=>{const m=eg(d,new Map,this._backFill);m.forEach((v,C)=>{"!"===v?e.add(C):v===qh&&t.add(C)}),i||m.set("offset",f/this.duration),r.push(m)});const s=e.size?MT(e.values()):[],o=t.size?MT(t.values()):[];if(i){const d=r[0],f=new Map(d);d.set("offset",0),f.set("offset",1),r=[d,f]}return RN(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class Y9 extends LT{constructor(e,t,i,r,s,o,d=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=d,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=i+t,d=t/o,f=eg(e[0]);f.set("offset",0),s.push(f);const m=eg(e[0]);m.set("offset",hH(d)),s.push(m);const v=e.length-1;for(let C=1;C<=v;C++){let A=eg(e[C]);const M=A.get("offset");A.set("offset",hH((t+M*i)/o)),s.push(A)}i=o,t=0,r="",e=s}return RN(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function hH(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class PN{}const K9=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Q9 extends PN{normalizePropertyName(e,t){return MN(e)}normalizeStyleValue(e,t,i,r){let s="";const o=i.toString().trim();if(K9.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const d=i.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&r.push(function U8(n,e){return new c.vHH(3005,!1)}())}return o+s}}function fH(n,e,t,i,r,s,o,d,f,m,v,C,A){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:d,queriedElements:f,preStyleProps:m,postStyleProps:v,totalTime:C,errors:A}}const FN={};class pH{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function X9(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,s,o,d,f,m,v){const C=[],A=this.ast.options&&this.ast.options.params||FN,P=this.buildStyles(i,d&&d.params||FN,C),H=f&&f.params||FN,U=this.buildStyles(r,H,C),K=new Set,_e=new Map,Oe=new Map,je="void"===r,wt={params:J9(H,A),delay:this.ast.options?.delay},_t=v?[]:ON(e,t,this.ast.animation,s,o,P,U,wt,m,C);let Bt=0;if(_t.forEach($r=>{Bt=Math.max($r.duration+$r.delay,Bt)}),C.length)return fH(t,this._triggerName,i,r,je,P,U,[],[],_e,Oe,Bt,C);_t.forEach($r=>{const La=$r.element,W3=Ra(_e,La,new Set);$r.preStyleProps.forEach(Q_=>W3.add(Q_));const A0=Ra(Oe,La,new Set);$r.postStyleProps.forEach(Q_=>A0.add(Q_)),La!==t&&K.add(La)});const Wt=MT(K.values());return fH(t,this._triggerName,i,r,je,P,U,_t,Wt,_e,Oe,Bt)}}function J9(n,e){const t=ND(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class eZ{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=ND(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,d)=>{o&&(o=FD(o,r,t));const f=this.normalizer.normalizePropertyName(d,t);o=this.normalizer.normalizeStyleValue(d,f,o,t),i.set(f,o)})}),i}}class nZ{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new eZ(r.style,r.options&&r.options.params||{},i))}),gH(this.states,"true","1"),gH(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new pH(e,r,this.states))}),this.fallbackTransition=function iZ(n,e,t){return new pH(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function gH(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const rZ=new PT;class sZ{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],s=kN(this._driver,t,i,[]);if(i.length)throw function s9(n){return new c.vHH(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,i){const r=e.element,s=q2(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations.get(e);let o;const d=new Map;if(s?(o=ON(this._driver,t,s,SN,ST,new Map,new Map,i,rZ,r),o.forEach(v=>{const C=Ra(d,v.element,new Map);v.postStyleProps.forEach(A=>C.set(A,null))})):(r.push(function o9(){return new c.vHH(3300,!1)}()),o=[]),r.length)throw function a9(n){return new c.vHH(3504,!1)}();d.forEach((v,C)=>{v.forEach((A,M)=>{v.set(M,this._driver.computeStyle(C,M,qh))})});const m=Jp(o.map(v=>{const C=d.get(v.element);return this._buildPlayer(v,new Map,C)}));return this._playersById.set(e,m),m.onDestroy(()=>this.destroy(e)),this.players.push(m),m}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function l9(n){return new c.vHH(3301,!1)}();return t}listen(e,t,i,r){const s=wN(t,"","","");return vN(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const mH="ng-animate-queued",LN="ng-animate-disabled",uZ=[],_H={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},dZ={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},_l="__ng_removed";class VN{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function gZ(n){return n??null}(i?e.value:e),i){const s=ND(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const LD="void",BN=new VN(LD);class hZ{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,yl(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function c9(n,e){return new c.vHH(3302,!1)}();if(null==i||0==i.length)throw function u9(n){return new c.vHH(3303,!1)}();if(!function mZ(n){return"start"==n||"done"==n}(i))throw function d9(n,e){return new c.vHH(3400,!1)}();const s=Ra(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);const d=Ra(this._engine.statesByElement,e,new Map);return d.has(t)||(yl(e,IT),yl(e,IT+"-"+t),d.set(t,BN)),()=>{this._engine.afterFlush(()=>{const f=s.indexOf(o);f>=0&&s.splice(f,1),this._triggers.has(t)||d.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function h9(n){return new c.vHH(3401,!1)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),o=new HN(this.id,t,e);let d=this._engine.statesByElement.get(e);d||(yl(e,IT),yl(e,IT+"-"+t),this._engine.statesByElement.set(e,d=new Map));let f=d.get(t);const m=new VN(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&f&&m.absorbOptions(f.options),d.set(t,m),f||(f=BN),m.value!==LD&&f.value===m.value){if(!function vZ(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(f.params,m.params)){const H=[],U=s.matchStyles(f.value,f.params,H),K=s.matchStyles(m.value,m.params,H);H.length?this._engine.reportError(H):this._engine.afterFlush(()=>{I_(e,U),td(e,K)})}return}const A=Ra(this._engine.playersByElement,e,[]);A.forEach(H=>{H.namespaceId==this.id&&H.triggerName==t&&H.queued&&H.destroy()});let M=s.matchTransition(f.value,m.value,e,m.params),P=!1;if(!M){if(!r)return;M=s.fallbackTransition,P=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:M,fromState:f,toState:m,player:o,isFallbackTransition:P}),P||(yl(e,mH),o.onStart(()=>{Fb(e,mH)})),o.onDone(()=>{let H=this.players.indexOf(o);H>=0&&this.players.splice(H,1);const U=this._engine.playersByElement.get(e);if(U){let K=U.indexOf(o);K>=0&&U.splice(K,1)}}),this.players.push(o),A.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,AT,!0);i.forEach(r=>{if(r[_l])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const d=[];if(s.forEach((f,m)=>{if(o.set(m,f.value),this._triggers.has(m)){const v=this.trigger(e,m,LD,r);v&&d.push(v)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&Jp(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const f=this._triggers.get(o).fallbackTransition,m=i.get(o)||BN,v=new VN(LD),C=new HN(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:f,fromState:m,toState:v,player:C,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[_l];(!s||s===_H)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){yl(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(d=>{if(d.name==i.triggerName){const f=wN(s,i.triggerName,i.fromState.value,i.toState.value);f._data=e,vN(i.player,d.phase,f,d.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class fZ{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new hZ(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,d=this.driver.getParentElement(t);for(;d;){const f=r.get(d);if(f){const m=i.indexOf(f);i.splice(m+1,0,e),o=!0;break}d=this.driver.getParentElement(d)}o||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}return t}trigger(e,t,i,r){if(VT(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!VT(t))return;const s=t[_l];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),yl(e,LN)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Fb(e,LN))}removeNode(e,t,i,r){if(VT(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[_l]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return VT(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,AT,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,IN,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Jp(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[_l];if(t&&t.setForRemoval){if(e[_l]=_H,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(LN)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)yl(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?Jp(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function f9(n){return new c.vHH(3402,!1)}()}_flushAnimations(e,t){const i=new PT,r=[],s=new Map,o=[],d=new Map,f=new Map,m=new Map,v=new Set;this.disabledNodes.forEach(It=>{v.add(It);const Ht=this.driver.query(It,".ng-animate-queued",!0);for(let qt=0;qt<Ht.length;qt++)v.add(Ht[qt])});const C=this.bodyNode,A=Array.from(this.statesByElement.keys()),M=bH(A,this.collectedEnterElements),P=new Map;let H=0;M.forEach((It,Ht)=>{const qt=SN+H++;P.set(Ht,qt),It.forEach(kn=>yl(kn,qt))});const U=[],K=new Set,_e=new Set;for(let It=0;It<this.collectedLeaveElements.length;It++){const Ht=this.collectedLeaveElements[It],qt=Ht[_l];qt&&qt.setForRemoval&&(U.push(Ht),K.add(Ht),qt.hasAnimation?this.driver.query(Ht,".ng-star-inserted",!0).forEach(kn=>K.add(kn)):_e.add(Ht))}const Oe=new Map,je=bH(A,Array.from(K));je.forEach((It,Ht)=>{const qt=ST+H++;Oe.set(Ht,qt),It.forEach(kn=>yl(kn,qt))}),e.push(()=>{M.forEach((It,Ht)=>{const qt=P.get(Ht);It.forEach(kn=>Fb(kn,qt))}),je.forEach((It,Ht)=>{const qt=Oe.get(Ht);It.forEach(kn=>Fb(kn,qt))}),U.forEach(It=>{this.processLeaveNode(It)})});const wt=[],_t=[];for(let It=this._namespaceList.length-1;It>=0;It--)this._namespaceList[It].drainQueuedTransitions(t).forEach(qt=>{const kn=qt.player,fs=qt.element;if(wt.push(kn),this.collectedEnterElements.length){const ao=fs[_l];if(ao&&ao.setForMove){if(ao.previousTriggersValues&&ao.previousTriggersValues.has(qt.triggerName)){const X_=ao.previousTriggersValues.get(qt.triggerName),Cl=this.statesByElement.get(qt.element);if(Cl&&Cl.has(qt.triggerName)){const sk=Cl.get(qt.triggerName);sk.value=X_,Cl.set(qt.triggerName,sk)}}return void kn.destroy()}}const ld=!C||!this.driver.containsElement(C,fs),Va=Oe.get(fs),wg=P.get(fs),Yi=this._buildInstruction(qt,i,wg,Va,ld);if(Yi.errors&&Yi.errors.length)return void _t.push(Yi);if(ld)return kn.onStart(()=>I_(fs,Yi.fromStyles)),kn.onDestroy(()=>td(fs,Yi.toStyles)),void r.push(kn);if(qt.isFallbackTransition)return kn.onStart(()=>I_(fs,Yi.fromStyles)),kn.onDestroy(()=>td(fs,Yi.toStyles)),void r.push(kn);const Z3=[];Yi.timelines.forEach(ao=>{ao.stretchStartingKeyframe=!0,this.disabledNodes.has(ao.element)||Z3.push(ao)}),Yi.timelines=Z3,i.append(fs,Yi.timelines),o.push({instruction:Yi,player:kn,element:fs}),Yi.queriedElements.forEach(ao=>Ra(d,ao,[]).push(kn)),Yi.preStyleProps.forEach((ao,X_)=>{if(ao.size){let Cl=f.get(X_);Cl||f.set(X_,Cl=new Set),ao.forEach((sk,aF)=>Cl.add(aF))}}),Yi.postStyleProps.forEach((ao,X_)=>{let Cl=m.get(X_);Cl||m.set(X_,Cl=new Set),ao.forEach((sk,aF)=>Cl.add(aF))})});if(_t.length){const It=[];_t.forEach(Ht=>{It.push(function p9(n,e){return new c.vHH(3505,!1)}())}),wt.forEach(Ht=>Ht.destroy()),this.reportError(It)}const Bt=new Map,Wt=new Map;o.forEach(It=>{const Ht=It.element;i.has(Ht)&&(Wt.set(Ht,Ht),this._beforeAnimationBuild(It.player.namespaceId,It.instruction,Bt))}),r.forEach(It=>{const Ht=It.element;this._getPreviousPlayers(Ht,!1,It.namespaceId,It.triggerName,null).forEach(kn=>{Ra(Bt,Ht,[]).push(kn),kn.destroy()})});const $r=U.filter(It=>EH(It,f,m)),La=new Map;vH(La,this.driver,_e,m,qh).forEach(It=>{EH(It,f,m)&&$r.push(It)});const A0=new Map;M.forEach((It,Ht)=>{vH(A0,this.driver,new Set(It),f,"!")}),$r.forEach(It=>{const Ht=La.get(It),qt=A0.get(It);La.set(It,new Map([...Array.from(Ht?.entries()??[]),...Array.from(qt?.entries()??[])]))});const Q_=[],q3=[],Y3={};o.forEach(It=>{const{element:Ht,player:qt,instruction:kn}=It;if(i.has(Ht)){if(v.has(Ht))return qt.onDestroy(()=>td(Ht,kn.toStyles)),qt.disabled=!0,qt.overrideTotalTime(kn.totalTime),void r.push(qt);let fs=Y3;if(Wt.size>1){let Va=Ht;const wg=[];for(;Va=Va.parentNode;){const Yi=Wt.get(Va);if(Yi){fs=Yi;break}wg.push(Va)}wg.forEach(Yi=>Wt.set(Yi,fs))}const ld=this._buildAnimation(qt.namespaceId,kn,Bt,s,A0,La);if(qt.setRealPlayer(ld),fs===Y3)Q_.push(qt);else{const Va=this.playersByElement.get(fs);Va&&Va.length&&(qt.parentPlayer=Jp(Va)),r.push(qt)}}else I_(Ht,kn.fromStyles),qt.onDestroy(()=>td(Ht,kn.toStyles)),q3.push(qt),v.has(Ht)&&r.push(qt)}),q3.forEach(It=>{const Ht=s.get(It.element);if(Ht&&Ht.length){const qt=Jp(Ht);It.setRealPlayer(qt)}}),r.forEach(It=>{It.parentPlayer?It.syncPlayerEvents(It.parentPlayer):It.destroy()});for(let It=0;It<U.length;It++){const Ht=U[It],qt=Ht[_l];if(Fb(Ht,ST),qt&&qt.hasAnimation)continue;let kn=[];if(d.size){let ld=d.get(Ht);ld&&ld.length&&kn.push(...ld);let Va=this.driver.query(Ht,IN,!0);for(let wg=0;wg<Va.length;wg++){let Yi=d.get(Va[wg]);Yi&&Yi.length&&kn.push(...Yi)}}const fs=kn.filter(ld=>!ld.destroyed);fs.length?_Z(this,Ht,fs):this.processLeaveNode(Ht)}return U.length=0,Q_.forEach(It=>{this.players.push(It),It.onDone(()=>{It.destroy();const Ht=this.players.indexOf(It);this.players.splice(Ht,1)}),It.play()}),Q_}elementContainsData(e,t){let i=!1;const r=t[_l];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){const d=this.playersByQueriedElement.get(e);d&&(o=d)}else{const d=this.playersByElement.get(e);if(d){const f=!s||s==LD;d.forEach(m=>{m.queued||!f&&m.triggerName!=r||o.push(m)})}}return(i||r)&&(o=o.filter(d=>!(i&&i!=d.namespaceId||r&&r!=d.triggerName))),o}_beforeAnimationBuild(e,t,i){const s=t.element,o=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:t.triggerName;for(const f of t.timelines){const m=f.element,v=m!==s,C=Ra(i,m,[]);this._getPreviousPlayers(m,v,o,d,t.toState).forEach(M=>{const P=M.getRealPlayer();P.beforeDestroy&&P.beforeDestroy(),M.destroy(),C.push(M)})}I_(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){const d=t.triggerName,f=t.element,m=[],v=new Set,C=new Set,A=t.timelines.map(P=>{const H=P.element;v.add(H);const U=H[_l];if(U&&U.removedBeforeQueried)return new ED(P.duration,P.delay);const K=H!==f,_e=function yZ(n){const e=[];return wH(n,e),e}((i.get(H)||uZ).map(Bt=>Bt.getRealPlayer())).filter(Bt=>!!Bt.element&&Bt.element===H),Oe=s.get(H),je=o.get(H),wt=q2(0,this._normalizer,0,P.keyframes,Oe,je),_t=this._buildPlayer(P,wt,_e);if(P.subTimeline&&r&&C.add(H),K){const Bt=new HN(e,d,H);Bt.setRealPlayer(_t),m.push(Bt)}return _t});m.forEach(P=>{Ra(this.playersByQueriedElement,P.element,[]).push(P),P.onDone(()=>function pZ(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,P.element,P))}),v.forEach(P=>yl(P,nH));const M=Jp(A);return M.onDestroy(()=>{v.forEach(P=>Fb(P,nH)),td(f,t.toStyles)}),C.forEach(P=>{Ra(r,P,[]).push(M)}),M}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new ED(e.duration,e.delay)}}class HN{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new ED,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>vN(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ra(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function VT(n){return n&&1===n.nodeType}function yH(n,e){const t=n.style.display;return n.style.display=e??"none",t}function vH(n,e,t,i,r){const s=[];t.forEach(f=>s.push(yH(f)));const o=[];i.forEach((f,m)=>{const v=new Map;f.forEach(C=>{const A=e.computeStyle(m,C,r);v.set(C,A),(!A||0==A.length)&&(m[_l]=dZ,o.push(m))}),n.set(m,v)});let d=0;return t.forEach(f=>yH(f,s[d++])),o}function bH(n,e){const t=new Map;if(n.forEach(d=>t.set(d,[])),0==e.length)return t;const r=new Set(e),s=new Map;function o(d){if(!d)return 1;let f=s.get(d);if(f)return f;const m=d.parentNode;return f=t.has(m)?m:r.has(m)?1:o(m),s.set(d,f),f}return e.forEach(d=>{const f=o(d);1!==f&&t.get(f).push(d)}),t}function yl(n,e){n.classList?.add(e)}function Fb(n,e){n.classList?.remove(e)}function _Z(n,e,t){Jp(t).onDone(()=>n.processLeaveNode(e))}function wH(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof kB?wH(i.players,e):e.push(i)}}function EH(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class BT{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new fZ(e,t,i),this._timelineEngine=new sZ(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const o=e+"-"+r;let d=this._triggerCache[o];if(!d){const f=[],v=kN(this._driver,s,f,[]);if(f.length)throw function i9(n,e){return new c.vHH(3404,!1)}();d=function tZ(n,e,t){return new nZ(n,e,t)}(r,v,this._normalizer),this._triggerCache[o]=d}this._transitionEngine.registerTrigger(t,r,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,o]=Y2(i);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[o,d]=Y2(i);return this._timelineEngine.listen(o,t,d,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let wZ=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&td(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(td(this._element,this._initialStyles),this._endStyles&&(td(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(I_(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(I_(this._element,this._endStyles),this._endStyles=null),td(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function UN(n){let e=null;return n.forEach((t,i)=>{(function EZ(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class CH{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:lH(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class CZ{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return X2(e,t)}getParentElement(e){return CN(e)}query(e,t,i){return J2(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,o=[]){const f={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(f.easing=s);const m=new Map,v=o.filter(M=>M instanceof CH);(function A9(n,e){return 0===n||0===e})(i,r)&&v.forEach(M=>{M.currentSnapshot.forEach((P,H)=>m.set(H,P))});let C=function C9(n){return n.length?n[0]instanceof Map?n:n.map(e=>iH(e)):[]}(t).map(M=>eg(M));C=function T9(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(d=>o.set(d,lH(n,d)))}}return e}(e,C,m);const A=function bZ(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=UN(e[0]),e.length>1&&(i=UN(e[e.length-1]))):e instanceof Map&&(t=UN(e)),t||i?new wZ(n,t,i):null}(e,C);return new CH(e,C,f,A)}}let DZ=(()=>{class n extends SB{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:c.ifc.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?AB(t):t;return DH(this._renderer,null,i,"register",[r]),new SZ(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.FYo),c.LFG(ce))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class SZ extends class GW{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new IZ(this._id,e,t||{},this._renderer)}}class IZ{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return DH(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function DH(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const SH="@.disabled";let AZ=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,o)=>{const d=o?.parentNode(s);d&&o.removeChild(d,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let v=this._rendererCache.get(s);return v||(v=new IH("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,v)),v}const o=i.id,d=i.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const f=v=>{Array.isArray(v)?v.forEach(f):this.engine.registerTrigger(o,d,t,v.name,v)};return i.data.animation.forEach(f),new TZ(this,d,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,d]=s;o(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.FYo),c.LFG(BT),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class IH{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==SH?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class TZ extends IH{constructor(e,t,i,r,s){super(t,i,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==SH?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function MZ(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function kZ(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,d=>{this.factory.scheduleListenerCallback(d._data||-1,i,d)})}return this.delegate.listen(e,t,i)}}let xZ=(()=>{class n extends BT{constructor(t,i,r,s){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ce),c.LFG(DN),c.LFG(PN),c.LFG(c.z2F))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const AH=[{provide:SB,useClass:DZ},{provide:PN,useFactory:function RZ(){return new Q9}},{provide:BT,useClass:xZ},{provide:c.FYo,useFactory:function OZ(n,e,t){return new AZ(n,e,t)},deps:[Bl,BT,c.R0b]}],jN=[{provide:DN,useFactory:()=>new CZ},{provide:c.QbO,useValue:"BrowserAnimations"},...AH],TH=[{provide:DN,useClass:eH},{provide:c.QbO,useValue:"NoopAnimations"},...AH];let NZ=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?TH:jN}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:jN,imports:[cu]}),n})();var VD,Ot,MH,kH,Lb,T_,xH,RH,OH,UT={},NH=[],PZ=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Xh(n,e){for(var t in e)n[t]=e[t];return n}function PH(n){var e=n.parentNode;e&&e.removeChild(n)}function me(n,e,t){var i,r,s,o={};for(s in e)"key"==s?i=e[s]:"ref"==s?r=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?VD.call(arguments,2):t),"function"==typeof n&&null!=n.defaultProps)for(s in n.defaultProps)void 0===o[s]&&(o[s]=n.defaultProps[s]);return BD(n,o,i,r,null)}function BD(n,e,t,i,r){var s={type:n,props:e,key:t,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:r??++MH};return null==r&&null!=Ot.vnode&&Ot.vnode(s),s}function Wi(n){return n.children}function FH(n,e,t){"-"===e[0]?n.setProperty(e,t??""):n[e]=null==t?"":"number"!=typeof t||PZ.test(e)?t:t+"px"}function jT(n,e,t,i,r){var s;e:if("style"===e)if("string"==typeof t)n.style.cssText=t;else{if("string"==typeof i&&(n.style.cssText=i=""),i)for(e in i)t&&e in t||FH(n.style,e,"");if(t)for(e in t)i&&t[e]===i[e]||FH(n.style,e,t[e])}else if("o"===e[0]&&"n"===e[1])s=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in n?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+s]=t,t?i||n.addEventListener(e,s?VH:LH,s):n.removeEventListener(e,s?VH:LH,s);else if("dangerouslySetInnerHTML"!==e){if(r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==e&&"height"!==e&&"href"!==e&&"list"!==e&&"form"!==e&&"tabIndex"!==e&&"download"!==e&&e in n)try{n[e]=t??"";break e}catch{}"function"==typeof t||(null==t||!1===t&&-1==e.indexOf("-")?n.removeAttribute(e):n.setAttribute(e,t))}}function LH(n){Lb=!0;try{return this.l[n.type+!1](Ot.event?Ot.event(n):n)}finally{Lb=!1}}function VH(n){Lb=!0;try{return this.l[n.type+!0](Ot.event?Ot.event(n):n)}finally{Lb=!1}}function Jo(n,e){this.props=n,this.context=e}function HD(n,e){if(null==e)return n.__?HD(n.__,n.__.__k.indexOf(n)+1):null;for(var t;e<n.__k.length;e++)if(null!=(t=n.__k[e])&&null!=t.__e)return t.__e;return"function"==typeof n.type?HD(n):null}function BH(n){var e,t;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if(null!=(t=n.__k[e])&&null!=t.__e){n.__e=n.__c.base=t.__e;break}return BH(n)}}function LZ(n){Lb?setTimeout(n):RH(n)}function zN(n){(!n.__d&&(n.__d=!0)&&T_.push(n)&&!zT.__r++||xH!==Ot.debounceRendering)&&((xH=Ot.debounceRendering)||LZ)(zT)}function zT(){var n,e,t,i,r,s,o,d;for(T_.sort(function(f,m){return f.__v.__b-m.__v.__b});n=T_.shift();)n.__d&&(e=T_.length,i=void 0,r=void 0,o=(s=(t=n).__v).__e,(d=t.__P)&&(i=[],(r=Xh({},s)).__v=s.__v+1,GN(d,s,r,t.__n,void 0!==d.ownerSVGElement,null!=s.__h?[o]:null,i,o??HD(s),s.__h),GH(i,s),s.__e!=o&&BH(s)),T_.length>e&&T_.sort(function(f,m){return f.__v.__b-m.__v.__b}));zT.__r=0}function HH(n,e,t,i,r,s,o,d,f,m){var v,C,A,M,P,H,U,K=i&&i.__k||NH,_e=K.length;for(t.__k=[],v=0;v<e.length;v++)if(null!=(M=t.__k[v]=null==(M=e[v])||"boolean"==typeof M?null:"string"==typeof M||"number"==typeof M||"bigint"==typeof M?BD(null,M,null,null,M):Array.isArray(M)?BD(Wi,{children:M},null,null,null):M.__b>0?BD(M.type,M.props,M.key,M.ref?M.ref:null,M.__v):M)){if(M.__=t,M.__b=t.__b+1,null===(A=K[v])||A&&M.key==A.key&&M.type===A.type)K[v]=void 0;else for(C=0;C<_e;C++){if((A=K[C])&&M.key==A.key&&M.type===A.type){K[C]=void 0;break}A=null}GN(n,M,A=A||UT,r,s,o,d,f,m),P=M.__e,(C=M.ref)&&A.ref!=C&&(U||(U=[]),A.ref&&U.push(A.ref,null,M),U.push(C,M.__c||P,M)),null!=P?(null==H&&(H=P),"function"==typeof M.type&&M.__k===A.__k?M.__d=f=UH(M,f,n):f=jH(n,M,A,K,P,f),"function"==typeof t.type&&(t.__d=f)):f&&A.__e==f&&f.parentNode!=n&&(f=HD(A))}for(t.__e=H,v=_e;v--;)null!=K[v]&&("function"==typeof t.type&&null!=K[v].__e&&K[v].__e==t.__d&&(t.__d=zH(i).nextSibling),WH(K[v],K[v]));if(U)for(v=0;v<U.length;v++)$H(U[v],U[++v],U[++v])}function UH(n,e,t){for(var i,r=n.__k,s=0;r&&s<r.length;s++)(i=r[s])&&(i.__=n,e="function"==typeof i.type?UH(i,e,t):jH(t,i,i,r,i.__e,e));return e}function Jh(n,e){return e=e||[],null==n||"boolean"==typeof n||(Array.isArray(n)?n.some(function(t){Jh(t,e)}):e.push(n)),e}function jH(n,e,t,i,r,s){var o,d,f;if(void 0!==e.__d)o=e.__d,e.__d=void 0;else if(null==t||r!=s||null==r.parentNode)e:if(null==s||s.parentNode!==n)n.appendChild(r),o=null;else{for(d=s,f=0;(d=d.nextSibling)&&f<i.length;f+=1)if(d==r)break e;n.insertBefore(r,s),o=s}return void 0!==o?o:r.nextSibling}function zH(n){var e,t,i;if(null==n.type||"string"==typeof n.type)return n.__e;if(n.__k)for(e=n.__k.length-1;e>=0;e--)if((t=n.__k[e])&&(i=zH(t)))return i;return null}function GN(n,e,t,i,r,s,o,d,f){var m,v,C,A,M,P,H,U,K,_e,Oe,je,wt,_t,Bt,Wt=e.type;if(void 0!==e.constructor)return null;null!=t.__h&&(f=t.__h,d=e.__e=t.__e,e.__h=null,s=[d]),(m=Ot.__b)&&m(e);try{e:if("function"==typeof Wt){if(U=e.props,K=(m=Wt.contextType)&&i[m.__c],_e=m?K?K.props.value:m.__:i,t.__c?H=(v=e.__c=t.__c).__=v.__E:("prototype"in Wt&&Wt.prototype.render?e.__c=v=new Wt(U,_e):(e.__c=v=new Jo(U,_e),v.constructor=Wt,v.render=BZ),K&&K.sub(v),v.props=U,v.state||(v.state={}),v.context=_e,v.__n=i,C=v.__d=!0,v.__h=[],v._sb=[]),null==v.__s&&(v.__s=v.state),null!=Wt.getDerivedStateFromProps&&(v.__s==v.state&&(v.__s=Xh({},v.__s)),Xh(v.__s,Wt.getDerivedStateFromProps(U,v.__s))),A=v.props,M=v.state,v.__v=e,C)null==Wt.getDerivedStateFromProps&&null!=v.componentWillMount&&v.componentWillMount(),null!=v.componentDidMount&&v.__h.push(v.componentDidMount);else{if(null==Wt.getDerivedStateFromProps&&U!==A&&null!=v.componentWillReceiveProps&&v.componentWillReceiveProps(U,_e),!v.__e&&null!=v.shouldComponentUpdate&&!1===v.shouldComponentUpdate(U,v.__s,_e)||e.__v===t.__v){for(e.__v!==t.__v&&(v.props=U,v.state=v.__s,v.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.forEach(function($r){$r&&($r.__=e)}),Oe=0;Oe<v._sb.length;Oe++)v.__h.push(v._sb[Oe]);v._sb=[],v.__h.length&&o.push(v);break e}null!=v.componentWillUpdate&&v.componentWillUpdate(U,v.__s,_e),null!=v.componentDidUpdate&&v.__h.push(function(){v.componentDidUpdate(A,M,P)})}if(v.context=_e,v.props=U,v.__P=n,je=Ot.__r,wt=0,"prototype"in Wt&&Wt.prototype.render){for(v.state=v.__s,v.__d=!1,je&&je(e),m=v.render(v.props,v.state,v.context),_t=0;_t<v._sb.length;_t++)v.__h.push(v._sb[_t]);v._sb=[]}else do{v.__d=!1,je&&je(e),m=v.render(v.props,v.state,v.context),v.state=v.__s}while(v.__d&&++wt<25);v.state=v.__s,null!=v.getChildContext&&(i=Xh(Xh({},i),v.getChildContext())),C||null==v.getSnapshotBeforeUpdate||(P=v.getSnapshotBeforeUpdate(A,M)),Bt=null!=m&&m.type===Wi&&null==m.key?m.props.children:m,HH(n,Array.isArray(Bt)?Bt:[Bt],e,t,i,r,s,o,d,f),v.base=e.__e,e.__h=null,v.__h.length&&o.push(v),H&&(v.__E=v.__=null),v.__e=!1}else null==s&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=function VZ(n,e,t,i,r,s,o,d){var f,m,v,C=t.props,A=e.props,M=e.type,P=0;if("svg"===M&&(r=!0),null!=s)for(;P<s.length;P++)if((f=s[P])&&"setAttribute"in f==!!M&&(M?f.localName===M:3===f.nodeType)){n=f,s[P]=null;break}if(null==n){if(null===M)return document.createTextNode(A);n=r?document.createElementNS("http://www.w3.org/2000/svg",M):document.createElement(M,A.is&&A),s=null,d=!1}if(null===M)C===A||d&&n.data===A||(n.data=A);else{if(s=s&&VD.call(n.childNodes),m=(C=t.props||UT).dangerouslySetInnerHTML,v=A.dangerouslySetInnerHTML,!d){if(null!=s)for(C={},P=0;P<n.attributes.length;P++)C[n.attributes[P].name]=n.attributes[P].value;(v||m)&&(v&&(m&&v.__html==m.__html||v.__html===n.innerHTML)||(n.innerHTML=v&&v.__html||""))}if(function FZ(n,e,t,i,r){var s;for(s in t)"children"===s||"key"===s||s in e||jT(n,s,null,t[s],i);for(s in e)r&&"function"!=typeof e[s]||"children"===s||"key"===s||"value"===s||"checked"===s||t[s]===e[s]||jT(n,s,e[s],t[s],i)}(n,A,C,r,d),v)e.__k=[];else if(P=e.props.children,HH(n,Array.isArray(P)?P:[P],e,t,i,r&&"foreignObject"!==M,s,o,s?s[0]:t.__k&&HD(t,0),d),null!=s)for(P=s.length;P--;)null!=s[P]&&PH(s[P]);d||("value"in A&&void 0!==(P=A.value)&&(P!==n.value||"progress"===M&&!P||"option"===M&&P!==C.value)&&jT(n,"value",P,C.value,!1),"checked"in A&&void 0!==(P=A.checked)&&P!==n.checked&&jT(n,"checked",P,C.checked,!1))}return n}(t.__e,e,t,i,r,s,o,f);(m=Ot.diffed)&&m(e)}catch($r){e.__v=null,(f||null!=s)&&(e.__e=d,e.__h=!!f,s[s.indexOf(d)]=null),Ot.__e($r,e,t)}}function GH(n,e){Ot.__c&&Ot.__c(e,n),n.some(function(t){try{n=t.__h,t.__h=[],n.some(function(i){i.call(t)})}catch(i){Ot.__e(i,t.__v)}})}function $H(n,e,t){try{"function"==typeof n?n(e):n.current=e}catch(i){Ot.__e(i,t)}}function WH(n,e,t){var i,r;if(Ot.unmount&&Ot.unmount(n),(i=n.ref)&&(i.current&&i.current!==n.__e||$H(i,null,e)),null!=(i=n.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(s){Ot.__e(s,e)}i.base=i.__P=null,n.__c=void 0}if(i=n.__k)for(r=0;r<i.length;r++)i[r]&&WH(i[r],e,t||"function"!=typeof n.type);t||null==n.__e||PH(n.__e),n.__=n.__e=n.__d=void 0}function BZ(n,e,t){return this.constructor(n,t)}function tg(n,e,t){var i,r,s;Ot.__&&Ot.__(n,e),r=(i="function"==typeof t)?null:t&&t.__k||e.__k,s=[],GN(e,n=(!i&&t||e).__k=me(Wi,null,[n]),r||UT,UT,void 0!==e.ownerSVGElement,!i&&t?[t]:r?null:e.firstChild?VD.call(e.childNodes):null,s,!i&&t?t:r?r.__e:e.firstChild,i),GH(s,n)}VD=NH.slice,Ot={__e:function(n,e,t,i){for(var r,s,o;e=e.__;)if((r=e.__c)&&!r.__)try{if((s=r.constructor)&&null!=s.getDerivedStateFromError&&(r.setState(s.getDerivedStateFromError(n)),o=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(n,i||{}),o=r.__d),o)return r.__E=r}catch(d){n=d}throw n}},MH=0,kH=function(n){return null!=n&&void 0===n.constructor},Lb=!1,Jo.prototype.setState=function(n,e){var t;t=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=Xh({},this.state),"function"==typeof n&&(n=n(Xh({},t),this.props)),n&&Xh(t,n),null!=n&&this.__v&&(e&&this._sb.push(e),zN(this))},Jo.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),zN(this))},Jo.prototype.render=Wi,T_=[],RH="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,zT.__r=0,OH=0;var Di,$N,ZH,KH=[],GT=[],QH=Ot.__b,XH=Ot.__r,JH=Ot.diffed,eU=Ot.__c,tU=Ot.unmount;function qZ(){for(var n;n=KH.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(WT),n.__H.__h.forEach(YN),n.__H.__h=[]}catch(e){n.__H.__h=[],Ot.__e(e,n.__v)}}Ot.__b=function(n){Di=null,QH&&QH(n)},Ot.__r=function(n){XH&&XH(n);var e=(Di=n.__c).__H;e&&($N===Di?(e.__h=[],Di.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=GT,t.__N=t.i=void 0})):(e.__h.forEach(WT),e.__h.forEach(YN),e.__h=[])),$N=Di},Ot.diffed=function(n){JH&&JH(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(1!==KH.push(e)&&ZH===Ot.requestAnimationFrame||((ZH=Ot.requestAnimationFrame)||YZ)(qZ)),e.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==GT&&(t.__=t.__V),t.i=void 0,t.__V=GT})),$N=Di=null},Ot.__c=function(n,e){e.some(function(t){try{t.__h.forEach(WT),t.__h=t.__h.filter(function(i){return!i.__||YN(i)})}catch(i){e.some(function(r){r.__h&&(r.__h=[])}),e=[],Ot.__e(i,t.__v)}}),eU&&eU(n,e)},Ot.unmount=function(n){tU&&tU(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(i){try{WT(i)}catch(r){e=r}}),t.__H=void 0,e&&Ot.__e(e,t.__v))};var rU="function"==typeof requestAnimationFrame;function YZ(n){var e,t=function(){clearTimeout(i),rU&&cancelAnimationFrame(e),setTimeout(n)},i=setTimeout(t,100);rU&&(e=requestAnimationFrame(t))}function WT(n){var e=Di,t=n.__c;"function"==typeof t&&(n.__c=void 0,t()),Di=e}function YN(n){var e=Di;n.__c=n.__(),Di=e}function KN(n,e){for(var t in n)if("__source"!==t&&!(t in e))return!0;for(var i in e)if("__source"!==i&&n[i]!==e[i])return!0;return!1}function XN(n){this.props=n}(XN.prototype=new Jo).isPureReactComponent=!0,XN.prototype.shouldComponentUpdate=function(n,e){return KN(this.props,n)||KN(this.state,e)};var aU=Ot.__b;Ot.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),aU&&aU(n)},typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref");var JZ=Ot.__e;Ot.__e=function(n,e,t,i){if(n.then)for(var r,s=e;s=s.__;)if((r=s.__c)&&r.__c)return null==e.__e&&(e.__e=t.__e,e.__k=t.__k),r.__c(n,e);JZ(n,e,t,i)};var cU=Ot.unmount;function uU(n,e,t){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(i){"function"==typeof i.__c&&i.__c()}),n.__c.__H=null),null!=(n=function oU(n,e){for(var t in e)n[t]=e[t];return n}({},n)).__c&&(n.__c.__P===t&&(n.__c.__P=e),n.__c=null),n.__k=n.__k&&n.__k.map(function(i){return uU(i,e,t)})),n}function dU(n,e,t){return n&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(i){return dU(i,e,t)}),n.__c&&n.__c.__P===e&&(n.__e&&t.insertBefore(n.__e,n.__d),n.__c.__e=!0,n.__c.__P=t)),n}function qT(){this.__u=0,this.t=null,this.__b=null}function hU(n){var e=n.__.__c;return e&&e.__a&&e.__a(n)}function UD(){this.u=null,this.o=null}Ot.unmount=function(n){var e=n.__c;e&&e.__R&&e.__R(),e&&!0===n.__h&&(n.type=null),cU&&cU(n)},(qT.prototype=new Jo).__c=function(n,e){var t=e.__c,i=this;null==i.t&&(i.t=[]),i.t.push(t);var r=hU(i.__v),s=!1,o=function(){s||(s=!0,t.__R=null,r?r(d):d())};t.__R=o;var d=function(){if(!--i.__u){if(i.state.__a){var m=i.state.__a;i.__v.__k[0]=dU(m,m.__c.__P,m.__c.__O)}var v;for(i.setState({__a:i.__b=null});v=i.t.pop();)v.forceUpdate()}},f=!0===e.__h;i.__u++||f||i.setState({__a:i.__b=i.__v.__k[0]}),n.then(o,o)},qT.prototype.componentWillUnmount=function(){this.t=[]},qT.prototype.render=function(n,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=uU(this.__b,t,i.__O=i.__P)}this.__b=null}var r=e.__a&&me(Wi,null,n.fallback);return r&&(r.__h=null),[me(Wi,null,e.__a?null:n.children),r]};var fU=function(n,e,t){if(++t[1]===t[0]&&n.o.delete(e),n.props.revealOrder&&("t"!==n.props.revealOrder[0]||!n.o.size))for(t=n.u;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;n.u=t=t[2]}};function tK(n){return this.getChildContext=function(){return n.context},n.children}function nK(n){var e=this,t=n.i;e.componentWillUnmount=function(){tg(null,e.l),e.l=null,e.i=null},e.i&&e.i!==t&&e.componentWillUnmount(),n.__v?(e.l||(e.i=t,e.l={nodeType:1,parentNode:t,childNodes:[],appendChild:function(i){this.childNodes.push(i),e.i.appendChild(i)},insertBefore:function(i,r){this.childNodes.push(i),e.i.appendChild(i)},removeChild:function(i){this.childNodes.splice(this.childNodes.indexOf(i)>>>1,1),e.i.removeChild(i)}}),tg(me(tK,{context:e.context},n.__v),e.l)):e.l&&e.componentWillUnmount()}(UD.prototype=new Jo).__a=function(n){var e=this,t=hU(e.__v),i=e.o.get(n);return i[0]++,function(r){var s=function(){e.props.revealOrder?(i.push(r),fU(e,n,i)):r()};t?t(s):s()}},UD.prototype.render=function(n){this.u=null,this.o=new Map;var e=Jh(n.children);n.revealOrder&&"b"===n.revealOrder[0]&&e.reverse();for(var t=e.length;t--;)this.o.set(e[t],this.u=[1,0,this.u]);return n.children},UD.prototype.componentDidUpdate=UD.prototype.componentDidMount=function(){var n=this;this.o.forEach(function(e,t){fU(n,t,e)})};var gU=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,iK=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,rK=typeof document<"u",sK=function(n){return(typeof Symbol<"u"&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(n)};Jo.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(Jo.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(e){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:e})}})});var mU=Ot.event;function lK(){}function cK(){return this.cancelBubble}function uK(){return this.defaultPrevented}Ot.event=function(n){return mU&&(n=mU(n)),n.persist=lK,n.isPropagationStopped=cK,n.isDefaultPrevented=uK,n.nativeEvent=n};var yU={configurable:!0,get:function(){return this.class}},vU=Ot.vnode;Ot.vnode=function(n){var e=n.type,t=n.props,i=t;if("string"==typeof e){var r=-1===e.indexOf("-");for(var s in i={},t){var o=t[s];rK&&"children"===s&&"noscript"===e||"value"===s&&"defaultValue"in t&&null==o||("defaultValue"===s&&"value"in t&&null==t.value?s="value":"download"===s&&!0===o?o="":/ondoubleclick/i.test(s)?s="ondblclick":/^onchange(textarea|input)/i.test(s+e)&&!sK(t.type)?s="oninput":/^onfocus$/i.test(s)?s="onfocusin":/^onblur$/i.test(s)?s="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(s)?s=s.toLowerCase():r&&iK.test(s)?s=s.replace(/[A-Z0-9]/g,"-$&").toLowerCase():null===o&&(o=void 0),/^oninput$/i.test(s)&&(s=s.toLowerCase(),i[s]&&(s="oninputCapture")),i[s]=o)}"select"==e&&i.multiple&&Array.isArray(i.value)&&(i.value=Jh(t.children).forEach(function(d){d.props.selected=-1!=i.value.indexOf(d.props.value)})),"select"==e&&null!=i.defaultValue&&(i.value=Jh(t.children).forEach(function(d){d.props.selected=i.multiple?-1!=i.defaultValue.indexOf(d.props.value):i.defaultValue==d.props.value})),n.props=i,t.class!=t.className&&(yU.enumerable="className"in t,null!=t.className&&(i.class=t.className),Object.defineProperty(i,"className",yU))}n.$$typeof=gU,vU&&vU(n)};var bU=Ot.__r;Ot.__r=function(n){bU&&bU(n)};const CU=[],JN=new Map;function DU(n){CU.push(n),JN.forEach(e=>{IU(e,n)})}function SU(n){let e=JN.get(n);if(!e||!e.isConnected){if(e=n.querySelector("style[data-fullcalendar]"),!e){e=document.createElement("style"),e.setAttribute("data-fullcalendar","");const t=function SK(){return void 0===eP&&(eP=function IK(){const n=document.querySelector('meta[name="csp-nonce"]');if(n&&n.hasAttribute("content"))return n.getAttribute("content");const e=document.querySelector("script[nonce]");return e&&e.nonce||""}()),eP}();t&&(e.nonce=t);const i=n===document?document.head:n,r=n===document?i.querySelector("script,link[rel=stylesheet],link[as=style],style"):i.firstChild;i.insertBefore(e,r)}JN.set(n,e),function DK(n){for(const e of CU)IU(n,e)}(e)}}function IU(n,e){const{sheet:t}=n,i=t.cssRules.length;e.split("}").forEach((r,s)=>{(r=r.trim())&&t.insertRule(r+"}",i+s)})}let eP;typeof document<"u"&&SU(document),DU(':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}');class tP{constructor(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),null==e?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))}pause(e=""){let{pauseDepths:t}=this;t[e]=(t[e]||0)+1,this.clearTimeout()}resume(e="",t){let{pauseDepths:i}=this;e in i&&(t?delete i[e]:(i[e]-=1,i[e]<=0&&delete i[e]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function nP(n){n.parentNode&&n.parentNode.removeChild(n)}function ro(n,e){if(n.closest)return n.closest(e);if(!document.documentElement.contains(n))return null;do{if(AU(n,e))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null}function AU(n,e){return(n.matches||n.matchesSelector||n.msMatchesSelector).call(n,e)}const MK=/(top|left|right|bottom|width|height)$/i;function jD(n,e){for(let t in e)TU(n,t,e[t])}function TU(n,e,t){n.style[e]=null==t?"":"number"==typeof t&&MK.test(e)?`${t}px`:t}function MU(n){var e,t;return null!==(t=null===(e=n.composedPath)||void 0===e?void 0:e.call(n)[0])&&void 0!==t?t:n.target}let kU=0;function YT(){return kU+=1,"fc-dom-"+kU}function ZT(n){n.preventDefault()}function xU(n,e,t,i){let r=function kK(n,e){return t=>{let i=ro(t.target,n);i&&e.call(i,t,i)}}(t,i);return n.addEventListener(e,r),()=>{n.removeEventListener(e,r)}}const RU=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function OU(n){return Object.assign({onClick:n},NU(n))}function NU(n){return{tabIndex:0,onKeyDown(e){("Enter"===e.key||" "===e.key)&&(n(e),e.preventDefault())}}}let PU=0;function k_(){return PU+=1,String(PU)}function iP(){document.body.classList.add("fc-not-allowed")}function rP(){document.body.classList.remove("fc-not-allowed")}function BK(n,e,t){return t.func?t.func(n,e):function HK(n,e){return n||e?null==e?-1:null==n?1:"string"==typeof n||"string"==typeof e?String(n).localeCompare(String(e)):n-e:0}(n[t.field],e[t.field])*(t.order||1)}function Bb(n,e){let t=String(n);return"000".substr(0,e-t.length)+t}function zD(n,e,t){return"function"==typeof n?n(...e):"string"==typeof n?e.reduce((i,r,s)=>i.replace("$"+s,r||""),n):t}function UK(n,e){return n-e}function KT(n){return n%1==0}function jK(n){let e=n.querySelector(".fc-scrollgrid-shrink-frame"),t=n.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!t)throw new Error("needs fc-scrollgrid-shrink-cushion className");return n.getBoundingClientRect().width-e.getBoundingClientRect().width+t.getBoundingClientRect().width}const zK=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function Mn(n,e){return"string"==typeof n?function GK(n){let e=zK.exec(n);if(e){let t=e[1]?-1:1;return{years:0,months:0,days:t*(e[2]?parseInt(e[2],10):0),milliseconds:t*(60*(e[3]?parseInt(e[3],10):0)*60*1e3+60*(e[4]?parseInt(e[4],10):0)*1e3+1e3*(e[5]?parseInt(e[5],10):0)+(e[6]?parseInt(e[6],10):0))}}return null}(n):"object"==typeof n&&n?LU(n):"number"==typeof n?LU({[e||"milliseconds"]:n}):null}function LU(n){let e={years:n.years||n.year||0,months:n.months||n.month||0,days:n.days||n.day||0,milliseconds:60*(n.hours||n.hour||0)*60*1e3+60*(n.minutes||n.minute||0)*1e3+1e3*(n.seconds||n.second||0)+(n.milliseconds||n.millisecond||n.ms||0)},t=n.weeks||n.week;return t&&(e.days+=7*t,e.specifiedWeeks=!0),e}function Hb(n){return x_(n)/864e5}function x_(n){return 31536e6*n.years+2592e6*n.months+864e5*n.days+n.milliseconds}function sP(n){let e=n.milliseconds;if(e){if(e%1e3!=0)return{unit:"millisecond",value:e};if(e%6e4!=0)return{unit:"second",value:e/1e3};if(e%36e5!=0)return{unit:"minute",value:e/6e4};if(e)return{unit:"hour",value:e/36e5}}return n.days?n.specifiedWeeks&&n.days%7==0?{unit:"week",value:n.days/7}:{unit:"day",value:n.days}:n.months?{unit:"month",value:n.months}:n.years?{unit:"year",value:n.years}:{unit:"millisecond",value:0}}function id(n,e,t){if(n===e)return!0;let r,i=n.length;if(i!==e.length)return!1;for(r=0;r<i;r+=1)if(!(t?t(n[r],e[r]):n[r]===e[r]))return!1;return!0}const VU=["sun","mon","tue","wed","thu","fri","sat"];function BU(n,e){let t=rg(n);return t[2]+=7*e,ea(t)}function so(n,e){let t=rg(n);return t[2]+=e,ea(t)}function ig(n,e){let t=rg(n);return t[6]+=e,ea(t)}function R_(n,e){return(e.valueOf()-n.valueOf())/864e5}function QT(n,e){return sg(n)===sg(e)?Math.round(R_(n,e)):null}function Fi(n){return ea([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()])}function oP(n,e,t,i){let r=ea([e,0,1+s7(e,t,i)]),s=Fi(n),o=Math.round(R_(r,s));return Math.floor(o/7)+1}function s7(n,e,t){let i=7+e-t;return-(7+ea([n,0,i]).getUTCDay()-e)%7+i-1}function HU(n){return[n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()]}function UU(n){return new Date(n[0],n[1]||0,n[2]??1,n[3]||0,n[4]||0,n[5]||0)}function rg(n){return[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()]}function ea(n){return 1===n.length&&(n=n.concat([0])),new Date(Date.UTC(...n))}function jU(n){return!isNaN(n.valueOf())}function sg(n){return 1e3*n.getUTCHours()*60*60+1e3*n.getUTCMinutes()*60+1e3*n.getUTCSeconds()+n.getUTCMilliseconds()}function aP(n){return n.toISOString().replace(/T.*$/,"")}function lP(n,e=!1){let t=n<0?"-":"+",i=Math.abs(n),r=Math.floor(i/60),s=Math.round(i%60);return e?`${t+Bb(r,2)}:${Bb(s,2)}`:`GMT${t}${r}${s?`:${Bb(s,2)}`:""}`}function fn(n,e,t){let i,r;return function(...s){if(i){if(!id(i,s)){t&&t(r);let o=n.apply(this,s);(!e||!e(o,r))&&(r=o)}}else r=n.apply(this,s);return i=s,r}}function XT(n,e,t){let i,r;return s=>{if(i){if(!rd(i,s)){t&&t(r);let o=n.call(this,s);(!e||!e(o,r))&&(r=o)}}else r=n.call(this,s);return i=s,r}}const zU={week:3,separator:0,omitZeroMinute:0,meridiem:0,omitCommas:0},JT={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},eM=/\s*([ap])\.?m\.?/i,l7=/,/g,c7=/\s+/g,u7=/\u200e/g,d7=/UTC|GMT/;class h7{constructor(e){let t={},i={},r=0;for(let s in e)s in zU?(i[s]=e[s],r=Math.max(zU[s],r)):(t[s]=e[s],s in JT&&(r=Math.max(JT[s],r)));this.standardDateProps=t,this.extendedSettings=i,this.severity=r,this.buildFormattingFunc=fn(GU)}format(e,t){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,t)(e)}formatRange(e,t,i,r){let{standardDateProps:s,extendedSettings:o}=this,d=function y7(n,e,t){return t.getMarkerYear(n)!==t.getMarkerYear(e)?5:t.getMarkerMonth(n)!==t.getMarkerMonth(e)?4:t.getMarkerDay(n)!==t.getMarkerDay(e)?2:sg(n)!==sg(e)?1:0}(e.marker,t.marker,i.calendarSystem);if(!d)return this.format(e,i);let f=d;f>1&&("numeric"===s.year||"2-digit"===s.year)&&("numeric"===s.month||"2-digit"===s.month)&&("numeric"===s.day||"2-digit"===s.day)&&(f=1);let m=this.format(e,i),v=this.format(t,i);if(m===v)return m;let C=function v7(n,e){let t={};for(let i in n)(!(i in JT)||JT[i]<=e)&&(t[i]=n[i]);return t}(s,f),A=GU(C,o,i),M=A(e),P=A(t),H=function b7(n,e,t,i){let r=0;for(;r<n.length;){let s=n.indexOf(e,r);if(-1===s)break;let o=n.substr(0,s);r=s+e.length;let d=n.substr(r),f=0;for(;f<t.length;){let m=t.indexOf(i,f);if(-1===m)break;let v=t.substr(0,m);f=m+i.length;let C=t.substr(f);if(o===v&&d===C)return{before:o,after:d}}}return null}(m,M,v,P),U=o.separator||r||i.defaultSeparator||"";return H?H.before+M+U+P+H.after:m+U+v}getLargestUnit(){switch(this.severity){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function GU(n,e,t){let i=Object.keys(n).length;return 1===i&&"short"===n.timeZoneName?r=>lP(r.timeZoneOffset):0===i&&e.week?r=>function _7(n,e,t,i,r){let s=[];return"long"===r?s.push(t):("short"===r||"narrow"===r)&&s.push(e),("long"===r||"short"===r)&&s.push(" "),s.push(i.simpleNumberFormat.format(n)),"rtl"===i.options.direction&&s.reverse(),s.join("")}(t.computeWeekNumber(r.marker),t.weekText,t.weekTextLong,t.locale,e.week):function f7(n,e,t){n=Object.assign({},n),e=Object.assign({},e),function p7(n,e){n.timeZoneName&&(n.hour||(n.hour="2-digit"),n.minute||(n.minute="2-digit")),"long"===n.timeZoneName&&(n.timeZoneName="short"),e.omitZeroMinute&&(n.second||n.millisecond)&&delete e.omitZeroMinute}(n,e),n.timeZone="UTC";let r,i=new Intl.DateTimeFormat(t.locale.codes,n);if(e.omitZeroMinute){let s=Object.assign({},n);delete s.minute,r=new Intl.DateTimeFormat(t.locale.codes,s)}return s=>{let d,{marker:o}=s;return d=r&&!o.getUTCMinutes()?r:i,function g7(n,e,t,i,r){return n=n.replace(u7,""),"short"===t.timeZoneName&&(n=function m7(n,e){let t=!1;return n=n.replace(d7,()=>(t=!0,e)),t||(n+=` ${e}`),n}(n,"UTC"===r.timeZone||null==e.timeZoneOffset?"UTC":lP(e.timeZoneOffset))),i.omitCommas&&(n=n.replace(l7,"").trim()),i.omitZeroMinute&&(n=n.replace(":00","")),!1===i.meridiem?n=n.replace(eM,"").trim():"narrow"===i.meridiem?n=n.replace(eM,(s,o)=>o.toLocaleLowerCase()):"short"===i.meridiem?n=n.replace(eM,(s,o)=>`${o.toLocaleLowerCase()}m`):"lowercase"===i.meridiem&&(n=n.replace(eM,s=>s.toLocaleLowerCase())),(n=n.replace(c7," ")).trim()}(d.format(o),s,n,e,t)}}(n,e,t)}function $U(n,e){let t=e.markerToArray(n.marker);return{marker:n.marker,timeZoneOffset:n.timeZoneOffset,array:t,year:t[0],month:t[1],day:t[2],hour:t[3],minute:t[4],second:t[5],millisecond:t[6]}}function tM(n,e,t,i){let r=$U(n,t.calendarSystem);return{date:r,start:r,end:e?$U(e,t.calendarSystem):null,timeZone:t.timeZone,localeCodes:t.locale.codes,defaultSeparator:i||t.defaultSeparator}}class w7{constructor(e){this.cmdStr=e}format(e,t,i){return t.cmdFormatter(this.cmdStr,tM(e,null,t,i))}formatRange(e,t,i,r){return i.cmdFormatter(this.cmdStr,tM(e,t,i,r))}}class E7{constructor(e){this.func=e}format(e,t,i){return this.func(tM(e,null,t,i))}formatRange(e,t,i,r){return this.func(tM(e,t,i,r))}}function us(n){return"object"==typeof n&&n?new h7(n):"string"==typeof n?new w7(n):"function"==typeof n?new E7(n):null}const WU={navLinkDayClick:ge,navLinkWeekClick:ge,duration:Mn,bootstrapFontAwesome:ge,buttonIcons:ge,customButtons:ge,defaultAllDayEventDuration:Mn,defaultTimedEventDuration:Mn,nextDayThreshold:Mn,scrollTime:Mn,scrollTimeReset:Boolean,slotMinTime:Mn,slotMaxTime:Mn,dayPopoverFormat:us,slotDuration:Mn,snapDuration:Mn,headerToolbar:ge,footerToolbar:ge,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:us,dayHeaderClassNames:ge,dayHeaderContent:ge,dayHeaderDidMount:ge,dayHeaderWillUnmount:ge,dayCellClassNames:ge,dayCellContent:ge,dayCellDidMount:ge,dayCellWillUnmount:ge,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:ge,weekNumbers:Boolean,weekNumberClassNames:ge,weekNumberContent:ge,weekNumberDidMount:ge,weekNumberWillUnmount:ge,editable:Boolean,viewClassNames:ge,viewDidMount:ge,viewWillUnmount:ge,nowIndicator:Boolean,nowIndicatorClassNames:ge,nowIndicatorContent:ge,nowIndicatorDidMount:ge,nowIndicatorWillUnmount:ge,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:ge,locale:ge,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:ge,eventOrder:function LK(n){let i,r,e=[],t=[];for("string"==typeof n?t=n.split(/\s*,\s*/):"function"==typeof n?t=[n]:Array.isArray(n)&&(t=n),i=0;i<t.length;i+=1)r=t[i],"string"==typeof r?e.push("-"===r.charAt(0)?{field:r.substring(1),order:-1}:{field:r,order:1}):"function"==typeof r&&e.push({func:r});return e},eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:ge,contentHeight:ge,direction:String,weekNumberFormat:us,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:ge,initialDate:ge,now:ge,eventDataTransform:ge,stickyHeaderDates:ge,stickyFooterScrollbar:ge,viewHeight:ge,defaultAllDay:Boolean,eventSourceFailure:ge,eventSourceSuccess:ge,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:ge,eventConstraint:ge,eventAllow:ge,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:ge,eventContent:ge,eventDidMount:ge,eventWillUnmount:ge,selectConstraint:ge,selectOverlap:ge,selectAllow:ge,droppable:Boolean,unselectCancel:String,slotLabelFormat:ge,slotLaneClassNames:ge,slotLaneContent:ge,slotLaneDidMount:ge,slotLaneWillUnmount:ge,slotLabelClassNames:ge,slotLabelContent:ge,slotLabelDidMount:ge,slotLabelWillUnmount:ge,dayMaxEvents:ge,dayMaxEventRows:ge,dayMinWidth:Number,slotLabelInterval:Mn,allDayText:String,allDayClassNames:ge,allDayContent:ge,allDayDidMount:ge,allDayWillUnmount:ge,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:us,rerenderDelay:Number,moreLinkText:ge,moreLinkHint:ge,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:ge,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:Mn,hiddenDays:ge,fixedWeekCount:Boolean,validRange:ge,visibleRange:ge,titleFormat:ge,eventInteractive:Boolean,noEventsText:String,viewHint:ge,navLinkHint:ge,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:ge,moreLinkClassNames:ge,moreLinkContent:ge,moreLinkDidMount:ge,moreLinkWillUnmount:ge,monthStartFormat:us,handleCustomRendering:ge,customRenderingMetaMap:ge,customRenderingReplaces:Boolean},GD={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:" \u2013 ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"}},qU={datesSet:ge,eventsSet:ge,eventAdd:ge,eventChange:ge,eventRemove:ge,windowResize:ge,eventClick:ge,eventMouseEnter:ge,eventMouseLeave:ge,select:ge,unselect:ge,loading:ge,_unmount:ge,_beforeprint:ge,_afterprint:ge,_noEventDrop:ge,_noEventResize:ge,_resize:ge,_scrollRequest:ge},YU={buttonText:ge,buttonHints:ge,views:ge,plugins:ge,initialEvents:ge,events:ge,eventSources:ge},O_={headerToolbar:N_,footerToolbar:N_,buttonText:N_,buttonHints:N_,buttonIcons:N_,dateIncrement:N_,plugins:nM,events:nM,eventSources:nM,resources:nM};function N_(n,e){return"object"==typeof n&&"object"==typeof e&&n&&e?rd(n,e):n===e}function nM(n,e){return Array.isArray(n)&&Array.isArray(e)?id(n,e):n===e}const C7={type:String,component:ge,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:ge,usesMinMaxTime:Boolean,classNames:ge,content:ge,didMount:ge,willUnmount:ge};function cP(n){return uP(n,O_)}function iM(n,e){let t={},i={};for(let r in e)r in n&&(t[r]=e[r](n[r]));for(let r in n)r in e||(i[r]=n[r]);return{refined:t,extra:i}}function ge(n){return n}const{hasOwnProperty:rM}=Object.prototype;function uP(n,e){let t={};if(e)for(let i in e)if(e[i]===N_){let r=[];for(let s=n.length-1;s>=0;s-=1){let o=n[s][i];if("object"==typeof o&&o)r.unshift(o);else if(void 0!==o){t[i]=o;break}}r.length&&(t[i]=uP(r))}for(let i=n.length-1;i>=0;i-=1){let r=n[i];for(let s in r)s in t||(t[s]=r[s])}return t}function P_(n,e){let t={};for(let i in n)e(n[i],i)&&(t[i]=n[i]);return t}function ef(n,e){let t={};for(let i in n)t[i]=e(n[i],i);return t}function ZU(n){let e={};for(let t of n)e[t]=!0;return e}function dP(n){let e=[];for(let t in n)e.push(n[t]);return e}function rd(n,e){if(n===e)return!0;for(let t in n)if(rM.call(n,t)&&!(t in e))return!1;for(let t in e)if(rM.call(e,t)&&n[t]!==e[t])return!1;return!0}const D7=/^on[A-Z]/;function hP(n,e){let t=[];for(let i in n)rM.call(n,i)&&(i in e||t.push(i));for(let i in e)rM.call(e,i)&&n[i]!==e[i]&&t.push(i);return t}function fP(n,e,t={}){if(n===e)return!0;for(let i in e)if(!(i in n)||!I7(n[i],e[i],t[i]))return!1;for(let i in n)if(!(i in e))return!1;return!0}function I7(n,e,t){return n===e||!0===t||!!t&&t(n,e)}let KU={};!function T7(n,e){KU[n]=e}("gregory",class k7{getMarkerYear(e){return e.getUTCFullYear()}getMarkerMonth(e){return e.getUTCMonth()}getMarkerDay(e){return e.getUTCDate()}arrayToMarker(e){return ea(e)}markerToArray(e){return rg(e)}});const x7=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;class O7{constructor(e){let t=this.timeZone=e.timeZone,i="local"!==t&&"UTC"!==t;e.namedTimeZoneImpl&&i&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(t)),this.canComputeOffset=Boolean(!i||this.namedTimeZoneImpl),this.calendarSystem=function M7(n){return new KU[n]}(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,"ISO"===e.weekNumberCalculation&&(this.weekDow=1,this.weekDoy=4),"number"==typeof e.firstDay&&(this.weekDow=e.firstDay),"function"==typeof e.weekNumberCalculation&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=null!=e.weekText?e.weekText:e.locale.options.weekText,this.weekTextLong=(null!=e.weekTextLong?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}createMarker(e){let t=this.createMarkerMeta(e);return null===t?null:t.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker((new Date).valueOf()):ea(HU(new Date))}createMarkerMeta(e){if("string"==typeof e)return this.parse(e);let t=null;return"number"==typeof e?t=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(t=this.timestampToMarker(e))):Array.isArray(e)&&(t=ea(e)),null!==t&&jU(t)?{marker:t,isTimeUnspecified:!1,forcedTzo:null}:null}parse(e){let t=function R7(n){let e=x7.exec(n);if(e){let t=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?1e3*Number(`0.${e[12]}`):0));if(jU(t)){let i=null;return e[13]&&(i=("-"===e[15]?-1:1)*(60*Number(e[16]||0)+Number(e[18]||0))),{marker:t,isTimeUnspecified:!e[6],timeZoneOffset:i}}}return null}(e);if(null===t)return null;let{marker:i}=t,r=null;return null!==t.timeZoneOffset&&(this.canComputeOffset?i=this.timestampToMarker(i.valueOf()-60*t.timeZoneOffset*1e3):r=t.timeZoneOffset),{marker:i,isTimeUnspecified:t.isTimeUnspecified,forcedTzo:r}}getYear(e){return this.calendarSystem.getMarkerYear(e)}getMonth(e){return this.calendarSystem.getMarkerMonth(e)}getDay(e){return this.calendarSystem.getMarkerDay(e)}add(e,t){let i=this.calendarSystem.markerToArray(e);return i[0]+=t.years,i[1]+=t.months,i[2]+=t.days,i[6]+=t.milliseconds,this.calendarSystem.arrayToMarker(i)}subtract(e,t){let i=this.calendarSystem.markerToArray(e);return i[0]-=t.years,i[1]-=t.months,i[2]-=t.days,i[6]-=t.milliseconds,this.calendarSystem.arrayToMarker(i)}addYears(e,t){let i=this.calendarSystem.markerToArray(e);return i[0]+=t,this.calendarSystem.arrayToMarker(i)}addMonths(e,t){let i=this.calendarSystem.markerToArray(e);return i[1]+=t,this.calendarSystem.arrayToMarker(i)}diffWholeYears(e,t){let{calendarSystem:i}=this;return sg(e)===sg(t)&&i.getMarkerDay(e)===i.getMarkerDay(t)&&i.getMarkerMonth(e)===i.getMarkerMonth(t)?i.getMarkerYear(t)-i.getMarkerYear(e):null}diffWholeMonths(e,t){let{calendarSystem:i}=this;return sg(e)===sg(t)&&i.getMarkerDay(e)===i.getMarkerDay(t)?i.getMarkerMonth(t)-i.getMarkerMonth(e)+12*(i.getMarkerYear(t)-i.getMarkerYear(e)):null}greatestWholeUnit(e,t){let i=this.diffWholeYears(e,t);return null!==i?{unit:"year",value:i}:(i=this.diffWholeMonths(e,t),null!==i?{unit:"month",value:i}:(i=function e7(n,e){let t=QT(n,e);return null!==t&&t%7==0?t/7:null}(e,t),null!==i?{unit:"week",value:i}:(i=QT(e,t),null!==i?{unit:"day",value:i}:(i=function KK(n,e){return(e.valueOf()-n.valueOf())/36e5}(e,t),KT(i)?{unit:"hour",value:i}:(i=function QK(n,e){return(e.valueOf()-n.valueOf())/6e4}(e,t),KT(i)?{unit:"minute",value:i}:(i=function XK(n,e){return(e.valueOf()-n.valueOf())/1e3}(e,t),KT(i)?{unit:"second",value:i}:{unit:"millisecond",value:t.valueOf()-e.valueOf()}))))))}countDurationsBetween(e,t,i){let r;return i.years&&(r=this.diffWholeYears(e,t),null!==r)?r/function qK(n){return Hb(n)/365}(i):i.months&&(r=this.diffWholeMonths(e,t),null!==r)?r/function YK(n){return Hb(n)/30}(i):i.days&&(r=QT(e,t),null!==r)?r/Hb(i):(t.valueOf()-e.valueOf())/x_(i)}startOf(e,t){return"year"===t?this.startOfYear(e):"month"===t?this.startOfMonth(e):"week"===t?this.startOfWeek(e):"day"===t?Fi(e):"hour"===t?function t7(n){return ea([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours()])}(e):"minute"===t?function n7(n){return ea([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes()])}(e):"second"===t?function i7(n){return ea([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds()])}(e):null}startOfYear(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])}startOfMonth(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])}startOfWeek(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):function r7(n,e,t){let i=n.getUTCFullYear(),r=oP(n,i,e,t);if(r<1)return oP(n,i-1,e,t);let s=oP(n,i+1,e,t);return s>=1?Math.min(r,s):r}(e,this.weekDow,this.weekDoy)}format(e,t,i={}){return t.format({marker:e,timeZoneOffset:null!=i.forcedTzo?i.forcedTzo:this.offsetForMarker(e)},this)}formatRange(e,t,i,r={}){return r.isEndExclusive&&(t=ig(t,-1)),i.formatRange({marker:e,timeZoneOffset:null!=r.forcedStartTzo?r.forcedStartTzo:this.offsetForMarker(e)},{marker:t,timeZoneOffset:null!=r.forcedEndTzo?r.forcedEndTzo:this.offsetForMarker(t)},this,r.defaultSeparator)}formatIso(e,t={}){let i=null;return t.omitTimeZoneOffset||(i=null!=t.forcedTzo?t.forcedTzo:this.offsetForMarker(e)),function o7(n,e,t=!1){let i=n.toISOString();return i=i.replace(".000",""),t&&(i=i.replace("T00:00:00Z","")),i.length>10&&(null==e?i=i.replace("Z",""):0!==e&&(i=i.replace("Z",lP(e,!0)))),i}(e,i,t.omitTime)}timestampToMarker(e){return"local"===this.timeZone?ea(HU(new Date(e))):"UTC"!==this.timeZone&&this.namedTimeZoneImpl?ea(this.namedTimeZoneImpl.timestampToArray(e)):new Date(e)}offsetForMarker(e){return"local"===this.timeZone?-UU(rg(e)).getTimezoneOffset():"UTC"===this.timeZone?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(rg(e)):null}toDate(e,t){return"local"===this.timeZone?UU(rg(e)):"UTC"===this.timeZone?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-1e3*this.namedTimeZoneImpl.offsetForArray(rg(e))*60):new Date(e.valueOf()-(t||0))}}class $D{constructor(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}setIconOverride(e){let t,i;if("object"==typeof e&&e){for(i in t=Object.assign({},this.iconClasses),e)t[i]=this.applyIconOverridePrefix(e[i]);this.iconClasses=t}else!1===e&&(this.iconClasses={})}applyIconOverridePrefix(e){let t=this.iconOverridePrefix;return t&&0!==e.indexOf(t)&&(e=t+e),e}getClass(e){return this.classes[e]||""}getIconClass(e,t){let i;return i=t&&this.rtlIconClasses&&this.rtlIconClasses[e]||this.iconClasses[e],i?`${this.baseIconClass} ${i}`:""}getCustomButtonIconClass(e){let t;return this.iconOverrideCustomButtonOption&&(t=e[this.iconOverrideCustomButtonOption],t)?`${this.baseIconClass} ${this.applyIconOverridePrefix(t)}`:""}}function sM(n){n();let e=Ot.debounceRendering,t=[];for(Ot.debounceRendering=function i(r){t.push(r)},tg(me(N7,{}),document.createElement("div"));t.length;)t.shift()();Ot.debounceRendering=e}$D.prototype.classes={},$D.prototype.iconClasses={},$D.prototype.baseIconClass="",$D.prototype.iconOverridePrefix="";class N7 extends Jo{render(){return me("div",{})}componentDidMount(){this.setState({})}}function QU(n){let e=function YH(n,e){var t={__c:e="__cC"+OH++,__:n,Consumer:function(i,r){return i.children(r)},Provider:function(i){var r,s;return this.getChildContext||(r=[],(s={})[e]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&r.some(function(d){d.__e=!0,zN(d)})},this.sub=function(o){r.push(o);var d=o.componentWillUnmount;o.componentWillUnmount=function(){r.splice(r.indexOf(o),1),d&&d.call(o)}}),i.children}};return t.Provider.__=t.Consumer.contextType=t}(n),t=e.Provider;return e.Provider=function(){let i=!this.getChildContext,r=t.apply(this,arguments);if(i){let s=[];this.shouldComponentUpdate=o=>{this.props.value!==o.value&&s.forEach(d=>{d.context=o.value,d.forceUpdate()})},this.sub=o=>{s.push(o);let d=o.componentWillUnmount;o.componentWillUnmount=()=>{s.splice(s.indexOf(o),1),d&&d.call(o)}}}return r},e}class P7{constructor(e,t,i,r){this.execFunc=e,this.emitter=t,this.scrollTime=i,this.scrollTimeReset=r,this.handleScrollRequest=s=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},s),this.drain()},t.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const og=QU({});function F7(n,e,t,i,r,s,o,d,f,m,v,C,A){return{dateEnv:r,options:t,pluginHooks:o,emitter:m,dispatch:d,getCurrentData:f,calendarApi:v,viewSpec:n,viewApi:e,dateProfileGenerator:i,theme:s,isRtl:"rtl"===t.direction,addResizeHandler(M){m.on("_resize",M)},removeResizeHandler(M){m.off("_resize",M)},createScrollResponder:M=>new P7(M,m,Mn(t.scrollTime),t.scrollTimeReset),registerInteractiveComponent:C,unregisterInteractiveComponent:A}}let oM=(()=>{class n extends Jo{shouldComponentUpdate(t,i){return this.debug&&console.log(hP(t,this.props),hP(i,this.state)),!fP(this.props,t,this.propEquality)||!fP(this.state,i,this.stateEquality)}safeSetState(t){fP(this.state,Object.assign(Object.assign({},this.state),t),this.stateEquality)||this.setState(t)}}return n.addPropsEquality=L7,n.addStateEquality=V7,n.contextType=og,n})();oM.prototype.propEquality={},oM.prototype.stateEquality={};let lr=(()=>{class n extends oM{}return n.contextType=og,n})();function L7(n){let e=Object.create(this.prototype.propEquality);Object.assign(e,n),this.prototype.propEquality=e}function V7(n){let e=Object.create(this.prototype.stateEquality);Object.assign(e,n),this.prototype.stateEquality=e}function tf(n,e){"function"==typeof n?n(e):n&&(n.current=e)}class pP extends lr{constructor(){super(...arguments),this.id=k_(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=e=>{const{options:t}=this.context,{generatorName:i}=this.props;(!t.customRenderingReplaces||!gP(i,t))&&this.updateElRef(e)},this.updateElRef=e=>{this.props.elRef&&tf(this.props.elRef,e)}}render(){const{props:e,context:t}=this,{options:i}=t,{customGenerator:r,defaultGenerator:s,renderProps:o}=e,d=XU(e,[],this.handleEl);let m,C,f=!1,v=[];if(null!=r){const A="function"==typeof r?r(o,me):r;if(!0===A)f=!0;else{const M=A&&"object"==typeof A;M&&"html"in A?d.dangerouslySetInnerHTML={__html:A.html}:M&&"domNodes"in A?v=Array.prototype.slice.call(A.domNodes):(M?kH(A):"function"!=typeof A)?m=A:C=A}}else f=!gP(e.generatorName,i);return f&&s&&(m=s(o)),this.queuedDomNodes=v,this.currentGeneratorMeta=C,me(e.elTag,d,m)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(e){var t;const{props:i,context:r}=this,{handleCustomRendering:s,customRenderingMetaMap:o}=r.options;if(s){const d=null!==(t=this.currentGeneratorMeta)&&void 0!==t?t:o?.[i.generatorName];d&&s(Object.assign(Object.assign({id:this.id,isActive:e,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:d},i),{elClasses:(i.elClasses||[]).filter(B7)}))}}applyQueueudDomNodes(){const{queuedDomNodes:e,currentDomNodes:t}=this,i=this.base;if(!id(e,t)){t.forEach(nP);for(let r of e)i.appendChild(r);this.currentDomNodes=e}}}function gP(n,e){var t;return Boolean(e.handleCustomRendering&&n&&(null===(t=e.customRenderingMetaMap)||void 0===t?void 0:t[n]))}function XU(n,e,t){const i=Object.assign(Object.assign({},n.elAttrs),{ref:t});return(n.elClasses||e)&&(i.className=(n.elClasses||[]).concat(e||[]).concat(i.className||[]).filter(Boolean).join(" ")),n.elStyle&&(i.style=n.elStyle),i}function B7(n){return Boolean(n)}pP.addPropsEquality({elClasses:id,elStyle:rd,elAttrs:function S7(n,e){const t=hP(n,e);for(let i of t)if(!D7.test(i))return!1;return!0},renderProps:rd});const JU=QU(0);let nf=(()=>{class n extends Jo{constructor(){super(...arguments),this.InnerContent=H7.bind(void 0,this),this.handleEl=t=>{this.el=t,this.props.elRef&&(tf(this.props.elRef,t),t&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:t}=this,i=function U7(n,e){const t="function"==typeof n?n(e):n||[];return"string"==typeof t?[t]:t}(t.classNameGenerator,t.renderProps);if(t.children){const r=XU(t,i,this.handleEl),s=t.children(this.InnerContent,t.renderProps,r);return t.elTag?me(t.elTag,r,s):s}return me(pP,Object.assign(Object.assign({},t),{elRef:this.handleEl,elTag:t.elTag||"div",elClasses:(t.elClasses||[]).concat(i),renderId:this.context}))}componentDidMount(){var t,i;this.el?null===(i=(t=this.props).didMount)||void 0===i||i.call(t,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var t,i;null===(i=(t=this.props).willUnmount)||void 0===i||i.call(t,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}return n.contextType=JU,n})();function H7(n,e){const t=n.props;return me(pP,Object.assign({renderProps:t.renderProps,generatorName:t.generatorName,customGenerator:t.customGenerator,defaultGenerator:t.defaultGenerator,renderId:n.context},e))}class ej extends lr{render(){let{props:e,context:t}=this,{options:i}=t,r={view:t.viewApi};return me(nf,Object.assign({},e,{elTag:e.elTag||"div",elClasses:[...tj(e.viewSpec),...e.elClasses||[]],renderProps:r,classNameGenerator:i.viewClassNames,generatorName:void 0,didMount:i.viewDidMount,willUnmount:i.viewWillUnmount}),()=>e.children)}}function tj(n){return[`fc-${n.type}-view`,"fc-view"]}function nj(n,e){let r,s,t=[],{start:i}=e;for(n.sort(z7),r=0;r<n.length;r+=1)s=n[r],s.start>i&&t.push({start:i,end:s.start}),s.end>i&&(i=s.end);return i<e.end&&t.push({start:i,end:e.end}),t}function z7(n,e){return n.start.valueOf()-e.start.valueOf()}function Ub(n,e){let{start:t,end:i}=n,r=null;return null!==e.start&&(t=null===t?e.start:new Date(Math.max(t.valueOf(),e.start.valueOf()))),null!=e.end&&(i=null===i?e.end:new Date(Math.min(i.valueOf(),e.end.valueOf()))),(null===t||null===i||t<i)&&(r={start:t,end:i}),r}function mP(n,e){return(null===n.end||null===e.start||n.end>e.start)&&(null===n.start||null===e.end||n.start<e.end)}function aM(n,e){return(null===n.start||null!==e.start&&e.start>=n.start)&&(null===n.end||null!==e.end&&e.end<=n.end)}function ag(n,e){return(null===n.start||e>=n.start)&&(null===n.end||e<n.end)}function ij(n){let e=Math.floor(R_(n.start,n.end))||1,t=Fi(n.start);return{start:t,end:so(t,e)}}function _P(n,e=Mn(0)){let t=null,i=null;if(n.end){i=Fi(n.end);let r=n.end.valueOf()-i.valueOf();r&&r>=x_(e)&&(i=so(i,1))}return n.start&&(t=Fi(n.start),i&&i<=t&&(i=so(t,1))),{start:t,end:i}}function jb(n,e,t,i){return"year"===i?Mn(t.diffWholeYears(n,e),"year"):"month"===i?Mn(t.diffWholeMonths(n,e),"month"):function JK(n,e){let t=Fi(n),i=Fi(e);return{years:0,months:0,days:Math.round(R_(t,i)),milliseconds:e.valueOf()-i.valueOf()-(n.valueOf()-t.valueOf())}}(n,e)}function WD(n,e){return"function"==typeof n&&(n=n()),null==n?e.createNowMarker():e.createMarker(n)}class rj{constructor(e){this.props=e,this.nowDate=WD(e.nowInput,e.dateEnv),this.initHiddenDays()}buildPrev(e,t,i){let{dateEnv:r}=this.props,s=r.subtract(r.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(s,-1,i)}buildNext(e,t,i){let{dateEnv:r}=this.props,s=r.add(r.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(s,1,i)}build(e,t,i=!0){let s,o,d,f,m,v,{props:r}=this;return s=this.buildValidRange(),s=this.trimHiddenDays(s),i&&(e=function $7(n,e){return null!=e.start&&n<e.start?e.start:null!=e.end&&n>=e.end?new Date(e.end.valueOf()-1):n}(e,s)),o=this.buildCurrentRangeInfo(e,t),d=/^(year|month|week|day)$/.test(o.unit),f=this.buildRenderRange(this.trimHiddenDays(o.range),o.unit,d),f=this.trimHiddenDays(f),m=f,r.showNonCurrentDates||(m=Ub(m,o.range)),m=this.adjustActiveRange(m),m=Ub(m,s),v=mP(o.range,s),ag(f,e)||(e=f.start),{currentDate:e,validRange:s,currentRange:o.range,currentRangeUnit:o.unit,isRangeAllDay:d,activeRange:m,renderRange:f,slotMinTime:r.slotMinTime,slotMaxTime:r.slotMaxTime,isValid:v,dateIncrement:this.buildDateIncrement(o.duration)}}buildValidRange(){let e=this.props.validRangeInput,t="function"==typeof e?e.call(this.props.calendarApi,this.nowDate):e;return this.refineRange(t)||{start:null,end:null}}buildCurrentRangeInfo(e,t){let d,{props:i}=this,r=null,s=null,o=null;return i.duration?(r=i.duration,s=i.durationUnit,o=this.buildRangeFromDuration(e,t,r,s)):(d=this.props.dayCount)?(s="day",o=this.buildRangeFromDayCount(e,t,d)):(o=this.buildCustomVisibleRange(e))?s=i.dateEnv.greatestWholeUnit(o.start,o.end).unit:(r=this.getFallbackDuration(),s=sP(r).unit,o=this.buildRangeFromDuration(e,t,r,s)),{duration:r,unit:s,range:o}}getFallbackDuration(){return Mn({day:1})}adjustActiveRange(e){let{dateEnv:t,usesMinMaxTime:i,slotMinTime:r,slotMaxTime:s}=this.props,{start:o,end:d}=e;return i&&(Hb(r)<0&&(o=Fi(o),o=t.add(o,r)),Hb(s)>1&&(d=Fi(d),d=so(d,-1),d=t.add(d,s))),{start:o,end:d}}buildRangeFromDuration(e,t,i,r){let d,f,m,{dateEnv:s,dateAlignment:o}=this.props;if(!o){let{dateIncrement:C}=this.props;o=C&&x_(C)<x_(i)?sP(C).unit:r}function v(){d=s.startOf(e,o),f=s.add(d,i),m={start:d,end:f}}return Hb(i)<=1&&this.isHiddenDay(d)&&(d=this.skipHiddenDays(d,t),d=Fi(d)),v(),this.trimHiddenDays(m)||(e=this.skipHiddenDays(e,t),v()),m}buildRangeFromDayCount(e,t,i){let f,{dateEnv:r,dateAlignment:s}=this.props,o=0,d=e;s&&(d=r.startOf(d,s)),d=Fi(d),d=this.skipHiddenDays(d,t),f=d;do{f=so(f,1),this.isHiddenDay(f)||(o+=1)}while(o<i);return{start:d,end:f}}buildCustomVisibleRange(e){let{props:t}=this,i=t.visibleRangeInput,r="function"==typeof i?i.call(t.calendarApi,t.dateEnv.toDate(e)):i,s=this.refineRange(r);return!s||null!=s.start&&null!=s.end?s:null}buildRenderRange(e,t,i){return e}buildDateIncrement(e){let i,{dateIncrement:t}=this.props;return t||((i=this.props.dateAlignment)?Mn(1,i):e||Mn({days:1}))}refineRange(e){if(e){let t=function j7(n,e){let t=null,i=null;return n.start&&(t=e.createMarker(n.start)),n.end&&(i=e.createMarker(n.end)),!t&&!i||t&&i&&i<t?null:{start:t,end:i}}(e,this.props.dateEnv);return t&&(t=_P(t)),t}return null}initHiddenDays(){let r,e=this.props.hiddenDays||[],t=[],i=0;for(!1===this.props.weekends&&e.push(0,6),r=0;r<7;r+=1)(t[r]=-1!==e.indexOf(r))||(i+=1);if(!i)throw new Error("invalid hiddenDays");this.isHiddenDayHash=t}trimHiddenDays(e){let{start:t,end:i}=e;return t&&(t=this.skipHiddenDays(t)),i&&(i=this.skipHiddenDays(i,-1,!0)),null==t||null==i||t<i?{start:t,end:i}:null}isHiddenDay(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]}skipHiddenDays(e,t=1,i=!1){for(;this.isHiddenDayHash[(e.getUTCDay()+(i?t:0)+7)%7];)e=so(e,t);return e}}function yP(n,e,t,i){return{instanceId:k_(),defId:n,range:e,forcedStartTzo:t??null,forcedEndTzo:i??null}}function F_(n,e,t){let{dateEnv:i,pluginHooks:r,options:s}=t,{defs:o,instances:d}=n;d=P_(d,f=>!o[f.defId].recurringDef);for(let f in o){let m=o[f];if(m.recurringDef){let{duration:v}=m.recurringDef;v||(v=m.allDay?s.defaultAllDayEventDuration:s.defaultTimedEventDuration);let C=Z7(m,v,e,i,r.recurringTypes);for(let A of C){let M=yP(f,{start:A,end:i.add(A,v)});d[M.instanceId]=M}}}return{defs:o,instances:d}}function Z7(n,e,t,i,r){let o=r[n.recurringDef.typeId].expand(n.recurringDef.typeData,{start:i.subtract(t.start,e),end:t.end},i);return n.allDay&&(o=o.map(Fi)),o}const lM={id:String,groupId:String,title:String,url:String,interactive:Boolean},sj={start:ge,end:ge,date:ge,allDay:Boolean},K7=Object.assign(Object.assign(Object.assign({},lM),sj),{extendedProps:ge});function oj(n,e,t,i,r=vP(t),s,o){let{refined:d,extra:f}=aj(n,t,r),m=function X7(n,e){let t=null;return n&&(t=n.defaultAllDay),null==t&&(t=e.options.defaultAllDay),t}(e,t),v=function Y7(n,e,t,i){for(let r=0;r<i.length;r+=1){let s=i[r].parse(n,t);if(s){let{allDay:o}=n;return null==o&&(o=e,null==o&&(o=s.allDayGuess,null==o&&(o=!1))),{allDay:o,duration:s.duration,typeData:s.typeData,typeId:r}}}return null}(d,m,t.dateEnv,t.pluginHooks.recurringTypes);if(v){let A=bP(d,f,e?e.sourceId:"",v.allDay,Boolean(v.duration),t,s);return A.recurringDef={typeId:v.typeId,typeData:v.typeData,duration:v.duration},{def:A,instance:null}}let C=function Q7(n,e,t,i){let s,f,{allDay:r}=n,o=null,d=!1,m=null;if(s=t.dateEnv.createMarkerMeta(null!=n.start?n.start:n.date),s)o=s.marker;else if(!i)return null;return null!=n.end&&(f=t.dateEnv.createMarkerMeta(n.end)),null==r&&(r=null!=e?e:(!s||s.isTimeUnspecified)&&(!f||f.isTimeUnspecified)),r&&o&&(o=Fi(o)),f&&(m=f.marker,r&&(m=Fi(m)),o&&m<=o&&(m=null)),m?d=!0:i||(d=t.options.forceEventDuration||!1,m=t.dateEnv.add(o,r?t.options.defaultAllDayEventDuration:t.options.defaultTimedEventDuration)),{allDay:r,hasEnd:d,range:{start:o,end:m},forcedStartTzo:s?s.forcedTzo:null,forcedEndTzo:f?f.forcedTzo:null}}(d,m,t,i);if(C){let A=bP(d,f,e?e.sourceId:"",C.allDay,C.hasEnd,t,s),M=yP(A.defId,C.range,C.forcedStartTzo,C.forcedEndTzo);return o&&A.publicId&&o[A.publicId]&&(M.instanceId=o[A.publicId]),{def:A,instance:M}}return null}function aj(n,e,t=vP(e)){return iM(n,t)}function vP(n){return Object.assign(Object.assign(Object.assign({},uM),K7),n.pluginHooks.eventRefiners)}function bP(n,e,t,i,r,s,o){let d={title:n.title||"",groupId:n.groupId||"",publicId:n.id||"",url:n.url||"",recurringDef:null,defId:(o&&n.id?o[n.id]:"")||k_(),sourceId:t,allDay:i,hasEnd:r,interactive:n.interactive,ui:dM(n,s),extendedProps:Object.assign(Object.assign({},n.extendedProps||{}),e)};for(let f of s.pluginHooks.eventDefMemberAdders)Object.assign(d,f(n));return Object.freeze(d.ui.classNames),Object.freeze(d.extendedProps),d}function qD(n,e,t,i,r,s){let o={defs:{},instances:{}},d=vP(t);for(let f of n){let m=oj(f,e,t,i,d,r,s);m&&wP(m,o)}return o}function wP(n,e={defs:{},instances:{}}){return e.defs[n.def.defId]=n.def,n.instance&&(e.instances[n.instance.instanceId]=n.instance),e}function EP(n,e){let t=n.instances[e];if(t){let i=n.defs[t.defId],r=cM(n,s=>function J7(n,e){return Boolean(n.groupId&&n.groupId===e.groupId)}(i,s));return r.defs[i.defId]=i,r.instances[t.instanceId]=t,r}return{defs:{},instances:{}}}function CP(n,e){return{defs:Object.assign(Object.assign({},n.defs),e.defs),instances:Object.assign(Object.assign({},n.instances),e.instances)}}function cM(n,e){let t=P_(n.defs,e),i=P_(n.instances,r=>t[r.defId]);return{defs:t,instances:i}}function lj(n){return Array.isArray(n)?n:"string"==typeof n?n.split(/\s+/):[]}const uM={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:ge,overlap:ge,allow:ge,className:lj,classNames:lj,color:String,backgroundColor:String,borderColor:String,textColor:String},nQ={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function dM(n,e){let t=function tQ(n,e){return Array.isArray(n)?qD(n,null,e,!0):"object"==typeof n&&n?qD([n],null,e,!0):null!=n?String(n):null}(n.constraint,e);return{display:n.display||null,startEditable:null!=n.startEditable?n.startEditable:n.editable,durationEditable:null!=n.durationEditable?n.durationEditable:n.editable,constraints:null!=t?[t]:[],overlap:null!=n.overlap?n.overlap:null,allows:null!=n.allow?[n.allow]:[],backgroundColor:n.backgroundColor||n.color||"",borderColor:n.borderColor||n.color||"",textColor:n.textColor||"",classNames:(n.className||[]).concat(n.classNames||[])}}function iQ(n,e){return{display:null!=e.display?e.display:n.display,startEditable:null!=e.startEditable?e.startEditable:n.startEditable,durationEditable:null!=e.durationEditable?e.durationEditable:n.durationEditable,constraints:n.constraints.concat(e.constraints),overlap:"boolean"==typeof e.overlap?e.overlap:n.overlap,allows:n.allows.concat(e.allows),backgroundColor:e.backgroundColor||n.backgroundColor,borderColor:e.borderColor||n.borderColor,textColor:e.textColor||n.textColor,classNames:n.classNames.concat(e.classNames)}}const rQ={id:String,defaultAllDay:Boolean,url:String,format:String,events:ge,eventDataTransform:ge,success:ge,failure:ge};function uj(n,e,t=dj(e)){let i;if("string"==typeof n?i={url:n}:"function"==typeof n||Array.isArray(n)?i={events:n}:"object"==typeof n&&n&&(i=n),i){let{refined:r,extra:s}=iM(i,t),o=function sQ(n,e){let t=e.pluginHooks.eventSourceDefs;for(let i=t.length-1;i>=0;i-=1){let s=t[i].parseMeta(n);if(s)return{sourceDefId:i,meta:s}}return null}(r,e);if(o)return{_raw:n,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:r.defaultAllDay,eventDataTransform:r.eventDataTransform,success:r.success,failure:r.failure,publicId:r.id||"",sourceId:k_(),sourceDefId:o.sourceDefId,meta:o.meta,ui:dM(r,e),extendedProps:s}}return null}function dj(n){return Object.assign(Object.assign(Object.assign({},uM),rQ),n.pluginHooks.eventSourceRefiners)}function hj(n,e,t){let i=t.options.eventDataTransform,r=e?e.eventDataTransform:null;return r&&(n=fj(n,r)),i&&(n=fj(n,i)),n}function fj(n,e){let t;if(e){t=[];for(let i of n){let r=e(i);r?t.push(r):null==r&&t.push(i)}}else t=n;return t}function pj(n,e,t){let{defs:i}=n,r=ef(n.instances,s=>i[s.defId].allDay?s:Object.assign(Object.assign({},s),{range:{start:t.createMarker(e.toDate(s.range.start,s.forcedStartTzo)),end:t.createMarker(e.toDate(s.range.end,s.forcedEndTzo))},forcedStartTzo:t.canComputeOffset?null:s.forcedStartTzo,forcedEndTzo:t.canComputeOffset?null:s.forcedEndTzo}));return{defs:i,instances:r}}function gj(n,e){return cM(n,t=>t.sourceId!==e)}class hM{constructor(){this.handlers={},this.thisContext=null}setThisContext(e){this.thisContext=e}setOptions(e){this.options=e}on(e,t){!function hQ(n,e,t){(n[e]||(n[e]=[])).push(t)}(this.handlers,e,t)}off(e,t){!function fQ(n,e,t){t?n[e]&&(n[e]=n[e].filter(i=>i!==t)):delete n[e]}(this.handlers,e,t)}trigger(e,...t){let s=[].concat(this.options&&this.options[e]||[],this.handlers[e]||[]);for(let o of s)o.apply(this.thisContext,t)}hasHandlers(e){return Boolean(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])}}const pQ={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function mj(n,e,t){t.emitter.trigger("select",Object.assign(Object.assign({},DP(n,t)),{jsEvent:e?e.origEvent:null,view:t.viewApi||t.calendarApi.view}))}function DP(n,e){let t={};for(let i of e.pluginHooks.dateSpanTransforms)Object.assign(t,i(n,e));return Object.assign(t,function RQ(n,e){return Object.assign(Object.assign({},Sj(n.range,e,n.allDay)),{allDay:n.allDay})}(n,e.dateEnv)),t}function _j(n,e,t){let{dateEnv:i,options:r}=t,s=e;return n?(s=Fi(s),s=i.add(s,r.defaultAllDayEventDuration)):s=i.add(s,r.defaultTimedEventDuration),s}function SP(n,e,t,i){let r=fM(n.defs,e),s={defs:{},instances:{}};for(let o in n.defs)s.defs[o]=yQ(n.defs[o],r[o],t,i);for(let o in n.instances){let d=n.instances[o];s.instances[o]=vQ(d,s.defs[d.defId],r[d.defId],t,i)}return s}function yQ(n,e,t,i){let r=t.standardProps||{};null==r.hasEnd&&e.durationEditable&&(t.startDelta||t.endDelta)&&(r.hasEnd=!0);let s=Object.assign(Object.assign(Object.assign({},n),r),{ui:Object.assign(Object.assign({},n.ui),r.ui)});t.extendedProps&&(s.extendedProps=Object.assign(Object.assign({},s.extendedProps),t.extendedProps));for(let o of i.pluginHooks.eventDefMutationAppliers)o(s,t,i);return!s.hasEnd&&i.options.forceEventDuration&&(s.hasEnd=!0),s}function vQ(n,e,t,i,r){let{dateEnv:s}=r,o=i.standardProps&&!0===i.standardProps.allDay,d=i.standardProps&&!1===i.standardProps.hasEnd,f=Object.assign({},n);return o&&(f.range=ij(f.range)),i.datesDelta&&t.startEditable&&(f.range={start:s.add(f.range.start,i.datesDelta),end:s.add(f.range.end,i.datesDelta)}),i.startDelta&&t.durationEditable&&(f.range={start:s.add(f.range.start,i.startDelta),end:f.range.end}),i.endDelta&&t.durationEditable&&(f.range={start:f.range.start,end:s.add(f.range.end,i.endDelta)}),d&&(f.range={start:f.range.start,end:_j(e.allDay,f.range.start,r)}),e.allDay&&(f.range={start:Fi(f.range.start),end:Fi(f.range.end)}),f.range.end<f.range.start&&(f.range.end=_j(e.allDay,f.range.start,r)),f}class zb{constructor(e,t){this.context=e,this.internalEventSource=t}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class Li{constructor(e,t,i){this._context=e,this._def=t,this._instance=i||null}setProp(e,t){if(e in sj)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if("id"===e)t=lM[e](t),this.mutate({standardProps:{publicId:t}});else if(e in lM)t=lM[e](t),this.mutate({standardProps:{[e]:t}});else if(e in uM){let i=uM[e](t);i="color"===e?{backgroundColor:t,borderColor:t}:"editable"===e?{startEditable:t,durationEditable:t}:{[e]:t},this.mutate({standardProps:{ui:i}})}else console.warn(`Could not set prop '${e}'. Use setExtendedProp instead.`)}setExtendedProp(e,t){this.mutate({extendedProps:{[e]:t}})}setStart(e,t={}){let{dateEnv:i}=this._context,r=i.createMarker(e);if(r&&this._instance){let o=jb(this._instance.range.start,r,i,t.granularity);this.mutate(t.maintainDuration?{datesDelta:o}:{startDelta:o})}}setEnd(e,t={}){let r,{dateEnv:i}=this._context;if((null==e||(r=i.createMarker(e),r))&&this._instance)if(r){let s=jb(this._instance.range.end,r,i,t.granularity);this.mutate({endDelta:s})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(e,t,i={}){let d,{dateEnv:r}=this._context,s={allDay:i.allDay},o=r.createMarker(e);if(o&&(null==t||(d=r.createMarker(t),d))&&this._instance){let f=this._instance.range;!0===i.allDay&&(f=ij(f));let m=jb(f.start,o,r,i.granularity);if(d){let v=jb(f.end,d,r,i.granularity);!function $K(n,e){return n.years===e.years&&n.months===e.months&&n.days===e.days&&n.milliseconds===e.milliseconds}(m,v)?this.mutate({startDelta:m,endDelta:v,standardProps:s}):this.mutate({datesDelta:m,standardProps:s})}else s.hasEnd=!1,this.mutate({datesDelta:m,standardProps:s})}}moveStart(e){let t=Mn(e);t&&this.mutate({startDelta:t})}moveEnd(e){let t=Mn(e);t&&this.mutate({endDelta:t})}moveDates(e){let t=Mn(e);t&&this.mutate({datesDelta:t})}setAllDay(e,t={}){let i={allDay:e},{maintainDuration:r}=t;null==r&&(r=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(i.hasEnd=r),this.mutate({standardProps:i})}formatRange(e){let{dateEnv:t}=this._context,i=this._instance,r=us(e);return this._def.hasEnd?t.formatRange(i.range.start,i.range.end,r,{forcedStartTzo:i.forcedStartTzo,forcedEndTzo:i.forcedEndTzo}):t.format(i.range.start,r,{forcedTzo:i.forcedStartTzo})}mutate(e){let t=this._instance;if(t){let i=this._def,r=this._context,{eventStore:s}=r.getCurrentData(),o=EP(s,t.instanceId);o=SP(o,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,r);let f=new Li(r,i,t);this._def=o.defs[i.defId],this._instance=o.instances[t.instanceId],r.dispatch({type:"MERGE_EVENTS",eventStore:o}),r.emitter.trigger("eventChange",{oldEvent:f,event:this,relatedEvents:L_(o,r,t),revert(){r.dispatch({type:"RESET_EVENTS",eventStore:s})}})}}remove(){let e=this._context,t=yj(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:t}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){e.dispatch({type:"MERGE_EVENTS",eventStore:t})}})}get source(){let{sourceId:e}=this._def;return e?new zb(this._context,this._context.getCurrentData().eventSources[e]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""}get endStr(){let e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(e={}){let t=this._def,{ui:i}=t,{startStr:r,endStr:s}=this,o={allDay:t.allDay};return t.title&&(o.title=t.title),r&&(o.start=r),s&&(o.end=s),t.publicId&&(o.id=t.publicId),t.groupId&&(o.groupId=t.groupId),t.url&&(o.url=t.url),i.display&&"auto"!==i.display&&(o.display=i.display),e.collapseColor&&i.backgroundColor&&i.backgroundColor===i.borderColor?o.color=i.backgroundColor:(i.backgroundColor&&(o.backgroundColor=i.backgroundColor),i.borderColor&&(o.borderColor=i.borderColor)),i.textColor&&(o.textColor=i.textColor),i.classNames.length&&(o.classNames=i.classNames),Object.keys(t.extendedProps).length&&(e.collapseExtendedProps?Object.assign(o,t.extendedProps):o.extendedProps=t.extendedProps),o}toJSON(){return this.toPlainObject()}}function yj(n){let e=n._def,t=n._instance;return{defs:{[e.defId]:e},instances:t?{[t.instanceId]:t}:{}}}function L_(n,e,t){let{defs:i,instances:r}=n,s=[],o=t?t.instanceId:"";for(let d in r){let f=r[d],m=i[f.defId];f.instanceId!==o&&s.push(new Li(e,m,f))}return s}function vj(n,e,t,i){let r={},s={},o={},d=[],f=[],m=fM(n.defs,e);for(let v in n.defs){let C=n.defs[v];"inverse-background"===m[C.defId].display&&(C.groupId?(r[C.groupId]=[],o[C.groupId]||(o[C.groupId]=C)):s[v]=[])}for(let v in n.instances){let C=n.instances[v],A=n.defs[C.defId],M=m[A.defId],P=C.range,H=!A.allDay&&i?_P(P,i):P,U=Ub(H,t);U&&("inverse-background"===M.display?A.groupId?r[A.groupId].push(U):s[C.defId].push(U):"none"!==M.display&&("background"===M.display?d:f).push({def:A,ui:M,instance:C,range:U,isStart:H.start&&H.start.valueOf()===U.start.valueOf(),isEnd:H.end&&H.end.valueOf()===U.end.valueOf()}))}for(let v in r){let A=nj(r[v],t);for(let M of A){let P=o[v];d.push({def:P,ui:m[P.defId],instance:null,range:M,isStart:!1,isEnd:!1})}}for(let v in s){let A=nj(s[v],t);for(let M of A)d.push({def:n.defs[v],ui:m[v],instance:null,range:M,isStart:!1,isEnd:!1})}return{bg:d,fg:f}}function bj(n,e){n.fcSeg=e}function Gb(n){return n.fcSeg||n.parentNode.fcSeg||null}function fM(n,e){return ef(n,t=>wj(t,e))}function wj(n,e){let t=[];return e[""]&&t.push(e[""]),e[n.defId]&&t.push(e[n.defId]),t.push(n.ui),function cj(n){return n.reduce(iQ,nQ)}(t)}function wQ(n){let{eventRange:e}=n,t=e.def,i=e.instance?e.instance.range:e.range,r=i.start?i.start.valueOf():0,s=i.end?i.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},t.extendedProps),t),{id:t.publicId,start:r,end:s,duration:s-r,allDay:Number(t.allDay),_seg:n})}function EQ(n,e){let{pluginHooks:t}=e,i=t.isDraggableTransformers,{def:r,ui:s}=n.eventRange,o=s.startEditable;for(let d of i)o=d(o,r,s,e);return o}function CQ(n,e){return n.isStart&&n.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function DQ(n,e){return n.isEnd&&n.eventRange.ui.durationEditable}function Ej(n,e,t,i,r,s,o){let{dateEnv:d,options:f}=t,{displayEventTime:m,displayEventEnd:v}=f,C=n.eventRange.def,A=n.eventRange.instance;null==m&&(m=!1!==i),null==v&&(v=!1!==r);let M=A.range.start,P=A.range.end,H=s||n.start||n.eventRange.range.start,U=o||n.end||n.eventRange.range.end,K=Fi(M).valueOf()===Fi(H).valueOf(),_e=Fi(ig(P,-1)).valueOf()===Fi(ig(U,-1)).valueOf();return m&&!C.allDay&&(K||_e)?(H=K?M:H,U=_e?P:U,v&&C.hasEnd?d.formatRange(H,U,e,{forcedStartTzo:s?null:A.forcedStartTzo,forcedEndTzo:o?null:A.forcedEndTzo}):d.format(H,e,{forcedTzo:s?null:A.forcedStartTzo})):""}function YD(n,e,t){let i=n.eventRange.range;return{isPast:i.end<=(t||e.start),isFuture:i.start>=(t||e.end),isToday:e&&ag(e,i.start)}}function SQ(n){let e=["fc-event"];return n.isMirror&&e.push("fc-event-mirror"),n.isDraggable&&e.push("fc-event-draggable"),(n.isStartResizable||n.isEndResizable)&&e.push("fc-event-resizable"),n.isDragging&&e.push("fc-event-dragging"),n.isResizing&&e.push("fc-event-resizing"),n.isSelected&&e.push("fc-event-selected"),n.isStart&&e.push("fc-event-start"),n.isEnd&&e.push("fc-event-end"),n.isPast&&e.push("fc-event-past"),n.isToday&&e.push("fc-event-today"),n.isFuture&&e.push("fc-event-future"),e}function IQ(n){return n.instance?n.instance.instanceId:`${n.def.defId}:${n.range.start.toISOString()}`}function Cj(n,e){let{def:t,instance:i}=n.eventRange,{url:r}=t;if(r)return{href:r};let{emitter:s,options:o}=e,{eventInteractive:d}=o;return null==d&&(d=t.interactive,null==d&&(d=Boolean(s.hasHandlers("eventClick")))),d?NU(f=>{s.trigger("eventClick",{el:f.target,event:new Li(e,t,i),jsEvent:f,view:e.viewApi})}):{}}const AQ={start:ge,end:ge,allDay:Boolean};function Dj(n,e,t){return Object.assign(Object.assign({},Sj(n,e,t)),{timeZone:e.timeZone})}function Sj(n,e,t){return{start:e.toDate(n.start),end:e.toDate(n.end),startStr:e.formatIso(n.start,{omitTime:t}),endStr:e.formatIso(n.end,{omitTime:t})}}class Ij extends Error{constructor(e,t){super(e),this.response=t}}let IP;function Aj(){return null==IP&&(IP=function FQ(){if(typeof document>"u")return!0;let n=document.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.innerHTML="<table><tr><td><div></div></td></tr></table>",n.querySelector("table").style.height="100px",n.querySelector("div").style.height="100%",document.body.appendChild(n);let t=n.querySelector("div").offsetHeight>0;return document.body.removeChild(n),t}()),IP}class LQ extends lr{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{sM(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{sM(()=>{this.setState({forPrint:!1})})}}render(){let{props:e}=this,{options:t}=e,{forPrint:i}=this.state,r=i||"auto"===t.height||"auto"===t.contentHeight,s=r||null==t.height?"":t.height,o=["fc",i?"fc-media-print":"fc-media-screen",`fc-direction-${t.direction}`,e.theme.getClass("root")];return Aj()||o.push("fc-liquid-hack"),e.children(o,s,r,i)}componentDidMount(){let{emitter:e}=this.props;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:e}=this.props;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)}}class $b{constructor(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}destroy(){}}function AP(n){return{[n.component.uid]:n}}const TP={};function HQ(n,e){return n.left>=e.left&&n.left<e.right&&n.top>=e.top&&n.top<e.bottom}function Tj(n,e){let t={left:Math.max(n.left,e.left),right:Math.min(n.right,e.right),top:Math.max(n.top,e.top),bottom:Math.min(n.bottom,e.bottom)};return t.left<t.right&&t.top<t.bottom&&t}function Mj(n,e,t,i){return{dow:n.getUTCDay(),isDisabled:Boolean(i&&!ag(i.activeRange,n)),isOther:Boolean(i&&!ag(i.currentRange,n)),isToday:Boolean(e&&ag(e,n)),isPast:Boolean(t?n<t:!!e&&n<e.start),isFuture:Boolean(t?n>t:!!e&&n>=e.end)}}function kP(n,e){let t=["fc-day",`fc-day-${VU[n.dow]}`];return n.isDisabled?t.push("fc-day-disabled"):(n.isToday&&(t.push("fc-day-today"),t.push(e.getClass("today"))),n.isPast&&t.push("fc-day-past"),n.isFuture&&t.push("fc-day-future"),n.isOther&&t.push("fc-day-other")),t}const $Q=us({year:"numeric",month:"long",day:"numeric"}),WQ=us({week:"long"});function xP(n,e,t="day",i=!0){const{dateEnv:r,options:s,calendarApi:o}=n;let d=r.format(e,"week"===t?WQ:$Q);if(s.navLinks){let f=r.toDate(e);const m=v=>{let C="day"===t?s.navLinkDayClick:"week"===t?s.navLinkWeekClick:null;"function"==typeof C?C.call(o,r.toDate(e),v):("string"==typeof C&&(t=C),o.zoomTo(e,t))};return Object.assign({title:zD(s.navLinkHint,[d,f],d),"data-navlink":""},i?OU(m):{onClick:m})}return{"aria-label":d}}let OP,RP=null;function kj(n){return{x:n.offsetHeight-n.clientHeight,y:n.offsetWidth-n.clientWidth}}function XQ(n,e=!1,t){let i=t?n.getBoundingClientRect():NP(n),r=function QQ(n,e=!1){let t=window.getComputedStyle(n),i=parseInt(t.borderLeftWidth,10)||0,r=parseInt(t.borderRightWidth,10)||0,s=parseInt(t.borderTopWidth,10)||0,o=parseInt(t.borderBottomWidth,10)||0,d=kj(n),f=d.y-i-r,v={borderLeft:i,borderRight:r,borderTop:s,borderBottom:o,scrollbarBottom:d.x-s-o,scrollbarLeft:0,scrollbarRight:0};return function qQ(){return null===RP&&(RP=function YQ(){let n=document.createElement("div");jD(n,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),n.innerHTML="<div></div>",document.body.appendChild(n);let t=n.firstChild.getBoundingClientRect().left>n.getBoundingClientRect().left;return nP(n),t}()),RP}()&&"rtl"===t.direction?v.scrollbarLeft=f:v.scrollbarRight=f,e&&(v.paddingLeft=parseInt(t.paddingLeft,10)||0,v.paddingRight=parseInt(t.paddingRight,10)||0,v.paddingTop=parseInt(t.paddingTop,10)||0,v.paddingBottom=parseInt(t.paddingBottom,10)||0),v}(n,e),s={left:i.left+r.borderLeft+r.scrollbarLeft,right:i.right-r.borderRight-r.scrollbarRight,top:i.top+r.borderTop,bottom:i.bottom-r.borderBottom-r.scrollbarBottom};return e&&(s.left+=r.paddingLeft,s.right-=r.paddingRight,s.top+=r.paddingTop,s.bottom-=r.paddingBottom),s}function NP(n){let e=n.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY,right:e.right+window.scrollX,bottom:e.bottom+window.scrollY}}function xj(n){let e=[];for(;n instanceof HTMLElement;){let t=window.getComputedStyle(n);if("fixed"===t.position)break;/(auto|scroll)/.test(t.overflow+t.overflowY+t.overflowX)&&e.push(n),n=n.parentNode}return e}class pM{constructor(e,t,i,r){this.els=t;let s=this.originClientRect=e.getBoundingClientRect();i&&this.buildElHorizontals(s.left),r&&this.buildElVerticals(s.top)}buildElHorizontals(e){let t=[],i=[];for(let r of this.els){let s=r.getBoundingClientRect();t.push(s.left-e),i.push(s.right-e)}this.lefts=t,this.rights=i}buildElVerticals(e){let t=[],i=[];for(let r of this.els){let s=r.getBoundingClientRect();t.push(s.top-e),i.push(s.bottom-e)}this.tops=t,this.bottoms=i}leftToIndex(e){let s,{lefts:t,rights:i}=this,r=t.length;for(s=0;s<r;s+=1)if(e>=t[s]&&e<i[s])return s}topToIndex(e){let s,{tops:t,bottoms:i}=this,r=t.length;for(s=0;s<r;s+=1)if(e>=t[s]&&e<i[s])return s}getWidth(e){return this.rights[e]-this.lefts[e]}getHeight(e){return this.bottoms[e]-this.tops[e]}similarTo(e){return gM(this.tops||[],e.tops||[])&&gM(this.bottoms||[],e.bottoms||[])&&gM(this.lefts||[],e.lefts||[])&&gM(this.rights||[],e.rights||[])}}function gM(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(Math.round(n[i])!==Math.round(e[i]))return!1;return!0}class PP{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class eX extends PP{constructor(e){super(),this.el=e}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(e){this.el.scrollTop=e}setScrollLeft(e){this.el.scrollLeft=e}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class tX extends PP{getScrollTop(){return window.scrollY}getScrollLeft(){return window.scrollX}setScrollTop(e){window.scroll(window.scrollX,e)}setScrollLeft(e){window.scroll(e,window.scrollY)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class V_ extends lr{constructor(){super(...arguments),this.uid=k_()}prepareHits(){}queryHit(e,t,i,r){return null}isValidSegDownEl(e){return!this.props.eventDrag&&!this.props.eventResize&&!ro(e,".fc-event-mirror")}isValidDateDownEl(e){return!(ro(e,".fc-event:not(.fc-bg-event)")||ro(e,".fc-more-link")||ro(e,"a[data-navlink]")||ro(e,".fc-popover"))}}function Rj(n){return n.span.end}function ZD(n){return n.index+":"+n.span.start}function FP(n,e){let t=Math.max(n.start,e.start),i=Math.min(n.end,e.end);return t<i?{start:t,end:i}:null}function LP(n,e,t){n.splice(e,0,t)}function Oj(n,e,t){let i=0,r=n.length;if(!r||e<t(n[i]))return[0,0];if(e>t(n[r-1]))return[r,0];for(;i<r;){let s=Math.floor(i+(r-i)/2),o=t(n[s]);if(e<o)r=s;else{if(!(e>o))return[s,1];i=s+1}}return[i,0]}const VP={};Boolean;const Nj="fc-col-header-cell";function Pj(n){return n.text}class aX extends lr{render(){let{dateEnv:e,options:t,theme:i,viewApi:r}=this.context,{props:s}=this,{date:o,dateProfile:d}=s,f=Mj(o,s.todayRange,null,d),m=[Nj].concat(kP(f,i)),v=e.format(o,s.dayHeaderFormat),C=!f.isDisabled&&s.colCnt>1?xP(this.context,o):{},A=Object.assign(Object.assign(Object.assign({date:e.toDate(o),view:r},s.extraRenderProps),{text:v}),f);return me(nf,{elTag:"th",elClasses:m,elAttrs:Object.assign({role:"columnheader",colSpan:s.colSpan,"data-date":f.isDisabled?void 0:aP(o)},s.extraDataAttrs),renderProps:A,generatorName:"dayHeaderContent",customGenerator:t.dayHeaderContent,defaultGenerator:Pj,classNameGenerator:t.dayHeaderClassNames,didMount:t.dayHeaderDidMount,willUnmount:t.dayHeaderWillUnmount},M=>me("div",{className:"fc-scrollgrid-sync-inner"},!f.isDisabled&&me(M,{elTag:"a",elAttrs:C,elClasses:["fc-col-header-cell-cushion",s.isSticky&&"fc-sticky"]})))}}const lX=us({weekday:"long"});class cX extends lr{render(){let{props:e}=this,{dateEnv:t,theme:i,viewApi:r,options:s}=this.context,o=so(new Date(2592e5),e.dow),d={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},f=t.format(o,e.dayHeaderFormat),m=Object.assign(Object.assign(Object.assign(Object.assign({date:o},d),{view:r}),e.extraRenderProps),{text:f});return me(nf,{elTag:"th",elClasses:[Nj,...kP(d,i),...e.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:e.colSpan},e.extraDataAttrs),renderProps:m,generatorName:"dayHeaderContent",customGenerator:s.dayHeaderContent,defaultGenerator:Pj,classNameGenerator:s.dayHeaderClassNames,didMount:s.dayHeaderDidMount,willUnmount:s.dayHeaderWillUnmount},v=>me("div",{className:"fc-scrollgrid-sync-inner"},me(v,{elTag:"a",elClasses:["fc-col-header-cell-cushion",e.isSticky&&"fc-sticky"],elAttrs:{"aria-label":t.format(o,lX)}})))}}let Fj=(()=>{class n extends Jo{constructor(t,i){super(t,i),this.initialNowDate=WD(i.options.now,i.dateEnv),this.initialNowQueriedMs=(new Date).valueOf(),this.state=this.computeTiming().currentState}render(){let{props:t,state:i}=this;return t.children(i.nowDate,i.todayRange)}componentDidMount(){this.setTimeout()}componentDidUpdate(t){t.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout()}computeTiming(){let{props:t,context:i}=this,r=ig(this.initialNowDate,(new Date).valueOf()-this.initialNowQueriedMs),s=i.dateEnv.startOf(r,t.unit),o=i.dateEnv.add(s,Mn(1,t.unit)),d=o.valueOf()-r.valueOf();return d=Math.min(864e5,d),{currentState:{nowDate:s,todayRange:Lj(s)},nextState:{nowDate:o,todayRange:Lj(o)},waitMs:d}}setTimeout(){let{nextState:t,waitMs:i}=this.computeTiming();this.timeoutId=setTimeout(()=>{this.setState(t,()=>{this.setTimeout()})},i)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}return n.contextType=og,n})();function Lj(n){let e=Fi(n);return{start:e,end:so(e,1)}}class uX extends lr{constructor(){super(...arguments),this.createDayHeaderFormatter=fn(dX)}render(){let{context:e}=this,{dates:t,dateProfile:i,datesRepDistinctDays:r,renderIntro:s}=this.props,o=this.createDayHeaderFormatter(e.options.dayHeaderFormat,r,t.length);return me(Fj,{unit:"day"},(d,f)=>me("tr",{role:"row"},s&&s("day"),t.map(m=>r?me(aX,{key:m.toISOString(),date:m,dateProfile:i,todayRange:f,colCnt:t.length,dayHeaderFormat:o}):me(cX,{key:m.getUTCDay(),dow:m.getUTCDay(),dayHeaderFormat:o}))))}}function dX(n,e,t){return n||function oX(n,e){return us(!n||e>10?{weekday:"short"}:e>1?{weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}:{weekday:"long"})}(e,t)}class hX{constructor(e,t){let i=e.start,{end:r}=e,s=[],o=[],d=-1;for(;i<r;)t.isHiddenDay(i)?s.push(d+.5):(d+=1,s.push(d),o.push(i)),i=so(i,1);this.dates=o,this.indices=s,this.cnt=o.length}sliceRange(e){let t=this.getDateDayIndex(e.start),i=this.getDateDayIndex(so(e.end,-1)),r=Math.max(0,t),s=Math.min(this.cnt-1,i);return r=Math.ceil(r),s=Math.floor(s),r<=s?{firstIndex:r,lastIndex:s,isStart:t===r,isEnd:i===s}:null}getDateDayIndex(e){let{indices:t}=this,i=Math.floor(R_(this.dates[0],e));return i<0?t[0]-1:i>=t.length?t[t.length-1]+1:t[i]}}class fX{constructor(e,t){let r,s,o,{dates:i}=e;if(t){for(s=i[0].getUTCDay(),r=1;r<i.length&&i[r].getUTCDay()!==s;r+=1);o=Math.ceil(i.length/r)}else o=1,r=i.length;this.rowCnt=o,this.colCnt=r,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let e=[];for(let t=0;t<this.rowCnt;t+=1){let i=[];for(let r=0;r<this.colCnt;r+=1)i.push(this.buildCell(t,r));e.push(i)}return e}buildCell(e,t){let i=this.daySeries.dates[e*this.colCnt+t];return{key:i.toISOString(),date:i}}buildHeaderDates(){let e=[];for(let t=0;t<this.colCnt;t+=1)e.push(this.cells[0][t].date);return e}sliceRange(e){let{colCnt:t}=this,i=this.daySeries.sliceRange(e),r=[];if(i){let{firstIndex:s,lastIndex:o}=i,d=s;for(;d<=o;){let f=Math.floor(d/t),m=Math.min((f+1)*t,o+1);r.push({row:f,firstCol:d%t,lastCol:(m-1)%t,isStart:i.isStart&&d===s,isEnd:i.isEnd&&m-1===o}),d=m}}return r}}function mM(n,e){let t=n.activeRange;return e?t:{start:ig(t.start,n.slotMinTime.milliseconds),end:ig(t.end,n.slotMaxTime.milliseconds-864e5)}}function Vj(n,e,t){let{instances:i}=n.mutatedEvents;for(let r in i)if(!aM(e.validRange,i[r].range))return!1;return Bj({eventDrag:n},t)}function Bj(n,e){let t=e.getCurrentData(),i=Object.assign({businessHours:t.businessHours,dateSelection:"",eventStore:t.eventStore,eventUiBases:t.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},n);return(e.pluginHooks.isPropsValid||mX)(i,e)}function mX(n,e,t={},i){return!(n.eventDrag&&!function _X(n,e,t,i){let r=e.getCurrentData(),s=n.eventDrag,o=s.mutatedEvents,d=o.defs,f=o.instances,m=fM(d,s.isEvent?n.eventUiBases:{"":r.selectionConfig});i&&(m=ef(m,i));let v=function uQ(n,e){return{defs:n.defs,instances:P_(n.instances,t=>!e[t.instanceId])}}(n.eventStore,s.affectedEvents.instances),C=v.defs,A=v.instances,M=fM(C,n.eventUiBases);for(let P in f){let H=f[P],U=H.range,K=m[H.defId],_e=d[H.defId];if(!Hj(K.constraints,U,v,n.businessHours,e))return!1;let{eventOverlap:Oe}=e.options,je="function"==typeof Oe?Oe:null;for(let _t in A){let Bt=A[_t];if(mP(U,Bt.range)&&(!1===M[Bt.defId].overlap&&s.isEvent||!1===K.overlap||je&&!je(new Li(e,C[Bt.defId],Bt),new Li(e,_e,H))))return!1}let wt=r.eventStore;for(let _t of K.allows){let La,Bt=Object.assign(Object.assign({},t),{range:H.range,allDay:_e.allDay}),Wt=wt.defs[_e.defId],$r=wt.instances[P];if(La=Wt?new Li(e,Wt,$r):new Li(e,_e),!_t(DP(Bt,e),La))return!1}}return!0}(n,e,t,i)||n.dateSelection&&!function yX(n,e,t,i){let r=n.eventStore,s=r.defs,o=r.instances,d=n.dateSelection,f=d.range,{selectionConfig:m}=e.getCurrentData();if(i&&(m=i(m)),!Hj(m.constraints,f,r,n.businessHours,e))return!1;let{selectOverlap:v}=e.options,C="function"==typeof v?v:null;for(let A in o){let M=o[A];if(mP(f,M.range)&&(!1===m.overlap||C&&!C(new Li(e,s[M.defId],M),null)))return!1}for(let A of m.allows)if(!A(DP(Object.assign(Object.assign({},t),d),e),null))return!1;return!0}(n,e,t,i))}function Hj(n,e,t,i,r){for(let s of n)if(!bX(vX(s,e,t,i,r),e))return!1;return!0}function vX(n,e,t,i,r){return"businessHours"===n?BP(F_(i,e,r)):"string"==typeof n?BP(cM(t,s=>s.groupId===n)):"object"==typeof n&&n?BP(F_(n,e,r)):[]}function BP(n){let{instances:e}=n,t=[];for(let i in e)t.push(e[i].range);return t}function bX(n,e){for(let t of n)if(aM(t,e))return!0;return!1}const _M=/^(visible|hidden)$/;class wX extends lr{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,tf(this.props.elRef,e)}}render(){let{props:e}=this,{liquid:t,liquidIsAbsolute:i}=e,r=t&&i,s=["fc-scroller"];return t&&s.push(i?"fc-scroller-liquid-absolute":"fc-scroller-liquid"),me("div",{ref:this.handleEl,className:s.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:r&&-(e.overcomeLeft||0)||"",right:r&&-(e.overcomeRight||0)||"",bottom:r&&-(e.overcomeBottom||0)||"",marginLeft:!r&&-(e.overcomeLeft||0)||"",marginRight:!r&&-(e.overcomeRight||0)||"",marginBottom:!r&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)}needsXScrolling(){if(_M.test(this.props.overflowX))return!1;let{el:e}=this,t=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:i}=e;for(let r=0;r<i.length;r+=1)if(i[r].getBoundingClientRect().width>t)return!0;return!1}needsYScrolling(){if(_M.test(this.props.overflowY))return!1;let{el:e}=this,t=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:i}=e;for(let r=0;r<i.length;r+=1)if(i[r].getBoundingClientRect().height>t)return!0;return!1}getXScrollbarWidth(){return _M.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return _M.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class B_{constructor(e){this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(t,i)=>{let{depths:r,currentMap:s}=this,o=!1,d=!1;null!==t?(o=i in s,s[i]=t,r[i]=(r[i]||0)+1,d=!0):(r[i]-=1,r[i]||(delete s[i],delete this.callbackMap[i],o=!0)),this.masterCallback&&(o&&this.masterCallback(null,String(i)),d&&this.masterCallback(t,String(i)))}}createRef(e){let t=this.callbackMap[e];return t||(t=this.callbackMap[e]=i=>{this.handleValue(i,String(e))}),t}collect(e,t,i){return function A7(n,e=0,t,i=1){let r=[];null==t&&(t=Object.keys(n).length);for(let s=e;s<t;s+=i){let o=n[s];void 0!==o&&r.push(o)}return r}(this.currentMap,e,t,i)}getAll(){return dP(this.currentMap)}}function Uj(n,e){return n.liquid&&e.liquid}function SX(n,e){return id(n,e,rd)}function IX(n,e){let t=[];for(let i of n){let r=i.span||1;for(let s=0;s<r;s+=1)t.push(me("col",{style:{width:"shrink"===i.width?AX(e):i.width||"",minWidth:i.minWidth||""}}))}return me("colgroup",{},...t)}function AX(n){return n??4}function kX(n,e){let t=["fc-scrollgrid-section",`fc-scrollgrid-section-${n.type}`,n.className];return e&&n.liquid&&null==n.maxHeight&&t.push("fc-scrollgrid-section-liquid"),n.isSticky&&t.push("fc-scrollgrid-section-sticky"),t}function xX(n){return me("div",{className:"fc-scrollgrid-sticky-shim",style:{width:n.clientWidth,minWidth:n.tableMinWidth}})}function jj(n){let{stickyHeaderDates:e}=n;return(null==e||"auto"===e)&&(e="auto"===n.height||"auto"===n.viewHeight),e}class zj extends lr{constructor(){super(...arguments),this.processCols=fn(e=>e,SX),this.renderMicroColGroup=fn(IX),this.scrollerRefs=new B_,this.scrollerElRefs=new B_(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:e,state:t,context:i}=this,r=e.sections||[],s=this.processCols(e.cols),o=this.renderMicroColGroup(s,t.shrinkWidth),d=function MX(n,e){let t=["fc-scrollgrid",e.theme.getClass("table")];return n&&t.push("fc-scrollgrid-liquid"),t}(e.liquid,i);e.collapsibleWidth&&d.push("fc-scrollgrid-collapsible");let v,f=r.length,m=0,C=[],A=[],M=[];for(;m<f&&"header"===(v=r[m]).type;)C.push(this.renderSection(v,o,!0)),m+=1;for(;m<f&&"body"===(v=r[m]).type;)A.push(this.renderSection(v,o,!1)),m+=1;for(;m<f&&"footer"===(v=r[m]).type;)M.push(this.renderSection(v,o,!0)),m+=1;let P=!Aj();const H={role:"rowgroup"};return me("table",{role:"grid",className:d.join(" "),style:{height:e.height}},Boolean(!P&&C.length)&&me("thead",H,...C),Boolean(!P&&A.length)&&me("tbody",H,...A),Boolean(!P&&M.length)&&me("tfoot",H,...M),P&&me("tbody",H,...C,...A,...M))}renderSection(e,t,i){return"outerContent"in e?me(Wi,{key:e.key},e.outerContent):me("tr",{key:e.key,role:"presentation",className:kX(e,this.props.liquid).join(" ")},this.renderChunkTd(e,t,e.chunk,i))}renderChunkTd(e,t,i,r){if("outerContent"in i)return i.outerContent;let{props:s}=this,{forceYScrollbars:o,scrollerClientWidths:d,scrollerClientHeights:f}=this.state,m=function CX(n,e){return null!=e.maxHeight||Uj(n,e)}(s,e),v=Uj(s,e),C=s.liquid?o?"scroll":m?"auto":"hidden":"visible",A=e.key,M=function DX(n,e,t,i){let{expandRows:r}=t;return"function"==typeof e.content?e.content(t):me("table",{role:"presentation",className:[e.tableClassName,n.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:t.tableMinWidth,width:t.clientWidth,height:r?t.clientHeight:""}},t.tableColGroupNode,me(i?"thead":"tbody",{role:"presentation"},"function"==typeof e.rowContent?e.rowContent(t):e.rowContent))}(e,i,{tableColGroupNode:t,tableMinWidth:"",clientWidth:s.collapsibleWidth||void 0===d[A]?null:d[A],clientHeight:void 0!==f[A]?f[A]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},r);return me(r?"th":"td",{ref:i.elRef,role:"presentation"},me("div",{className:"fc-scroller-harness"+(v?" fc-scroller-harness-liquid":"")},me(wX,{ref:this.scrollerRefs.createRef(A),elRef:this.scrollerElRefs.createRef(A),overflowY:C,overflowX:s.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:v,liquidIsAbsolute:!0},M)))}_handleScrollerEl(e,t){let i=function OX(n,e){for(let t of n)if(t.key===e)return t;return null}(this.props.sections,t);i&&tf(i.chunk.scrollerElRef,e)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return function TX(n){for(let e of n)if("shrink"===e.width)return!0;return!1}(this.props.cols)?function EX(n){let e=function TK(n,e){let t=n instanceof HTMLElement?[n]:n,i=[];for(let r=0;r<t.length;r+=1){let s=t[r].querySelectorAll(e);for(let o=0;o<s.length;o+=1)i.push(s[o])}return i}(n,".fc-scrollgrid-shrink"),t=0;for(let i of e)t=Math.max(t,jK(i));return Math.ceil(t)}(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let e=function ZQ(){return OP||(OP=function KQ(){let n=document.createElement("div");n.style.overflow="scroll",n.style.position="absolute",n.style.top="-9999px",n.style.left="-9999px",document.body.appendChild(n);let e=kj(n);return document.body.removeChild(n),e}()),OP}(),{scrollerRefs:t,scrollerElRefs:i}=this,r=!1,s={},o={};for(let d in t.currentMap){let f=t.currentMap[d];if(f&&f.needsYScrolling()){r=!0;break}}for(let d of this.props.sections){let f=d.key,m=i.currentMap[f];if(m){let v=m.parentNode;s[f]=Math.floor(v.getBoundingClientRect().width-(r?e.y:0)),o[f]=Math.floor(v.getBoundingClientRect().height)}}return{forceYScrollbars:r,scrollerClientWidths:s,scrollerClientHeights:o}}}zj.addStateEquality({scrollerClientWidths:rd,scrollerClientHeights:rd});class HP extends lr{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,e&&bj(e,this.props.seg)}}render(){const{props:e,context:t}=this,{options:i}=t,{seg:r}=e,{eventRange:s}=r,{ui:o}=s,d={event:new Li(t,s.def,s.instance),view:t.viewApi,timeText:e.timeText,textColor:o.textColor,backgroundColor:o.backgroundColor,borderColor:o.borderColor,isDraggable:!e.disableDragging&&EQ(r,t),isStartResizable:!e.disableResizing&&CQ(r,t),isEndResizable:!e.disableResizing&&DQ(r),isMirror:Boolean(e.isDragging||e.isResizing||e.isDateSelecting),isStart:Boolean(r.isStart),isEnd:Boolean(r.isEnd),isPast:Boolean(e.isPast),isFuture:Boolean(e.isFuture),isToday:Boolean(e.isToday),isSelected:Boolean(e.isSelected),isDragging:Boolean(e.isDragging),isResizing:Boolean(e.isResizing)};return me(nf,Object.assign({},e,{elRef:this.handleEl,elClasses:[...SQ(d),...r.eventRange.ui.classNames,...e.elClasses||[]],renderProps:d,generatorName:"eventContent",customGenerator:i.eventContent,defaultGenerator:e.defaultGenerator,classNameGenerator:i.eventClassNames,didMount:i.eventDidMount,willUnmount:i.eventWillUnmount}))}componentDidUpdate(e){this.el&&this.props.seg!==e.seg&&bj(this.el,this.props.seg)}}class NX extends lr{render(){let{props:e,context:t}=this,{options:i}=t,{seg:r}=e,{ui:s}=r.eventRange,d=Ej(r,i.eventTimeFormat||e.defaultTimeFormat,t,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return me(HP,Object.assign({},e,{elTag:"a",elStyle:{borderColor:s.borderColor,backgroundColor:s.backgroundColor},elAttrs:Cj(r,t),defaultGenerator:PX,timeText:d}),(f,m)=>me(Wi,null,me(f,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:m.textColor}}),Boolean(m.isStartResizable)&&me("div",{className:"fc-event-resizer fc-event-resizer-start"}),Boolean(m.isEndResizable)&&me("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}function PX(n){return me("div",{className:"fc-event-main-frame"},n.timeText&&me("div",{className:"fc-event-time"},n.timeText),me("div",{className:"fc-event-title-container"},me("div",{className:"fc-event-title fc-sticky"},n.event.title||me(Wi,null,"\xa0"))))}const FX=us({day:"numeric"});class Gj extends lr{constructor(){super(...arguments),this.refineRenderProps=XT(LX)}render(){let{props:e,context:t}=this,{options:i}=t,r=this.refineRenderProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,isMonthStart:e.isMonthStart||!1,showDayNumber:e.showDayNumber,extraRenderProps:e.extraRenderProps,viewApi:t.viewApi,dateEnv:t.dateEnv,monthStartFormat:i.monthStartFormat});return me(nf,Object.assign({},e,{elClasses:[...kP(r,t.theme),...e.elClasses||[]],elAttrs:Object.assign(Object.assign({},e.elAttrs),r.isDisabled?{}:{"data-date":aP(e.date)}),renderProps:r,generatorName:"dayCellContent",customGenerator:i.dayCellContent,defaultGenerator:e.defaultGenerator,classNameGenerator:r.isDisabled?void 0:i.dayCellClassNames,didMount:i.dayCellDidMount,willUnmount:i.dayCellWillUnmount}))}}function $j(n){return Boolean(n.dayCellContent||gP("dayCellContent",n))}function LX(n){let{date:e,dateEnv:t,dateProfile:i,isMonthStart:r}=n,s=Mj(e,n.todayRange,null,i),o=n.showDayNumber?t.format(e,r?n.monthStartFormat:FX):"";return Object.assign(Object.assign(Object.assign({date:t.toDate(e),view:n.viewApi},s),{isMonthStart:r,dayNumberText:o}),n.extraRenderProps)}class VX extends lr{render(){let{props:e}=this,{seg:t}=e;return me(HP,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:t.eventRange.ui.backgroundColor},defaultGenerator:BX,seg:t,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,disableDragging:!0,disableResizing:!0})}}function BX(n){let{title:e}=n.event;return e&&me("div",{className:"fc-event-title"},n.event.title)}function HX(n){return me("div",{className:`fc-${n}`})}const UX=n=>me(og.Consumer,null,e=>{let{dateEnv:t,options:i}=e,{date:r}=n,s=i.weekNumberFormat||n.defaultFormat,o=t.computeWeekNumber(r),d=t.format(r,s);return me(nf,Object.assign({},n,{renderProps:{num:o,text:d,date:r},generatorName:"weekNumberContent",customGenerator:i.weekNumberContent,defaultGenerator:jX,classNameGenerator:i.weekNumberClassNames,didMount:i.weekNumberDidMount,willUnmount:i.weekNumberWillUnmount}))});function jX(n){return n.text}class zX extends lr{constructor(){super(...arguments),this.state={titleId:YT()},this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&tf(this.props.elRef,e)},this.handleDocumentMouseDown=e=>{const t=MU(e);this.rootEl.contains(t)||this.handleCloseClick()},this.handleDocumentKeyDown=e=>{"Escape"===e.key&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:e}=this.props;e&&e()}}render(){let{theme:e,options:t}=this.context,{props:i,state:r}=this,s=["fc-popover",e.getClass("popover")].concat(i.extraClassNames||[]);return function pU(n,e){var t=me(nK,{__v:n,i:e});return t.containerInfo=e,t}(me("div",Object.assign({},i.extraAttrs,{id:i.id,className:s.join(" "),"aria-labelledby":r.titleId,ref:this.handleRootEl}),me("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},me("span",{className:"fc-popover-title",id:r.titleId},i.title),me("span",{className:"fc-popover-close "+e.getIconClass("close"),title:t.closeHint,onClick:this.handleCloseClick})),me("div",{className:"fc-popover-body "+e.getClass("popoverContent")},i.children)),i.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:e}=this.context,{alignmentEl:t,alignGridTop:i}=this.props,{rootEl:r}=this,s=function JQ(n){let e=xj(n),t=n.getBoundingClientRect();for(let i of e){let r=Tj(t,i.getBoundingClientRect());if(!r)return null;t=r}return t}(t);if(s){let o=r.getBoundingClientRect(),d=i?ro(t,".fc-scrollgrid").getBoundingClientRect().top:s.top,f=e?s.right-o.width:s.left;d=Math.max(d,10),f=Math.min(f,document.documentElement.clientWidth-10-o.width),f=Math.max(f,10);let m=r.offsetParent.getBoundingClientRect();jD(r,{top:d-m.top,left:f-m.left})}}}class GX extends V_{constructor(){super(...arguments),this.handleRootEl=e=>{this.rootEl=e,e?this.context.registerInteractiveComponent(this,{el:e,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:e,dateEnv:t}=this.context,{props:i}=this,{startDate:r,todayRange:s,dateProfile:o}=i,d=t.format(r,e.dayPopoverFormat);return me(Gj,{elRef:this.handleRootEl,date:r,dateProfile:o,todayRange:s},(f,m,v)=>me(zX,{elRef:v.ref,id:i.id,title:d,extraClassNames:["fc-more-popover"].concat(v.className||[]),extraAttrs:v,parentEl:i.parentEl,alignmentEl:i.alignmentEl,alignGridTop:i.alignGridTop,onClose:i.onClose},$j(e)&&me(f,{elTag:"div",elClasses:["fc-more-popover-misc"]}),i.children))}queryHit(e,t,i,r){let{rootEl:s,props:o}=this;return e>=0&&e<i&&t>=0&&t<r?{dateProfile:o.dateProfile,dateSpan:Object.assign({allDay:!o.forceTimed,range:{start:o.startDate,end:o.endDate}},o.extraDateSpan),dayEl:s,rect:{left:0,top:0,right:i,bottom:r},layer:1}:null}}class $X extends lr{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:YT()},this.handleLinkEl=e=>{this.linkEl=e,this.props.elRef&&tf(this.props.elRef,e)},this.handleClick=e=>{let{props:t,context:i}=this,{moreLinkClick:r}=i.options,s=Wj(t).start;function o(d){let{def:f,instance:m,range:v}=d.eventRange;return{event:new Li(i,f,m),start:i.dateEnv.toDate(v.start),end:i.dateEnv.toDate(v.end),isStart:d.isStart,isEnd:d.isEnd}}"function"==typeof r&&(r=r({date:s,allDay:Boolean(t.allDayDate),allSegs:t.allSegs.map(o),hiddenSegs:t.hiddenSegs.map(o),jsEvent:e,view:i.viewApi})),r&&"popover"!==r?"string"==typeof r&&i.calendarApi.zoomTo(s,r):this.setState({isPopoverOpen:!0})},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:e,state:t}=this;return me(og.Consumer,null,i=>{let{viewApi:r,options:s,calendarApi:o}=i,{moreLinkText:d}=s,{moreCnt:f}=e,m=Wj(e),v="function"==typeof d?d.call(o,f):`+${f} ${d}`,C=zD(s.moreLinkHint,[f],v),A={num:f,shortText:`+${f}`,text:v,view:r};return me(Wi,null,Boolean(e.moreCnt)&&me(nf,{elTag:e.elTag||"a",elRef:this.handleLinkEl,elClasses:[...e.elClasses||[],"fc-more-link"],elStyle:e.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},e.elAttrs),OU(this.handleClick)),{title:C,"aria-expanded":t.isPopoverOpen,"aria-controls":t.isPopoverOpen?t.popoverId:""}),renderProps:A,generatorName:"moreLinkContent",customGenerator:s.moreLinkContent,defaultGenerator:e.defaultGenerator||WX,classNameGenerator:s.moreLinkClassNames,didMount:s.moreLinkDidMount,willUnmount:s.moreLinkWillUnmount},e.children),t.isPopoverOpen&&me(GX,{id:t.popoverId,startDate:m.start,endDate:m.end,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:e.extraDateSpan,parentEl:this.parentEl,alignmentEl:e.alignmentElRef?e.alignmentElRef.current:this.linkEl,alignGridTop:e.alignGridTop,forceTimed:e.forceTimed,onClose:this.handlePopoverClose},e.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=ro(this.linkEl,".fc-view-harness"))}}function WX(n){return n.text}function Wj(n){if(n.allDayDate)return{start:n.allDayDate,end:so(n.allDayDate,1)};let{hiddenSegs:e}=n;return{start:qX(e),end:ZX(e)}}function qX(n){return n.reduce(YX).eventRange.range.start}function YX(n,e){return n.eventRange.range.start<e.eventRange.range.start?n:e}function ZX(n){return n.reduce(KX).eventRange.range.end}function KX(n,e){return n.eventRange.range.end>e.eventRange.range.end?n:e}class XX extends class QX{constructor(){this.handlers=[]}set(e){this.currentValue=e;for(let t of this.handlers)t(e)}subscribe(e){this.handlers.push(e),void 0!==this.currentValue&&e(this.currentValue)}}{constructor(){super(...arguments),this.map=new Map}handle(e){const{map:t}=this;let i=!1;e.isActive?(t.set(e.id,e),i=!0):t.has(e.id)&&(t.delete(e.id),i=!0),i&&this.set(t)}}const JX=[],qj={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},Yj=Object.assign(Object.assign({},qj),{buttonHints:{prev:"Previous $0",next:"Next $0",today:(n,e)=>"day"===e?"Today":`This ${n}`},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint:n=>`Show ${n} more event${1===n?"":"s"}`});function Zj(n){let e=n.length>0?n[0].code:"en",t=JX.concat(n),i={en:Yj};for(let r of t)i[r.code]=r;return{map:i,defaultCode:e}}function jP(n,e){return"object"!=typeof n||Array.isArray(n)?function eJ(n,e){let t=[].concat(n||[]),i=function tJ(n,e){for(let t=0;t<n.length;t+=1){let i=n[t].toLocaleLowerCase().split("-");for(let r=i.length;r>0;r-=1){let s=i.slice(0,r).join("-");if(e[s])return e[s]}}return null}(t,e)||Yj;return Kj(n,t,i)}(n,e):Kj(n.code,[n.code],n)}function Kj(n,e,t){let i=uP([qj,t],["buttonText"]);delete i.code;let{week:r}=i;return delete i.week,{codeArg:n,codes:e,week:r,simpleNumberFormat:new Intl.NumberFormat(n),options:i}}function lg(n){return{id:k_(),name:n.name,premiumReleaseDate:n.premiumReleaseDate?new Date(n.premiumReleaseDate):void 0,deps:n.deps||[],reducers:n.reducers||[],isLoadingFuncs:n.isLoadingFuncs||[],contextInit:[].concat(n.contextInit||[]),eventRefiners:n.eventRefiners||{},eventDefMemberAdders:n.eventDefMemberAdders||[],eventSourceRefiners:n.eventSourceRefiners||{},isDraggableTransformers:n.isDraggableTransformers||[],eventDragMutationMassagers:n.eventDragMutationMassagers||[],eventDefMutationAppliers:n.eventDefMutationAppliers||[],dateSelectionTransformers:n.dateSelectionTransformers||[],datePointTransforms:n.datePointTransforms||[],dateSpanTransforms:n.dateSpanTransforms||[],views:n.views||{},viewPropsTransformers:n.viewPropsTransformers||[],isPropsValid:n.isPropsValid||null,externalDefTransforms:n.externalDefTransforms||[],viewContainerAppends:n.viewContainerAppends||[],eventDropTransformers:n.eventDropTransformers||[],componentInteractions:n.componentInteractions||[],calendarInteractions:n.calendarInteractions||[],themeClasses:n.themeClasses||{},eventSourceDefs:n.eventSourceDefs||[],cmdFormatter:n.cmdFormatter,recurringTypes:n.recurringTypes||[],namedTimeZonedImpl:n.namedTimeZonedImpl,initialView:n.initialView||"",elementDraggingImpl:n.elementDraggingImpl,optionChangeHandlers:n.optionChangeHandlers||{},scrollGridImpl:n.scrollGridImpl||null,listenerRefiners:n.listenerRefiners||{},optionRefiners:n.optionRefiners||{},propSetHandlers:n.propSetHandlers||{}}}function rJ(n,e){return{premiumReleaseDate:sJ(n.premiumReleaseDate,e.premiumReleaseDate),reducers:n.reducers.concat(e.reducers),isLoadingFuncs:n.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:n.contextInit.concat(e.contextInit),eventRefiners:Object.assign(Object.assign({},n.eventRefiners),e.eventRefiners),eventDefMemberAdders:n.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},n.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:n.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:n.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:n.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:n.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:n.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:n.dateSpanTransforms.concat(e.dateSpanTransforms),views:Object.assign(Object.assign({},n.views),e.views),viewPropsTransformers:n.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||n.isPropsValid,externalDefTransforms:n.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:n.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:n.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:n.calendarInteractions.concat(e.calendarInteractions),componentInteractions:n.componentInteractions.concat(e.componentInteractions),themeClasses:Object.assign(Object.assign({},n.themeClasses),e.themeClasses),eventSourceDefs:n.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||n.cmdFormatter,recurringTypes:n.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||n.namedTimeZonedImpl,initialView:n.initialView||e.initialView,elementDraggingImpl:n.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},n.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||n.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},n.listenerRefiners),e.listenerRefiners),optionRefiners:Object.assign(Object.assign({},n.optionRefiners),e.optionRefiners),propSetHandlers:Object.assign(Object.assign({},n.propSetHandlers),e.propSetHandlers)}}function sJ(n,e){return void 0===n?e:void 0===e?n:new Date(Math.max(n.valueOf(),e.valueOf()))}class cg extends $D{}function zP(n,e,t,i){if(e[n])return e[n];let r=function aJ(n,e,t,i){let r=t[n],s=i[n],o=v=>r&&null!==r[v]?r[v]:s&&null!==s[v]?s[v]:null,d=o("component"),f=o("superType"),m=null;if(f){if(f===n)throw new Error("Can't have a custom view type that references itself");m=zP(f,e,t,i)}return!d&&m&&(d=m.component),d?{type:n,component:d,defaults:Object.assign(Object.assign({},m?m.defaults:{}),r?r.rawOptions:{}),overrides:Object.assign(Object.assign({},m?m.overrides:{}),s?s.rawOptions:{})}:null}(n,e,t,i);return r&&(e[n]=r),r}function Qj(n){return ef(n,lJ)}function lJ(n){let e="function"==typeof n?{component:n}:n,{component:t}=e;return e.content?t=Xj(e):t&&!(t.prototype instanceof lr)&&(t=Xj(Object.assign(Object.assign({},e),{content:t}))),{superType:e.type,component:t,rawOptions:e}}function Xj(n){return e=>me(og.Consumer,null,t=>me(nf,{elTag:"div",elClasses:tj(t.viewSpec),renderProps:Object.assign(Object.assign({},e),{nextDayThreshold:t.options.nextDayThreshold}),generatorName:void 0,customGenerator:n.content,classNameGenerator:n.classNames,didMount:n.didMount,willUnmount:n.willUnmount}))}function cJ(n,e,t,i){let r=Qj(n),s=Qj(e.views),o=function oJ(n,e){let i,t={};for(i in n)zP(i,t,n,e);for(i in e)zP(i,t,n,e);return t}(r,s);return ef(o,d=>function uJ(n,e,t,i,r){let s=n.overrides.duration||n.defaults.duration||i.duration||t.duration,o=null,d="",f="",m={};if(s&&(o=function dJ(n){let e=JSON.stringify(n),t=Jj[e];return void 0===t&&(t=Mn(n),Jj[e]=t),t}(s),o)){let A=sP(o);d=A.unit,1===A.value&&(f=d,m=e[d]?e[d].rawOptions:{})}let v=A=>{let M=A.buttonText||{},P=n.defaults.buttonTextKey;return null!=P&&null!=M[P]?M[P]:null!=M[n.type]?M[n.type]:null!=M[f]?M[f]:null},C=A=>{let M=A.buttonHints||{},P=n.defaults.buttonTextKey;return null!=P&&null!=M[P]?M[P]:null!=M[n.type]?M[n.type]:null!=M[f]?M[f]:null};return{type:n.type,component:n.component,duration:o,durationUnit:d,singleUnit:f,optionDefaults:n.defaults,optionOverrides:Object.assign(Object.assign({},m),n.overrides),buttonTextOverride:v(i)||v(t)||n.overrides.buttonText,buttonTextDefault:v(r)||n.defaults.buttonText||v(GD)||n.type,buttonTitleOverride:C(i)||C(t)||n.overrides.buttonHint,buttonTitleDefault:C(r)||n.defaults.buttonHint||C(GD)}}(d,s,e,t,i))}cg.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"},cg.prototype.baseIconClass="fc-icon",cg.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"},cg.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"},cg.prototype.iconOverrideOption="buttonIcons",cg.prototype.iconOverrideCustomButtonOption="icon",cg.prototype.iconOverridePrefix="fc-icon-";let Jj={};function ez(n){for(let e in n)if(n[e].isFetching)return!0;return!1}function tz(n,e,t,i){let r={};for(let s of e)r[s.sourceId]=s;return t&&(r=nz(r,t,i)),Object.assign(Object.assign({},n),r)}function nz(n,e,t){return GP(n,P_(n,i=>function vJ(n,e,t){return rz(n,t)?!t.options.lazyFetching||!n.fetchRange||n.isFetching||e.start<n.fetchRange.start||e.end>n.fetchRange.end:!n.latestFetchId}(i,e,t)),e,!1,t)}function GP(n,e,t,i,r){let s={};for(let o in n){let d=n[o];s[o]=e[o]?bJ(d,t,i,r):d}return s}function bJ(n,e,t,i){let{options:r,calendarApi:s}=i,o=i.pluginHooks.eventSourceDefs[n.sourceDefId],d=k_();return o.fetch({eventSource:n,range:e,isRefetch:t,context:i},f=>{let{rawEvents:m}=f;r.eventSourceSuccess&&(m=r.eventSourceSuccess.call(s,m,f.response)||m),n.success&&(m=n.success.call(s,m,f.response)||m),i.dispatch({type:"RECEIVE_EVENTS",sourceId:n.sourceId,fetchId:d,fetchRange:e,rawEvents:m})},f=>{let m=!1;r.eventSourceFailure&&(r.eventSourceFailure.call(s,f),m=!0),n.failure&&(n.failure(f),m=!0),m||console.warn(f.message,f),i.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:n.sourceId,fetchId:d,fetchRange:e,error:f})}),Object.assign(Object.assign({},n),{isFetching:!0,latestFetchId:d})}function iz(n,e){return P_(n,t=>rz(t,e))}function rz(n,e){return!e.pluginHooks.eventSourceDefs[n.sourceDefId].ignoreRange}function CJ(n,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return n}}function DJ(n,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return n}}function SJ(n,e){let t;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return t=e.state,{affectedEvents:t.affectedEvents,mutatedEvents:t.mutatedEvents,isEvent:t.isEvent};default:return n}}function IJ(n,e){let t;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return t=e.state,{affectedEvents:t.affectedEvents,mutatedEvents:t.mutatedEvents,isEvent:t.isEvent};default:return n}}function AJ(n,e,t,i,r){return{header:n.headerToolbar?sz(n.headerToolbar,n,e,t,i,r):null,footer:n.footerToolbar?sz(n.footerToolbar,n,e,t,i,r):null}}function sz(n,e,t,i,r,s){let o={},d=[],f=!1;for(let m in n){let C=TJ(n[m],e,t,i,r,s);o[m]=C.widgets,d.push(...C.viewsWithButtons),f=f||C.hasTitle}return{sectionWidgets:o,viewsWithButtons:d,hasTitle:f}}function TJ(n,e,t,i,r,s){let o="rtl"===e.direction,d=e.customButtons||{},f=t.buttonText||{},m=e.buttonText||{},v=t.buttonHints||{},C=e.buttonHints||{},A=n?n.split(" "):[],M=[],P=!1;return{widgets:A.map(U=>U.split(",").map(K=>{if("title"===K)return P=!0,{buttonName:K};let _e,Oe,je,wt,_t,Bt;if(_e=d[K])je=Wt=>{_e.click&&_e.click.call(Wt.target,Wt,Wt.target)},(wt=i.getCustomButtonIconClass(_e))||(wt=i.getIconClass(K,o))||(_t=_e.text),Bt=_e.hint||_e.text;else if(Oe=r[K]){M.push(K),je=()=>{s.changeView(K)},(_t=Oe.buttonTextOverride)||(wt=i.getIconClass(K,o))||(_t=Oe.buttonTextDefault);let Wt=Oe.buttonTextOverride||Oe.buttonTextDefault;Bt=zD(Oe.buttonTitleOverride||Oe.buttonTitleDefault||e.viewHint,[Wt,K],Wt)}else if(s[K])if(je=()=>{s[K]()},(_t=f[K])||(wt=i.getIconClass(K,o))||(_t=m[K]),"prevYear"===K||"nextYear"===K){let Wt="prevYear"===K?"prev":"next";Bt=zD(v[Wt]||C[Wt],[m.year||"year","year"],m[K])}else Bt=Wt=>zD(v[K]||C[K],[m[Wt]||Wt,Wt],m[K]);return{buttonName:K,buttonClick:je,buttonIcon:wt,buttonText:_t,buttonHint:Bt}})),viewsWithButtons:M,hasTitle:P}}class MJ{constructor(e,t,i){this.type=e,this.getCurrentData=t,this.dateEnv=i}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(e){return this.getCurrentData().options[e]}}const kJ=lg({name:"array-event-source",eventSourceDefs:[{ignoreRange:!0,parseMeta:n=>Array.isArray(n.events)?n.events:null,fetch(n,e){e({rawEvents:n.eventSource.meta})}}]}),xJ=lg({name:"func-event-source",eventSourceDefs:[{parseMeta:n=>"function"==typeof n.events?n.events:null,fetch(n,e,t){const{dateEnv:i}=n.context;!function NQ(n,e,t){let i=!1,r=function(d){i||(i=!0,e(d))},s=function(d){i||(i=!0,t(d))},o=n(r,s);o&&"function"==typeof o.then&&o.then(r,s)}(n.eventSource.meta.bind(null,Dj(n.range,i)),s=>e({rawEvents:s}),t)}}]}),RJ=lg({name:"json-event-source",eventSourceRefiners:{method:String,extraParams:ge,startParam:String,endParam:String,timeZoneParam:String},eventSourceDefs:[{parseMeta:n=>!n.url||"json"!==n.format&&n.format?null:{url:n.url,format:"json",method:(n.method||"GET").toUpperCase(),extraParams:n.extraParams,startParam:n.startParam,endParam:n.endParam,timeZoneParam:n.timeZoneParam},fetch(n,e,t){const{meta:i}=n.eventSource,r=function OJ(n,e,t){let s,o,d,f,{dateEnv:i,options:r}=t,m={};return s=n.startParam,null==s&&(s=r.startParam),o=n.endParam,null==o&&(o=r.endParam),d=n.timeZoneParam,null==d&&(d=r.timeZoneParam),f="function"==typeof n.extraParams?n.extraParams():n.extraParams||{},Object.assign(m,f),m[s]=i.formatIso(e.start),m[o]=i.formatIso(e.end),"local"!==i.timeZone&&(m[d]=i.timeZone),m}(i,n.range,n.context);(function PQ(n,e,t){const i={method:n=n.toUpperCase()};return"GET"===n?e+=(-1===e.indexOf("?")?"?":"&")+new URLSearchParams(t):(i.body=new URLSearchParams(t),i.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(e,i).then(r=>{if(r.ok)return r.json().then(s=>[s,r],()=>{throw new Ij("Failure parsing JSON",r)});throw new Ij("Request failed",r)})})(i.method,i.url,r).then(([s,o])=>{e({rawEvents:s,response:o})},t)}}]}),NJ=lg({name:"simple-recurring-event",recurringTypes:[{parse(n,e){if(n.daysOfWeek||n.startTime||n.endTime||n.startRecur||n.endRecur){let i,t={daysOfWeek:n.daysOfWeek||null,startTime:n.startTime||null,endTime:n.endTime||null,startRecur:n.startRecur?e.createMarker(n.startRecur):null,endRecur:n.endRecur?e.createMarker(n.endRecur):null};return n.duration&&(i=n.duration),!i&&n.startTime&&n.endTime&&(i=function WK(n,e){return{years:n.years-e.years,months:n.months-e.months,days:n.days-e.days,milliseconds:n.milliseconds-e.milliseconds}}(n.endTime,n.startTime)),{allDayGuess:Boolean(!n.startTime&&!n.endTime),duration:i,typeData:t}}return null},expand(n,e,t){let i=Ub(e,{start:n.startRecur,end:n.endRecur});return i?function PJ(n,e,t,i){let r=n?ZU(n):null,s=Fi(t.start),o=t.end,d=[];for(;s<o;){let f;(!r||r[s.getUTCDay()])&&(f=e?i.add(s,e):s,d.push(f)),s=so(s,1)}return d}(n.daysOfWeek,n.startTime,i,t):[]}}],eventRefiners:{daysOfWeek:ge,startTime:Mn,endTime:Mn,duration:Mn,startRecur:ge,endRecur:ge}}),FJ=lg({name:"change-handler",optionChangeHandlers:{events(n,e){oz([n],e)},eventSources:oz}});function oz(n,e){let t=dP(e.getCurrentData().eventSources);if(1===t.length&&1===n.length&&Array.isArray(t[0]._raw)&&Array.isArray(n[0]))return void e.dispatch({type:"RESET_RAW_EVENTS",sourceId:t[0].sourceId,rawEvents:n[0]});let i=[];for(let r of n){let s=!1;for(let o=0;o<t.length;o+=1)if(t[o]._raw===r){t.splice(o,1),s=!0;break}s||i.push(r)}for(let r of t)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:r.sourceId});for(let r of i)e.calendarApi.addEventSource(r)}const BJ=[kJ,xJ,RJ,NJ,FJ,lg({name:"misc",isLoadingFuncs:[n=>ez(n.eventSources)],propSetHandlers:{dateProfile:function LJ(n,e){e.emitter.trigger("datesSet",Object.assign(Object.assign({},Dj(n.activeRange,e.dateEnv)),{view:e.viewApi}))},eventStore:function VJ(n,e){let{emitter:t}=e;t.hasHandlers("eventsSet")&&t.trigger("eventsSet",L_(n,e))}}})];class HJ{constructor(e,t){this.runTaskOption=e,this.drainedOption=t,this.queue=[],this.delayedRunner=new tP(this.drain.bind(this))}request(e,t){this.queue.push(e),this.delayedRunner.request(t)}pause(e){this.delayedRunner.pause(e)}resume(e,t){this.delayedRunner.resume(e,t)}drain(){let{queue:e}=this;for(;e.length;){let i,t=[];for(;i=e.shift();)this.runTask(i),t.push(i);this.drained(t)}}runTask(e){this.runTaskOption&&this.runTaskOption(e)}drained(e){this.drainedOption&&this.drainedOption(e)}}function UJ(n,e,t){let i;return i=/^(year|month)$/.test(n.currentRangeUnit)?n.currentRange:n.activeRange,t.formatRange(i.start,i.end,us(e.titleFormat||function jJ(n){let{currentRangeUnit:e}=n;if("year"===e)return{year:"numeric"};if("month"===e)return{year:"numeric",month:"long"};let t=QT(n.currentRange.start,n.currentRange.end);return null!==t&&t>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}(n)),{isEndExclusive:n.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}class zJ{constructor(e){this.computeCurrentViewData=fn(this._computeCurrentViewData),this.organizeRawLocales=fn(Zj),this.buildLocale=fn(jP),this.buildPluginHooks=function iJ(){let t,n=[],e=[];return(i,r)=>((!t||!id(i,n)||!id(r,e))&&(t=function nJ(n,e){let t={},i={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function r(s){for(let o of s){const d=o.name,f=t[d];void 0===f?(t[d]=o.id,r(o.deps),i=rJ(i,o)):f!==o.id&&console.warn(`Duplicate plugin '${d}'`)}}return n&&r(n),r(e),i}(i,r)),n=i,e=r,t)}(),this.buildDateEnv=fn(GJ),this.buildTheme=fn($J),this.parseToolbars=fn(AJ),this.buildViewSpecs=fn(cJ),this.buildDateProfileGenerator=XT(WJ),this.buildViewApi=fn(qJ),this.buildViewUiProps=XT(KJ),this.buildEventUiBySource=fn(YJ,rd),this.buildEventUiBases=fn(ZJ),this.parseContextBusinessHours=XT(QJ),this.buildTitle=fn(UJ),this.emitter=new hM,this.actionRunner=new HJ(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=A=>{this.actionRunner.request(A)},this.props=e,this.actionRunner.pause();let t={},i=this.computeOptionsData(e.optionOverrides,t,e.calendarApi),r=i.calendarOptions.initialView||i.pluginHooks.initialView,s=this.computeCurrentViewData(r,i,e.optionOverrides,t);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(s.options);let o=function q7(n,e){let t=n.initialDate;return null!=t?e.createMarker(t):WD(n.now,e)}(i.calendarOptions,i.dateEnv),d=s.dateProfileGenerator.build(o);ag(d.activeRange,o)||(o=d.currentRange.start);let f={dateEnv:i.dateEnv,options:i.calendarOptions,pluginHooks:i.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData};for(let A of i.pluginHooks.contextInit)A(f);let m=function gJ(n,e,t){let i=e?e.activeRange:null;return tz({},function EJ(n,e){let t=dj(e),i=[].concat(n.eventSources||[]),r=[];n.initialEvents&&i.unshift(n.initialEvents),n.events&&i.unshift(n.events);for(let s of i){let o=uj(s,e,t);o&&r.push(o)}return r}(n,t),i,t)}(i.calendarOptions,d,f),v={dynamicOptionOverrides:t,currentViewType:r,currentDate:o,dateProfile:d,businessHours:this.parseContextBusinessHours(f),eventSources:m,eventUiBases:{},eventStore:{defs:{},instances:{}},renderableEventStore:{defs:{},instances:{}},dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(f).selectionConfig},C=Object.assign(Object.assign({},f),v);for(let A of i.pluginHooks.reducers)Object.assign(v,A(null,null,C));$P(v,f)&&this.emitter.trigger("loading",!0),this.state=v,this.updateData(),this.actionRunner.resume()}resetOptions(e,t){let{props:i}=this;void 0===t?i.optionOverrides=e:(i.optionOverrides=Object.assign(Object.assign({},i.optionOverrides||{}),e),this.optionsForRefining.push(...t)),(void 0===t||t.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(e){let{props:t,state:i,emitter:r}=this,s=function fJ(n,e){return"SET_OPTION"===e.type?Object.assign(Object.assign({},n),{[e.optionName]:e.rawOptionValue}):n}(i.dynamicOptionOverrides,e),o=this.computeOptionsData(t.optionOverrides,s,t.calendarApi),d=function hJ(n,e){return"CHANGE_VIEW_TYPE"===e.type&&(n=e.viewType),n}(i.currentViewType,e),f=this.computeCurrentViewData(d,o,t.optionOverrides,s);t.calendarApi.currentDataManager=this,r.setThisContext(t.calendarApi),r.setOptions(f.options);let m={dateEnv:o.dateEnv,options:o.calendarOptions,pluginHooks:o.pluginHooks,calendarApi:t.calendarApi,dispatch:this.dispatch,emitter:r,getCurrentData:this.getCurrentData},{currentDate:v,dateProfile:C}=i;this.data&&this.data.dateProfileGenerator!==f.dateProfileGenerator&&(C=f.dateProfileGenerator.build(v)),v=function W7(n,e){return"CHANGE_DATE"===e.type?e.dateMarker:n}(v,e),C=function pJ(n,e,t,i){let r;switch(e.type){case"CHANGE_VIEW_TYPE":return i.build(e.dateMarker||t);case"CHANGE_DATE":return i.build(e.dateMarker);case"PREV":if(r=i.buildPrev(n,t),r.isValid)return r;break;case"NEXT":if(r=i.buildNext(n,t),r.isValid)return r}return n}(C,e,v,f.dateProfileGenerator),("PREV"===e.type||"NEXT"===e.type||!ag(C.currentRange,v))&&(v=C.currentRange.start);let A=function mJ(n,e,t,i){let r=t?t.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return tz(n,e.sources,r,i);case"REMOVE_EVENT_SOURCE":return function yJ(n,e){return P_(n,t=>t.sourceId!==e)}(n,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return t?nz(n,r,i):n;case"FETCH_EVENT_SOURCES":return GP(n,e.sourceIds?ZU(e.sourceIds):iz(n,i),r,e.isRefetch||!1,i);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return function wJ(n,e,t,i){let r=n[e];return r&&t===r.latestFetchId?Object.assign(Object.assign({},n),{[e]:Object.assign(Object.assign({},r),{isFetching:!1,fetchRange:i})}):n}(n,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return n}}(i.eventSources,e,C,m),M=function oQ(n,e,t,i,r){switch(e.type){case"RECEIVE_EVENTS":return function aQ(n,e,t,i,r,s){if(e&&t===e.latestFetchId){let o=qD(hj(r,e,s),e,s);return i&&(o=F_(o,i,s)),CP(gj(n,e.sourceId),o)}return n}(n,t[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,r);case"RESET_RAW_EVENTS":return function lQ(n,e,t,i,r){const{defIdMap:s,instanceIdMap:o}=function dQ(n){const{defs:e,instances:t}=n,i={},r={};for(let s in e){const o=e[s],{publicId:d}=o;d&&(i[d]=s)}for(let s in t){const d=e[t[s].defId],{publicId:f}=d;f&&(r[f]=s)}return{defIdMap:i,instanceIdMap:r}}(n);return F_(qD(hj(t,e,r),e,r,!1,s,o),i,r)}(n,t[e.sourceId],e.rawEvents,i.activeRange,r);case"ADD_EVENTS":return function cQ(n,e,t,i){return t&&(e=F_(e,t,i)),CP(n,e)}(n,e.eventStore,i?i.activeRange:null,r);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return CP(n,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return i?F_(n,i.activeRange,r):n;case"REMOVE_EVENTS":return function eQ(n,e){let{defs:t,instances:i}=n,r={},s={};for(let o in t)e.defs[o]||(r[o]=t[o]);for(let o in i)!e.instances[o]&&r[i[o].defId]&&(s[o]=i[o]);return{defs:r,instances:s}}(n,e.eventStore);case"REMOVE_EVENT_SOURCE":return gj(n,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return cM(n,s=>!s.sourceId);case"REMOVE_ALL_EVENTS":return{defs:{},instances:{}};default:return n}}(i.eventStore,e,A,C,m),H=ez(A)&&!f.options.progressiveEventRendering&&i.renderableEventStore||M,{eventUiSingleBase:U,selectionConfig:K}=this.buildViewUiProps(m),_e=this.buildEventUiBySource(A),je={dynamicOptionOverrides:s,currentViewType:d,currentDate:v,dateProfile:C,eventSources:A,eventStore:M,renderableEventStore:H,selectionConfig:K,eventUiBases:this.buildEventUiBases(H.defs,U,_e),businessHours:this.parseContextBusinessHours(m),dateSelection:CJ(i.dateSelection,e),eventSelection:DJ(i.eventSelection,e),eventDrag:SJ(i.eventDrag,e),eventResize:IJ(i.eventResize,e)},wt=Object.assign(Object.assign({},m),je);for(let Wt of o.pluginHooks.reducers)Object.assign(je,Wt(i,e,wt));let _t=$P(i,m),Bt=$P(je,m);!_t&&Bt?r.trigger("loading",!0):_t&&!Bt&&r.trigger("loading",!1),this.state=je,t.onAction&&t.onAction(e)}updateData(){let{props:e,state:t}=this,i=this.data,r=this.computeOptionsData(e.optionOverrides,t.dynamicOptionOverrides,e.calendarApi),s=this.computeCurrentViewData(t.currentViewType,r,e.optionOverrides,t.dynamicOptionOverrides),o=this.data=Object.assign(Object.assign(Object.assign({viewTitle:this.buildTitle(t.dateProfile,s.options,r.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},r),s),t),d=r.pluginHooks.optionChangeHandlers,f=i&&i.calendarOptions,m=r.calendarOptions;if(f&&f!==m){f.timeZone!==m.timeZone&&(t.eventSources=o.eventSources=function _J(n,e,t){let i=e?e.activeRange:null;return GP(n,iz(n,t),i,!0,t)}(o.eventSources,t.dateProfile,o),t.eventStore=o.eventStore=pj(o.eventStore,i.dateEnv,o.dateEnv),t.renderableEventStore=o.renderableEventStore=pj(o.renderableEventStore,i.dateEnv,o.dateEnv));for(let v in d)(-1!==this.optionsForHandling.indexOf(v)||f[v]!==m[v])&&d[v](m[v],o)}this.optionsForHandling=[],e.onData&&e.onData(o)}computeOptionsData(e,t,i){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&t===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:r,pluginHooks:s,localeDefaults:o,availableLocaleData:d,extra:f}=this.processRawCalendarOptions(e,t);az(f);let m=this.buildDateEnv(r.timeZone,r.locale,r.weekNumberCalculation,r.firstDay,r.weekText,s,d,r.defaultRangeSeparator),v=this.buildViewSpecs(s.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,o),C=this.buildTheme(r,s),A=this.parseToolbars(r,this.stableOptionOverrides,C,v,i);return this.stableCalendarOptionsData={calendarOptions:r,pluginHooks:s,dateEnv:m,viewSpecs:v,theme:C,toolbarConfig:A,localeDefaults:o,availableRawLocales:d.map}}processRawCalendarOptions(e,t){let{locales:i,locale:r}=cP([GD,e,t]),s=this.organizeRawLocales(i),d=this.buildLocale(r||s.defaultCode,s.map).options,f=this.buildPluginHooks(e.plugins||[],BJ),m=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},WU),qU),YU),f.listenerRefiners),f.optionRefiners),v={},C=cP([GD,d,e,t]),A={},M=this.currentCalendarOptionsInput,P=this.currentCalendarOptionsRefined,H=!1;for(let U in C)-1===this.optionsForRefining.indexOf(U)&&(C[U]===M[U]||O_[U]&&U in M&&O_[U](M[U],C[U]))?A[U]=P[U]:m[U]?(A[U]=m[U](C[U]),H=!0):v[U]=M[U];return H&&(this.currentCalendarOptionsInput=C,this.currentCalendarOptionsRefined=A,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=t),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:f,availableLocaleData:s,localeDefaults:d,extra:v}}_computeCurrentViewData(e,t,i,r){let s=t.viewSpecs[e];if(!s)throw new Error(`viewType "${e}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:o,extra:d}=this.processRawViewOptions(s,t.pluginHooks,t.localeDefaults,i,r);return az(d),{viewSpec:s,options:o,dateProfileGenerator:this.buildDateProfileGenerator({dateProfileGeneratorClass:s.optionDefaults.dateProfileGeneratorClass,duration:s.duration,durationUnit:s.durationUnit,usesMinMaxTime:s.optionDefaults.usesMinMaxTime,dateEnv:t.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:o.slotMinTime,slotMaxTime:o.slotMaxTime,showNonCurrentDates:o.showNonCurrentDates,dayCount:o.dayCount,dateAlignment:o.dateAlignment,dateIncrement:o.dateIncrement,hiddenDays:o.hiddenDays,weekends:o.weekends,nowInput:o.now,validRangeInput:o.validRange,visibleRangeInput:o.visibleRange,fixedWeekCount:o.fixedWeekCount}),viewApi:this.buildViewApi(e,this.getCurrentData,t.dateEnv)}}processRawViewOptions(e,t,i,r,s){let o=cP([GD,e.optionDefaults,i,r,e.optionOverrides,s]),d=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},WU),qU),YU),C7),t.listenerRefiners),t.optionRefiners),f={},m=this.currentViewOptionsInput,v=this.currentViewOptionsRefined,C=!1,A={};for(let M in o)o[M]===m[M]||O_[M]&&O_[M](o[M],m[M])?f[M]=v[M]:(o[M]===this.currentCalendarOptionsInput[M]||O_[M]&&O_[M](o[M],this.currentCalendarOptionsInput[M])?M in this.currentCalendarOptionsRefined&&(f[M]=this.currentCalendarOptionsRefined[M]):d[M]?f[M]=d[M](o[M]):A[M]=o[M],C=!0);return C&&(this.currentViewOptionsInput=o,this.currentViewOptionsRefined=f),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:A}}}function GJ(n,e,t,i,r,s,o,d){let f=jP(e||o.defaultCode,o.map);return new O7({calendarSystem:"gregory",timeZone:n,namedTimeZoneImpl:s.namedTimeZonedImpl,locale:f,weekNumberCalculation:t,firstDay:i,weekText:r,cmdFormatter:s.cmdFormatter,defaultSeparator:d})}function $J(n,e){return new(e.themeClasses[n.themeSystem]||cg)(n)}function WJ(n){return new(n.dateProfileGeneratorClass||rj)(n)}function qJ(n,e,t){return new MJ(n,e,t)}function YJ(n){return ef(n,e=>e.ui)}function ZJ(n,e,t){let i={"":e};for(let r in n){let s=n[r];s.sourceId&&t[s.sourceId]&&(i[r]=t[s.sourceId])}return i}function KJ(n){let{options:e}=n;return{eventUiSingleBase:dM({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:"boolean"==typeof e.eventOverlap?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},n),selectionConfig:dM({constraint:e.selectConstraint,overlap:"boolean"==typeof e.selectOverlap?e.selectOverlap:void 0,allow:e.selectAllow},n)}}function $P(n,e){for(let t of e.pluginHooks.isLoadingFuncs)if(t(n))return!0;return!1}function QJ(n){return function gQ(n,e){return qD(function mQ(n){let e;return e=!0===n?[{}]:Array.isArray(n)?n.filter(t=>t.daysOfWeek):"object"==typeof n&&n?[n]:[],e=e.map(t=>Object.assign(Object.assign({},pQ),t)),e}(n),null,e)}(n.options.businessHours,n)}function az(n,e){for(let t in n)console.warn(`Unknown option '${t}'`+(e?` for view '${e}'`:""))}class XJ extends lr{render(){return me("div",{className:"fc-toolbar-chunk"},...this.props.widgetGroups.map(t=>this.renderWidgetGroup(t)))}renderWidgetGroup(e){let{props:t}=this,{theme:i}=this.context,r=[],s=!0;for(let o of e){let{buttonName:d,buttonClick:f,buttonText:m,buttonIcon:v,buttonHint:C}=o;if("title"===d)s=!1,r.push(me("h2",{className:"fc-toolbar-title",id:t.titleId},t.title));else{let A=d===t.activeButton,M=!t.isTodayEnabled&&"today"===d||!t.isPrevEnabled&&"prev"===d||!t.isNextEnabled&&"next"===d,P=[`fc-${d}-button`,i.getClass("button")];A&&P.push(i.getClass("buttonActive")),r.push(me("button",{type:"button",title:"function"==typeof C?C(t.navUnit):C,disabled:M,"aria-pressed":A,className:P.join(" "),onClick:f},m||(v?me("span",{className:v,role:"img"}):"")))}}return r.length>1?me("div",{className:s&&i.getClass("buttonGroup")||""},...r):r[0]}}class lz extends lr{render(){let r,s,{model:e,extraClassName:t}=this.props,i=!1,o=e.sectionWidgets,d=o.center;return o.left?(i=!0,r=o.left):r=o.start,o.right?(i=!0,s=o.right):s=o.end,me("div",{className:[t||"","fc-toolbar",i?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",r||[]),this.renderSection("center",d||[]),this.renderSection("end",s||[]))}renderSection(e,t){let{props:i}=this;return me(XJ,{key:e,widgetGroups:t,title:i.title,navUnit:i.navUnit,activeButton:i.activeButton,isTodayEnabled:i.isTodayEnabled,isPrevEnabled:i.isPrevEnabled,isNextEnabled:i.isNextEnabled,titleId:i.titleId})}}class JJ extends lr{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,tf(this.props.elRef,e),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:e,state:t}=this,{aspectRatio:i}=e,s="",o="";return i?null!==t.availableWidth?s=t.availableWidth/i:o=1/i*100+"%":s=e.height||"",me("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:["fc-view-harness",i||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"].join(" "),style:{height:s,paddingBottom:o}},e.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class eee extends $b{constructor(e){super(e),this.handleSegClick=(t,i)=>{let{component:r}=this,{context:s}=r,o=Gb(i);if(o&&r.isValidSegDownEl(t.target)){let d=ro(t.target,".fc-event-forced-url"),f=d?d.querySelector("a[href]").href:"";s.emitter.trigger("eventClick",{el:i,event:new Li(r.context,o.eventRange.def,o.eventRange.instance),jsEvent:t,view:s.viewApi}),f&&!t.defaultPrevented&&(window.location.href=f)}},this.destroy=xU(e.el,"click",".fc-event",this.handleSegClick)}}class tee extends $b{constructor(e){super(e),this.handleEventElRemove=t=>{t===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(t,i)=>{Gb(i)&&(this.currentSegEl=i,this.triggerEvent("eventMouseEnter",t,i))},this.handleSegLeave=(t,i)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",t,i))},this.removeHoverListeners=function xK(n,e,t,i){let r;return xU(n,"mouseover",e,(s,o)=>{if(o!==r){r=o,t(s,o);let d=f=>{r=null,i(f,o),o.removeEventListener("mouseleave",d)};o.addEventListener("mouseleave",d)}})}(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(e,t,i){let{component:r}=this,{context:s}=r,o=Gb(i);(!t||r.isValidSegDownEl(t.target))&&s.emitter.trigger(e,{el:i,event:new Li(s,o.eventRange.def,o.eventRange.instance),jsEvent:t,view:s.viewApi})}}class nee extends oM{constructor(){super(...arguments),this.buildViewContext=fn(F7),this.buildViewPropTransformers=fn(ree),this.buildToolbarProps=fn(iee),this.headerRef={current:null},this.footerRef={current:null},this.interactionsStore={},this.state={viewLabelId:YT()},this.registerInteractiveComponent=(e,t)=>{let i=function VQ(n,e){return{component:n,el:e.el,useEventCenter:null==e.useEventCenter||e.useEventCenter,isHitComboAllowed:e.isHitComboAllowed||null}}(e,t),o=[eee,tee].concat(this.props.pluginHooks.componentInteractions).map(d=>new d(i));this.interactionsStore[e.uid]=o,TP[e.uid]=i},this.unregisterInteractiveComponent=e=>{let t=this.interactionsStore[e.uid];if(t){for(let i of t)i.destroy();delete this.interactionsStore[e.uid]}delete TP[e.uid]},this.resizeRunner=new tP(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=e=>{let{options:t}=this.props;t.handleWindowResize&&e.target===window&&this.resizeRunner.request(t.windowResizeDelay)}}render(){let d,{props:e}=this,{toolbarConfig:t,options:i}=e,r=this.buildToolbarProps(e.viewSpec,e.dateProfile,e.dateProfileGenerator,e.currentDate,WD(e.options.now,e.dateEnv),e.viewTitle),s=!1,o="";e.isHeightAuto||e.forPrint?o="":null!=i.height?s=!0:null!=i.contentHeight?o=i.contentHeight:d=Math.max(i.aspectRatio,.5);let f=this.buildViewContext(e.viewSpec,e.viewApi,e.options,e.dateProfileGenerator,e.dateEnv,e.theme,e.pluginHooks,e.dispatch,e.getCurrentData,e.emitter,e.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),m=t.header&&t.header.hasTitle?this.state.viewLabelId:void 0;return me(og.Provider,{value:f},t.header&&me(lz,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:t.header,titleId:m},r)),me(JJ,{liquid:s,height:o,aspectRatio:d,labeledById:m},this.renderView(e),this.buildAppendContent()),t.footer&&me(lz,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:t.footer,titleId:""},r)))}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map(i=>new i(e)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:t}=e.pluginHooks;for(let i in t)t[i](e[i],e)}componentDidUpdate(e){let{props:t}=this,{propSetHandlers:i}=t.pluginHooks;for(let r in i)t[r]!==e[r]&&i[r](t[r],t)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let e of this.calendarInteractions)e.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:e}=this;return me(Wi,{},...e.pluginHooks.viewContainerAppends.map(i=>i(e)))}renderView(e){let{pluginHooks:t}=e,{viewSpec:i}=e,r={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},s=this.buildViewPropTransformers(t.viewPropsTransformers);for(let d of s)Object.assign(r,d.transform(r,e));return me(i.component,Object.assign({},r))}}function iee(n,e,t,i,r,s){let o=t.build(r,void 0,!1),d=t.buildPrev(e,i,!1),f=t.buildNext(e,i,!1);return{title:s,activeButton:n.type,navUnit:n.singleUnit,isTodayEnabled:o.isValid&&!ag(e.currentRange,r),isPrevEnabled:d.isValid,isNextEnabled:f.isValid}}function ree(n){return n.map(e=>new e)}class see extends class BQ{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(e){this.currentDataManager.dispatch(e)}get view(){return this.getCurrentData().viewApi}batchRendering(e){e()}updateSize(){this.trigger("_resize",!0)}setOption(e,t){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:t})}getOption(e){return this.currentDataManager.currentCalendarOptionsInput[e]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(e,t){let{currentDataManager:i}=this;i.currentCalendarOptionsRefiners[e]?i.emitter.on(e,t):console.warn(`Unknown listener name '${e}'`)}off(e,t){this.currentDataManager.emitter.off(e,t)}trigger(e,...t){this.currentDataManager.emitter.trigger(e,...t)}changeView(e,t){this.batchRendering(()=>{if(this.unselect(),t)if(t.start&&t.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:t});else{let{dateEnv:i}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:i.createMarker(t)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})})}zoomTo(e,t){let r;r=this.getCurrentData().viewSpecs[t=t||"day"]||this.getUnitViewSpec(t),this.unselect(),this.dispatch(r?{type:"CHANGE_VIEW_TYPE",viewType:r.type,dateMarker:e}:{type:"CHANGE_DATE",dateMarker:e})}getUnitViewSpec(e){let s,o,{viewSpecs:t,toolbarConfig:i}=this.getCurrentData(),r=[].concat(i.header?i.header.viewsWithButtons:[],i.footer?i.footer.viewsWithButtons:[]);for(let d in t)r.push(d);for(s=0;s<r.length;s+=1)if(o=t[r[s]],o&&o.singleUnit===e)return o;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})}nextYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})}today(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:WD(e.calendarOptions.now,e.dateEnv)})}gotoDate(e){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.createMarker(e)})}incrementDate(e){let t=this.getCurrentData(),i=Mn(e);i&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.add(t.currentDate,i)}))}getDate(){let e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)}formatDate(e,t){let{dateEnv:i}=this.getCurrentData();return i.format(i.createMarker(e),us(t))}formatRange(e,t,i){let{dateEnv:r}=this.getCurrentData();return r.formatRange(r.createMarker(e),r.createMarker(t),us(i),i)}formatIso(e,t){let{dateEnv:i}=this.getCurrentData();return i.formatIso(i.createMarker(e),{omitTime:t})}select(e,t){let i;i=null==t?null!=e.start?e:{start:e,end:null}:{start:e,end:t};let r=this.getCurrentData(),s=function TQ(n,e,t){let i=function MQ(n,e){let{refined:t,extra:i}=iM(n,AQ),r=t.start?e.createMarkerMeta(t.start):null,s=t.end?e.createMarkerMeta(t.end):null,{allDay:o}=t;return null==o&&(o=r&&r.isTimeUnspecified&&(!s||s.isTimeUnspecified)),Object.assign({range:{start:r?r.marker:null,end:s?s.marker:null},allDay:o},i)}(n,e),{range:r}=i;if(!r.start)return null;if(!r.end){if(null==t)return null;r.end=e.add(r.start,t)}return i}(i,r.dateEnv,Mn({days:1}));s&&(this.dispatch({type:"SELECT_DATES",selection:s}),mj(s,null,r))}unselect(e){let t=this.getCurrentData();t.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),function _Q(n,e){e.emitter.trigger("unselect",{jsEvent:n?n.origEvent:null,view:e.viewApi||e.calendarApi.view})}(e,t))}addEvent(e,t){if(e instanceof Li){let o=e._def,d=e._instance;return this.getCurrentData().eventStore.defs[o.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:wP({def:o,instance:d})}),this.triggerEventAdd(e)),e}let r,i=this.getCurrentData();if(t instanceof zb)r=t.internalEventSource;else if("boolean"==typeof t)t&&([r]=dP(i.eventSources));else if(null!=t){let o=this.getEventSourceById(t);if(!o)return console.warn(`Could not find an event source with ID "${t}"`),null;r=o.internalEventSource}let s=oj(e,r,i,!1);if(s){let o=new Li(i,s.def,s.def.recurringDef?null:s.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:wP(s)}),this.triggerEventAdd(o),o}return null}triggerEventAdd(e){let{emitter:t}=this.getCurrentData();t.trigger("eventAdd",{event:e,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:yj(e)})}})}getEventById(e){let t=this.getCurrentData(),{defs:i,instances:r}=t.eventStore;e=String(e);for(let s in i){let o=i[s];if(o.publicId===e){if(o.recurringDef)return new Li(t,o,null);for(let d in r){let f=r[d];if(f.defId===o.defId)return new Li(t,o,f)}}}return null}getEvents(){let e=this.getCurrentData();return L_(e.eventStore,e)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let e=this.getCurrentData(),t=e.eventSources,i=[];for(let r in t)i.push(new zb(e,t[r]));return i}getEventSourceById(e){let t=this.getCurrentData(),i=t.eventSources;e=String(e);for(let r in i)if(i[r].publicId===e)return new zb(t,i[r]);return null}addEventSource(e){let t=this.getCurrentData();if(e instanceof zb)return t.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;let i=uj(e,t);return i?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[i]}),new zb(t,i)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(e){let t=Mn(e);t&&this.trigger("_scrollRequest",{time:t})}}{constructor(e,t={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=i=>{switch(i.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=i=>{this.currentData=i,this.renderRunner.request(i.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:i}=this;sM(()=>{tg(me(LQ,{options:i.calendarOptions,theme:i.theme,emitter:i.emitter},(r,s,o,d)=>(this.setClassNames(r),this.setHeight(s),me(JU.Provider,{value:this.customContentRenderId},me(nee,Object.assign({isHeightAuto:o,forPrint:d},i))))),this.el)})}else this.isRendered&&(this.isRendered=!1,tg(null,this.el),this.setClassNames([]),this.setHeight(""))},function CK(n){n.isConnected&&n.getRootNode&&SU(n.getRootNode())}(e),this.el=e,this.renderRunner=new tP(this.handleRenderRequest),new zJ({optionOverrides:t,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){sM(()=>{super.updateSize()})}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(e,t){this.currentDataManager.resetOptions(e,t)}setClassNames(e){if(!id(e,this.currentClassNames)){let{classList:t}=this.el;for(let i of this.currentClassNames)t.remove(i);for(let i of e)t.add(i);this.currentClassNames=e}}setHeight(e){TU(this.el,"height",e)}}const oee=["*"],aee=["rootEl"],Wb=function(n){return{$implicit:n}};function lee(n,e){if(1&n&&(c.TgZ(0,"div",1,2),c.GkF(2,3),c.qZA()),2&n){const t=c.oxw();c.Q6J("ngClass",t.elClasses||"")("ngStyle",t.elStyle||null),c.xp6(2),c.Q6J("ngTemplateOutlet",t.template)("ngTemplateOutletContext",c.VKq(4,Wb,t.renderProps))}}function cee(n,e){if(1&n&&(c.TgZ(0,"span",1,2),c.GkF(2,3),c.qZA()),2&n){const t=c.oxw();c.Q6J("ngClass",t.elClasses||"")("ngStyle",t.elStyle||null),c.xp6(2),c.Q6J("ngTemplateOutlet",t.template)("ngTemplateOutletContext",c.VKq(4,Wb,t.renderProps))}}function uee(n,e){if(1&n&&(c.TgZ(0,"a",1,2),c.GkF(2,3),c.qZA()),2&n){const t=c.oxw();c.Q6J("ngClass",t.elClasses||"")("ngStyle",t.elStyle||null),c.xp6(2),c.Q6J("ngTemplateOutlet",t.template)("ngTemplateOutletContext",c.VKq(4,Wb,t.renderProps))}}function dee(n,e){if(1&n&&(c.TgZ(0,"tr",1,2),c.GkF(2,3),c.qZA()),2&n){const t=c.oxw();c.Q6J("ngClass",t.elClasses||"")("ngStyle",t.elStyle||null),c.xp6(2),c.Q6J("ngTemplateOutlet",t.template)("ngTemplateOutletContext",c.VKq(4,Wb,t.renderProps))}}function hee(n,e){if(1&n&&(c.TgZ(0,"th",1,2),c.GkF(2,3),c.qZA()),2&n){const t=c.oxw();c.Q6J("ngClass",t.elClasses||"")("ngStyle",t.elStyle||null),c.xp6(2),c.Q6J("ngTemplateOutlet",t.template)("ngTemplateOutletContext",c.VKq(4,Wb,t.renderProps))}}function fee(n,e){if(1&n&&(c.TgZ(0,"td",1,2),c.GkF(2,3),c.qZA()),2&n){const t=c.oxw();c.Q6J("ngClass",t.elClasses||"")("ngStyle",t.elStyle||null),c.xp6(2),c.Q6J("ngTemplateOutlet",t.template)("ngTemplateOutletContext",c.VKq(4,Wb,t.renderProps))}}const pee=["dayHeaderContent"],gee=["dayCellContent"],mee=["weekNumberContent"],_ee=["nowIndicatorContent"],yee=["eventContent"],vee=["slotLaneContent"],bee=["slotLabelContent"],wee=["allDayContent"],Eee=["moreLinkContent"],Cee=["noEventsContent"],Dee=["resourceAreaHeaderContent"],See=["resourceGroupLabelContent"],Iee=["resourceLabelContent"],Aee=["resourceLaneContent"],Tee=["resourceGroupLaneContent"];function Mee(n,e){if(1&n&&c._UZ(0,"transport-container",1),2&n){const t=e.$implicit,i=c.oxw();c.Q6J("inPlaceOf",t.containerEl)("reportEl",t.reportNewContainerEl)("elTag",t.elTag)("elClasses",t.elClasses)("elStyle",t.elStyle)("elAttrs",t.elAttrs)("template",i.templateMap[t.generatorName])("renderProps",t.renderProps)}}const uz={headerToolbar:!0,footerToolbar:!0,events:!0,eventSources:!0,resources:!0},kee=["events","eventSources","resources"],xee=Object.prototype.hasOwnProperty;function yM(n){return Array.isArray(n)?n.map(yM):n instanceof Date?new Date(n.valueOf()):"object"==typeof n&&n?dz(n,yM):n}function dz(n,e){const t={};for(const i in n)xee.call(n,i)&&(t[i]=e(n[i],i));return t}function WP(n,e){if(n===e)return!0;if(n&&e&&"object"==typeof n&&"object"==typeof e){if(n.constructor!==e.constructor)return!1;var t,i,r;if(Array.isArray(n)){if((t=n.length)!=e.length)return!1;for(i=t;0!=i--;)if(!WP(n[i],e[i]))return!1;return!0}if(n.constructor===RegExp)return n.source===e.source&&n.flags===e.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===e.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===e.toString();if((t=(r=Object.keys(n)).length)!==Object.keys(e).length)return!1;for(i=t;0!=i--;)if(!Object.prototype.hasOwnProperty.call(e,r[i]))return!1;for(i=t;0!=i--;){var s=r[i];if(!WP(n[s],e[s]))return!1}return!0}return n!=n&&e!=e}const vM=typeof document<"u"?document.createDocumentFragment():null;let Ree=(()=>{class n{constructor(t){this.element=t}ngAfterViewInit(){vM&&vM.appendChild(this.element.nativeElement)}ngOnDestroy(){vM&&vM.removeChild(this.element.nativeElement)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq))},n.\u0275cmp=c.Xpm({type:n,selectors:[["offscreen-fragment"]],ngContentSelectors:oee,decls:1,vars:0,template:function(t,i){1&t&&(c.F$t(),c.Hsn(0))},encapsulation:2}),n})();const qb=typeof document<"u"?document.createDocumentFragment():null;let Oee=(()=>{class n{ngAfterViewInit(){const t=this.rootElRef?.nativeElement;hz(t,this.inPlaceOf),qP(t,void 0,this.elAttrs),this.inPlaceOf.style.display="none",this.reportEl(t)}ngOnChanges(t){const i=this.rootElRef?.nativeElement;if(i)if(this.inPlaceOf.parentNode!==qb)hz(i,this.inPlaceOf),qP(i,void 0,this.elAttrs),this.reportEl(i);else{const r=t.elAttrs;r&&qP(i,r.previousValue,r.currentValue)}}ngOnDestroy(){this.inPlaceOf.parentNode===qb&&qb&&qb.removeChild(this.inPlaceOf),this.reportEl(null)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["transport-container"]],viewQuery:function(t,i){if(1&t&&c.Gf(aee,5),2&t){let r;c.iGM(r=c.CRH())&&(i.rootElRef=r.first)}},inputs:{inPlaceOf:"inPlaceOf",reportEl:"reportEl",elTag:"elTag",elClasses:"elClasses",elStyle:"elStyle",elAttrs:"elAttrs",template:"template",renderProps:"renderProps"},features:[c.TTD],decls:6,vars:6,consts:[[3,"ngIf"],[3,"ngClass","ngStyle"],["rootEl",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,i){1&t&&(c.YNc(0,lee,3,6,"ng-template",0),c.YNc(1,cee,3,6,"ng-template",0),c.YNc(2,uee,3,6,"ng-template",0),c.YNc(3,dee,3,6,"ng-template",0),c.YNc(4,hee,3,6,"ng-template",0),c.YNc(5,fee,3,6,"ng-template",0)),2&t&&(c.Q6J("ngIf","div"==i.elTag),c.xp6(1),c.Q6J("ngIf","span"==i.elTag),c.xp6(1),c.Q6J("ngIf","a"==i.elTag),c.xp6(1),c.Q6J("ngIf","tr"==i.elTag),c.xp6(1),c.Q6J("ngIf","th"==i.elTag),c.xp6(1),c.Q6J("ngIf","td"==i.elTag))},dependencies:[ii,_n,Hc,ud],encapsulation:2}),n})();function hz(n,e){e.parentNode?.insertBefore(n,e.nextSibling),qb&&qb.appendChild(e)}function qP(n,e={},t={}){for(const i in e)i in t||(n[i]=null);for(const i in t)n[i]=t[i]}let Nee=(()=>{class n{constructor(t,i){this.element=t,this.calendar=null,this.optionSnapshot={},this.customRenderingMap=new Map,this.templateMap={};const r=new XX;r.subscribe(s=>{this.customRenderingMap=s,this.customRenderingArray=void 0,i.detectChanges()}),this.handleCustomRendering=r.handle.bind(r),this.templateMap=this}ngAfterViewInit(){const{deepChangeDetection:t}=this,i={...this.options,...this.buildInputOptions()};this.optionSnapshot=dz(i,(d,f)=>t&&uz[f]?yM(d):d);const r=this.element.nativeElement,s=this.calendar=new see(r,{...i,...this.buildExtraOptions()}),o=r.closest("ion-content");o&&o.componentOnReady?o.componentOnReady().then(()=>{window.requestAnimationFrame(()=>{s.render()})}):s.render()}ngDoCheck(){if(this.calendar){const{deepChangeDetection:t,optionSnapshot:i}=this,r={...this.options,...this.buildInputOptions()},s={},o=[];for(const f in r)if(r.hasOwnProperty(f)){let m=r[f];t&&uz[f]?WP(i[f],m)||(i[f]=yM(m),o.push(f)):i[f]!==m&&(i[f]=m,o.push(f)),s[f]=m}const d=Object.keys(i);for(const f of d)f in r||(delete i[f],o.push(f));o.length&&(this.calendar.pauseRendering(),this.calendar.resetOptions({...s,...this.buildExtraOptions()},o))}}ngAfterContentChecked(){this.calendar&&this.calendar.resumeRendering()}ngOnDestroy(){this.calendar&&(this.calendar.destroy(),this.calendar=null)}get customRenderings(){return this.customRenderingArray||(this.customRenderingArray=[...this.customRenderingMap.values()])}getApi(){return this.calendar}buildInputOptions(){const t={};for(const i of kee){const r=this[i];null!=r&&(t[i]=r)}return t}buildExtraOptions(){return{handleCustomRendering:this.handleCustomRendering,customRenderingMetaMap:this.templateMap,customRenderingReplaces:!0}}trackCustomRendering(t,i){return i.id}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.sBO))},n.\u0275cmp=c.Xpm({type:n,selectors:[["full-calendar"]],contentQueries:function(t,i,r){if(1&t&&(c.Suo(r,pee,7),c.Suo(r,gee,7),c.Suo(r,mee,7),c.Suo(r,_ee,7),c.Suo(r,yee,7),c.Suo(r,vee,7),c.Suo(r,bee,7),c.Suo(r,wee,7),c.Suo(r,Eee,7),c.Suo(r,Cee,7),c.Suo(r,Dee,7),c.Suo(r,See,7),c.Suo(r,Iee,7),c.Suo(r,Aee,7),c.Suo(r,Tee,7)),2&t){let s;c.iGM(s=c.CRH())&&(i.dayHeaderContent=s.first),c.iGM(s=c.CRH())&&(i.dayCellContent=s.first),c.iGM(s=c.CRH())&&(i.weekNumberContent=s.first),c.iGM(s=c.CRH())&&(i.nowIndicatorContent=s.first),c.iGM(s=c.CRH())&&(i.eventContent=s.first),c.iGM(s=c.CRH())&&(i.slotLaneContent=s.first),c.iGM(s=c.CRH())&&(i.slotLabelContent=s.first),c.iGM(s=c.CRH())&&(i.allDayContent=s.first),c.iGM(s=c.CRH())&&(i.moreLinkContent=s.first),c.iGM(s=c.CRH())&&(i.noEventsContent=s.first),c.iGM(s=c.CRH())&&(i.resourceAreaHeaderContent=s.first),c.iGM(s=c.CRH())&&(i.resourceGroupLabelContent=s.first),c.iGM(s=c.CRH())&&(i.resourceLabelContent=s.first),c.iGM(s=c.CRH())&&(i.resourceLaneContent=s.first),c.iGM(s=c.CRH())&&(i.resourceGroupLaneContent=s.first)}},inputs:{options:"options",deepChangeDetection:"deepChangeDetection",events:"events",eventSources:"eventSources",resources:"resources"},decls:2,vars:2,consts:[[3,"inPlaceOf","reportEl","elTag","elClasses","elStyle","elAttrs","template","renderProps",4,"ngFor","ngForOf","ngForTrackBy"],[3,"inPlaceOf","reportEl","elTag","elClasses","elStyle","elAttrs","template","renderProps"]],template:function(t,i){1&t&&(c.TgZ(0,"offscreen-fragment"),c.YNc(1,Mee,1,8,"transport-container",0),c.qZA()),2&t&&(c.xp6(1),c.Q6J("ngForOf",i.customRenderings)("ngForTrackBy",i.trackCustomRendering))},dependencies:[Ree,Oee,Dn],encapsulation:2}),n})(),Pee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[xo]]}),n})();const fz_firebase={apiKey:"AIzaSyBt6DKtS23ahvJ31As-RihYXbdg4fn0TYw",authDomain:"travel-idea-241c9.firebaseapp.com",projectId:"travel-idea-241c9",storageBucket:"travel-idea-241c9.appspot.com",messagingSenderId:"662890777709",appId:"1:662890777709:web:5963c386e8bd1881634364",measurementId:"G-85EY16EZQY"};class Fee extends V_{constructor(){super(...arguments),this.headerElRef={current:null}}renderSimpleLayout(e,t){let{props:i,context:r}=this,s=[],o=jj(r.options);return e&&s.push({type:"header",key:"header",isSticky:o,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),s.push({type:"body",key:"body",liquid:!0,chunk:{content:t}}),me(ej,{elClasses:["fc-daygrid"],viewSpec:r.viewSpec},me(zj,{liquid:!i.isHeightAuto&&!i.forPrint,collapsibleWidth:i.forPrint,cols:[],sections:s}))}renderHScrollLayout(e,t,i,r){let s=this.context.pluginHooks.scrollGridImpl;if(!s)throw new Error("No ScrollGrid implementation");let{props:o,context:d}=this,f=!o.forPrint&&jj(d.options),m=!o.forPrint&&function RX(n){let{stickyFooterScrollbar:e}=n;return(null==e||"auto"===e)&&(e="auto"===n.height||"auto"===n.viewHeight),e}(d.options),v=[];return e&&v.push({type:"header",key:"header",isSticky:f,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),v.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:t}]}),m&&v.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:xX}]}),me(ej,{elClasses:["fc-daygrid"],viewSpec:d.viewSpec},me(s,{liquid:!o.isHeightAuto&&!o.forPrint,forPrint:o.forPrint,collapsibleWidth:o.forPrint,colGroups:[{cols:[{span:i,minWidth:r}]}],sections:v}))}}function bM(n,e){let t=[];for(let i=0;i<e;i+=1)t[i]=[];for(let i of n)t[i.row].push(i);return t}function wM(n,e){let t=[];for(let i=0;i<e;i+=1)t[i]=[];for(let i of n)t[i.firstCol].push(i);return t}function pz(n,e){let t=[];if(n){for(let i=0;i<e;i+=1)t[i]={affectedInstances:n.affectedInstances,isEvent:n.isEvent,segs:[]};for(let i of n.segs)t[i.row].segs.push(i)}else for(let i=0;i<e;i+=1)t[i]=null;return t}const gz=us({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function mz(n){let{display:e}=n.eventRange.ui;return"list-item"===e||"auto"===e&&!n.eventRange.def.allDay&&n.firstCol===n.lastCol&&n.isStart&&n.isEnd}class _z extends lr{render(){let{props:e}=this;return me(NX,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:gz,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class yz extends lr{render(){let{props:e,context:t}=this,{options:i}=t,{seg:r}=e,o=Ej(r,i.eventTimeFormat||gz,t,!0,e.defaultDisplayEventEnd);return me(HP,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:Cj(e.seg,t),defaultGenerator:Lee,timeText:o,isResizing:!1,isDateSelecting:!1}))}}function Lee(n){return me(Wi,null,me("div",{className:"fc-daygrid-event-dot",style:{borderColor:n.borderColor||n.backgroundColor}}),n.timeText&&me("div",{className:"fc-event-time"},n.timeText),me("div",{className:"fc-event-title"},n.event.title||me(Wi,null,"\xa0")))}class Vee extends lr{constructor(){super(...arguments),this.compileSegs=fn(Bee)}render(){let{props:e}=this,{allSegs:t,invisibleSegs:i}=this.compileSegs(e.singlePlacements);return me($X,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:t,hiddenSegs:i,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let r=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return me(Wi,null,t.map(s=>{let o=s.eventRange.instance.instanceId;return me("div",{className:"fc-daygrid-event-harness",key:o,style:{visibility:r[o]?"hidden":""}},mz(s)?me(yz,Object.assign({seg:s,isDragging:!1,isSelected:o===e.eventSelection,defaultDisplayEventEnd:!1},YD(s,e.todayRange))):me(_z,Object.assign({seg:s,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:o===e.eventSelection,defaultDisplayEventEnd:!1},YD(s,e.todayRange))))}))}})}}function Bee(n){let e=[],t=[];for(let i of n)e.push(i.seg),i.isVisible||t.push(i.seg);return{allSegs:e,invisibleSegs:t}}const Hee=us({week:"narrow"});class Uee extends V_{constructor(){super(...arguments),this.rootElRef={current:null},this.state={dayNumberId:YT()},this.handleRootEl=e=>{tf(this.rootElRef,e),tf(this.props.elRef,e)}}render(){let{context:e,props:t,state:i,rootElRef:r}=this,{options:s,dateEnv:o}=e,{date:d,dateProfile:f}=t;const m=t.showDayNumber&&function zee(n,e,t){const{start:i,end:r}=e,s=ig(r,-1),o=t.getYear(i),d=t.getMonth(i),f=t.getYear(s),m=t.getMonth(s);return!(o===f&&d===m)&&Boolean(n.valueOf()===i.valueOf()||1===t.getDay(n)&&n.valueOf()<r.valueOf())}(d,f.currentRange,o);return me(Gj,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...t.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},t.extraDataAttrs),t.showDayNumber?{"aria-labelledby":i.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:jee,date:d,dateProfile:f,todayRange:t.todayRange,showDayNumber:t.showDayNumber,isMonthStart:m,extraRenderProps:t.extraRenderProps},(v,C)=>me("div",{ref:t.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:t.minHeight}},t.showWeekNumber&&me(UX,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:xP(e,d,"week"),date:d,defaultFormat:Hee}),!C.isDisabled&&(t.showDayNumber||$j(s)||t.forceDayTop)?me("div",{className:"fc-daygrid-day-top"},me(v,{elTag:"a",elClasses:["fc-daygrid-day-number",m&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},xP(e,d)),{id:i.dayNumberId})})):t.showDayNumber?me("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},me("a",{className:"fc-daygrid-day-number"},"\xa0")):void 0,me("div",{className:"fc-daygrid-day-events",ref:t.fgContentElRef},t.fgContent,me("div",{className:"fc-daygrid-day-bottom",style:{marginTop:t.moreMarginTop}},me(Vee,{allDayDate:d,singlePlacements:t.singlePlacements,moreCnt:t.moreCnt,alignmentElRef:r,alignGridTop:!t.showDayNumber,extraDateSpan:t.extraDateSpan,dateProfile:t.dateProfile,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,todayRange:t.todayRange}))),me("div",{className:"fc-daygrid-day-bg"},t.bgContent)))}}function jee(n){return n.dayNumberText||me(Wi,null,"\xa0")}function vz(n){return n.eventRange.instance.instanceId+":"+n.firstCol}function bz(n){return vz(n)+":"+n.lastCol}function Yb(n,e,t,i){if(n.firstCol===e&&n.lastCol===t-1)return n;let r=n.eventRange,s=r.range,o=Ub(s,{start:i[e].date,end:so(i[t-1].date,1)});return Object.assign(Object.assign({},n),{firstCol:e,lastCol:t-1,eventRange:{def:r.def,ui:Object.assign(Object.assign({},r.ui),{durationEditable:!1}),instance:r.instance,range:o},isStart:n.isStart&&o.start.valueOf()===s.start.valueOf(),isEnd:n.isEnd&&o.end.valueOf()===s.end.valueOf()})}class qee extends class nX{constructor(e=(t=>t.thickness||1)){this.getEntryThickness=e,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(e){let t=[];for(let i of e)this.insertEntry(i,t);return t}insertEntry(e,t){let i=this.findInsertion(e);this.isInsertionValid(i,e)?this.insertEntryAt(e,i):this.handleInvalidInsertion(i,e,t)}isInsertionValid(e,t){return(-1===this.maxCoord||e.levelCoord+this.getEntryThickness(t)<=this.maxCoord)&&(-1===this.maxStackCnt||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,t,i){if(this.allowReslicing&&e.touchingEntry){const r=Object.assign(Object.assign({},t),{span:FP(t.span,e.touchingEntry.span)});i.push(r),this.splitEntry(t,e.touchingEntry,i)}else i.push(t)}splitEntry(e,t,i){let r=e.span,s=t.span;r.start<s.start&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:r.start,end:s.start}},i),r.end>s.end&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:s.end,end:r.end}},i)}insertEntryAt(e,t){let{entriesByLevel:i,levelCoords:r}=this;-1===t.lateral?(LP(r,t.level,t.levelCoord),LP(i,t.level,[e])):LP(i[t.level],t.lateral,e),this.stackCnts[ZD(e)]=t.stackCnt}findInsertion(e){let{levelCoords:t,entriesByLevel:i,strictOrder:r,stackCnts:s}=this,o=t.length,d=0,f=-1,m=-1,v=null,C=0;for(let P=0;P<o;P+=1){const H=t[P];if(!r&&H>=d+this.getEntryThickness(e))break;let K,U=i[P],_e=Oj(U,e.span.start,Rj),Oe=_e[0]+_e[1];for(;(K=U[Oe])&&K.span.start<e.span.end;){let je=H+this.getEntryThickness(K);je>d&&(d=je,v=K,f=P,m=Oe),je===d&&(C=Math.max(C,s[ZD(K)]+1)),Oe+=1}}let A=0;if(v)for(A=f+1;A<o&&t[A]<d;)A+=1;let M=-1;return A<o&&t[A]===d&&(M=Oj(i[A],e.span.end,Rj)[0]),{touchingLevel:f,touchingLateral:m,touchingEntry:v,stackCnt:C,levelCoord:d,level:A,lateral:M}}toRects(){let{entriesByLevel:e,levelCoords:t}=this,i=e.length,r=[];for(let s=0;s<i;s+=1){let o=e[s],d=t[s];for(let f of o)r.push(Object.assign(Object.assign({},f),{thickness:this.getEntryThickness(f),levelCoord:d}))}return r}}{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const t=super.addSegs(e),{entriesByLevel:i}=this,r=s=>!this.forceHidden[ZD(s)];for(let s=0;s<i.length;s+=1)i[s]=i[s].filter(r);return t}handleInvalidInsertion(e,t,i){const{entriesByLevel:r,forceHidden:s}=this,{touchingEntry:o,touchingLevel:d,touchingLateral:f}=e;if(this.hiddenConsumes&&o){const m=ZD(o);if(!s[m])if(this.allowReslicing){const v=Object.assign(Object.assign({},o),{span:FP(o.span,t.span)});s[ZD(v)]=!0,r[d][f]=v,i.push(v),this.splitEntry(o,t,i)}else s[m]=!0,i.push(o)}super.handleInvalidInsertion(e,t,i)}}class wz extends V_{constructor(){super(...arguments),this.cellElRefs=new B_,this.frameElRefs=new B_,this.fgElRefs=new B_,this.segHarnessRefs=new B_,this.rootElRef={current:null},this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:t,context:i}=this,{options:r}=i,s=e.cells.length,o=wM(e.businessHourSegs,s),d=wM(e.bgEventSegs,s),f=wM(this.getHighlightSegs(),s),m=wM(this.getMirrorSegs(),s),{singleColPlacements:v,multiColPlacements:C,moreCnts:A,moreMarginTops:M}=function Gee(n,e,t,i,r,s,o){let d=new qee(K=>r[n[K.index].eventRange.instance.instanceId+":"+K.span.start+":"+(K.span.end-1)]||1);d.allowReslicing=!0,d.strictOrder=i,!0===e||!0===t?(d.maxCoord=s,d.hiddenConsumes=!0):"number"==typeof e?d.maxStackCnt=e:"number"==typeof t&&(d.maxStackCnt=t,d.hiddenConsumes=!0);let f=[],m=[];for(let K=0;K<n.length;K+=1){let _e=n[K],Oe=bz(_e);null!=r[Oe]?f.push({index:K,span:{start:_e.firstCol,end:_e.lastCol+1}}):m.push(_e)}let v=d.addSegs(f),C=d.toRects(),{singleColPlacements:A,multiColPlacements:M,leftoverMargins:P}=function $ee(n,e,t){let i=function Wee(n,e){let t=[];for(let i=0;i<e;i+=1)t.push([]);for(let i of n)for(let r=i.span.start;r<i.span.end;r+=1)t[r].push(i);return t}(n,t.length),r=[],s=[],o=[];for(let d=0;d<t.length;d+=1){let f=i[d],m=[],v=0,C=0;for(let M of f)m.push({seg:Yb(e[M.index],d,d+1,t),isVisible:!0,isAbsolute:!1,absoluteTop:M.levelCoord,marginTop:M.levelCoord-v}),v=M.levelCoord+M.thickness;let A=[];v=0,C=0;for(let M of f){let P=e[M.index],U=M.span.start===d;C+=M.levelCoord-v,v=M.levelCoord+M.thickness,M.span.end-M.span.start>1?(C+=M.thickness,U&&A.push({seg:Yb(P,M.span.start,M.span.end,t),isVisible:!0,isAbsolute:!0,absoluteTop:M.levelCoord,marginTop:0})):U&&(A.push({seg:Yb(P,M.span.start,M.span.end,t),isVisible:!0,isAbsolute:!1,absoluteTop:M.levelCoord,marginTop:C}),C=0)}r.push(m),s.push(A),o.push(C)}return{singleColPlacements:r,multiColPlacements:s,leftoverMargins:o}}(C,n,o),H=[],U=[];for(let K of m){M[K.firstCol].push({seg:K,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let _e=K.firstCol;_e<=K.lastCol;_e+=1)A[_e].push({seg:Yb(K,_e,_e+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let K=0;K<o.length;K+=1)H.push(0);for(let K of v){let _e=n[K.index],Oe=K.span;M[Oe.start].push({seg:Yb(_e,Oe.start,Oe.end,o),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let je=Oe.start;je<Oe.end;je+=1)H[je]+=1,A[je].push({seg:Yb(_e,je,je+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let K=0;K<o.length;K+=1)U.push(P[K]);return{singleColPlacements:A,multiColPlacements:M,moreCnts:H,moreMarginTops:U}}(function bQ(n,e){let t=n.map(wQ);return t.sort((i,r)=>function VK(n,e,t){let i,r;for(i=0;i<t.length;i+=1)if(r=BK(n,e,t[i]),r)return r;return 0}(i,r,e)),t.map(i=>i._seg)}(e.fgEventSegs,r.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,r.eventOrderStrict,t.segHeights,t.maxContentHeight,e.cells),P=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return me("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((H,U)=>{let K=this.renderFgSegs(U,e.forPrint?v[U]:C[U],e.todayRange,P),_e=this.renderFgSegs(U,function Yee(n,e){if(!n.length)return[];let t=function Zee(n){let e={};for(let t of n)for(let i of t)e[i.seg.eventRange.instance.instanceId]=i.absoluteTop;return e}(e);return n.map(i=>({seg:i,isVisible:!0,isAbsolute:!0,absoluteTop:t[i.eventRange.instance.instanceId],marginTop:0}))}(m[U],C),e.todayRange,{},Boolean(e.eventDrag),Boolean(e.eventResize),!1);return me(Uee,{key:H.key,elRef:this.cellElRefs.createRef(H.key),innerElRef:this.frameElRefs.createRef(H.key),dateProfile:e.dateProfile,date:H.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&0===U,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:H.extraRenderProps,extraDataAttrs:H.extraDataAttrs,extraClassNames:H.extraClassNames,extraDateSpan:H.extraDateSpan,moreCnt:A[U],moreMarginTop:M[U],singlePlacements:v[U],fgContentElRef:this.fgElRefs.createRef(H.key),fgContent:me(Wi,null,me(Wi,null,K),me(Wi,null,_e)),bgContent:me(Wi,null,this.renderFillSegs(f[U],"highlight"),this.renderFillSegs(o[U],"non-business"),this.renderFillSegs(d[U],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,t){this.updateSizing(!rd(e,this.props))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,t,i,r,s,o,d){let{context:f}=this,{eventSelection:m}=this.props,{framePositions:v}=this.state,C=1===this.props.cells.length,A=s||o||d,M=[];if(v)for(let P of t){let{seg:H}=P,{instanceId:U}=H.eventRange.instance,K=P.isVisible&&!r[U],_e=P.isAbsolute,Oe="",je="";_e&&(f.isRtl?(je=0,Oe=v.lefts[H.lastCol]-v.lefts[H.firstCol]):(Oe=0,je=v.rights[H.firstCol]-v.rights[H.lastCol])),M.push(me("div",{className:"fc-daygrid-event-harness"+(_e?" fc-daygrid-event-harness-abs":""),key:vz(H),ref:A?null:this.segHarnessRefs.createRef(bz(H)),style:{visibility:K?"":"hidden",marginTop:_e?"":P.marginTop,top:_e?P.absoluteTop:"",left:Oe,right:je}},mz(H)?me(yz,Object.assign({seg:H,isDragging:s,isSelected:U===m,defaultDisplayEventEnd:C},YD(H,i))):me(_z,Object.assign({seg:H,isDragging:s,isResizing:o,isDateSelecting:d,isSelected:U===m,defaultDisplayEventEnd:C},YD(H,i)))))}return M}renderFillSegs(e,t){let{isRtl:i}=this.context,{todayRange:r}=this.props,{framePositions:s}=this.state,o=[];if(s)for(let d of e){let f=i?{right:0,left:s.lefts[d.lastCol]-s.lefts[d.firstCol]}:{left:0,right:s.rights[d.firstCol]-s.rights[d.lastCol]};o.push(me("div",{key:IQ(d.eventRange),className:"fc-daygrid-bg-harness",style:f},"bg-event"===t?me(VX,Object.assign({seg:d},YD(d,r))):HX(t)))}return me(Wi,{},...o)}updateSizing(e){let{props:t,state:i,frameElRefs:r}=this;if(!t.forPrint&&null!==t.clientWidth){if(e){let f=t.cells.map(m=>r.currentMap[m.key]);if(f.length){let m=this.rootElRef.current,v=new pM(m,f,!0,!1);(!i.framePositions||!i.framePositions.similarTo(v))&&this.setState({framePositions:new pM(m,f,!0,!1)})}}const s=this.state.segHeights,o=this.querySegHeights(),d=!0===t.dayMaxEvents||!0===t.dayMaxEventRows;this.safeSetState({segHeights:Object.assign(Object.assign({},s),o),maxContentHeight:d?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,t={};for(let i in e){let r=Math.round(e[i].getBoundingClientRect().height);t[i]=Math.max(t[i]||0,r)}return t}computeMaxContentHeight(){let e=this.props.cells[0].key,i=this.fgElRefs.currentMap[e];return this.cellElRefs.currentMap[e].getBoundingClientRect().bottom-i.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(t=>e[t.key])}}wz.addStateEquality({segHeights:rd});class Kee extends V_{constructor(){super(...arguments),this.splitBusinessHourSegs=fn(bM),this.splitBgEventSegs=fn(bM),this.splitFgEventSegs=fn(bM),this.splitDateSelectionSegs=fn(bM),this.splitEventDrag=fn(pz),this.splitEventResize=fn(pz),this.rowRefs=new B_}render(){let{props:e,context:t}=this,i=e.cells.length,r=this.splitBusinessHourSegs(e.businessHourSegs,i),s=this.splitBgEventSegs(e.bgEventSegs,i),o=this.splitFgEventSegs(e.fgEventSegs,i),d=this.splitDateSelectionSegs(e.dateSelectionSegs,i),f=this.splitEventDrag(e.eventDrag,i),m=this.splitEventResize(e.eventResize,i),v=i>=7&&e.clientWidth?e.clientWidth/t.options.aspectRatio/6:null;return me(Fj,{unit:"day"},(C,A)=>me(Wi,null,e.cells.map((M,P)=>me(wz,{ref:this.rowRefs.createRef(P),key:M.length?M[0].date.toISOString():P,showDayNumbers:i>1,showWeekNumbers:e.showWeekNumbers,todayRange:A,dateProfile:e.dateProfile,cells:M,renderIntro:e.renderRowIntro,businessHourSegs:r[P],eventSelection:e.eventSelection,bgEventSegs:s[P].filter(Qee),fgEventSegs:o[P],dateSelectionSegs:d[P],eventDrag:f[P],eventResize:m[P],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:v,forPrint:e.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],t=e?e.closest(".fc-daygrid-body"):null;t&&(this.rootEl=t,this.context.registerInteractiveComponent(this,{el:t,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new pM(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new pM(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,t){let{colPositions:i,rowPositions:r}=this,s=i.leftToIndex(e),o=r.topToIndex(t);if(null!=o&&null!=s){let d=this.props.cells[o][s];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(o,s),allDay:!0},d.extraDateSpan),dayEl:this.getCellEl(o,s),rect:{left:i.lefts[s],right:i.rights[s],top:r.tops[o],bottom:r.bottoms[o]},layer:0}}return null}getCellEl(e,t){return this.rowRefs.currentMap[e].getCellEls()[t]}getCellRange(e,t){let i=this.props.cells[e][t].date;return{start:i,end:so(i,1)}}}function Qee(n){return n.eventRange.def.allDay}class Xee extends V_{constructor(){super(...arguments),this.elRef={current:null},this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:t,dayMaxEvents:i,expandRows:r}=e,s=!0===i||!0===t;return s&&!r&&(s=!1,t=null,i=null),me("div",{ref:this.elRef,className:["fc-daygrid-body",s?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",r?"":"fc-daygrid-body-natural"].join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},me("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:r?e.clientHeight:""}},e.colGroupNode,me("tbody",{role:"presentation"},me(Kee,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:i,dayMaxEventRows:t,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=function Jee(n,e){let t;return e.currentRangeUnit.match(/year|month/)&&(t=n.querySelector(`[data-date="${function a7(n){return n.toISOString().match(/^\d{4}-\d{2}/)[0]}(e.currentDate)}-01"]`)),t||(t=n.querySelector(`[data-date="${aP(e.currentDate)}"]`)),t}(this.elRef.current,this.props.dateProfile);if(e){const t=e.closest(".fc-daygrid-body"),i=t.closest(".fc-scroller"),r=e.getBoundingClientRect().top-t.getBoundingClientRect().top;i.scrollTop=r?r+1:0}this.needsScrollReset=!1}}}class ete extends class pX{constructor(){this.sliceBusinessHours=fn(this._sliceBusinessHours),this.sliceDateSelection=fn(this._sliceDateSpan),this.sliceEventStore=fn(this._sliceEventStore),this.sliceEventDrag=fn(this._sliceInteraction),this.sliceEventResize=fn(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(e,t,i,r,...s){let{eventUiBases:o}=e,d=this.sliceEventStore(e.eventStore,o,t,i,...s);return{dateSelectionSegs:this.sliceDateSelection(e.dateSelection,t,i,o,r,...s),businessHourSegs:this.sliceBusinessHours(e.businessHours,t,i,r,...s),fgEventSegs:d.fg,bgEventSegs:d.bg,eventDrag:this.sliceEventDrag(e.eventDrag,o,t,i,...s),eventResize:this.sliceEventResize(e.eventResize,o,t,i,...s),eventSelection:e.eventSelection}}sliceNowDate(e,t,i,r,...s){return this._sliceDateSpan({range:{start:e,end:ig(e,1)},allDay:!1},t,i,{},r,...s)}_sliceBusinessHours(e,t,i,r,...s){return e?this._sliceEventStore(F_(e,mM(t,Boolean(i)),r),{},t,i,...s).bg:[]}_sliceEventStore(e,t,i,r,...s){if(e){let o=vj(e,t,mM(i,Boolean(r)),r);return{bg:this.sliceEventRanges(o.bg,s),fg:this.sliceEventRanges(o.fg,s)}}return{bg:[],fg:[]}}_sliceInteraction(e,t,i,r,...s){if(!e)return null;let o=vj(e.mutatedEvents,t,mM(i,Boolean(r)),r);return{segs:this.sliceEventRanges(o.fg,s),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}}_sliceDateSpan(e,t,i,r,s,...o){if(!e)return[];let d=mM(t,Boolean(i)),f=Ub(e.range,d);if(f){let m=function OQ(n,e,t){let i=aj({editable:!1},t),r=bP(i.refined,i.extra,"",n.allDay,!0,t);return{def:r,ui:wj(r,e),instance:yP(r.defId,n.range),range:n.range,isStart:!0,isEnd:!0}}(e=Object.assign(Object.assign({},e),{range:f}),r,s),v=this.sliceRange(e.range,...o);for(let C of v)C.eventRange=m;return v}return[]}sliceEventRanges(e,t){let i=[];for(let r of e)i.push(...this.sliceEventRange(r,t));return i}sliceEventRange(e,t){let i=e.range;this.forceDayIfListItem&&"list-item"===e.ui.display&&(i={start:i.start,end:so(i.start,1)});let r=this.sliceRange(i,...t);for(let s of r)s.eventRange=e,s.isStart=e.isStart&&s.isStart,s.isEnd=e.isEnd&&s.isEnd;return r}}{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,t){return t.sliceRange(e)}}class tte extends V_{constructor(){super(...arguments),this.slicer=new ete,this.tableRef={current:null}}render(){let{props:e,context:t}=this;return me(Xee,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,t,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}function ite(n,e){let t=new hX(n.renderRange,e);return new fX(t,/year|month|week/.test(n.currentRangeUnit))}DU(':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}');var ate=lg({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:class nte extends Fee{constructor(){super(...arguments),this.buildDayTableModel=fn(ite),this.headerRef={current:null},this.tableRef={current:null}}render(){let{options:e,dateProfileGenerator:t}=this.context,{props:i}=this,r=this.buildDayTableModel(i.dateProfile,t),s=e.dayHeaders&&me(uX,{ref:this.headerRef,dateProfile:i.dateProfile,dates:r.headerDates,datesRepDistinctDays:1===r.rowCnt}),o=d=>me(tte,{ref:this.tableRef,dateProfile:i.dateProfile,dayTableModel:r,businessHours:i.businessHours,dateSelection:i.dateSelection,eventStore:i.eventStore,eventUiBases:i.eventUiBases,eventSelection:i.eventSelection,eventDrag:i.eventDrag,eventResize:i.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:d.tableColGroupNode,tableMinWidth:d.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!i.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:d.clientWidth,clientHeight:d.clientHeight,forPrint:i.forPrint});return e.dayMinWidth?this.renderHScrollLayout(s,o,r.colCnt,e.dayMinWidth):this.renderSimpleLayout(s,o)}},dateProfileGeneratorClass:class rte extends rj{buildRenderRange(e,t,i){let r=super.buildRenderRange(e,t,i),{props:s}=this;return function ste(n){let s,{dateEnv:e,currentRange:t}=n,{start:i,end:r}=t;if(n.snapToWeek&&(i=e.startOfWeek(i),s=e.startOfWeek(r),s.valueOf()!==r.valueOf()&&(r=BU(s,1))),n.fixedWeekCount){let o=e.startOfWeek(e.startOfMonth(so(t.end,-1))),d=Math.ceil(function ZK(n,e){return R_(n,e)/7}(o,r));r=BU(r,6-d)}return{start:i,end:r}}({currentRange:r,snapToWeek:/^(year|month)$/.test(t),fixedWeekCount:s.fixedWeekCount,dateEnv:s.dateEnv})}}},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});VP.touchMouseIgnoreWait=500;let YP=0,EM=0,ZP=!1;class KP{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=t=>{if(!this.shouldIgnoreMouse()&&function lte(n){return 0===n.button&&!n.ctrlKey}(t)&&this.tryStart(t)){let i=this.createEventFromMouse(t,!0);this.emitter.trigger("pointerdown",i),this.initScrollWatch(i),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=t=>{let i=this.createEventFromMouse(t);this.recordCoords(i),this.emitter.trigger("pointermove",i)},this.handleMouseUp=t=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(t)),this.cleanup()},this.handleTouchStart=t=>{if(this.tryStart(t)){this.isTouchDragging=!0;let i=this.createEventFromTouch(t,!0);this.emitter.trigger("pointerdown",i),this.initScrollWatch(i);let r=t.target;this.shouldIgnoreMove||r.addEventListener("touchmove",this.handleTouchMove),r.addEventListener("touchend",this.handleTouchEnd),r.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=t=>{let i=this.createEventFromTouch(t);this.recordCoords(i),this.emitter.trigger("pointermove",i)},this.handleTouchEnd=t=>{if(this.isDragging){let i=t.target;i.removeEventListener("touchmove",this.handleTouchMove),i.removeEventListener("touchend",this.handleTouchEnd),i.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(t)),this.cleanup(),this.isTouchDragging=!1,function cte(){YP+=1,setTimeout(()=>{YP-=1},VP.touchMouseIgnoreWait)}()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=t=>{if(!this.shouldIgnoreMove){let i=window.scrollX-this.prevScrollX+this.prevPageX,r=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:t,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:i,pageY:r,deltaX:i-this.origPageX,deltaY:r-this.origPageY})}},this.containerEl=e,this.emitter=new hM,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),function ute(){EM+=1,1===EM&&window.addEventListener("touchmove",Ez,{passive:!1})}()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),function dte(){EM-=1,EM||window.removeEventListener("touchmove",Ez,{passive:!1})}()}tryStart(e){let t=this.querySubjectEl(e);return!(!t||this.handleSelector&&!ro(e.target,this.handleSelector)||(this.subjectEl=t,this.isDragging=!0,this.wasTouchScroll=!1,0))}cleanup(){ZP=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?ro(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return YP||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(ZP=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,t){let i=0,r=0;return t?(this.origPageX=e.pageX,this.origPageY=e.pageY):(i=e.pageX-this.origPageX,r=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:i,deltaY:r}}createEventFromTouch(e,t){let r,s,i=e.touches,o=0,d=0;return i&&i.length?(r=i[0].pageX,s=i[0].pageY):(r=e.pageX,s=e.pageY),t?(this.origPageX=r,this.origPageY=s):(o=r-this.origPageX,d=s-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:r,pageY:s,deltaX:o,deltaY:d}}}function Ez(n){ZP&&n.preventDefault()}class hte{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,t,i){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=t-window.scrollX,this.origScreenY=i-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,t){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=t-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,t){let i=()=>{this.cleanup(),t()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(i,this.revertDuration):setTimeout(i,0)}doRevertAnimation(e,t){let i=this.mirrorEl,r=this.sourceEl.getBoundingClientRect();i.style.transition="top "+t+"ms,left "+t+"ms",jD(i,{left:r.left,top:r.top}),function RK(n,e){let t=i=>{e(i),RU.forEach(r=>{n.removeEventListener(r,t)})};RU.forEach(i=>{n.addEventListener(i,t)})}(i,()=>{i.style.transition="",e()})}cleanup(){this.mirrorEl&&(nP(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&jD(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,t=this.mirrorEl;return t||(t=this.mirrorEl=this.sourceEl.cloneNode(!0),t.style.userSelect="none",t.style.webkitUserSelect="none",t.style.pointerEvents="none",t.classList.add("fc-event-dragging"),jD(t,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(t)),t}}class Cz extends PP{constructor(e,t){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=t,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class Dz extends Cz{constructor(e,t){super(new eX(e),t)}getEventTarget(){return this.scrollController.el}computeClientRect(){return XQ(this.scrollController.el)}}class fte extends Cz{constructor(e){super(new tX,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const Sz="function"==typeof performance?performance.now:Date.now;class pte{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let t=Sz();this.handleSide(e,(t-this.msSinceRequest)/1e3),this.requestAnimation(t)}else this.isAnimating=!1}}}start(e,t,i){this.isEnabled&&(this.scrollCaches=this.buildCaches(i),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,t))}handleMove(e,t){if(this.isEnabled){let i=e-window.scrollX,r=t-window.scrollY,s=null===this.pointerScreenY?0:r-this.pointerScreenY,o=null===this.pointerScreenX?0:i-this.pointerScreenX;s<0?this.everMovedUp=!0:s>0&&(this.everMovedDown=!0),o<0?this.everMovedLeft=!0:o>0&&(this.everMovedRight=!0),this.pointerScreenX=i,this.pointerScreenY=r,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(Sz()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,t){let{scrollCache:i}=e,{edgeThreshold:r}=this,s=r-e.distance,o=s*s/(r*r)*this.maxVelocity*t,d=1;switch(e.name){case"left":d=-1;case"right":i.setScrollLeft(i.getScrollLeft()+o*d);break;case"top":d=-1;case"bottom":i.setScrollTop(i.getScrollTop()+o*d)}}computeBestEdge(e,t){let{edgeThreshold:i}=this,r=null,s=this.scrollCaches||[];for(let o of s){let d=o.clientRect,f=e-d.left,m=d.right-e,v=t-d.top,C=d.bottom-t;f>=0&&m>=0&&v>=0&&C>=0&&(v<=i&&this.everMovedUp&&o.canScrollUp()&&(!r||r.distance>v)&&(r={scrollCache:o,name:"top",distance:v}),C<=i&&this.everMovedDown&&o.canScrollDown()&&(!r||r.distance>C)&&(r={scrollCache:o,name:"bottom",distance:C}),f<=i&&this.everMovedLeft&&o.canScrollLeft()&&(!r||r.distance>f)&&(r={scrollCache:o,name:"left",distance:f}),m<=i&&this.everMovedRight&&o.canScrollRight()&&(!r||r.distance>m)&&(r={scrollCache:o,name:"right",distance:m}))}return r}buildCaches(e){return this.queryScrollEls(e).map(t=>t===window?new fte(!1):new Dz(t,!1))}queryScrollEls(e){let t=[];for(let i of this.scrollQuery)"object"==typeof i?t.push(i):t.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(i)));return t}}class Zb extends class rX{constructor(e,t){this.emitter=new hM}destroy(){}setMirrorIsVisible(e){}setMirrorNeedsRevert(e){}setAutoScrollEnabled(e){}}{constructor(e,t){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=r=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,function OK(n){n.style.userSelect="none",n.style.webkitUserSelect="none",n.addEventListener("selectstart",ZT)}(document.body),function PK(n){n.addEventListener("contextmenu",ZT)}(document.body),r.isTouch||r.origEvent.preventDefault(),this.emitter.trigger("pointerdown",r),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(r.subjectEl,r.pageX,r.pageY),this.startDelay(r),this.minDistance||this.handleDistanceSurpassed(r)))},this.onPointerMove=r=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",r),!this.isDistanceSurpassed){let o,s=this.minDistance,{deltaX:d,deltaY:f}=r;o=d*d+f*f,o>=s*s&&this.handleDistanceSurpassed(r)}this.isDragging&&("scroll"!==r.origEvent.type&&(this.mirror.handleMove(r.pageX,r.pageY),this.autoScroller.handleMove(r.pageX,r.pageY)),this.emitter.trigger("dragmove",r))}},this.onPointerUp=r=>{this.isInteracting&&(this.isInteracting=!1,function NK(n){n.style.userSelect="",n.style.webkitUserSelect="",n.removeEventListener("selectstart",ZT)}(document.body),function FK(n){n.removeEventListener("contextmenu",ZT)}(document.body),this.emitter.trigger("pointerup",r),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(r)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let i=this.pointer=new KP(e);i.emitter.on("pointerdown",this.onPointerDown),i.emitter.on("pointermove",this.onPointerMove),i.emitter.on("pointerup",this.onPointerUp),t&&(i.selector=t),this.mirror=new hte,this.autoScroller=new pte}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){"number"==typeof this.delay?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),!1===this.touchScrollAllowed&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class gte{constructor(e){this.el=e,this.origRect=NP(e),this.scrollCaches=xj(e).map(t=>new Dz(t,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let t of this.scrollCaches)e+=t.origScrollLeft-t.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let t of this.scrollCaches)e+=t.origScrollTop-t.getScrollTop();return e}isWithinClipping(e,t){let i={left:e,top:t};for(let r of this.scrollCaches)if(!mte(r.getEventTarget())&&!HQ(i,r.clientRect))return!1;return!0}}function mte(n){let e=n.tagName;return"HTML"===e||"BODY"===e}class KD{constructor(e,t){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=i=>{let{dragging:r}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(i),this.initialHit||!this.requireInitial?(r.setIgnoreMove(!1),this.emitter.trigger("pointerdown",i)):r.setIgnoreMove(!0)},this.handleDragStart=i=>{this.emitter.trigger("dragstart",i),this.handleMove(i,!0)},this.handleDragMove=i=>{this.emitter.trigger("dragmove",i),this.handleMove(i)},this.handlePointerUp=i=>{this.releaseHits(),this.emitter.trigger("pointerup",i)},this.handleDragEnd=i=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,i),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",i)},this.droppableStore=t,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new hM}processFirstCoord(e){let s,t={left:e.pageX,top:e.pageY},i=t,r=e.subjectEl;r instanceof HTMLElement&&(s=NP(r),i=function UQ(n,e){return{left:Math.min(Math.max(n.left,e.left),e.right),top:Math.min(Math.max(n.top,e.top),e.bottom)}}(i,s));let o=this.initialHit=this.queryHitForOffset(i.left,i.top);if(o){if(this.useSubjectCenter&&s){let d=Tj(s,o.rect);d&&(i=function jQ(n){return{left:(n.left+n.right)/2,top:(n.top+n.bottom)/2}}(d))}this.coordAdjust=function zQ(n,e){return{left:n.left-e.left,top:n.top-e.top}}(i,t)}else this.coordAdjust={left:0,top:0}}handleMove(e,t){let i=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(t||!CM(this.movingHit,i))&&(this.movingHit=i,this.emitter.trigger("hitupdate",i,!1,e))}prepareHits(){this.offsetTrackers=ef(this.droppableStore,e=>(e.component.prepareHits(),new gte(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let t in e)e[t].destroy();this.offsetTrackers={}}queryHitForOffset(e,t){let{droppableStore:i,offsetTrackers:r}=this,s=null;for(let o in i){let d=i[o].component,f=r[o];if(f&&f.isWithinClipping(e,t)){let m=f.computeLeft(),v=f.computeTop(),C=e-m,A=t-v,{origRect:M}=f,P=M.right-M.left,H=M.bottom-M.top;if(C>=0&&C<P&&A>=0&&A<H){let U=d.queryHit(C,A,P,H);U&&aM(U.dateProfile.activeRange,U.dateSpan.range)&&(this.disablePointCheck||f.el.contains(document.elementFromPoint(C+m-window.scrollX,A+v-window.scrollY)))&&(!s||U.layer>s.layer)&&(U.componentId=o,U.context=d.context,U.rect.left+=m,U.rect.right+=m,U.rect.top+=v,U.rect.bottom+=v,s=U)}}}return s}}function CM(n,e){return!n&&!e||Boolean(n)===Boolean(e)&&function kQ(n,e){return function G7(n,e){return(null===n.start?null:n.start.valueOf())===(null===e.start?null:e.start.valueOf())&&(null===n.end?null:n.end.valueOf())===(null===e.end?null:e.end.valueOf())}(n.range,e.range)&&n.allDay===e.allDay&&function xQ(n,e){for(let t in e)if("range"!==t&&"allDay"!==t&&n[t]!==e[t])return!1;for(let t in n)if(!(t in e))return!1;return!0}(n,e)}(n.dateSpan,e.dateSpan)}function QP(n,e){let t={};for(let i of e.pluginHooks.datePointTransforms)Object.assign(t,i(n,e));return Object.assign(t,function _te(n,e){return{date:e.toDate(n.range.start),dateStr:e.formatIso(n.range.start,{omitTime:n.allDay}),allDay:n.allDay}}(n,e.dateEnv)),t}let Iz=(()=>{class n extends $b{constructor(t){super(t),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=d=>{let f=d.origEvent.target,{component:m,dragging:v}=this,{mirror:C}=v,{options:A}=m.context,M=m.context;this.subjectEl=d.subjectEl;let P=this.subjectSeg=Gb(d.subjectEl),U=(this.eventRange=P.eventRange).instance.instanceId;this.relevantEvents=EP(M.getCurrentData().eventStore,U),v.minDistance=d.isTouch?0:A.eventDragMinDistance,v.delay=d.isTouch&&U!==m.props.eventSelection?function Cte(n){let{options:e}=n.context,t=e.eventLongPressDelay;return null==t&&(t=e.longPressDelay),t}(m):null,C.parentNode=A.fixedMirrorParent?A.fixedMirrorParent:ro(f,".fc"),C.revertDuration=A.dragRevertDuration;let K=m.isValidSegDownEl(f)&&!ro(f,".fc-event-resizer");v.setIgnoreMove(!K),this.isDragging=K&&d.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=d=>{let f=this.component.context,m=this.eventRange,v=m.instance.instanceId;d.isTouch?v!==this.component.props.eventSelection&&f.dispatch({type:"SELECT_EVENT",eventInstanceId:v}):f.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(f.calendarApi.unselect(d),f.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new Li(f,m.def,m.instance),jsEvent:d.origEvent,view:f.viewApi}))},this.handleHitUpdate=(d,f)=>{if(!this.isDragging)return;let m=this.relevantEvents,v=this.hitDragging.initialHit,C=this.component.context,A=null,M=null,P=null,H=!1,U={affectedEvents:m,mutatedEvents:{defs:{},instances:{}},isEvent:!0};if(d){A=d.context;let K=A.options;C===A||K.editable&&K.droppable?(M=function Ete(n,e,t,i){let r=n.dateSpan,s=e.dateSpan,o=r.range.start,d=s.range.start,f={};r.allDay!==s.allDay&&(f.allDay=s.allDay,f.hasEnd=e.context.options.allDayMaintainDuration,o=s.allDay?Fi(t):t);let m=jb(o,d,n.context.dateEnv,n.componentId===e.componentId?n.largeUnit:null);m.milliseconds&&(f.allDay=!1);let v={datesDelta:m,standardProps:f};for(let C of i)C(v,n,e);return v}(v,d,this.eventRange.instance.range.start,A.getCurrentData().pluginHooks.eventDragMutationMassagers),M&&(P=SP(m,A.getCurrentData().eventUiBases,M,A),U.mutatedEvents=P,Vj(U,d.dateProfile,A)||(H=!0,M=null,P=null,U.mutatedEvents={defs:{},instances:{}}))):A=null}this.displayDrag(A,U),H?iP():rP(),f||(C===A&&CM(v,d)&&(M=null),this.dragging.setMirrorNeedsRevert(!M),this.dragging.setMirrorIsVisible(!d||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=A,this.validMutation=M,this.mutatedRelevantEvents=P)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=d=>{if(this.isDragging){let f=this.component.context,m=f.viewApi,{receivingContext:v,validMutation:C}=this,A=this.eventRange.def,M=this.eventRange.instance,P=new Li(f,A,M),H=this.relevantEvents,U=this.mutatedRelevantEvents,{finalHit:K}=this.hitDragging;if(this.clearDrag(),f.emitter.trigger("eventDragStop",{el:this.subjectEl,event:P,jsEvent:d.origEvent,view:m}),C){if(v===f){let _e=new Li(f,U.defs[A.defId],M?U.instances[M.instanceId]:null);f.dispatch({type:"MERGE_EVENTS",eventStore:U});let Oe={oldEvent:P,event:_e,relatedEvents:L_(U,f,M),revert(){f.dispatch({type:"MERGE_EVENTS",eventStore:H})}},je={};for(let wt of f.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(je,wt(C,f));f.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},Oe),je),{el:d.subjectEl,delta:C.datesDelta,jsEvent:d.origEvent,view:m})),f.emitter.trigger("eventChange",Oe)}else if(v){let _e={event:P,relatedEvents:L_(H,f,M),revert(){f.dispatch({type:"MERGE_EVENTS",eventStore:H})}};f.emitter.trigger("eventLeave",Object.assign(Object.assign({},_e),{draggedEl:d.subjectEl,view:m})),f.dispatch({type:"REMOVE_EVENTS",eventStore:H}),f.emitter.trigger("eventRemove",_e);let je=U.instances[M.instanceId],wt=new Li(v,U.defs[A.defId],je);v.dispatch({type:"MERGE_EVENTS",eventStore:U});let _t={event:wt,relatedEvents:L_(U,v,je),revert(){v.dispatch({type:"REMOVE_EVENTS",eventStore:U})}};v.emitter.trigger("eventAdd",_t),d.isTouch&&v.dispatch({type:"SELECT_EVENT",eventInstanceId:M.instanceId}),v.emitter.trigger("drop",Object.assign(Object.assign({},QP(K.dateSpan,v)),{draggedEl:d.subjectEl,jsEvent:d.origEvent,view:K.context.viewApi})),v.emitter.trigger("eventReceive",Object.assign(Object.assign({},_t),{draggedEl:d.subjectEl,view:K.context.viewApi}))}}else f.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:i}=this,{options:r}=i.context,s=this.dragging=new Zb(t.el);s.pointer.selector=n.SELECTOR,s.touchScrollAllowed=!1,s.autoScroller.isEnabled=r.dragScroll;let o=this.hitDragging=new KD(this.dragging,TP);o.useSubjectCenter=t.useEventCenter,o.emitter.on("pointerdown",this.handlePointerDown),o.emitter.on("dragstart",this.handleDragStart),o.emitter.on("hitupdate",this.handleHitUpdate),o.emitter.on("pointerup",this.handlePointerUp),o.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(t,i){let s=this.receivingContext;s&&s!==t&&s.dispatch(s===this.component.context?{type:"SET_EVENT_DRAG",state:{affectedEvents:i.affectedEvents,mutatedEvents:{defs:{},instances:{}},isEvent:!0}}:{type:"UNSET_EVENT_DRAG"}),t&&t.dispatch({type:"SET_EVENT_DRAG",state:i})}clearDrag(){let t=this.component.context,{receivingContext:i}=this;i&&i.dispatch({type:"UNSET_EVENT_DRAG"}),t!==i&&t.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}return n.SELECTOR=".fc-event-draggable, .fc-event-resizable",n})();const Ate={fixedMirrorParent:ge},Tte={dateClick:ge,eventDragStart:ge,eventDragStop:ge,eventDrop:ge,eventResizeStart:ge,eventResizeStop:ge,eventResize:ge,drop:ge,eventReceive:ge,eventLeave:ge};VP.dataAttrPrefix="";var Ote=lg({name:"@fullcalendar/interaction",componentInteractions:[class yte extends $b{constructor(e){super(e),this.handlePointerDown=i=>{let{dragging:r}=this;r.setIgnoreMove(!this.component.isValidDateDownEl(i.origEvent.target))},this.handleDragEnd=i=>{let{component:r}=this,{pointer:s}=this.dragging;if(!s.wasTouchScroll){let{initialHit:o,finalHit:d}=this.hitDragging;if(o&&d&&CM(o,d)){let{context:f}=r,m=Object.assign(Object.assign({},QP(o.dateSpan,f)),{dayEl:o.dayEl,jsEvent:i.origEvent,view:f.viewApi||f.calendarApi.view});f.emitter.trigger("dateClick",m)}}},this.dragging=new Zb(e.el),this.dragging.autoScroller.isEnabled=!1;let t=this.hitDragging=new KD(this.dragging,AP(e));t.emitter.on("pointerdown",this.handlePointerDown),t.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}},class vte extends $b{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=o=>{let{component:d,dragging:f}=this,{options:m}=d.context,v=m.selectable&&d.isValidDateDownEl(o.origEvent.target);f.setIgnoreMove(!v),f.delay=o.isTouch?function bte(n){let{options:e}=n.context,t=e.selectLongPressDelay;return null==t&&(t=e.longPressDelay),t}(d):null},this.handleDragStart=o=>{this.component.context.calendarApi.unselect(o)},this.handleHitUpdate=(o,d)=>{let{context:f}=this.component,m=null,v=!1;if(o){let C=this.hitDragging.initialHit;o.componentId===C.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(C,o)||(m=function wte(n,e,t){let i=n.dateSpan,r=e.dateSpan,s=[i.range.start,i.range.end,r.range.start,r.range.end];s.sort(UK);let o={};for(let d of t){let f=d(n,e);if(!1===f)return null;f&&Object.assign(o,f)}return o.range={start:s[0],end:s[3]},o.allDay=i.allDay,o}(C,o,f.pluginHooks.dateSelectionTransformers)),(!m||!function gX(n,e,t){return!!aM(e.validRange,n.range)&&Bj({dateSelection:n},t)}(m,o.dateProfile,f))&&(v=!0,m=null)}m?f.dispatch({type:"SELECT_DATES",selection:m}):d||f.dispatch({type:"UNSELECT_DATES"}),v?iP():rP(),d||(this.dragSelection=m)},this.handlePointerUp=o=>{this.dragSelection&&(mj(this.dragSelection,o,this.component.context),this.dragSelection=null)};let{component:t}=e,{options:i}=t.context,r=this.dragging=new Zb(e.el);r.touchScrollAllowed=!1,r.minDistance=i.selectMinDistance||0,r.autoScroller.isEnabled=i.dragScroll;let s=this.hitDragging=new KD(this.dragging,AP(e));s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}},Iz,class Dte extends $b{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=s=>{let{component:o}=this,f=Gb(this.querySegEl(s)),m=this.eventRange=f.eventRange;this.dragging.minDistance=o.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(s.origEvent.target)||s.isTouch&&this.component.props.eventSelection!==m.instance.instanceId)},this.handleDragStart=s=>{let{context:o}=this.component,d=this.eventRange;this.relevantEvents=EP(o.getCurrentData().eventStore,this.eventRange.instance.instanceId);let f=this.querySegEl(s);this.draggingSegEl=f,this.draggingSeg=Gb(f),o.calendarApi.unselect(),o.emitter.trigger("eventResizeStart",{el:f,event:new Li(o,d.def,d.instance),jsEvent:s.origEvent,view:o.viewApi})},this.handleHitUpdate=(s,o,d)=>{let{context:f}=this.component,m=this.relevantEvents,v=this.hitDragging.initialHit,C=this.eventRange.instance,A=null,M=null,P=!1,H={affectedEvents:m,mutatedEvents:{defs:{},instances:{}},isEvent:!0};s&&(s.componentId===v.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(v,s)||(A=function Ste(n,e,t,i){let r=n.context.dateEnv,d=jb(n.dateSpan.range.start,e.dateSpan.range.start,r,n.largeUnit);if(t){if(r.add(i.start,d)<i.end)return{startDelta:d}}else if(r.add(i.end,d)>i.start)return{endDelta:d};return null}(v,s,d.subjectEl.classList.contains("fc-event-resizer-start"),C.range))),A&&(M=SP(m,f.getCurrentData().eventUiBases,A,f),H.mutatedEvents=M,Vj(H,s.dateProfile,f)||(P=!0,A=null,M=null,H.mutatedEvents=null)),f.dispatch(M?{type:"SET_EVENT_RESIZE",state:H}:{type:"UNSET_EVENT_RESIZE"}),P?iP():rP(),o||(A&&CM(v,s)&&(A=null),this.validMutation=A,this.mutatedRelevantEvents=M)},this.handleDragEnd=s=>{let{context:o}=this.component,d=this.eventRange.def,f=this.eventRange.instance,m=new Li(o,d,f),v=this.relevantEvents,C=this.mutatedRelevantEvents;if(o.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:m,jsEvent:s.origEvent,view:o.viewApi}),this.validMutation){let A=new Li(o,C.defs[d.defId],f?C.instances[f.instanceId]:null);o.dispatch({type:"MERGE_EVENTS",eventStore:C});let M={oldEvent:m,event:A,relatedEvents:L_(C,o,f),revert(){o.dispatch({type:"MERGE_EVENTS",eventStore:v})}};o.emitter.trigger("eventResize",Object.assign(Object.assign({},M),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||Mn(0),endDelta:this.validMutation.endDelta||Mn(0),jsEvent:s.origEvent,view:o.viewApi})),o.emitter.trigger("eventChange",M)}else o.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:t}=e,i=this.dragging=new Zb(e.el);i.pointer.selector=".fc-event-resizer",i.touchScrollAllowed=!1,i.autoScroller.isEnabled=t.context.options.dragScroll;let r=this.hitDragging=new KD(this.dragging,AP(e));r.emitter.on("pointerdown",this.handlePointerDown),r.emitter.on("dragstart",this.handleDragStart),r.emitter.on("hitupdate",this.handleHitUpdate),r.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return ro(e.subjectEl,".fc-event")}}],calendarInteractions:[class Ite{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=i=>{i.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=i=>{let r=this.context.options.unselectCancel,s=MU(i.origEvent);this.matchesCancel=!!ro(s,r),this.matchesEvent=!!ro(s,Iz.SELECTOR)},this.onDocumentPointerUp=i=>{let{context:r}=this,{documentPointer:s}=this,o=r.getCurrentData();if(!s.wasTouchScroll){if(o.dateSelection&&!this.isRecentPointerDateSelect){let d=r.options.unselectAuto;d&&(!d||!this.matchesCancel)&&r.calendarApi.unselect(i)}o.eventSelection&&!this.matchesEvent&&r.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let t=this.documentPointer=new KP(document);t.shouldIgnoreMove=!0,t.shouldWatchScroll=!1,t.emitter.on("pointerdown",this.onDocumentPointerDown),t.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}],elementDraggingImpl:Zb,optionRefiners:Ate,listenerRefiners:Tte});let Nte=(()=>{class n{constructor(t,i){this.dialogRef=t,this.data=i,this.message=i.message}onConfirm(){this.dialogRef.close(!0)}onCancel(){this.dialogRef.close(!1)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(TD),c.Y36(cT))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-confirm-dialogs"]],decls:10,vars:1,consts:[["mat-dialog-title",""],["align","end"],["mat-button","",3,"click"],["mat-button","","color","warn",3,"click"]],template:function(t,i){1&t&&(c.TgZ(0,"h2",0),c._uU(1,"\u78ba\u8a8d"),c.qZA(),c.TgZ(2,"mat-dialog-content")(3,"p"),c._uU(4),c.qZA()(),c.TgZ(5,"mat-dialog-actions",1)(6,"button",2),c.NdJ("click",function(){return i.onCancel()}),c._uU(7,"\u53d6\u6d88"),c.qZA(),c.TgZ(8,"button",3),c.NdJ("click",function(){return i.onConfirm()}),c._uU(9,"\u78ba\u5b9a"),c.qZA()()),2&t&&(c.xp6(4),c.Oqu(i.message))},dependencies:[E_,QO,XO,JO]}),n})(),Pte=(()=>{class n{constructor(t,i){this.dialogRef=t,this.data=i,this.item={name:"",date:new Date,amount:0,selectedCurrency:"TWD",people:[],shareAmount:0,editing:!1}}onSave(){this.dialogRef.close(this.item)}onCancel(){this.dialogRef.close()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(TD),c.Y36(cT))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-dialogs"]],decls:33,vars:6,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["appearance","outline"],["matInput","",3,"ngModel","ngModelChange"],["matInput","","name","date",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["matInput","","type","number",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["value","TWD"],["value","JPY"],["value","USD"],["mat-dialog-actions",""],["mat-button","",3,"click"]],template:function(t,i){if(1&t&&(c.TgZ(0,"h1",0),c._uU(1,"\u65b0\u589e\u9805\u76ee"),c.qZA(),c.TgZ(2,"div",1)(3,"mat-form-field",2)(4,"mat-label"),c._uU(5,"\u9805\u76ee\u540d\u7a31"),c.qZA(),c.TgZ(6,"input",3),c.NdJ("ngModelChange",function(s){return i.item.name=s}),c.qZA()(),c.TgZ(7,"mat-form-field",2)(8,"mat-label"),c._uU(9,"\u65e5\u671f"),c.qZA(),c.TgZ(10,"input",4),c.NdJ("ngModelChange",function(s){return i.item.date=s}),c.qZA(),c._UZ(11,"mat-datepicker-toggle",5)(12,"mat-datepicker",null,6),c.qZA(),c.TgZ(14,"mat-form-field",2)(15,"mat-label"),c._uU(16,"\u91d1\u984d"),c.qZA(),c.TgZ(17,"input",7),c.NdJ("ngModelChange",function(s){return i.item.amount=s}),c.qZA()(),c.TgZ(18,"mat-form-field",2)(19,"mat-label"),c._uU(20,"\u5e63\u5225"),c.qZA(),c.TgZ(21,"mat-select",8),c.NdJ("ngModelChange",function(s){return i.item.selectedCurrency=s}),c.TgZ(22,"mat-option",9),c._uU(23,"\u53f0\u5e63"),c.qZA(),c.TgZ(24,"mat-option",10),c._uU(25,"\u65e5\u5713"),c.qZA(),c.TgZ(26,"mat-option",11),c._uU(27,"\u7f8e\u91d1"),c.qZA()()()(),c.TgZ(28,"div",12)(29,"button",13),c.NdJ("click",function(){return i.onCancel()}),c._uU(30,"\u53d6\u6d88"),c.qZA(),c.TgZ(31,"button",13),c.NdJ("click",function(){return i.onSave()}),c._uU(32,"\u5132\u5b58"),c.qZA()()),2&t){const r=c.MAs(13);c.xp6(6),c.Q6J("ngModel",i.item.name),c.xp6(4),c.Q6J("matDatepicker",r)("ngModel",i.item.date),c.xp6(1),c.Q6J("for",r),c.xp6(6),c.Q6J("ngModel",i.item.amount),c.xp6(4),c.Q6J("ngModel",i.item.selectedCurrency)}},dependencies:[cD,UA,QR,HA,NB,XA,hq,p5,N2,SO,E_,QO,XO,JO,W5,YO,X5]}),n})(),Fte=(()=>{class n{constructor(t){this.data=t}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(cT))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-end-dialogs"]],decls:14,vars:2,consts:[["mat-dialog-title",""],["mat-button","","mat-dialog-close",""]],template:function(t,i){1&t&&(c.TgZ(0,"h2",0),c._uU(1,"Event Details"),c.qZA(),c.TgZ(2,"mat-dialog-content")(3,"p")(4,"strong"),c._uU(5,"Title:"),c.qZA(),c._uU(6),c.qZA(),c.TgZ(7,"p")(8,"strong"),c._uU(9,"Start Date:"),c.qZA(),c._uU(10),c.qZA()(),c.TgZ(11,"mat-dialog-actions")(12,"button",1),c._uU(13,"Close"),c.qZA()()),2&t&&(c.xp6(6),c.hij(" ",i.data.event.title,""),c.xp6(4),c.hij(" ",i.data.event.start,""))},dependencies:[E_,dY,QO,XO,JO]}),n})();const Tz="@firebase/database";let XP="";function kz(n){XP=n}class Bte{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,F.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,F.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Hte{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,F.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const xz=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Bte(e)}}catch{}return new Hte},H_=xz("localStorage"),JP=xz("sessionStorage"),Kb=new Ss.Yd("@firebase/database"),Rz=function(){let n=1;return function(){return n++}}(),Oz=function(n){const e=(0,F.dS)(n),t=new F.gQ;t.update(e);const i=t.digest();return F.US.encodeByteArray(i)},QD=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=QD.apply(null,i):e+="object"==typeof i?(0,F.Wl)(i):i,e+=" "}return e};let U_=null,Nz=!0;const Pz=function(n,e){(0,F.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Kb.logLevel=Ss.in.VERBOSE,U_=Kb.log.bind(Kb),e&&JP.set("logging_enabled",!0)):"function"==typeof n?U_=n:(U_=null,JP.remove("logging_enabled"))},ds=function(...n){if(!0===Nz&&(Nz=!1,null===U_&&!0===JP.get("logging_enabled")&&Pz(!0)),U_){const e=QD.apply(null,n);U_(e)}},XD=function(n){return function(...e){ds(n,...e)}},e1=function(...n){const e="FIREBASE INTERNAL ERROR: "+QD(...n);Kb.error(e)},sd=function(...n){const e=`FIREBASE FATAL ERROR: ${QD(...n)}`;throw Kb.error(e),new Error(e)},oo=function(...n){const e="FIREBASE WARNING: "+QD(...n);Kb.warn(e)},DM=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},ug="[MIN_NAME]",rf="[MAX_NAME]",j_=function(n,e){if(n===e)return 0;if(n===ug||e===rf)return-1;if(e===ug||n===rf)return 1;{const t=Vz(n),i=Vz(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},zte=function(n,e){return n===e?0:n<e?-1:1},JD=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,F.Wl)(e))},t1=function(n){if("object"!=typeof n||null===n)return(0,F.Wl)(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=(0,F.Wl)(e[i]),t+=":",t+=t1(n[e[i]]);return t+="}",t},Fz=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)i.push(n.substring(r,r+e>t?t:r+e));return i};function hs(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Lz=function(n){(0,F.hu)(!DM(n),"Invalid JSON number");const i=1023;let r,s,o,d,f;0===n?(s=0,o=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=d+i,o=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const m=[];for(f=52;f;f-=1)m.push(o%2?1:0),o=Math.floor(o/2);for(f=11;f;f-=1)m.push(s%2?1:0),s=Math.floor(s/2);m.push(r?1:0),m.reverse();const v=m.join("");let C="";for(f=0;f<64;f+=8){let A=parseInt(v.substr(f,8),2).toString(16);1===A.length&&(A="0"+A),C+=A}return C.toLowerCase()},qte=new RegExp("^-?(0*)\\d{1,10}$"),Vz=function(n){if(qte.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Qb=function(n){try{n()}catch(e){setTimeout(()=>{throw oo("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},e0=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Qte{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){oo(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Xte{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(ds("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',oo(e)}}let t0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const zz=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Wz="websocket",qz="long_polling";class r1{constructor(e,t,i,r,s=!1,o="",d=!1,f=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=H_.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&H_.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Yz(n,e,t){let i;if((0,F.hu)("string"==typeof e,"typeof type must == string"),(0,F.hu)("object"==typeof t,"typeof params must == object"),e===Wz)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==qz)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Jte(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const r=[];return hs(t,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}class ene{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,F.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,F.p$)(this.counters_)}}const s1={},o1={};function a1(n){const e=n.toString();return s1[e]||(s1[e]=new ene),s1[e]}class nne{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Qb(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class dg{constructor(e,t,i,r,s,o,d){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=XD(e),this.stats_=a1(t),this.urlFn=f=>(this.appCheckToken&&(f.ac=this.appCheckToken),Yz(t,qz,f))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new nne(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,F.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new l1((...s)=>{const[o,d,f,m,v]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=d,this.password=f;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,d)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&zz.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){dg.forceAllow_=!0}static forceDisallow(){dg.forceDisallow_=!0}static isAvailable(){return!((0,F.Yr)()||!dg.forceAllow_&&(dg.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,F.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=(0,F.h$)(t),r=Fz(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,F.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,F.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class l1{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,F.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Rz(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=l1.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(d){ds("frame writing exception"),d.stack&&ds(d.stack),ds(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ds("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const o=this.pendingSegs.shift();i=i+"&seg"+r+"="+o.seg+"&ts"+r+"="+o.ts+"&d"+r+"="+o.d,r++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),i()})}addTag(e,t){(0,F.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{ds("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let IM=null;typeof MozWebSocket<"u"?IM=MozWebSocket:typeof WebSocket<"u"&&(IM=WebSocket);let Xb=(()=>{class n{constructor(t,i,r,s,o,d,f){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=XD(this.connId),this.stats_=a1(i),this.connURL=n.connectionURL_(i,d,f,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,s,o){const d={v:"5"};return!(0,F.Yr)()&&typeof location<"u"&&location.hostname&&zz.test(location.hostname)&&(d.r="f"),i&&(d.s=i),r&&(d.ls=r),s&&(d.ac=s),o&&(d.p=o),Yz(t,Wz,d)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,H_.set("previous_websocket_failure",!0);try{let r;if((0,F.Yr)()){r={headers:{"User-Agent":`Firebase/5/${XP}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const o=process.env,d=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;d&&(r.proxy={origin:d})}this.mySock=new IM(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==IM&&!n.forceDisallow_}static previouslyFailed(){return H_.isInMemoryStorage||!0===H_.get("previous_websocket_failure")}markConnectionHealthy(){H_.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,F.cI)(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,F.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=(0,F.Wl)(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=Fz(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),tG=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[dg,Xb]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=Xb&&Xb.isAvailable();let r=i&&!Xb.previouslyFailed();if(t.webSocketOnly&&(i||oo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Xb];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class lG{constructor(e,t,i,r,s,o,d,f,m,v){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=d,this.onDisconnect_=f,this.onKill_=m,this.lastSessionId=v,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=XD("c:"+this.id+":"),this.transportManager_=new tG(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=e0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=JD("t",e),i=JD("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=JD("t",e),i=JD("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=JD("t",e);if("d"in e){const i=e.d;if("h"===t){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?e1("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):e1("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&oo("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),e0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):e0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(H_.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class cG{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class uG{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,F.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(e){(0,F.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class AM extends uG{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,F.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new AM}getInitialEvent(e){return(0,F.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class jn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function On(){return new jn("")}function ln(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function hg(n){return n.pieces_.length-n.pieceNum_}function ci(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new jn(n.pieces_,e)}function u1(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function n0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function fG(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new jn(e,0)}function Vi(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof jn)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new jn(t,0)}function cn(n){return n.pieceNum_>=n.pieces_.length}function To(n,e){const t=ln(n),i=ln(e);if(null===t)return e;if(t===i)return To(ci(n),ci(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Dne(n,e){const t=n0(n,0),i=n0(e,0);for(let r=0;r<t.length&&r<i.length;r++){const s=j_(t[r],i[r]);if(0!==s)return s}return t.length===i.length?0:t.length<i.length?-1:1}function d1(n,e){if(hg(n)!==hg(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function vl(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(hg(n)>hg(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class Sne{constructor(e,t){this.errorPrefix_=t,this.parts_=n0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,F.ug)(this.parts_[i]);pG(this)}}function pG(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+z_(n))}function z_(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class h1 extends uG{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new h1}getInitialEvent(e){return(0,F.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const r0=1e3;let MM,G_=(()=>{class n extends cG{constructor(t,i,r,s,o,d,f,m){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=d,this.appCheckTokenProvider_=f,this.authOverride_=m,this.id=n.nextPersistentConnectionId_++,this.log_=XD("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=r0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m&&!(0,F.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");h1.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&AM.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const s=++this.requestNumber_,o={r:s,a:t,b:i};this.log_((0,F.Wl)(o)),(0,F.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();const i=new F.BH,r={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:r,onComplete:d=>{const f=d.d;"ok"===d.s?i.resolve(f):i.reject(f)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(t,i,r,s){this.initConnection_();const o=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+o),this.listens.has(d)||this.listens.set(d,new Map),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,F.hu)(!this.listens.get(d).has(o),"listen() called twice for same path/queryId.");const f={onComplete:s,hashFn:i,query:t,tag:r};this.listens.get(d).set(o,f),this.connected_&&this.sendListen_(f)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const o={p:r};t.tag&&(o.q=i._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,f=>{const m=f.d,v=f.s;n.warnOnListenWarnings_(m,i),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",f),"ok"!==v&&this.removeListen_(r,s),t.onComplete&&t.onComplete(v,m))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&(0,F.r3)(t,"w")){const r=(0,F.DV)(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();oo(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,F.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=(0,F.w9)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const o=s.s,d=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,i)}sendUnlisten_(t,i,r,s){this.log_("Unlisten on "+t+" for "+i);const o={p:t};s&&(o.q=r,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,s){const o={p:i,d:r};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(t,i,r,s){this.putInternal("p",t,i,r,s)}merge(t,i,r,s){this.putInternal("m",t,i,r,s)}putInternal(t,i,r,s,o){this.initConnection_();const d={p:i,d:r};void 0!==o&&(d.h=o),this.outstandingPuts_.push({action:t,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,F.Wl)(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):e1("Unrecognized action received from server: "+(0,F.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,F.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=r0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=r0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=r0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ve.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let f=!1,m=null;const v=function(){m?m.close():(f=!0,s())};t.realtime_={close:v,sendRequest:function(M){(0,F.hu)(m,"sendRequest call when we're not connected not allowed."),m.sendRequest(M)}};const A=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[M,P]=yield Promise.all([t.authTokenProvider_.getToken(A),t.appCheckTokenProvider_.getToken(A)]);f?ds("getToken() completed but was canceled"):(ds("getToken() completed. Creating connection."),t.authToken_=M&&M.accessToken,t.appCheckToken_=P&&P.token,m=new lG(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,r,s,H=>{oo(H+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(M){t.log_("Failed to get token: "+M),f||(t.repoInfo_.nodeAdmin&&oo(M),v())}}})()}interrupt(t){ds("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ds("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,F.xb)(this.interruptReasons_)&&(this.reconnectDelay_=r0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;r=i?i.map(o=>t1(o)).join("$"):"default";const s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,i){const r=new jn(t).toString();let s;if(this.listens.has(r)){const o=this.listens.get(r);s=o.get(i),o.delete(i),0===o.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,i){ds("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){ds("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";(0,F.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+i+"."+XP.replace(/\./g,"-")]=1,(0,F.uI)()?t["framework.cordova"]=1:(0,F.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=AM.getInstance().currentlyOnline();return(0,F.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class pn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new pn(e,t)}}class TM{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new pn(ug,e),r=new pn(ug,t);return 0!==this.compare(i,r)}minPost(){return pn.MIN}}class _G extends TM{static get __EMPTY_NODE(){return MM}static set __EMPTY_NODE(e){MM=e}compare(e,t){return j_(e.name,t.name)}isDefinedOn(e){throw(0,F.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return pn.MIN}maxPost(){return new pn(rf,MM)}makePost(e,t){return(0,F.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new pn(e,MM)}toString(){return".key"}}const od=new _G;class kM{constructor(e,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let p1,Nc=(()=>{class n{constructor(t,i,r,s,o){this.key=t,this.value=i,this.color=r??n.RED,this.left=s??ta.EMPTY_NODE,this.right=o??ta.EMPTY_NODE}copy(t,i,r,s,o){return new n(t??this.key,i??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this;const o=r(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,i,r),null):0===o?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ta.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,s;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(t,r.key)){if(r.right.isEmpty())return ta.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ta{constructor(e,t=ta.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ta(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Nc.BLACK,null,null))}remove(e){return new ta(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Nc.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new kM(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new kM(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new kM(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new kM(this.root_,null,this.comparator_,!0,e)}}function One(n,e){return j_(n.name,e.name)}function f1(n,e){return j_(n,e)}ta.EMPTY_NODE=new class Rne{copy(e,t,i,r,s){return this}insert(e,t,i){return new Nc(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const yG=function(n){return"number"==typeof n?"number:"+Lz(n):"string:"+n},vG=function(n){if(n.isLeafNode()){const e=n.val();(0,F.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,F.r3)(e,".sv"),"Priority must be a string or number.")}else(0,F.hu)(n===p1||n.isEmpty(),"priority of unexpected type.");(0,F.hu)(n===p1||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let bG,wG,EG,Jb=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,(0,F.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),vG(this.priorityNode_)}static set __childrenNodeConstructor(t){bG=t}static get __childrenNodeConstructor(){return bG}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return cn(t)?this:".priority"===ln(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=ln(t);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,F.hu)(".priority"!==r||1===hg(t),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(ci(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+yG(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?Lz(this.value_):this.value_,this.lazyHash_=Oz(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,F.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),o=n.VALUE_TYPE_ORDER.indexOf(r);return(0,F.hu)(s>=0,"Unknown leaf type: "+i),(0,F.hu)(o>=0,"Unknown leaf type: "+r),s===o?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const _i=new class Lne extends TM{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return 0===s?j_(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return pn.MIN}maxPost(){return new pn(rf,new Jb("[PRIORITY-POST]",EG))}makePost(e,t){const i=wG(e);return new pn(t,new Jb("[PRIORITY-POST]",i))}toString(){return".priority"}},Vne=Math.log(2);class Bne{constructor(e){this.count=parseInt(Math.log(e+1)/Vne,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const xM=function(n,e,t,i){n.sort(e);const r=function(f,m){const v=m-f;let C,A;if(0===v)return null;if(1===v)return C=n[f],A=t?t(C):C,new Nc(A,C.node,Nc.BLACK,null,null);{const M=parseInt(v/2,10)+f,P=r(f,M),H=r(M+1,m);return C=n[M],A=t?t(C):C,new Nc(A,C.node,Nc.BLACK,P,H)}},d=function(f){let m=null,v=null,C=n.length;const A=function(P,H){const U=C-P,K=C;C-=P;const _e=r(U+1,K),Oe=n[U],je=t?t(Oe):Oe;M(new Nc(je,Oe.node,H,null,_e))},M=function(P){m?(m.left=P,m=P):(v=P,m=P)};for(let P=0;P<f.count;++P){const H=f.nextBitIsOne(),U=Math.pow(2,f.count-(P+1));H?A(U,Nc.BLACK):(A(U,Nc.BLACK),A(U,Nc.RED))}return v}(new Bne(n.length));return new ta(i||e,d)};let g1;const ew={};class sf{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,F.hu)(ew&&_i,"ChildrenNode.ts has not been loaded"),g1=g1||new sf({".priority":ew},{".priority":_i}),g1}get(e){const t=(0,F.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ta?t:null}hasIndex(e){return(0,F.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,F.hu)(e!==od,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=t.getIterator(pn.Wrap);let d,o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();d=r?xM(i,e.getCompare()):ew;const f=e.toString(),m=Object.assign({},this.indexSet_);m[f]=e;const v=Object.assign({},this.indexes_);return v[f]=d,new sf(v,m)}addToIndexes(e,t){const i=(0,F.UI)(this.indexes_,(r,s)=>{const o=(0,F.DV)(this.indexSet_,s);if((0,F.hu)(o,"Missing index implementation for "+s),r===ew){if(o.isDefinedOn(e.node)){const d=[],f=t.getIterator(pn.Wrap);let m=f.getNext();for(;m;)m.name!==e.name&&d.push(m),m=f.getNext();return d.push(e),xM(d,o.getCompare())}return ew}{const d=t.get(e.name);let f=r;return d&&(f=f.remove(new pn(e.name,d))),f.insert(e,e.node)}});return new sf(i,this.indexSet_)}removeFromIndexes(e,t){const i=(0,F.UI)(this.indexes_,r=>{if(r===ew)return r;{const s=t.get(e.name);return s?r.remove(new pn(e.name,s)):r}});return new sf(i,this.indexSet_)}}let s0,en=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&vG(this.priorityNode_),this.children_.isEmpty()&&(0,F.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return s0||(s0=new n(new ta(f1),null,sf.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||s0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?s0:i}}getChild(t){const i=ln(t);return null===i?this:this.getImmediateChild(i).getChild(ci(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if((0,F.hu)(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const r=new pn(t,i);let s,o;i.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,i),o=this.indexMap_.addToIndexes(r,this.children_));const d=s.isEmpty()?s0:this.priorityNode_;return new n(s,d,o)}}updateChild(t,i){const r=ln(t);if(null===r)return i;{(0,F.hu)(".priority"!==ln(t)||1===hg(t),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(ci(t),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,s=0,o=!0;if(this.forEachChild(_i,(d,f)=>{i[d]=f.val(t),r++,o&&n.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):o=!1}),!t&&o&&s<2*r){const d=[];for(const f in i)d[f]=i[f];return d}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+yG(this.getPriority().val())+":"),this.forEachChild(_i,(i,r)=>{const s=r.hash();""!==s&&(t+=":"+i+":"+s)}),this.lazyHash_=""===t?"":Oz(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const s=this.resolveIndex_(r);if(s){const o=s.getPredecessorKey(new pn(t,i));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new pn(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new pn(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,pn.Wrap);let o=s.peek();for(;null!=o&&i.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,pn.Wrap);let o=s.peek();for(;null!=o&&i.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===o0?-1:0}withIndex(t){if(t===od||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===od||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(_i),s=i.getIterator(_i);let o=r.getNext(),d=s.getNext();for(;o&&d;){if(o.name!==d.name||!o.node.equals(d.node))return!1;o=r.getNext(),d=s.getNext()}return null===o&&null===d}return!1}return!1}}resolveIndex_(t){return t===od?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const o0=new class Hne extends en{constructor(){super(new ta(f1),en.EMPTY_NODE,sf.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return en.EMPTY_NODE}isEmpty(){return!1}};function qi(n,e=null){if(null===n)return en.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,F.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Jb(n,qi(e));if(n instanceof Array){let t=en.EMPTY_NODE;return hs(n,(i,r)=>{if((0,F.r3)(n,i)&&"."!==i.substring(0,1)){const s=qi(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(qi(e))}{const t=[];let i=!1;if(hs(n,(o,d)=>{if("."!==o.substring(0,1)){const f=qi(d);f.isEmpty()||(i=i||!f.getPriority().isEmpty(),t.push(new pn(o,f)))}}),0===t.length)return en.EMPTY_NODE;const s=xM(t,One,o=>o.name,f1);if(i){const o=xM(t,_i.getCompare());return new en(s,qi(e),new sf({".priority":o},{".priority":_i}))}return new en(s,qi(e),sf.Default)}}Object.defineProperties(pn,{MIN:{value:new pn(ug,en.EMPTY_NODE)},MAX:{value:new pn(rf,o0)}}),_G.__EMPTY_NODE=en.EMPTY_NODE,Jb.__childrenNodeConstructor=en,function Nne(n){p1=n}(o0),function Fne(n){EG=n}(o0),function Pne(n){wG=n}(qi);class m1 extends TM{constructor(e){super(),this.indexPath_=e,(0,F.hu)(!cn(e)&&".priority"!==ln(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),s=i.compareTo(r);return 0===s?j_(e.name,t.name):s}makePost(e,t){const i=qi(e),r=en.EMPTY_NODE.updateChild(this.indexPath_,i);return new pn(t,r)}maxPost(){const e=en.EMPTY_NODE.updateChild(this.indexPath_,o0);return new pn(rf,e)}toString(){return n0(this.indexPath_,0).join("/")}}const _1=new class jne extends TM{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?j_(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return pn.MIN}maxPost(){return pn.MAX}makePost(e,t){const i=qi(e);return new pn(t,i)}toString(){return".value"}};function CG(n){return{type:"value",snapshotNode:n}}function tw(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function a0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function l0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class y1{constructor(e){this.index_=e}updateChild(e,t,i,r,s,o){(0,F.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(r).equals(i.getChild(r))&&d.isEmpty()===i.isEmpty()||(null!=o&&(i.isEmpty()?e.hasChild(t)?o.trackChildChange(a0(t,d)):(0,F.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?o.trackChildChange(tw(t,i)):o.trackChildChange(l0(t,i,d))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return null!=i&&(e.isLeafNode()||e.forEachChild(_i,(r,s)=>{t.hasChild(r)||i.trackChildChange(a0(r,s))}),t.isLeafNode()||t.forEachChild(_i,(r,s)=>{if(e.hasChild(r)){const o=e.getImmediateChild(r);o.equals(s)||i.trackChildChange(l0(r,s,o))}else i.trackChildChange(tw(r,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?en.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class c0{constructor(e){this.indexedFilter_=new y1(e.getIndex()),this.index_=e.getIndex(),this.startPost_=c0.getStartPost_(e),this.endPost_=c0.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,r,s,o){return this.matches(new pn(t,i))||(i=en.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,s,o)}updateFullNode(e,t,i){t.isLeafNode()&&(t=en.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(en.EMPTY_NODE);const s=this;return t.forEachChild(_i,(o,d)=>{s.matches(new pn(o,d))||(r=r.updateImmediateChild(o,en.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Gne{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new c0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,r,s,o){return this.rangedFilter_.matches(new pn(t,i))||(i=en.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,s,o):this.fullLimitUpdateChild_(e,t,i,s,o)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=en.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;r=en.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const d=s.getNext();if(this.withinDirectionalStart(d)){if(!this.withinDirectionalEnd(d))break;r=r.updateImmediateChild(d.name,d.node),o++}}}else{let s;r=t.withIndex(this.index_),r=r.updatePriority(en.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let o=0;for(;s.hasNext();){const d=s.getNext();o<this.limit_&&this.withinDirectionalStart(d)&&this.withinDirectionalEnd(d)?o++:r=r.updateImmediateChild(d.name,en.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,s){let o;if(this.reverse_){const C=this.index_.getCompare();o=(A,M)=>C(M,A)}else o=this.index_.getCompare();const d=e;(0,F.hu)(d.numChildren()===this.limit_,"");const f=new pn(t,i),m=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),v=this.rangedFilter_.matches(f);if(d.hasChild(t)){const C=d.getImmediateChild(t);let A=r.getChildAfterChild(this.index_,m,this.reverse_);for(;null!=A&&(A.name===t||d.hasChild(A.name));)A=r.getChildAfterChild(this.index_,A,this.reverse_);const M=null==A?1:o(A,f);if(v&&!i.isEmpty()&&M>=0)return s?.trackChildChange(l0(t,i,C)),d.updateImmediateChild(t,i);{s?.trackChildChange(a0(t,C));const H=d.updateImmediateChild(t,en.EMPTY_NODE);return null!=A&&this.rangedFilter_.matches(A)?(s?.trackChildChange(tw(A.name,A.node)),H.updateImmediateChild(A.name,A.node)):H}}return i.isEmpty()?e:v&&o(m,f)>=0?(null!=s&&(s.trackChildChange(a0(m.name,m.node)),s.trackChildChange(tw(t,i))),d.updateImmediateChild(t,i).updateImmediateChild(m.name,en.EMPTY_NODE)):e}}class RM{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=_i}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ug}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:rf}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,F.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===_i}copy(){const e=new RM;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function v1(n,e,t){const i=n.copy();return i.startSet_=!0,void 0===e&&(e=null),i.indexStartValue_=e,null!=t?(i.startNameSet_=!0,i.indexStartName_=t):(i.startNameSet_=!1,i.indexStartName_=""),i}function b1(n,e,t){const i=n.copy();return i.endSet_=!0,void 0===e&&(e=null),i.indexEndValue_=e,void 0!==t?(i.endNameSet_=!0,i.indexEndName_=t):(i.endNameSet_=!1,i.indexEndName_=""),i}function OM(n,e){const t=n.copy();return t.index_=e,t}function DG(n){const e={};if(n.isDefault())return e;let t;if(n.index_===_i?t="$priority":n.index_===_1?t="$value":n.index_===od?t="$key":((0,F.hu)(n.index_ instanceof m1,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,F.Wl)(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=(0,F.Wl)(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+(0,F.Wl)(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=(0,F.Wl)(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+(0,F.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function SG(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==_i&&(e.i=n.index_.toString()),e}class NM extends cG{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=XD("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,F.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=NM.getListenId_(e,i),d={};this.listens_[o]=d;const f=DG(e._queryParams);this.restRequest_(s+".json",f,(m,v)=>{let C=v;if(404===m&&(C=null,m=null),null===m&&this.onDataUpdate_(s,C,!1,i),(0,F.DV)(this.listens_,o)===d){let A;A=m?401===m?"permission_denied":"rest_error:"+m:"ok",r(A,null)}})}unlisten(e,t){const i=NM.getListenId_(e,t);delete this.listens_[i]}get(e){const t=DG(e._queryParams),i=e._path.toString(),r=new F.BH;return this.restRequest_(i+".json",t,(s,o)=>{let d=o;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(i,d,!1,null),r.resolve(d)):r.reject(new Error(d))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,F.xO)(t);this.log_("Sending REST request for "+o);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&4===d.readyState){this.log_("REST Response for "+o+" received. status:",d.status,"response:",d.responseText);let f=null;if(d.status>=200&&d.status<300){try{f=(0,F.cI)(d.responseText)}catch{oo("Failed to parse JSON response for "+o+": "+d.responseText)}i(null,f)}else 401!==d.status&&404!==d.status&&oo("Got unsuccessful REST response for "+o+" Status: "+d.status),i(d.status);i=null}},d.open("GET",o,!0),d.send()})}}class Kne{constructor(){this.rootNode_=en.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function PM(){return{value:null,children:new Map}}function nw(n,e,t){if(cn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=ln(e);n.children.has(i)||n.children.set(i,PM()),nw(n.children.get(i),e=ci(e),t)}}function w1(n,e){if(cn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(_i,(i,r)=>{nw(n,new jn(i),r)}),w1(n,e)}}if(n.children.size>0){const t=ln(e);return e=ci(e),n.children.has(t)&&w1(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function E1(n,e,t){null!==n.value?t(e,n.value):function Qne(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,r)=>{E1(r,new jn(e.toString()+"/"+i),t)})}class Xne{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&hs(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}class tie{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Xne(e);const i=1e4+2e4*Math.random();e0(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;hs(e,(r,s)=>{s>0&&(0,F.r3)(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),e0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var bl=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(bl||(bl={})),bl))();function S1(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class FM{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=bl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(cn(this.path)){if(null!=this.affectedTree.value)return(0,F.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new jn(e));return new FM(On(),t,this.revert)}}return(0,F.hu)(ln(this.path)===e,"operationForChild called for unrelated child."),new FM(ci(this.path),this.affectedTree,this.revert)}}class u0{constructor(e,t){this.source=e,this.path=t,this.type=bl.LISTEN_COMPLETE}operationForChild(e){return cn(this.path)?new u0(this.source,On()):new u0(this.source,ci(this.path))}}class $_{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=bl.OVERWRITE}operationForChild(e){return cn(this.path)?new $_(this.source,On(),this.snap.getImmediateChild(e)):new $_(this.source,ci(this.path),this.snap)}}class iw{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=bl.MERGE}operationForChild(e){if(cn(this.path)){const t=this.children.subtree(new jn(e));return t.isEmpty()?null:t.value?new $_(this.source,On(),t.value):new iw(this.source,On(),t)}return(0,F.hu)(ln(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new iw(this.source,ci(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class fg{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(cn(e))return this.isFullyInitialized()&&!this.filtered_;const t=ln(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class nie{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function d0(n,e,t,i,r,s){const o=i.filter(d=>d.type===t);o.sort((d,f)=>function sie(n,e,t){if(null==e.childName||null==t.childName)throw(0,F.g5)("Should only compare child_ events.");const i=new pn(e.childName,e.snapshotNode),r=new pn(t.childName,t.snapshotNode);return n.index_.compare(i,r)}(n,d,f)),o.forEach(d=>{const f=function rie(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,s);r.forEach(m=>{m.respondsTo(d.type)&&e.push(m.createEvent(f,n.query_))})})}function LM(n,e){return{eventCache:n,serverCache:e}}function h0(n,e,t,i){return LM(new fg(e,t,i),n.serverCache)}function AG(n,e,t,i){return LM(n.eventCache,new fg(e,t,i))}function VM(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function W_(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let I1;class yi{constructor(e,t=(()=>(I1||(I1=new ta(zte)),I1))()){this.value=e,this.children=t}static fromObject(e){let t=new yi(null);return hs(e,(i,r)=>{t=t.set(new jn(i),r)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:On(),value:this.value};if(cn(e))return null;{const i=ln(e),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(ci(e),t);return null!=s?{path:Vi(new jn(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(cn(e))return this;{const t=ln(e),i=this.children.get(t);return null!==i?i.subtree(ci(e)):new yi(null)}}set(e,t){if(cn(e))return new yi(t,this.children);{const i=ln(e),s=(this.children.get(i)||new yi(null)).set(ci(e),t),o=this.children.insert(i,s);return new yi(this.value,o)}}remove(e){if(cn(e))return this.children.isEmpty()?new yi(null):new yi(null,this.children);{const t=ln(e),i=this.children.get(t);if(i){const r=i.remove(ci(e));let s;return s=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&s.isEmpty()?new yi(null):new yi(this.value,s)}return this}}get(e){if(cn(e))return this.value;{const t=ln(e),i=this.children.get(t);return i?i.get(ci(e)):null}}setTree(e,t){if(cn(e))return t;{const i=ln(e),s=(this.children.get(i)||new yi(null)).setTree(ci(e),t);let o;return o=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new yi(this.value,o)}}fold(e){return this.fold_(On(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Vi(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,On(),t)}findOnPath_(e,t,i){const r=!!this.value&&i(t,this.value);if(r)return r;if(cn(e))return null;{const s=ln(e),o=this.children.get(s);return o?o.findOnPath_(ci(e),Vi(t,s),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,On(),t)}foreachOnPath_(e,t,i){if(cn(e))return this;{this.value&&i(t,this.value);const r=ln(e),s=this.children.get(r);return s?s.foreachOnPath_(ci(e),Vi(t,r),i):new yi(null)}}foreach(e){this.foreach_(On(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(Vi(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class Pc{constructor(e){this.writeTree_=e}static empty(){return new Pc(new yi(null))}}function f0(n,e,t){if(cn(e))return new Pc(new yi(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let s=i.value;const o=To(r,e);return s=s.updateChild(o,t),new Pc(n.writeTree_.set(r,s))}{const r=new yi(t),s=n.writeTree_.setTree(e,r);return new Pc(s)}}}function A1(n,e,t){let i=n;return hs(t,(r,s)=>{i=f0(i,Vi(e,r),s)}),i}function TG(n,e){if(cn(e))return Pc.empty();{const t=n.writeTree_.setTree(e,new yi(null));return new Pc(t)}}function T1(n,e){return null!=q_(n,e)}function q_(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(To(t.path,e)):null}function MG(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(_i,(i,r)=>{e.push(new pn(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&e.push(new pn(i,r.value))}),e}function pg(n,e){if(cn(e))return n;{const t=q_(n,e);return new Pc(null!=t?new yi(t):n.writeTree_.subtree(e))}}function M1(n){return n.writeTree_.isEmpty()}function rw(n,e){return kG(On(),n.writeTree_,e)}function kG(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{".priority"===r?((0,F.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):t=kG(Vi(n,r),s,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(Vi(n,".priority"),i)),t}}function BM(n,e){return PG(e,n)}function die(n,e){if(n.snap)return vl(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&vl(Vi(n.path,t),e))return!0;return!1}function fie(n){return n.visible}function xG(n,e,t){let i=Pc.empty();for(let r=0;r<n.length;++r){const s=n[r];if(e(s)){const o=s.path;let d;if(s.snap)vl(t,o)?(d=To(t,o),i=f0(i,d,s.snap)):vl(o,t)&&(d=To(o,t),i=f0(i,On(),s.snap.getChild(d)));else{if(!s.children)throw(0,F.g5)("WriteRecord should have .snap or .children");if(vl(t,o))d=To(t,o),i=A1(i,d,s.children);else if(vl(o,t))if(d=To(o,t),cn(d))i=A1(i,On(),s.children);else{const f=(0,F.DV)(s.children,ln(d));if(f){const m=f.getChild(ci(d));i=f0(i,On(),m)}}}}}return i}function RG(n,e,t,i,r){if(i||r){const s=pg(n.visibleWrites,e);return!r&&M1(s)?t:r||null!=t||T1(s,On())?rw(xG(n.allWrites,function(m){return(m.visible||r)&&(!i||!~i.indexOf(m.writeId))&&(vl(m.path,e)||vl(e,m.path))},e),t||en.EMPTY_NODE):null}{const s=q_(n.visibleWrites,e);if(null!=s)return s;{const o=pg(n.visibleWrites,e);return M1(o)?t:null!=t||T1(o,On())?rw(o,t||en.EMPTY_NODE):null}}}function HM(n,e,t,i){return RG(n.writeTree,n.treePath,e,t,i)}function k1(n,e){return function pie(n,e,t){let i=en.EMPTY_NODE;const r=q_(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(_i,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(t){const s=pg(n.visibleWrites,e);return t.forEachChild(_i,(o,d)=>{const f=rw(pg(s,new jn(o)),d);i=i.updateImmediateChild(o,f)}),MG(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}return MG(pg(n.visibleWrites,e)).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}(n.writeTree,n.treePath,e)}function OG(n,e,t,i){return function gie(n,e,t,i,r){(0,F.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=Vi(e,t);if(T1(n.visibleWrites,s))return null;{const o=pg(n.visibleWrites,s);return M1(o)?r.getChild(t):rw(o,r.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function UM(n,e){return function _ie(n,e){return q_(n.visibleWrites,e)}(n.writeTree,Vi(n.treePath,e))}function x1(n,e,t){return function mie(n,e,t,i){const r=Vi(e,t),s=q_(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(t)?rw(pg(n.visibleWrites,r),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function NG(n,e){return PG(Vi(n.treePath,e),n.writeTree)}function PG(n,e){return{treePath:n,writeTree:e}}class wie{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;(0,F.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,F.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(i,l0(i,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(i,a0(i,r.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(i,tw(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,F.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(i,l0(i,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const FG=new class Eie{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class R1{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new fg(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return x1(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:W_(this.viewCache_),s=function bie(n,e,t,i,r,s){return function yie(n,e,t,i,r,s,o){let d;const f=pg(n.visibleWrites,e),m=q_(f,On());if(null!=m)d=m;else{if(null==t)return[];d=rw(f,t)}if(d=d.withIndex(o),d.isEmpty()||d.isLeafNode())return[];{const v=[],C=o.getCompare(),A=s?d.getReverseIteratorFrom(i,o):d.getIteratorFrom(i,o);let M=A.getNext();for(;M&&v.length<r;)0!==C(M,i)&&v.push(M),M=A.getNext();return v}}(n.writeTree,n.treePath,e,t,i,r,s)}(this.writes_,r,t,1,i,e);return 0===s.length?null:s[0]}}function LG(n,e,t,i,r,s){const o=e.eventCache;if(null!=UM(i,t))return e;{let d,f;if(cn(t))if((0,F.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const m=W_(e),C=k1(i,m instanceof en?m:en.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),C,s)}else{const m=HM(i,W_(e));d=n.filter.updateFullNode(e.eventCache.getNode(),m,s)}else{const m=ln(t);if(".priority"===m){(0,F.hu)(1===hg(t),"Can't have a priority with additional path components");const v=o.getNode();f=e.serverCache.getNode();const C=OG(i,t,v,f);d=null!=C?n.filter.updatePriority(v,C):o.getNode()}else{const v=ci(t);let C;if(o.isCompleteForChild(m)){f=e.serverCache.getNode();const A=OG(i,t,o.getNode(),f);C=null!=A?o.getNode().getImmediateChild(m).updateChild(v,A):o.getNode().getImmediateChild(m)}else C=x1(i,m,e.serverCache);d=null!=C?n.filter.updateChild(o.getNode(),m,C,v,r,s):o.getNode()}}return h0(e,d,o.isFullyInitialized()||cn(t),n.filter.filtersNodes())}}function jM(n,e,t,i,r,s,o,d){const f=e.serverCache;let m;const v=o?n.filter:n.filter.getIndexedFilter();if(cn(t))m=v.updateFullNode(f.getNode(),i,null);else if(v.filtersNodes()&&!f.isFiltered()){const M=f.getNode().updateChild(t,i);m=v.updateFullNode(f.getNode(),M,null)}else{const M=ln(t);if(!f.isCompleteForPath(t)&&hg(t)>1)return e;const P=ci(t),U=f.getNode().getImmediateChild(M).updateChild(P,i);m=".priority"===M?v.updatePriority(f.getNode(),U):v.updateChild(f.getNode(),M,U,P,FG,null)}const C=AG(e,m,f.isFullyInitialized()||cn(t),v.filtersNodes());return LG(n,C,t,r,new R1(r,C,s),d)}function O1(n,e,t,i,r,s,o){const d=e.eventCache;let f,m;const v=new R1(r,e,s);if(cn(t))m=n.filter.updateFullNode(e.eventCache.getNode(),i,o),f=h0(e,m,!0,n.filter.filtersNodes());else{const C=ln(t);if(".priority"===C)m=n.filter.updatePriority(e.eventCache.getNode(),i),f=h0(e,m,d.isFullyInitialized(),d.isFiltered());else{const A=ci(t),M=d.getNode().getImmediateChild(C);let P;if(cn(A))P=i;else{const H=v.getCompleteChild(C);P=null!=H?".priority"===u1(A)&&H.getChild(fG(A)).isEmpty()?H:H.updateChild(A,i):en.EMPTY_NODE}f=M.equals(P)?e:h0(e,n.filter.updateChild(d.getNode(),C,P,A,v,o),d.isFullyInitialized(),n.filter.filtersNodes())}}return f}function VG(n,e){return n.eventCache.isCompleteForChild(e)}function BG(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function N1(n,e,t,i,r,s,o,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let m,f=e;m=cn(t)?i:new yi(null).setTree(t,i);const v=e.serverCache.getNode();return m.children.inorderTraversal((C,A)=>{if(v.hasChild(C)){const P=BG(0,e.serverCache.getNode().getImmediateChild(C),A);f=jM(n,f,new jn(C),P,r,s,o,d)}}),m.children.inorderTraversal((C,A)=>{const M=!e.serverCache.isCompleteForChild(C)&&null===A.value;if(!v.hasChild(C)&&!M){const H=BG(0,e.serverCache.getNode().getImmediateChild(C),A);f=jM(n,f,new jn(C),H,r,s,o,d)}}),f}class xie{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new y1(i.getIndex()),s=function $ne(n){return n.loadsAllData()?new y1(n.getIndex()):n.hasLimit()?new Gne(n):new c0(n)}(i);this.processor_=function Cie(n){return{filter:n}}(s);const o=t.serverCache,d=t.eventCache,f=r.updateFullNode(en.EMPTY_NODE,o.getNode(),null),m=s.updateFullNode(en.EMPTY_NODE,d.getNode(),null),v=new fg(f,o.isFullyInitialized(),r.filtersNodes()),C=new fg(m,d.isFullyInitialized(),s.filtersNodes());this.viewCache_=LM(C,v),this.eventGenerator_=new nie(this.query_)}get query(){return this.query_}}function Nie(n,e){const t=W_(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!cn(e)&&!t.getImmediateChild(ln(e)).isEmpty())?t.getChild(e):null}function HG(n){return 0===n.eventRegistrations_.length}function UG(n,e,t){const i=[];if(t){(0,F.hu)(null==e,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,r);o&&i.push(o)})}if(e){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(o)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function jG(n,e,t,i){e.type===bl.MERGE&&null!==e.source.queryId&&((0,F.hu)(W_(n.viewCache_),"We should always have a full cache before handling merges"),(0,F.hu)(VM(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function Sie(n,e,t,i,r){const s=new wie;let o,d;if(t.type===bl.OVERWRITE){const m=t;m.source.fromUser?o=O1(n,e,m.path,m.snap,i,r,s):((0,F.hu)(m.source.fromServer,"Unknown source."),d=m.source.tagged||e.serverCache.isFiltered()&&!cn(m.path),o=jM(n,e,m.path,m.snap,i,r,d,s))}else if(t.type===bl.MERGE){const m=t;m.source.fromUser?o=function Aie(n,e,t,i,r,s,o){let d=e;return i.foreach((f,m)=>{const v=Vi(t,f);VG(e,ln(v))&&(d=O1(n,d,v,m,r,s,o))}),i.foreach((f,m)=>{const v=Vi(t,f);VG(e,ln(v))||(d=O1(n,d,v,m,r,s,o))}),d}(n,e,m.path,m.children,i,r,s):((0,F.hu)(m.source.fromServer,"Unknown source."),d=m.source.tagged||e.serverCache.isFiltered(),o=N1(n,e,m.path,m.children,i,r,d,s))}else if(t.type===bl.ACK_USER_WRITE){const m=t;o=m.revert?function kie(n,e,t,i,r,s){let o;if(null!=UM(i,t))return e;{const d=new R1(i,e,r),f=e.eventCache.getNode();let m;if(cn(t)||".priority"===ln(t)){let v;if(e.serverCache.isFullyInitialized())v=HM(i,W_(e));else{const C=e.serverCache.getNode();(0,F.hu)(C instanceof en,"serverChildren would be complete if leaf node"),v=k1(i,C)}m=n.filter.updateFullNode(f,v,s)}else{const v=ln(t);let C=x1(i,v,e.serverCache);null==C&&e.serverCache.isCompleteForChild(v)&&(C=f.getImmediateChild(v)),m=null!=C?n.filter.updateChild(f,v,C,ci(t),d,s):e.eventCache.getNode().hasChild(v)?n.filter.updateChild(f,v,en.EMPTY_NODE,ci(t),d,s):f,m.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=HM(i,W_(e)),o.isLeafNode()&&(m=n.filter.updateFullNode(m,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=UM(i,On()),h0(e,m,o,n.filter.filtersNodes())}}(n,e,m.path,i,r,s):function Tie(n,e,t,i,r,s,o){if(null!=UM(r,t))return e;const d=e.serverCache.isFiltered(),f=e.serverCache;if(null!=i.value){if(cn(t)&&f.isFullyInitialized()||f.isCompleteForPath(t))return jM(n,e,t,f.getNode().getChild(t),r,s,d,o);if(cn(t)){let m=new yi(null);return f.getNode().forEachChild(od,(v,C)=>{m=m.set(new jn(v),C)}),N1(n,e,t,m,r,s,d,o)}return e}{let m=new yi(null);return i.foreach((v,C)=>{const A=Vi(t,v);f.isCompleteForPath(A)&&(m=m.set(v,f.getNode().getChild(A)))}),N1(n,e,t,m,r,s,d,o)}}(n,e,m.path,m.affectedTree,i,r,s)}else{if(t.type!==bl.LISTEN_COMPLETE)throw(0,F.g5)("Unknown operation type: "+t.type);o=function Mie(n,e,t,i,r){const s=e.serverCache;return LG(n,AG(e,s.getNode(),s.isFullyInitialized()||cn(t),s.isFiltered()),t,i,FG,r)}(n,e,t.path,i,s)}const f=s.getChanges();return function Iie(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=VM(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push(CG(VM(e)))}}(e,o,f),{viewCache:o,changes:f}}(n.processor_,r,e,t,i);return function Die(n,e){(0,F.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,F.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,F.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,zG(n,s.changes,s.viewCache.eventCache.getNode(),null)}function zG(n,e,t,i){return function iie(n,e,t,i){const r=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function zne(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),d0(n,r,"child_removed",e,i,t),d0(n,r,"child_added",e,i,t),d0(n,r,"child_moved",s,i,t),d0(n,r,"child_changed",e,i,t),d0(n,r,"value",e,i,t),r}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}let zM,$M;class GG{constructor(){this.views=new Map}}function P1(n,e,t,i){const r=e.source.queryId;if(null!==r){const s=n.views.get(r);return(0,F.hu)(null!=s,"SyncTree gave us an op for an invalid query."),jG(s,e,t,i)}{let s=[];for(const o of n.views.values())s=s.concat(jG(o,e,t,i));return s}}function $G(n,e,t,i,r){const o=n.views.get(e._queryIdentifier);if(!o){let d=HM(t,r?i:null),f=!1;d?f=!0:i instanceof en?(d=k1(t,i),f=!1):(d=en.EMPTY_NODE,f=!1);const m=LM(new fg(d,f,!1),new fg(i,r,!1));return new xie(e,m)}return o}function WG(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function gg(n,e){let t=null;for(const i of n.views.values())t=t||Nie(i,e);return t}function qG(n,e){return e._queryParams.loadsAllData()?GM(n):n.views.get(e._queryIdentifier)}function YG(n,e){return null!=qG(n,e)}function mg(n){return null!=GM(n)}function GM(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Gie=1;class ZG{constructor(e){this.listenProvider_=e,this.syncPointTree_=new yi(null),this.pendingWriteTree_=function vie(){return{visibleWrites:Pc.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function F1(n,e,t,i,r){return function aie(n,e,t,i,r){(0,F.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=f0(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,r),r?sw(n,new $_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function _g(n,e,t=!1){const i=function cie(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function uie(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,F.hu)(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,s=!1,o=n.allWrites.length-1;for(;r&&o>=0;){const d=n.allWrites[o];d.visible&&(o>=t&&die(d,i.path)?r=!1:vl(i.path,d.path)&&(s=!0)),o--}return!!r&&(s?(function hie(n){n.visibleWrites=xG(n.allWrites,fie,On()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=TG(n.visibleWrites,i.path):hs(i.children,f=>{n.visibleWrites=TG(n.visibleWrites,Vi(i.path,f))}),!0))}(n.pendingWriteTree_,e)){let s=new yi(null);return null!=i.snap?s=s.set(On(),!0):hs(i.children,o=>{s=s.set(new jn(o),!0)}),sw(n,new FM(i.path,s,t))}return[]}function p0(n,e,t){return sw(n,new $_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function WM(n,e,t,i,r=!1){const s=e._path,o=n.syncPointTree_.get(s);let d=[];if(o&&("default"===e._queryIdentifier||YG(o,e))){const f=function Uie(n,e,t,i){const r=e._queryIdentifier,s=[];let o=[];const d=mg(n);if("default"===r)for(const[f,m]of n.views.entries())o=o.concat(UG(m,t,i)),HG(m)&&(n.views.delete(f),m.query._queryParams.loadsAllData()||s.push(m.query));else{const f=n.views.get(r);f&&(o=o.concat(UG(f,t,i)),HG(f)&&(n.views.delete(r),f.query._queryParams.loadsAllData()||s.push(f.query)))}return d&&!mg(n)&&s.push(new(function Vie(){return(0,F.hu)(zM,"Reference.ts has not been loaded"),zM}())(e._repo,e._path)),{removed:s,events:o}}(o,e,t,i);(function Bie(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const m=f.removed;if(d=f.events,!r){const v=-1!==m.findIndex(A=>A._queryParams.loadsAllData()),C=n.syncPointTree_.findOnPath(s,(A,M)=>mg(M));if(v&&!C){const A=n.syncPointTree_.subtree(s);if(!A.isEmpty()){const M=function Qie(n){return n.fold((e,t,i)=>{if(t&&mg(t))return[GM(t)];{let r=[];return t&&(r=WG(t)),hs(i,(s,o)=>{r=r.concat(o)}),r}})}(A);for(let P=0;P<M.length;++P){const H=M[P],U=H.query,K=JG(n,H);n.listenProvider_.startListening(m0(U),g0(n,U),K.hashFn,K.onComplete)}}}!C&&m.length>0&&!i&&(v?n.listenProvider_.stopListening(m0(e),null):m.forEach(A=>{const M=n.queryToTagMap.get(YM(A));n.listenProvider_.stopListening(m0(A),M)}))}!function Xie(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const r=YM(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,m)}return d}function KG(n,e,t,i){const r=V1(n,i);if(null!=r){const s=B1(r),o=s.path,d=s.queryId,f=To(o,e);return H1(n,o,new $_(S1(d),f,t))}return[]}function L1(n,e,t,i=!1){const r=e._path;let s=null,o=!1;n.syncPointTree_.foreachOnPath(r,(A,M)=>{const P=To(A,r);s=s||gg(M,P),o=o||mg(M)});let f,d=n.syncPointTree_.get(r);d?(o=o||mg(d),s=s||gg(d,On())):(d=new GG,n.syncPointTree_=n.syncPointTree_.set(r,d)),null!=s?f=!0:(f=!1,s=en.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((M,P)=>{const H=gg(P,On());H&&(s=s.updateImmediateChild(M,H))}));const m=YG(d,e);if(!m&&!e._queryParams.loadsAllData()){const A=YM(e);(0,F.hu)(!n.queryToTagMap.has(A),"View does not exist, but we have a tag");const M=function Jie(){return Gie++}();n.queryToTagMap.set(A,M),n.tagToQueryMap.set(M,A)}let C=function Hie(n,e,t,i,r,s){const o=$G(n,e,i,r,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),function Pie(n,e){n.eventRegistrations_.push(e)}(o,t),function Fie(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(_i,(s,o)=>{i.push(tw(s,o))}),t.isFullyInitialized()&&i.push(CG(t.getNode())),zG(n,i,t.getNode(),e)}(o,t)}(d,e,t,BM(n.pendingWriteTree_,r),s,f);if(!m&&!o&&!i){const A=qG(d,e);C=C.concat(function ere(n,e,t){const i=e._path,r=g0(n,e),s=JG(n,t),o=n.listenProvider_.startListening(m0(e),r,s.hashFn,s.onComplete),d=n.syncPointTree_.subtree(i);if(r)(0,F.hu)(!mg(d.value),"If we're adding a query, it shouldn't be shadowed");else{const f=d.fold((m,v,C)=>{if(!cn(m)&&v&&mg(v))return[GM(v).query];{let A=[];return v&&(A=A.concat(WG(v).map(M=>M.query))),hs(C,(M,P)=>{A=A.concat(P)}),A}});for(let m=0;m<f.length;++m){const v=f[m];n.listenProvider_.stopListening(m0(v),g0(n,v))}}return o}(n,e,A))}return C}function qM(n,e,t){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,d)=>{const m=gg(d,To(o,e));if(m)return m});return RG(r,e,s,t,!0)}function sw(n,e){return QG(e,n.syncPointTree_,null,BM(n.pendingWriteTree_,On()))}function QG(n,e,t,i){if(cn(n.path))return XG(n,e,t,i);{const r=e.get(On());null==t&&null!=r&&(t=gg(r,On()));let s=[];const o=ln(n.path),d=n.operationForChild(o),f=e.children.get(o);if(f&&d){const m=t?t.getImmediateChild(o):null,v=NG(i,o);s=s.concat(QG(d,f,m,v))}return r&&(s=s.concat(P1(r,n,i,t))),s}}function XG(n,e,t,i){const r=e.get(On());null==t&&null!=r&&(t=gg(r,On()));let s=[];return e.children.inorderTraversal((o,d)=>{const f=t?t.getImmediateChild(o):null,m=NG(i,o),v=n.operationForChild(o);v&&(s=s.concat(XG(v,d,f,m)))}),r&&(s=s.concat(P1(r,n,i,t))),s}function JG(n,e){const t=e.query,i=g0(n,t);return{hashFn:()=>(function Rie(n){return n.viewCache_.serverCache.getNode()}(e)||en.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function Yie(n,e,t){const i=V1(n,t);if(i){const r=B1(i),s=r.path,o=r.queryId,d=To(s,e);return H1(n,s,new u0(S1(o),d))}return[]}(n,t._path,i):function qie(n,e){return sw(n,new u0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function Wte(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}(r,t);return WM(n,t,null,s)}}}}function g0(n,e){const t=YM(e);return n.queryToTagMap.get(t)}function YM(n){return n._path.toString()+"$"+n._queryIdentifier}function V1(n,e){return n.tagToQueryMap.get(e)}function B1(n){const e=n.indexOf("$");return(0,F.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new jn(n.substr(0,e))}}function H1(n,e,t){const i=n.syncPointTree_.get(e);return(0,F.hu)(i,"Missing sync point for query tag that we're tracking"),P1(i,t,BM(n.pendingWriteTree_,e),null)}function m0(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function zie(){return(0,F.hu)($M,"Reference.ts has not been loaded"),$M}())(n._repo,n._path):n}class U1{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new U1(t)}node(){return this.node_}}class j1{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Vi(this.path_,e);return new j1(this.syncTree_,t)}node(){return qM(this.syncTree_,this.path_)}}const e3=function(n,e,t){return n&&"object"==typeof n?((0,F.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?nre(n[".sv"],e,t):"object"==typeof n[".sv"]?ire(n[".sv"],e):void(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},nre=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,F.hu)(!1,"Unexpected server value: "+n)},ire=function(n,e,t){n.hasOwnProperty("increment")||(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,F.hu)(!1,"Unexpected increment value: "+i);const r=e.node();if((0,F.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const o=r.getValue();return"number"!=typeof o?i:o+i},t3=function(n,e,t,i){return G1(e,new j1(t,n),i)},z1=function(n,e,t){return G1(n,new U1(e),t)};function G1(n,e,t){const i=n.getPriority().val(),r=e3(i,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,d=e3(o.getValue(),e,t);return d!==o.getValue()||r!==o.getPriority().val()?new Jb(d,qi(r)):n}{const o=n;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new Jb(r))),o.forEachChild(_i,(d,f)=>{const m=G1(f,e.getImmediateChild(d),t);m!==f&&(s=s.updateImmediateChild(d,m))}),s}}class $1{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function ZM(n,e){let t=e instanceof jn?e:new jn(e),i=n,r=ln(t);for(;null!==r;){const s=(0,F.DV)(i.node.children,r)||{children:{},childCount:0};i=new $1(r,i,s),t=ci(t),r=ln(t)}return i}function Y_(n){return n.node.value}function W1(n,e){n.node.value=e,q1(n)}function n3(n){return n.node.childCount>0}function KM(n,e){hs(n.node.children,(t,i)=>{e(new $1(t,n,i))})}function i3(n,e,t,i){t&&!i&&e(n),KM(n,r=>{i3(r,e,!0,i)}),t&&i&&e(n)}function _0(n){return new jn(null===n.parent?n.name:_0(n.parent)+"/"+n.name)}function q1(n){null!==n.parent&&function ore(n,e,t){const i=function rre(n){return void 0===Y_(n)&&!n3(n)}(t),r=(0,F.r3)(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,q1(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,q1(n))}(n.parent,n.name,n)}const are=/[\[\].#$\/\u0000-\u001F\u007F]/,lre=/[\[\].#$\u0000-\u001F\u007F]/,Y1=10485760,QM=function(n){return"string"==typeof n&&0!==n.length&&!are.test(n)},r3=function(n){return"string"==typeof n&&0!==n.length&&!lre.test(n)},y0=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!DM(n)||n&&"object"==typeof n&&(0,F.r3)(n,".sv")},ad=function(n,e,t,i){i&&void 0===e||v0((0,F.gK)(n,"value"),e,t)},v0=function(n,e,t){const i=t instanceof jn?new Sne(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+z_(i));if("function"==typeof e)throw new Error(n+"contains a function "+z_(i)+" with contents = "+e.toString());if(DM(e))throw new Error(n+"contains "+e.toString()+" "+z_(i));if("string"==typeof e&&e.length>Y1/3&&(0,F.ug)(e)>Y1)throw new Error(n+"contains a string greater than "+Y1+" utf8 bytes "+z_(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,s=!1;if(hs(e,(o,d)=>{if(".value"===o)r=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!QM(o)))throw new Error(n+" contains an invalid key ("+o+") "+z_(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Ine(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,F.ug)(e),pG(n)})(i,o),v0(n,d,i),function Ane(n){const e=n.parts_.pop();n.byteLength_-=(0,F.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+z_(i)+" in addition to actual children.")}},s3=function(n,e,t,i){if(i&&void 0===e)return;const r=(0,F.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const s=[];hs(e,(o,d)=>{const f=new jn(o);if(v0(r,d,Vi(t,f)),".priority"===u1(f)&&!y0(d))throw new Error(r+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(f)}),function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const s=n0(i);for(let o=0;o<s.length;o++)if((".priority"!==s[o]||o!==s.length-1)&&!QM(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Dne);let r=null;for(t=0;t<e.length;t++){if(i=e[t],null!==r&&vl(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},Z1=function(n,e,t){if(!t||void 0!==e){if(DM(e))throw new Error((0,F.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!y0(e))throw new Error((0,F.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},b0=function(n,e,t,i){if(!(i&&void 0===t||QM(t)))throw new Error((0,F.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},w0=function(n,e,t,i){if(!(i&&void 0===t||r3(t)))throw new Error((0,F.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},wl=function(n,e){if(".info"===ln(e))throw new Error(n+" failed = Can't modify data under /.info/")},o3=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!QM(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),r3(n)}(t))throw new Error((0,F.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class hre{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function XM(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();null!==t&&!d1(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(r)}t&&n.eventLists_.push(t)}function a3(n,e,t){XM(n,t),l3(n,i=>d1(i,e))}function Pa(n,e,t){XM(n,t),l3(n,i=>vl(i,e)||vl(e,i))}function l3(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(e(r.path)?(fre(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function fre(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();U_&&ds("event: "+t.toString()),Qb(i)}}}const c3="repo_interrupt";class gre{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new hre,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=PM(),this.transactionQueueTree_=new $1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function u3(n){const t=n.infoData_.getNode(new jn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function E0(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:u3(n)})}function d3(n,e,t,i,r){n.dataUpdateCount++;const s=new jn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(r)if(i){const f=(0,F.UI)(t,m=>qi(m));o=function Zie(n,e,t,i){const r=V1(n,i);if(r){const s=B1(r),o=s.path,d=s.queryId,f=To(o,e),m=yi.fromObject(t);return H1(n,o,new iw(S1(d),f,m))}return[]}(n.serverSyncTree_,s,f,r)}else{const f=qi(t);o=KG(n.serverSyncTree_,s,f,r)}else if(i){const f=(0,F.UI)(t,m=>qi(m));o=function Wie(n,e,t){const i=yi.fromObject(t);return sw(n,new iw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,s,f)}else{const f=qi(t);o=p0(n.serverSyncTree_,s,f)}let d=s;o.length>0&&(d=aw(n,s)),Pa(n.eventQueue_,d,o)}function h3(n,e){K1(n,"connected",e),!1===e&&function bre(n){ow(n,"onDisconnectEvents");const e=E0(n),t=PM();E1(n.onDisconnect_,On(),(r,s)=>{const o=t3(r,s,n.serverSyncTree_,e);nw(t,r,o)});let i=[];E1(t,On(),(r,s)=>{i=i.concat(p0(n.serverSyncTree_,r,s));const o=eF(n,r);aw(n,o)}),n.onDisconnect_=PM(),Pa(n.eventQueue_,On(),i)}(n)}function K1(n,e,t){const i=new jn("/.info/"+e),r=qi(t);n.infoData_.updateSnapshot(i,r);const s=p0(n.infoSyncTree_,i,r);Pa(n.eventQueue_,i,s)}function JM(n){return n.nextWriteId_++}function Q1(n,e,t,i,r){ow(n,"set",{path:e.toString(),value:t,priority:i});const s=E0(n),o=qi(t,i),d=qM(n.serverSyncTree_,e),f=z1(o,d,s),m=JM(n),v=F1(n.serverSyncTree_,e,f,m,!0);XM(n.eventQueue_,v),n.server_.put(e.toString(),o.val(!0),(A,M)=>{const P="ok"===A;P||oo("set at "+e+" failed: "+A);const H=_g(n.serverSyncTree_,m,!P);Pa(n.eventQueue_,e,H),yg(0,r,A,M)});const C=eF(n,e);aw(n,C),Pa(n.eventQueue_,C,[])}function wre(n,e,t){n.server_.onDisconnectCancel(e.toString(),(i,r)=>{"ok"===i&&w1(n.onDisconnect_,e),yg(0,t,i,r)})}function f3(n,e,t,i){const r=qi(t);n.server_.onDisconnectPut(e.toString(),r.val(!0),(s,o)=>{"ok"===s&&nw(n.onDisconnect_,e,r),yg(0,i,s,o)})}function X1(n,e,t){let i;i=".info"===ln(e._path)?WM(n.infoSyncTree_,e,t):WM(n.serverSyncTree_,e,t),a3(n.eventQueue_,e._path,i)}function p3(n){n.persistentConnection_&&n.persistentConnection_.interrupt(c3)}function ow(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),ds(t,...e)}function yg(n,e,t,i){e&&Qb(()=>{if("ok"===t)e(null);else{const r=(t||"error").toUpperCase();let s=r;i&&(s+=": "+i);const o=new Error(s);o.code=r,e(o)}})}function J1(n,e,t){return qM(n.serverSyncTree_,e,t)||en.EMPTY_NODE}function ek(n,e=n.transactionQueueTree_){if(e||tk(n,e),Y_(e)){const t=m3(n,e);(0,F.hu)(t.length>0,"Sending zero length transaction queue"),t.every(r=>0===r.status)&&function Are(n,e,t){const i=t.map(m=>m.currentWriteId),r=J1(n,e,i);let s=r;const o=r.hash();for(let m=0;m<t.length;m++){const v=t[m];(0,F.hu)(0===v.status,"tryToSendTransactionQueue_: items in queue should all be run."),v.status=1,v.retryCount++;const C=To(e,v.path);s=s.updateChild(C,v.currentOutputSnapshotRaw)}const d=s.val(!0),f=e;n.server_.put(f.toString(),d,m=>{ow(n,"transaction put response",{path:f.toString(),status:m});let v=[];if("ok"===m){const C=[];for(let A=0;A<t.length;A++)t[A].status=2,v=v.concat(_g(n.serverSyncTree_,t[A].currentWriteId)),t[A].onComplete&&C.push(()=>t[A].onComplete(null,!0,t[A].currentOutputSnapshotResolved)),t[A].unwatcher();tk(n,ZM(n.transactionQueueTree_,e)),ek(n,n.transactionQueueTree_),Pa(n.eventQueue_,e,v);for(let A=0;A<C.length;A++)Qb(C[A])}else{if("datastale"===m)for(let C=0;C<t.length;C++)t[C].status=3===t[C].status?4:0;else{oo("transaction at "+f.toString()+" failed: "+m);for(let C=0;C<t.length;C++)t[C].status=4,t[C].abortReason=m}aw(n,e)}},o)}(n,_0(e),t)}else n3(e)&&KM(e,t=>{ek(n,t)})}function aw(n,e){const t=g3(n,e),i=_0(t);return function Tre(n,e,t){if(0===e.length)return;const i=[];let r=[];const o=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const f=e[d],m=To(t,f.path);let C,v=!1;if((0,F.hu)(null!==m,"rerunTransactionsUnderNode_: relativePath should not be null."),4===f.status)v=!0,C=f.abortReason,r=r.concat(_g(n.serverSyncTree_,f.currentWriteId,!0));else if(0===f.status)if(f.retryCount>=25)v=!0,C="maxretry",r=r.concat(_g(n.serverSyncTree_,f.currentWriteId,!0));else{const A=J1(n,f.path,o);f.currentInputSnapshot=A;const M=e[d].update(A.val());if(void 0!==M){v0("transaction failed: Data returned ",M,f.path);let P=qi(M);"object"==typeof M&&null!=M&&(0,F.r3)(M,".priority")||(P=P.updatePriority(A.getPriority()));const U=f.currentWriteId,K=E0(n),_e=z1(P,A,K);f.currentOutputSnapshotRaw=P,f.currentOutputSnapshotResolved=_e,f.currentWriteId=JM(n),o.splice(o.indexOf(U),1),r=r.concat(F1(n.serverSyncTree_,f.path,_e,f.currentWriteId,f.applyLocally)),r=r.concat(_g(n.serverSyncTree_,U,!0))}else v=!0,C="nodata",r=r.concat(_g(n.serverSyncTree_,f.currentWriteId,!0))}Pa(n.eventQueue_,t,r),r=[],v&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&i.push("nodata"===C?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(C),!1,null)))}tk(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)Qb(i[d]);ek(n,n.transactionQueueTree_)}(n,m3(n,t),i),i}function g3(n,e){let t,i=n.transactionQueueTree_;for(t=ln(e);null!==t&&void 0===Y_(i);)i=ZM(i,t),t=ln(e=ci(e));return i}function m3(n,e){const t=[];return _3(n,e,t),t.sort((i,r)=>i.order-r.order),t}function _3(n,e,t){const i=Y_(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);KM(e,r=>{_3(n,r,t)})}function tk(n,e){const t=Y_(e);if(t){let i=0;for(let r=0;r<t.length;r++)2!==t[r].status&&(t[i]=t[r],i++);t.length=i,W1(e,t.length>0?t:void 0)}KM(e,i=>{tk(n,i)})}function eF(n,e){const t=_0(g3(n,e)),i=ZM(n.transactionQueueTree_,e);return function sre(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,r=>{tF(n,r)}),tF(n,i),i3(i,r=>{tF(n,r)}),t}function tF(n,e){const t=Y_(e);if(t){const i=[];let r=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?((0,F.hu)(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):((0,F.hu)(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat(_g(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&i.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?W1(e,void 0):t.length=s+1,Pa(n.eventQueue_,_0(e),r);for(let o=0;o<i.length;o++)Qb(i[o])}}const nF=function(n,e){const t=xre(n),i=t.namespace;return"firebase.com"===t.domain&&sd(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&sd("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&oo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new r1(t.host,t.secure,i,"ws"===t.scheme||"wss"===t.scheme,e,"",i!==t.subdomain),path:new jn(t.pathString)}},xre=function(n){let e="",t="",i="",r="",s="",o=!0,d="https",f=443;if("string"==typeof n){let m=n.indexOf("//");m>=0&&(d=n.substring(0,m-1),n=n.substring(m+2));let v=n.indexOf("/");-1===v&&(v=n.length);let C=n.indexOf("?");-1===C&&(C=n.length),e=n.substring(0,Math.min(v,C)),v<C&&(r=function Mre(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}(n.substring(v,C)));const A=function kre(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):oo(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,C)));m=e.indexOf(":"),m>=0?(o="https"===d||"wss"===d,f=parseInt(e.substring(m+1),10)):m=e.length;const M=e.slice(0,m);if("localhost"===M.toLowerCase())t="localhost";else if(M.split(".").length<=2)t=M;else{const P=e.indexOf(".");i=e.substring(0,P).toLowerCase(),t=e.substring(P+1),s=i}"ns"in A&&(s=A.ns)}return{host:e,port:f,domain:t,subdomain:i,secure:o,scheme:d,pathString:r,namespace:s}},y3="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Rre=function(){let n=0;const e=[];return function(t){const i=t===n;let r;n=t;const s=new Array(8);for(r=7;r>=0;r--)s[r]=y3.charAt(t%64),t=Math.floor(t/64);(0,F.hu)(0===t,"Cannot push at time == 0");let o=s.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=y3.charAt(e[r]);return(0,F.hu)(20===o.length,"nextPushId: Length should be 20."),o}}();class v3{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,F.Wl)(this.snapshot.exportVal())}}class b3{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class iF{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,F.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class w3{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new F.BH;return wre(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){wl("OnDisconnect.remove",this._path);const e=new F.BH;return f3(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){wl("OnDisconnect.set",this._path),ad("OnDisconnect.set",e,this._path,!1);const t=new F.BH;return f3(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){wl("OnDisconnect.setWithPriority",this._path),ad("OnDisconnect.setWithPriority",e,this._path,!1),Z1("OnDisconnect.setWithPriority",t,!1);const i=new F.BH;return function Ere(n,e,t,i,r){const s=qi(t,i);n.server_.onDisconnectPut(e.toString(),s.val(!0),(o,d)=>{"ok"===o&&nw(n.onDisconnect_,e,s),yg(0,r,o,d)})}(this._repo,this._path,e,t,i.wrapCallback(()=>{})),i.promise}update(e){wl("OnDisconnect.update",this._path),s3("OnDisconnect.update",e,this._path,!1);const t=new F.BH;return function Cre(n,e,t,i){if((0,F.xb)(t))return ds("onDisconnect().update() called with empty data.  Don't do anything."),void yg(0,i,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(r,s)=>{"ok"===r&&hs(t,(o,d)=>{const f=qi(d);nw(n.onDisconnect_,Vi(e,o),f)}),yg(0,i,r,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class na{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return cn(this._path)?null:u1(this._path)}get ref(){return new El(this._repo,this._path)}get _queryIdentifier(){const e=SG(this._queryParams),t=t1(e);return"{}"===t?"default":t}get _queryObject(){return SG(this._queryParams)}isEqual(e){if(!((e=(0,F.m9)(e))instanceof na))return!1;const t=this._repo===e._repo,i=d1(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Cne(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function nk(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function vg(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===od){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==ug)throw new Error(i);if("string"!=typeof e)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==rf)throw new Error(i);if("string"!=typeof t)throw new Error(r)}}else if(n.getIndex()===_i){if(null!=e&&!y0(e)||null!=t&&!y0(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,F.hu)(n.getIndex()instanceof m1||n.getIndex()===_1,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ik(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class El extends na{constructor(e,t){super(e,t,new RM,!1)}get parent(){const e=fG(this._path);return null===e?null:new El(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Z_{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new jn(e),i=K_(this.ref,e);return new Z_(this._node.getChild(t),i,_i)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>e(new Z_(r,K_(this.ref,i),_i)))}hasChild(e){const t=new jn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function E3(n,e){return(n=(0,F.m9)(n))._checkNotDeleted("ref"),void 0!==e?K_(n._root,e):n._root}function C3(n,e){(n=(0,F.m9)(n))._checkNotDeleted("refFromURL");const t=nF(e,n._repo.repoInfo_.nodeAdmin);o3("refFromURL",t);const i=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&sd("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),E3(n,t.path.toString())}function K_(n,e){return null===ln((n=(0,F.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),w0("child","path",t,!1)):w0("child","path",e,!1),new El(n._repo,Vi(n._path,e));var t}function rF(n,e){n=(0,F.m9)(n),wl("set",n._path),ad("set",e,n._path,!1);const t=new F.BH;return Q1(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function Lre(n,e){s3("update",e,n._path,!1);const t=new F.BH;return function vre(n,e,t,i){ow(n,"update",{path:e.toString(),value:t});let r=!0;const s=E0(n),o={};if(hs(t,(d,f)=>{r=!1,o[d]=t3(Vi(e,d),qi(f),n.serverSyncTree_,s)}),r)ds("update() called with empty data.  Don't do anything."),yg(0,i,"ok",void 0);else{const d=JM(n),f=function $ie(n,e,t,i){!function lie(n,e,t,i){(0,F.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=A1(n.visibleWrites,e,t),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i);const r=yi.fromObject(t);return sw(n,new iw({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,e,o,d);XM(n.eventQueue_,f),n.server_.merge(e.toString(),t,(m,v)=>{const C="ok"===m;C||oo("update at "+e+" failed: "+m);const A=_g(n.serverSyncTree_,d,!C),M=A.length>0?aw(n,e):e;Pa(n.eventQueue_,M,A),yg(0,i,m,v)}),hs(t,m=>{const v=eF(n,Vi(e,m));aw(n,v)}),Pa(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function Vre(n){n=(0,F.m9)(n);const e=new iF(()=>{}),t=new C0(e);return function yre(n,e,t){const i=function Kie(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(m,v)=>{const C=To(m,t);i=i||gg(v,C)});let r=n.syncPointTree_.get(t);r?i=i||gg(r,On()):(r=new GG,n.syncPointTree_=n.syncPointTree_.set(t,r));const s=null!=i,o=s?new fg(i,!0,!1):null;return function Oie(n){return VM(n.viewCache_)}($G(r,e,BM(n.pendingWriteTree_,e._path),s?o.getNode():en.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=i?Promise.resolve(i):n.server_.get(e).then(r=>{const s=qi(r).withIndex(e._queryParams.getIndex());let o;if(L1(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())o=p0(n.serverSyncTree_,e._path,s);else{const d=g0(n.serverSyncTree_,e);o=KG(n.serverSyncTree_,e._path,s,d)}return Pa(n.eventQueue_,e._path,o),WM(n.serverSyncTree_,e,t,null,!0),s},r=>(ow(n,"get for query "+(0,F.Wl)(e)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,t).then(i=>new Z_(i,new El(n._repo,n._path),n._queryParams.getIndex()))}class C0{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const i=t._queryParams.getIndex();return new v3("value",this,new Z_(e.snapshotNode,new El(t._repo,t._path),i))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new b3(this,e,t):null}matches(e){return e instanceof C0&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class rk{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new b3(this,e,t):null}createEvent(e,t){(0,F.hu)(null!=e.childName,"Child events should have a childName.");const i=K_(new El(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new v3(e.type,this,new Z_(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof rk&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function D0(n,e,t,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const f=t,m=(v,C)=>{X1(n._repo,n,d),f(v,C)};m.userCallback=t.userCallback,m.context=t.context,t=m}const o=new iF(t,s||void 0),d="value"===e?new C0(o):new rk(e,o);return function Dre(n,e,t){let i;i=".info"===ln(e._path)?L1(n.infoSyncTree_,e,t):L1(n.serverSyncTree_,e,t),a3(n.eventQueue_,e._path,i)}(n._repo,n,d),()=>X1(n._repo,n,d)}function sF(n,e,t,i){return D0(n,"value",e,t,i)}function D3(n,e,t,i){return D0(n,"child_added",e,t,i)}function S3(n,e,t,i){return D0(n,"child_changed",e,t,i)}function I3(n,e,t,i){return D0(n,"child_moved",e,t,i)}function A3(n,e,t,i){return D0(n,"child_removed",e,t,i)}function T3(n,e,t){let i=null;const r=t?new iF(t):null;"value"===e?i=new C0(r):e&&(i=new rk(e,r)),X1(n._repo,n,i)}class Fc{}class M3 extends Fc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ad("endAt",this._value,e._path,!0);const t=b1(e._queryParams,this._value,this._key);if(ik(t),vg(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new na(e._repo,e._path,t,e._orderByCalled)}}class Hre extends Fc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ad("endBefore",this._value,e._path,!1);const t=function Zne(n,e,t){let i;return i=b1(n,e,n.index_===od||t?t:ug),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(ik(t),vg(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new na(e._repo,e._path,t,e._orderByCalled)}}class k3 extends Fc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ad("startAt",this._value,e._path,!0);const t=v1(e._queryParams,this._value,this._key);if(ik(t),vg(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new na(e._repo,e._path,t,e._orderByCalled)}}class zre extends Fc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ad("startAfter",this._value,e._path,!1);const t=function Yne(n,e,t){let i;return i=v1(n,e,n.index_===od||t?t:rf),i.startAfterSet_=!0,i}(e._queryParams,this._value,this._key);if(ik(t),vg(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new na(e._repo,e._path,t,e._orderByCalled)}}class $re extends Fc{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new na(e._repo,e._path,function Wne(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class qre extends Fc{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new na(e._repo,e._path,function qne(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class Zre extends Fc{constructor(e){super(),this._path=e}_apply(e){nk(e,"orderByChild");const t=new jn(this._path);if(cn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new m1(t),r=OM(e._queryParams,i);return vg(r),new na(e._repo,e._path,r,!0)}}class Qre extends Fc{_apply(e){nk(e,"orderByKey");const t=OM(e._queryParams,od);return vg(t),new na(e._repo,e._path,t,!0)}}class Jre extends Fc{_apply(e){nk(e,"orderByPriority");const t=OM(e._queryParams,_i);return vg(t),new na(e._repo,e._path,t,!0)}}class tse extends Fc{_apply(e){nk(e,"orderByValue");const t=OM(e._queryParams,_1);return vg(t),new na(e._repo,e._path,t,!0)}}class ise extends Fc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(ad("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new M3(this._value,this._key)._apply(new k3(this._value,this._key)._apply(e))}}function Lc(n,...e){let t=(0,F.m9)(n);for(const i of e)t=i._apply(t);return t}(function Lie(n){(0,F.hu)(!zM,"__referenceConstructor has already been defined"),zM=n})(El),function jie(n){(0,F.hu)(!$M,"__referenceConstructor has already been defined"),$M=n}(El);const oF={};function R3(n,e,t,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||sd("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ds("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let f,m,o=nF(s,r),d=o.repoInfo;typeof process<"u"&&process.env&&(m=process.env.FIREBASE_DATABASE_EMULATOR_HOST),m?(f=!0,s=`http://${m}?ns=${d.namespace}`,o=nF(s,r),d=o.repoInfo):f=!o.repoInfo.secure;const v=r&&f?new t0(t0.OWNER):new Xte(n.name,n.options,e);o3("Invalid Firebase Database URL",o),cn(o.path)||sd("Database URL must point to the root of a Firebase Database (not including a child path).");const C=function lse(n,e,t,i){let r=oF[e.name];r||(r={},oF[e.name]=r);let s=r[n.toURLString()];return s&&sd("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new gre(n,false,t,i),r[n.toURLString()]=s,s}(d,n,v,new Qte(n.name,t));return new use(C,n)}class use{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function mre(n,e,t){if(n.stats_=a1(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new NM(n.repoInfo_,(i,r,s,o)=>{d3(n,i,r,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>h3(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,F.Wl)(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new G_(n.repoInfo_,e,(i,r,s,o)=>{d3(n,i,r,s,o)},i=>{h3(n,i)},i=>{!function _re(n,e){hs(e,(t,i)=>{K1(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function tne(n,e){const t=n.toString();return o1[t]||(o1[t]=e()),o1[t]}(n.repoInfo_,()=>new tie(n.stats_,n.server_)),n.infoData_=new Kne,n.infoSyncTree_=new ZG({startListening:(i,r,s,o)=>{let d=[];const f=n.infoData_.getNode(i._path);return f.isEmpty()||(d=p0(n.infoSyncTree_,i._path,f),setTimeout(()=>{o("ok")},0)),d},stopListening:()=>{}}),K1(n,"connected",!1),n.serverSyncTree_=new ZG({startListening:(i,r,s,o)=>(n.server_.listen(i,s,r,(d,f)=>{const m=o(d,f);Pa(n.eventQueue_,i._path,m)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new El(this._repo,On())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function ase(n,e){const t=oF[e];(!t||t[n.key]!==n)&&sd(`Database ${e}(${n.repoInfo_}) has already been deleted.`),p3(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&sd("Cannot call "+e+" on a deleted database.")}}function O3(){tG.IS_TRANSPORT_INITIALIZED&&oo("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function dse(){O3(),dg.forceDisallow()}function hse(){O3(),Xb.forceDisallow(),dg.forceAllow()}function gse(n,e){Pz(n,e)}const _se={".sv":"timestamp"};class bse{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}G_.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},G_.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function mse(n){kz(bi.SDK_VERSION),(0,bi._registerComponent)(new Lr.wA("database",(e,{instanceIdentifier:t})=>R3(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,bi.registerVersion)(Tz,"0.14.4",n),(0,bi.registerVersion)(Tz,"0.14.4","esm2017")}();const Dse=new Ss.Yd("@firebase/database-compat"),P3=function(n){Dse.warn("FIREBASE WARNING: "+n)};class Ase{constructor(e){this._delegate=e}cancel(e){(0,F.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,F.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),i=>e(i)),t}remove(e){(0,F.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,F.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),i=>e(i)),t}set(e,t){(0,F.Dv)("OnDisconnect.set",1,2,arguments.length),(0,F.Wj)("OnDisconnect.set","onComplete",t,!0);const i=this._delegate.set(e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,F.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,F.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(e,t);return i&&r.then(()=>i(null),s=>i(s)),r}update(e,t){if((0,F.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,P3("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,F.Wj)("OnDisconnect.update","onComplete",t,!0);const i=this._delegate.update(e);return t&&i.then(()=>t(null),r=>t(r)),i}}class Tse{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,F.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class bg{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,F.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,F.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,F.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,F.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,F.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),w0("DataSnapshot.child","path",e,!1),new bg(this._database,this._delegate.child(e))}hasChild(e){return(0,F.Dv)("DataSnapshot.hasChild",1,1,arguments.length),w0("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,F.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,F.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,F.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new bg(this._database,t)))}hasChildren(){return(0,F.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,F.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,F.Dv)("DataSnapshot.ref",0,0,arguments.length),new Fa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ns{constructor(e,t){this.database=e,this._delegate=t}on(e,t,i,r){var s;(0,F.Dv)("Query.on",2,4,arguments.length),(0,F.Wj)("Query.on","callback",t,!1);const o=Ns.getCancelAndContextArgs_("Query.on",i,r),d=(m,v)=>{t.call(o.context,new bg(this.database,m),v)};d.userCallback=t,d.context=o.context;const f=null===(s=o.cancel)||void 0===s?void 0:s.bind(o.context);switch(e){case"value":return sF(this._delegate,d,f),t;case"child_added":return D3(this._delegate,d,f),t;case"child_removed":return A3(this._delegate,d,f),t;case"child_changed":return S3(this._delegate,d,f),t;case"child_moved":return I3(this._delegate,d,f),t;default:throw new Error((0,F.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,i){if((0,F.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,F.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,F.Wj)("Query.off","callback",t,!0),(0,F.lb)("Query.off","context",i,!0),t){const r=()=>{};r.userCallback=t,r.context=i,T3(this._delegate,e,r)}else T3(this._delegate,e)}get(){return Vre(this._delegate).then(e=>new bg(this.database,e))}once(e,t,i,r){(0,F.Dv)("Query.once",1,4,arguments.length),(0,F.Wj)("Query.once","callback",t,!0);const s=Ns.getCancelAndContextArgs_("Query.once",i,r),o=new F.BH,d=(m,v)=>{const C=new bg(this.database,m);t&&t.call(s.context,C,v),o.resolve(C)};d.userCallback=t,d.context=s.context;const f=m=>{s.cancel&&s.cancel.call(s.context,m),o.reject(m)};switch(e){case"value":sF(this._delegate,d,f,{onlyOnce:!0});break;case"child_added":D3(this._delegate,d,f,{onlyOnce:!0});break;case"child_removed":A3(this._delegate,d,f,{onlyOnce:!0});break;case"child_changed":S3(this._delegate,d,f,{onlyOnce:!0});break;case"child_moved":I3(this._delegate,d,f,{onlyOnce:!0});break;default:throw new Error((0,F.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return(0,F.Dv)("Query.limitToFirst",1,1,arguments.length),new Ns(this.database,Lc(this._delegate,function Wre(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new $re(n)}(e)))}limitToLast(e){return(0,F.Dv)("Query.limitToLast",1,1,arguments.length),new Ns(this.database,Lc(this._delegate,function Yre(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new qre(n)}(e)))}orderByChild(e){return(0,F.Dv)("Query.orderByChild",1,1,arguments.length),new Ns(this.database,Lc(this._delegate,function Kre(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return w0("orderByChild","path",n,!1),new Zre(n)}(e)))}orderByKey(){return(0,F.Dv)("Query.orderByKey",0,0,arguments.length),new Ns(this.database,Lc(this._delegate,function Xre(){return new Qre}()))}orderByPriority(){return(0,F.Dv)("Query.orderByPriority",0,0,arguments.length),new Ns(this.database,Lc(this._delegate,function ese(){return new Jre}()))}orderByValue(){return(0,F.Dv)("Query.orderByValue",0,0,arguments.length),new Ns(this.database,Lc(this._delegate,function nse(){return new tse}()))}startAt(e=null,t){return(0,F.Dv)("Query.startAt",0,2,arguments.length),new Ns(this.database,Lc(this._delegate,function jre(n=null,e){return b0("startAt","key",e,!0),new k3(n,e)}(e,t)))}startAfter(e=null,t){return(0,F.Dv)("Query.startAfter",0,2,arguments.length),new Ns(this.database,Lc(this._delegate,function Gre(n,e){return b0("startAfter","key",e,!0),new zre(n,e)}(e,t)))}endAt(e=null,t){return(0,F.Dv)("Query.endAt",0,2,arguments.length),new Ns(this.database,Lc(this._delegate,function Bre(n,e){return b0("endAt","key",e,!0),new M3(n,e)}(e,t)))}endBefore(e=null,t){return(0,F.Dv)("Query.endBefore",0,2,arguments.length),new Ns(this.database,Lc(this._delegate,function Ure(n,e){return b0("endBefore","key",e,!0),new Hre(n,e)}(e,t)))}equalTo(e,t){return(0,F.Dv)("Query.equalTo",1,2,arguments.length),new Ns(this.database,Lc(this._delegate,function rse(n,e){return b0("equalTo","key",e,!0),new ise(n,e)}(e,t)))}toString(){return(0,F.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,F.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,F.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Ns))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,i){const r={cancel:void 0,context:void 0};if(t&&i)r.cancel=t,(0,F.Wj)(e,"cancel",r.cancel,!0),r.context=i,(0,F.lb)(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error((0,F.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new Fa(this.database,new El(this._delegate._repo,this._delegate._path))}}class Fa extends Ns{constructor(e,t){super(e,new na(t._repo,t._path,new RM,!1)),this.database=e,this._delegate=t}getKey(){return(0,F.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,F.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Fa(this.database,K_(this._delegate,e))}getParent(){(0,F.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Fa(this.database,e):null}getRoot(){return(0,F.Dv)("Reference.root",0,0,arguments.length),new Fa(this.database,this._delegate.root)}set(e,t){(0,F.Dv)("Reference.set",1,2,arguments.length),(0,F.Wj)("Reference.set","onComplete",t,!0);const i=rF(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}update(e,t){if((0,F.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,P3("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}wl("Reference.update",this._delegate._path),(0,F.Wj)("Reference.update","onComplete",t,!0);const i=Lre(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,F.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,F.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function Fre(n,e,t){if(wl("setWithPriority",n._path),ad("setWithPriority",e,n._path,!1),Z1("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new F.BH;return Q1(n._repo,n._path,e,t,i.wrapCallback(()=>{})),i.promise}(this._delegate,e,t);return i&&r.then(()=>i(null),s=>i(s)),r}remove(e){(0,F.Dv)("Reference.remove",0,1,arguments.length),(0,F.Wj)("Reference.remove","onComplete",e,!0);const t=function Nre(n){return wl("remove",n._path),rF(n,null)}(this._delegate);return e&&t.then(()=>e(null),i=>e(i)),t}transaction(e,t,i){(0,F.Dv)("Reference.transaction",1,3,arguments.length),(0,F.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,F.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,i){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,F.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function wse(n,e,t){var i;if(n=(0,F.m9)(n),wl("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=t?.applyLocally)||void 0===i||i,s=new F.BH,d=sF(n,()=>{});return function Ire(n,e,t,i,r,s){ow(n,"transaction on "+e);const o={path:e,update:t,onComplete:i,status:null,order:Rz(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=J1(n,e,void 0);o.currentInputSnapshot=d;const f=o.update(d.val());if(void 0===f)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{v0("transaction failed: Data returned ",f,o.path),o.status=0;const m=ZM(n.transactionQueueTree_,e),v=Y_(m)||[];let C;v.push(o),W1(m,v),"object"==typeof f&&null!==f&&(0,F.r3)(f,".priority")?(C=(0,F.DV)(f,".priority"),(0,F.hu)(y0(C),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):C=(qM(n.serverSyncTree_,e)||en.EMPTY_NODE).getPriority().val();const A=E0(n),M=qi(f,C),P=z1(M,d,A);o.currentOutputSnapshotRaw=M,o.currentOutputSnapshotResolved=P,o.currentWriteId=JM(n);const H=F1(n.serverSyncTree_,e,P,o.currentWriteId,o.applyLocally);Pa(n.eventQueue_,e,H),ek(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(f,m,v)=>{let C=null;f?s.reject(f):(C=new Z_(v,new El(n._repo,n._path),_i),s.resolve(new bse(m,C)))},d,r),s.promise}(this._delegate,e,{applyLocally:i}).then(s=>new Tse(s.committed,new bg(this.database,s.snapshot)));return t&&r.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),r}setPriority(e,t){(0,F.Dv)("Reference.setPriority",1,2,arguments.length),(0,F.Wj)("Reference.setPriority","onComplete",t,!0);const i=function Pre(n,e){n=(0,F.m9)(n),wl("setPriority",n._path),Z1("setPriority",e,!1);const t=new F.BH;return Q1(n._repo,Vi(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}push(e,t){(0,F.Dv)("Reference.push",0,2,arguments.length),(0,F.Wj)("Reference.push","onComplete",t,!0);const i=function Ore(n,e){n=(0,F.m9)(n),wl("push",n._path),ad("push",e,n._path,!0);const t=u3(n._repo),i=Rre(t),r=K_(n,i),s=K_(n,i);let o;return o=null!=e?rF(s,e).then(()=>s):Promise.resolve(s),r.then=o.then.bind(o),r.catch=o.then.bind(o,void 0),r}(this._delegate,e),r=i.then(o=>new Fa(this.database,o));t&&r.then(()=>t(null),o=>t(o));const s=new Fa(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return wl("Reference.onDisconnect",this._delegate._path),new Ase(new w3(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class S0{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:dse,forceLongPolling:hse}}useEmulator(e,t,i={}){!function N3(n,e,t,i={}){(n=(0,F.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&sd("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&sd('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new t0(t0.OWNER);else if(i.mockUserToken){const o="string"==typeof i.mockUserToken?i.mockUserToken:(0,F.Sg)(i.mockUserToken,n.app.options.projectId);s=new t0(o)}!function ose(n,e,t,i){n.repoInfo_=new r1(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}(r,e,t,s)}(this._delegate,e,t,i)}ref(e){if((0,F.Dv)("database.ref",0,1,arguments.length),e instanceof Fa){const t=C3(this._delegate,e.toString());return new Fa(this,t)}{const t=E3(this._delegate,e);return new Fa(this,t)}}refFromURL(e){(0,F.Dv)("database.refFromURL",1,1,arguments.length);const i=C3(this._delegate,e);return new Fa(this,i)}goOffline(){return(0,F.Dv)("database.goOffline",0,0,arguments.length),function fse(n){(n=(0,F.m9)(n))._checkNotDeleted("goOffline"),p3(n._repo)}(this._delegate)}goOnline(){return(0,F.Dv)("database.goOnline",0,0,arguments.length),function pse(n){(n=(0,F.m9)(n))._checkNotDeleted("goOnline"),function Sre(n){n.persistentConnection_&&n.persistentConnection_.resume(c3)}(n._repo)}(this._delegate)}}S0.ServerValue={TIMESTAMP:function yse(){return _se}(),increment:n=>function vse(n){return{".sv":{increment:n}}}(n)};var kse=Object.freeze({__proto__:null,initStandalone:function Mse({app:n,url:e,version:t,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){kz(t);const o=new Lr.zt("auth-internal",new Lr.H0("database-standalone"));return o.setComponent(new Lr.wA("auth-internal",()=>i,"PRIVATE")),{instance:new S0(R3(n,o,void 0,e,s),n),namespace:r}}});const xse=S0.ServerValue;function F3(n){return null==n}function L3(n){return"function"==typeof n.set}function V3(n,e){return L3(e)?e:n.ref(e)}function B3(n,e){if(function Ose(n){return"string"==typeof n}(n))return e.stringCase();if(L3(n))return e.firebaseCase();if(function Nse(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function I0(n,e,t="on",i=fa.z){return new Fr.y(r=>{let s=null;return s=n[t](e,(o,d)=>{i.schedule(()=>{r.next({snapshot:o,prevKey:d})}),"once"===t&&i.schedule(()=>r.complete())},o=>{i.schedule(()=>r.error(o))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,Jt.U)(r=>{const{snapshot:s,prevKey:o}=r;let d=null;return s.exists()&&(d=s.key),{type:e,payload:s,prevKey:o,key:d}}),(0,m_.B)())}function H3(n,e){const t=n.length;for(let i=0;i<t;i++)if(n[i].payload.key===e)return i;return-1}function Lse(n,e){const{payload:t,prevKey:i,key:r}=e,s=H3(n,r),o=function Fse(n,e){if(F3(e))return 0;{const t=H3(n,e);return-1===t?n.length:t+1}}(n,i);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let d=null;e.payload.forEach(f=>{const m={payload:f,type:"value",prevKey:d,key:f.key};return d=f.key,n=[...n,m],!1})}return n;case"child_added":if(s>-1){const d=n[s-1];(d&&d.key||null)!==i&&(n=n.filter(f=>f.payload.key!==t.key)).splice(o,0,e)}else{if(null==i)return[e,...n];(n=n.slice()).splice(o,0,e)}return n;case"child_removed":return n.filter(d=>d.payload.key!==t.key);case"child_changed":return n.map(d=>d.payload.key===r?e:d);case"child_moved":if(s>-1){const d=n.splice(s,1)[0];return(n=n.slice()).splice(o,0,d),n}return n;default:return n}}function U3(n){return(F3(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function j3(n,e,t){return function Pse(n,e,t){return I0(n,"value","once",t).pipe(Io(i=>{const r=[Sn(i)];return e.forEach(s=>r.push(I0(n,s,"on",t))),(0,rn.T)(...r).pipe(pa(Lse,[]))}),Xa())}(n,e=U3(e),t)}function z3(n,e,t){const i=(e=U3(e)).map(r=>I0(n,r,"on",t));return(0,rn.T)(...i)}function G3(n,e){return function(i,r){return B3(i,{stringCase:()=>n.child(i)[e](r),firebaseCase:()=>i[e](r),snapshotCase:()=>i.ref[e](r)})}}function Use(n){return function(t){return t?B3(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function $3(n,e){return function(){return I0(n,"value","on",e)}}!function Rse(n){n.INTERNAL.registerComponent(new Lr.wA("database-compat",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new S0(r,i)},"PUBLIC").setServiceProps({Reference:Fa,Query:Ns,Database:S0,DataSnapshot:bg,enableLogging:gse,INTERNAL:kse,ServerValue:xse}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(Ho.Z);const Gse=new c.OlP("angularfire2.realtimeDatabaseURL"),$se=new c.OlP("angularfire2.database.use-emulator");let Wse=(()=>{class n{constructor(t,i,r,s,o,d,f,m,v,C,A,M,P,H,U){this.schedulers=d;const K=f,_e=(0,Mi.on)(t,o,i);m&&zR(_e,o,v,A,M,P,C,H),this.database=(0,Mi.cc)(`${_e.name}.database.${r}`,"AngularFireDatabase",_e.name,()=>{const Oe=o.runOutsideAngular(()=>_e.database(r||void 0));return K&&Oe.useEmulator(...K),Oe},[K])}list(t,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>V3(this.database,t));let s=r;return i&&(s=i(r)),function jse(n,e){const t=e.schedulers.outsideAngular,i=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:G3(i,"update"),set:G3(i,"set"),push:r=>i.push(r),remove:Use(i),snapshotChanges:r=>j3(n,r,t).pipe(Ln.iC),stateChanges:r=>z3(n,r,t).pipe(Ln.iC),auditTrail:r=>function Vse(n,e,t){return function Hse(n,e,t){return function Bse(n,e){return I0(n,"value","on",e).pipe((0,Jt.U)(t=>{let i;return t.payload.forEach(r=>(i=r.key,!1)),{data:t,lastKeyToLoad:i}}))}(n,t).pipe(function Lte(...n){const e=(0,Er.jO)(n);return(0,ei.e)((t,i)=>{const r=n.length,s=new Array(r);let o=n.map(()=>!1),d=!1;for(let f=0;f<r;f++)(0,pl.Xf)(n[f]).subscribe((0,fi.x)(i,m=>{s[f]=m,!d&&!o[f]&&(o[f]=!0,(d=o.every(Ds.y))&&(o=null))},jV.Z));t.subscribe((0,fi.x)(i,f=>{if(d){const m=[f,...s];i.next(e?e(...m):m)}}))})}(e),(0,Jt.U)(([r,s])=>{const o=r.lastKeyToLoad,d=s.map(f=>f.key);return{actions:s,lastKeyToLoad:o,loadedKeys:d}}),function Vte(n){return(0,ei.e)((e,t)=>{let i=!1,r=0;e.subscribe((0,fi.x)(t,s=>(i||(i=!n(s,r++)))&&t.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,Jt.U)(r=>r.actions))}(n,z3(n,e).pipe(pa((r,s)=>[...r,s],[])),t)}(n,r,t).pipe(Ln.iC),valueChanges:(r,s)=>j3(n,r,t).pipe((0,Jt.U)(d=>d.map(f=>s&&s.idField?Object.assign(Object.assign({},f.payload.val()),{[s.idField]:f.key}):f.payload.val())),Ln.iC)}}(s,this)}object(t){return function zse(n,e){return{query:n,snapshotChanges:()=>$3(n,e.schedulers.outsideAngular)().pipe(Ln.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>$3(n,e.schedulers.outsideAngular)().pipe(Ln.iC,(0,Jt.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>V3(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Mi.Dh),c.LFG(Mi.xv,8),c.LFG(Gse,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Ln.HU),c.LFG($se,8),c.LFG(GR,8),c.LFG(LR,8),c.LFG(VR,8),c.LFG(BR,8),c.LFG(HR,8),c.LFG(UR,8),c.LFG(jR,8),c.LFG(TA,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();const qse=["calendar"],Yse=["table"];function Zse(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",5),c.NdJ("click",function(){c.CHM(t);const r=c.oxw();return c.KtG(r.openDialog())}),c._uU(1," \u65b0\u589e "),c.qZA()}}function Kse(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"th",19),c.NdJ("mousedown",function(r){c.CHM(t);const s=c.oxw(2);return c.KtG(s.onMouseDown(r,0))}),c._uU(1," \u9805\u76ee\u540d\u7a31 "),c.qZA()}}function Qse(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",22),c.NdJ("click",function(){c.CHM(t);const r=c.oxw().$implicit,s=c.oxw(2);return c.KtG(s.toggleEditMode(r))}),c._uU(1),c.qZA()}if(2&n){const t=c.oxw().$implicit;c.xp6(1),c.hij(" ",t.name," ")}}function Xse(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div")(1,"input",23),c.NdJ("ngModelChange",function(r){c.CHM(t);const s=c.oxw().$implicit;return c.KtG(s.name=r)})("blur",function(){c.CHM(t);const r=c.oxw().$implicit,s=c.oxw(2);return c.KtG(s.onBlur(r))})("keypress",function(r){c.CHM(t);const s=c.oxw().$implicit,o=c.oxw(2);return c.KtG(o.onKeyPress(r,s))}),c.qZA()()}if(2&n){const t=c.oxw().$implicit;c.xp6(1),c.Q6J("ngModel",t.name)}}function Jse(n,e){if(1&n&&(c.TgZ(0,"td",20),c.YNc(1,Qse,2,1,"div",21),c.YNc(2,Xse,2,1,"div",4),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.Q6J("ngIf",!t.editing),c.xp6(1),c.Q6J("ngIf",t.editing)}}function eoe(n,e){1&n&&(c.TgZ(0,"th",24),c._uU(1,"\u65e5\u671f"),c.qZA())}function toe(n,e){if(1&n&&(c.TgZ(0,"td",20),c._uU(1),c.ALo(2,"date"),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.Oqu(c.lcZ(2,1,t.date))}}function noe(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"th",19),c.NdJ("mousedown",function(r){c.CHM(t);const s=c.oxw(2);return c.KtG(s.onMouseDown(r,1))}),c._uU(1," \u91d1\u984d "),c.qZA()}}function ioe(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",22),c.NdJ("click",function(){c.CHM(t);const r=c.oxw().$implicit,s=c.oxw(2);return c.KtG(s.toggleEditMode(r))}),c._uU(1),c.qZA()}if(2&n){const t=c.oxw().$implicit;c.xp6(1),c.hij(" ",t.amount," ")}}function roe(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div")(1,"input",25),c.NdJ("ngModelChange",function(r){c.CHM(t);const s=c.oxw().$implicit;return c.KtG(s.amount=r)})("blur",function(){c.CHM(t);const r=c.oxw().$implicit,s=c.oxw(2);return c.KtG(s.onBlur(r))})("keypress",function(r){c.CHM(t);const s=c.oxw().$implicit,o=c.oxw(2);return c.KtG(o.onKeyPress(r,s))}),c.qZA()()}if(2&n){const t=c.oxw().$implicit;c.xp6(1),c.Q6J("ngModel",t.amount)}}function soe(n,e){if(1&n&&(c.TgZ(0,"td",20),c.YNc(1,ioe,2,1,"div",21),c.YNc(2,roe,2,1,"div",4),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.Q6J("ngIf",!t.editing),c.xp6(1),c.Q6J("ngIf",t.editing)}}function ooe(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"th",19),c.NdJ("mousedown",function(r){c.CHM(t);const s=c.oxw(2);return c.KtG(s.onMouseDown(r,2))}),c._uU(1," \u5e63\u5225 "),c.qZA()}}function aoe(n,e){if(1&n&&(c.TgZ(0,"mat-option",29),c._uU(1),c.qZA()),2&n){const t=e.$implicit;c.Q6J("value",t.code),c.xp6(1),c.hij(" ",t.name," ")}}function loe(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"td",20)(1,"mat-form-field",26)(2,"mat-label"),c._uU(3,"\u5e63\u5225"),c.qZA(),c.TgZ(4,"mat-select",27),c.NdJ("ngModelChange",function(r){const o=c.CHM(t).$implicit;return c.KtG(o.selectedCurrency=r)}),c.YNc(5,aoe,2,2,"mat-option",28),c.qZA()()()}if(2&n){const t=e.$implicit,i=c.oxw(2);c.xp6(4),c.Q6J("ngModel",t.selectedCurrency),c.xp6(1),c.Q6J("ngForOf",i.currencies)}}function coe(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"th",19),c.NdJ("mousedown",function(r){c.CHM(t);const s=c.oxw(2);return c.KtG(s.onMouseDown(r,3))}),c._uU(1," \u5206\u5e33\u4eba "),c.qZA()}}function uoe(n,e){if(1&n&&(c.TgZ(0,"mat-option",29),c._uU(1),c.qZA()),2&n){const t=e.$implicit;c.Q6J("value",t),c.xp6(1),c.hij(" ",t," ")}}function doe(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"td",20)(1,"mat-form-field",26)(2,"mat-label"),c._uU(3,"\u5206\u5e33\u4eba"),c.qZA(),c.TgZ(4,"mat-select",30),c.NdJ("ngModelChange",function(r){const o=c.CHM(t).$implicit;return c.KtG(o.people=r)})("selectionChange",function(){const s=c.CHM(t).$implicit,o=c.oxw(2);return c.KtG(o.calculateShareAmount(s))}),c.YNc(5,uoe,2,2,"mat-option",28),c.qZA()()()}if(2&n){const t=e.$implicit,i=c.oxw(2);c.xp6(4),c.Q6J("ngModel",t.people),c.xp6(1),c.Q6J("ngForOf",i.availablePeople)}}function hoe(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"th",19),c.NdJ("mousedown",function(r){c.CHM(t);const s=c.oxw(2);return c.KtG(s.onMouseDown(r,4))}),c._uU(1," \u5206\u5e33\u91d1\u984d "),c.qZA()}}function foe(n,e){if(1&n&&(c.TgZ(0,"td",20),c._uU(1),c.ALo(2,"currency"),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.hij(" ",c.xi3(2,1,t.shareAmount,t.selectedCurrency)," ")}}function poe(n,e){1&n&&(c.TgZ(0,"th",24),c._uU(1,"\u64cd\u4f5c"),c.qZA())}function goe(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"td",20)(1,"button",31),c.NdJ("click",function(){const s=c.CHM(t).$implicit,o=c.oxw(2);return c.KtG(o.toggleEditMode(s))}),c.TgZ(2,"mat-icon"),c._uU(3,"\u7de8\u8f2f"),c.qZA()(),c.TgZ(4,"button",32),c.NdJ("click",function(){const s=c.CHM(t).$implicit,o=c.oxw(2);return c.KtG(o.deleteItem(s.id))}),c.TgZ(5,"mat-icon"),c._uU(6,"\u522a\u9664"),c.qZA()()()}}function moe(n,e){1&n&&c._UZ(0,"tr",33)}function _oe(n,e){1&n&&c._UZ(0,"tr",34)}function yoe(n,e){if(1&n&&(c.TgZ(0,"div")(1,"table",6),c.ynx(2,7),c.YNc(3,Kse,2,0,"th",8),c.YNc(4,Jse,3,2,"td",9),c.BQk(),c.ynx(5,10),c.YNc(6,eoe,2,0,"th",11),c.YNc(7,toe,3,3,"td",9),c.BQk(),c.ynx(8,12),c.YNc(9,noe,2,0,"th",8),c.YNc(10,soe,3,2,"td",9),c.BQk(),c.ynx(11,13),c.YNc(12,ooe,2,0,"th",8),c.YNc(13,loe,6,2,"td",9),c.BQk(),c.ynx(14,14),c.YNc(15,coe,2,0,"th",8),c.YNc(16,doe,6,2,"td",9),c.BQk(),c.ynx(17,15),c.YNc(18,hoe,2,0,"th",8),c.YNc(19,foe,3,4,"td",9),c.BQk(),c.ynx(20,16),c.YNc(21,poe,2,0,"th",11),c.YNc(22,goe,7,0,"td",9),c.BQk(),c.YNc(23,moe,1,0,"tr",17),c.YNc(24,_oe,1,0,"tr",18),c.qZA()()),2&n){const t=c.oxw();c.xp6(1),c.Q6J("dataSource",t.dataSource),c.xp6(22),c.Q6J("matHeaderRowDef",t.displayedColumns),c.xp6(1),c.Q6J("matRowDefColumns",t.displayedColumns)}}function voe(n,e){if(1&n&&(c.TgZ(0,"div"),c._UZ(1,"full-calendar",35,36),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.Q6J("header",t.calendarHeader)("events",t.calendarEvents)("options",t.calendarOptions)}}let boe=(()=>{class n{constructor(t,i,r,s){this.renderer=t,this.el=i,this.db=r,this.dialog=s,this.view="table",this.separatorKeysCodes=[13,188],this.dataSource=new P8,this.calendarOptions={plugins:[ate,Ote],initialView:"dayGridMonth",eventClick:this.handleEventClick.bind(this)},this.calendarHeader={left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},this.availablePeople=["\u61f6\u541b","\u5468\u8089","\u9b5a\u9d51"],this.displayedColumns=["name","date","amount","selectedCurrency","people","shareAmount","actions"],this.calendarEvents=[],this.currencies=[{name:"\u53f0\u5e63",code:"TWD"},{name:"\u65e5\u5713",code:"JPY"},{name:"\u7f8e\u91d1",code:"USD"}]}ngAfterViewInit(){this.loadItems(),this.setUpColumnResize(),this.calendarComponent&&this.calendarComponent.getApi()&&(this.calendarComponent.getApi().removeAllEvents(),this.calendarComponent.getApi().addEventSource(this.calendarEvents))}handleEventClick(t){this.dialog.open(Fte,{width:"250px",data:{event:t.event}}).afterClosed().subscribe(r=>{})}openDialog(){this.dialog.open(Pte,{width:"250px",data:{}}).afterClosed().subscribe(i=>{i&&this.addItem(i)})}loadItems(){this.db.list("items").valueChanges().subscribe(t=>{this.dataSource.data=t,this.calendarEvents=t.map(i=>({title:i.name,start:i.date?i.date.toISOString():""})),this.calendarComponent&&this.calendarComponent.getApi()&&(this.calendarComponent.getApi().removeAllEvents(),this.calendarComponent.getApi().addEventSource(this.calendarEvents))})}addItem(t){this.db.list("items").push(t).then(()=>{this.loadItems()})}updateItem(t){t.id&&this.db.object(`items/${t.id}`).update(t).then(()=>{this.loadItems()})}deleteItem(t){this.dialog.open(Nte,{width:"250px",data:{message:"\u78ba\u5b9a\u8981\u522a\u9664\u9019\u500b\u9805\u76ee\u55ce\uff1f"}}).afterClosed().subscribe(r=>{r&&this.db.object(`items/${t}`).remove().then(()=>{this.loadItems()})})}setUpColumnResize(){this.table&&this.table.nativeElement.querySelectorAll("th").forEach((i,r)=>{const s=this.renderer.createElement("div");this.renderer.addClass(s,"resizer"),this.renderer.listen(s,"mousedown",o=>this.onMouseDown(o,r)),this.renderer.appendChild(i,s)})}onMouseDown(t,i){const r=this.table?.nativeElement.querySelectorAll("th");if(!r)return;const s=r[i],o=t.pageX,d=s.offsetWidth;this.renderer.addClass(document.body,"resizing"),this.mouseMoveListener=this.renderer.listen("document","mousemove",v=>{this.renderer.setStyle(s,"width",`${d+(v.pageX-o)}px`)}),this.mouseUpListener=this.renderer.listen("document","mouseup",()=>{this.renderer.removeClass(document.body,"resizing"),this.mouseMoveListener&&this.mouseMoveListener(),this.mouseUpListener&&this.mouseUpListener()})}toggleEditMode(t){t.editing=!t.editing,t.editing||this.updateItem(t)}toggleView(){this.view="table"===this.view?"calendar":"table"}onKeyPress(t,i){"Enter"===t.key&&this.toggleEditMode(i)}onBlur(t){this.toggleEditMode(t)}calculateShareAmount(t){const i=t.people.length;t.shareAmount=i>0?t.amount/i:0,this.updateItem(t)}addPerson(t,i){const r=t.input,s=t.value;(s||"").trim()&&i.people.push(s.trim()),r&&(r.value=""),this.calculateShareAmount(i)}removePerson(t,i){const r=i.people.indexOf(t);r>=0&&i.people.splice(r,1),this.calculateShareAmount(i)}ngOnDestroy(){this.mouseMoveListener&&this.mouseMoveListener(),this.mouseUpListener&&this.mouseUpListener()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(Wse),c.Y36(uT))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-table"]],viewQuery:function(t,i){if(1&t&&(c.Gf(qse,5),c.Gf(Yse,5)),2&t){let r;c.iGM(r=c.CRH())&&(i.calendarComponent=r.first),c.iGM(r=c.CRH())&&(i.table=r.first)}},decls:8,vars:4,consts:[[1,"container","mt-5"],[1,"table-responsive"],["mat-button","",1,"btn","btn-secondary","mx-2","my-2",3,"click"],["mat-button","","class","btn btn-primary mx-2 my-2",3,"click",4,"ngIf"],[4,"ngIf"],["mat-button","",1,"btn","btn-primary","mx-2","my-2",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",3,"mousedown",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","date"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","amount"],["matColumnDef","selectedCurrency"],["matColumnDef","people"],["matColumnDef","shareAmount",1,"hide-on-small"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",3,"mousedown"],["mat-cell",""],[3,"click",4,"ngIf"],[3,"click"],["type","text","maxlength","60",1,"form-control",3,"ngModel","ngModelChange","blur","keypress"],["mat-header-cell",""],["type","number",1,"form-control",3,"ngModel","ngModelChange","blur","keypress"],["appearance","outline"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["multiple","",3,"ngModel","ngModelChange","selectionChange"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[3,"header","events","options"],["calendar",""]],template:function(t,i){1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"button",2),c.NdJ("click",function(){return i.toggleView()}),c._uU(4),c.qZA(),c.YNc(5,Zse,2,0,"button",3),c.qZA(),c.YNc(6,yoe,25,3,"div",4),c.YNc(7,voe,3,3,"div",4),c.qZA()()),2&t&&(c.xp6(4),c.hij(" \u5207\u63db\u5230 ","table"===i.view?"\u65e5\u66c6":"\u8868\u683c"," \u8996\u5716 "),c.xp6(1),c.Q6J("ngIf","table"===i.view),c.xp6(1),c.Q6J("ngIf","table"===i.view),c.xp6(1),c.Q6J("ngIf","calendar"===i.view))},dependencies:[Dn,ii,cD,UA,QR,hO,HA,NB,XA,N2,SO,U2,pN,j2,gN,fN,z2,mN,_N,G2,$2,E_,Nee,FY,gd,hd],styles:['@charset "UTF-8";table[_ngcontent-%COMP%]{border-collapse:separate;border-spacing:0;width:100%;max-width:100%;overflow:hidden;white-space:nowrap}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{position:relative;padding:.75rem;border-right:1px solid rgba(222,226,230,.4);border-bottom:2px solid rgba(222,226,230,.75)}th[_ngcontent-%COMP%]:last-child, td[_ngcontent-%COMP%]:last-child{border-right:none}th[_ngcontent-%COMP%]{border-bottom:2px solid rgba(222,226,230,.75)}.resizer[_ngcontent-%COMP%]{display:inline-block;width:10px;height:100%;position:absolute;right:0;top:0;cursor:col-resize;-webkit-user-select:none;user-select:none}th[_ngcontent-%COMP%]{position:relative}.container[_ngcontent-%COMP%]{margin-top:2rem}.table-responsive[_ngcontent-%COMP%]{display:block;width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch}.table-responsive[_ngcontent-%COMP%] > .table[_ngcontent-%COMP%]{margin-bottom:0}@media (max-width: 768px){.mat-table[_ngcontent-%COMP%]{overflow-x:auto;display:block}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{white-space:nowrap;min-width:100px;max-width:300px;overflow:hidden;text-overflow:ellipsis;padding:.5rem;font-size:.875rem}.mat-form-field[_ngcontent-%COMP%]{width:100%;padding:.5rem;margin-bottom:.5rem}.hide-on-small[_ngcontent-%COMP%]{display:none}}@media (max-width: 480px){th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{min-width:80px;max-width:200px;font-size:.75rem}}.mat-elevation-z8[_ngcontent-%COMP%]{box-shadow:0 3px 3px -2px #0003,0 3px 4px #00000024,0 1px 8px #0000001f}.mat-form-field[_ngcontent-%COMP%]{margin-right:1rem}']}),n})(),woe=(()=>{class n{constructor(){this.title="travel-idea"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,i){1&t&&c._UZ(0,"app-table")},dependencies:[boe]}),n})(),Eoe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[woe]}),n.\u0275inj=c.cJS({imports:[cu,p4,NZ,Tq,eT,g5,n8,R8,bB,Pee,hY,J5,bW,LY,Mi.hO.initializeApp(fz_firebase),l$]}),n})();(0,c.G48)(),Za().bootstrapModule(Eoe).catch(n=>console.error(n))},8306:(Et,Fe,B)=>{B.d(Fe,{y:()=>Y});var c=B(930),re=B(727),V=B(8822),pe=B(4671);var ce=B(2416),Te=B(576),Ee=B(2806);let Y=(()=>{class Re{constructor(Ke){Ke&&(this._subscribe=Ke)}lift(Ke){const we=new Re;return we.source=this,we.operator=Ke,we}subscribe(Ke,we,Ae){const ht=function et(Re){return Re&&Re instanceof c.Lv||function J(Re){return Re&&(0,Te.m)(Re.next)&&(0,Te.m)(Re.error)&&(0,Te.m)(Re.complete)}(Re)&&(0,re.Nn)(Re)}(Ke)?Ke:new c.Hp(Ke,we,Ae);return(0,Ee.x)(()=>{const{operator:yt,source:Ve}=this;ht.add(yt?yt.call(ht,Ve):Ve?this._subscribe(ht):this._trySubscribe(ht))}),ht}_trySubscribe(Ke){try{return this._subscribe(Ke)}catch(we){Ke.error(we)}}forEach(Ke,we){return new(we=W(we))((Ae,ht)=>{const yt=new c.Hp({next:Ve=>{try{Ke(Ve)}catch(Ie){ht(Ie),yt.unsubscribe()}},error:ht,complete:Ae});this.subscribe(yt)})}_subscribe(Ke){var we;return null===(we=this.source)||void 0===we?void 0:we.subscribe(Ke)}[V.L](){return this}pipe(...Ke){return function ye(Re){return 0===Re.length?pe.y:1===Re.length?Re[0]:function(Ke){return Re.reduce((we,Ae)=>Ae(we),Ke)}}(Ke)(this)}toPromise(Ke){return new(Ke=W(Ke))((we,Ae)=>{let ht;this.subscribe(yt=>ht=yt,yt=>Ae(yt),()=>we(ht))})}}return Re.create=Le=>new Re(Le),Re})();function W(Re){var Le;return null!==(Le=Re??ce.v.Promise)&&void 0!==Le?Le:Promise}},7579:(Et,Fe,B)=>{B.d(Fe,{x:()=>ce});var c=B(8306),re=B(727);const pe=(0,B(3888).d)(Ee=>function(){Ee(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var de=B(8737),ye=B(2806);let ce=(()=>{class Ee extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(W){const J=new Te(this,this);return J.operator=W,J}_throwIfClosed(){if(this.closed)throw new pe}next(W){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(W)}})}error(W){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=W;const{observers:J}=this;for(;J.length;)J.shift().error(W)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:W}=this;for(;W.length;)W.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var W;return(null===(W=this.observers)||void 0===W?void 0:W.length)>0}_trySubscribe(W){return this._throwIfClosed(),super._trySubscribe(W)}_subscribe(W){return this._throwIfClosed(),this._checkFinalizedStatuses(W),this._innerSubscribe(W)}_innerSubscribe(W){const{hasError:J,isStopped:et,observers:Re}=this;return J||et?re.Lc:(this.currentObservers=null,Re.push(W),new re.w0(()=>{this.currentObservers=null,(0,de.P)(Re,W)}))}_checkFinalizedStatuses(W){const{hasError:J,thrownError:et,isStopped:Re}=this;J?W.error(et):Re&&W.complete()}asObservable(){const W=new c.y;return W.source=this,W}}return Ee.create=(Y,W)=>new Te(Y,W),Ee})();class Te extends ce{constructor(Y,W){super(),this.destination=Y,this.source=W}next(Y){var W,J;null===(J=null===(W=this.destination)||void 0===W?void 0:W.next)||void 0===J||J.call(W,Y)}error(Y){var W,J;null===(J=null===(W=this.destination)||void 0===W?void 0:W.error)||void 0===J||J.call(W,Y)}complete(){var Y,W;null===(W=null===(Y=this.destination)||void 0===Y?void 0:Y.complete)||void 0===W||W.call(Y)}_subscribe(Y){var W,J;return null!==(J=null===(W=this.source)||void 0===W?void 0:W.subscribe(Y))&&void 0!==J?J:re.Lc}}},930:(Et,Fe,B)=>{B.d(Fe,{Hp:()=>Ke,Lv:()=>J});var c=B(576),re=B(727),V=B(2416),pe=B(7849),de=B(5032);const ye=Ee("C",void 0,void 0);function Ee(Ve,Ie,Ce){return{kind:Ve,value:Ie,error:Ce}}var Y=B(3410),W=B(2806);class J extends re.w0{constructor(Ie){super(),this.isStopped=!1,Ie?(this.destination=Ie,(0,re.Nn)(Ie)&&Ie.add(this)):this.destination=yt}static create(Ie,Ce,Qe){return new Ke(Ie,Ce,Qe)}next(Ie){this.isStopped?ht(function Te(Ve){return Ee("N",Ve,void 0)}(Ie),this):this._next(Ie)}error(Ie){this.isStopped?ht(function ce(Ve){return Ee("E",void 0,Ve)}(Ie),this):(this.isStopped=!0,this._error(Ie))}complete(){this.isStopped?ht(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ie){this.destination.next(Ie)}_error(Ie){try{this.destination.error(Ie)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const et=Function.prototype.bind;function Re(Ve,Ie){return et.call(Ve,Ie)}class Le{constructor(Ie){this.partialObserver=Ie}next(Ie){const{partialObserver:Ce}=this;if(Ce.next)try{Ce.next(Ie)}catch(Qe){we(Qe)}}error(Ie){const{partialObserver:Ce}=this;if(Ce.error)try{Ce.error(Ie)}catch(Qe){we(Qe)}else we(Ie)}complete(){const{partialObserver:Ie}=this;if(Ie.complete)try{Ie.complete()}catch(Ce){we(Ce)}}}class Ke extends J{constructor(Ie,Ce,Qe){let qe;if(super(),(0,c.m)(Ie)||!Ie)qe={next:Ie??void 0,error:Ce??void 0,complete:Qe??void 0};else{let ot;this&&V.v.useDeprecatedNextContext?(ot=Object.create(Ie),ot.unsubscribe=()=>this.unsubscribe(),qe={next:Ie.next&&Re(Ie.next,ot),error:Ie.error&&Re(Ie.error,ot),complete:Ie.complete&&Re(Ie.complete,ot)}):qe=Ie}this.destination=new Le(qe)}}function we(Ve){V.v.useDeprecatedSynchronousErrorHandling?(0,W.O)(Ve):(0,pe.h)(Ve)}function ht(Ve,Ie){const{onStoppedNotification:Ce}=V.v;Ce&&Y.z.setTimeout(()=>Ce(Ve,Ie))}const yt={closed:!0,next:de.Z,error:function Ae(Ve){throw Ve},complete:de.Z}},727:(Et,Fe,B)=>{B.d(Fe,{Lc:()=>ye,w0:()=>de,Nn:()=>ce});var c=B(576);const V=(0,B(3888).d)(Ee=>function(W){Ee(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((J,et)=>`${et+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W});var pe=B(8737);class de{constructor(Y){this.initialTeardown=Y,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Y;if(!this.closed){this.closed=!0;const{_parentage:W}=this;if(W)if(this._parentage=null,Array.isArray(W))for(const Re of W)Re.remove(this);else W.remove(this);const{initialTeardown:J}=this;if((0,c.m)(J))try{J()}catch(Re){Y=Re instanceof V?Re.errors:[Re]}const{_finalizers:et}=this;if(et){this._finalizers=null;for(const Re of et)try{Te(Re)}catch(Le){Y=Y??[],Le instanceof V?Y=[...Y,...Le.errors]:Y.push(Le)}}if(Y)throw new V(Y)}}add(Y){var W;if(Y&&Y!==this)if(this.closed)Te(Y);else{if(Y instanceof de){if(Y.closed||Y._hasParent(this))return;Y._addParent(this)}(this._finalizers=null!==(W=this._finalizers)&&void 0!==W?W:[]).push(Y)}}_hasParent(Y){const{_parentage:W}=this;return W===Y||Array.isArray(W)&&W.includes(Y)}_addParent(Y){const{_parentage:W}=this;this._parentage=Array.isArray(W)?(W.push(Y),W):W?[W,Y]:Y}_removeParent(Y){const{_parentage:W}=this;W===Y?this._parentage=null:Array.isArray(W)&&(0,pe.P)(W,Y)}remove(Y){const{_finalizers:W}=this;W&&(0,pe.P)(W,Y),Y instanceof de&&Y._removeParent(this)}}de.EMPTY=(()=>{const Ee=new de;return Ee.closed=!0,Ee})();const ye=de.EMPTY;function ce(Ee){return Ee instanceof de||Ee&&"closed"in Ee&&(0,c.m)(Ee.remove)&&(0,c.m)(Ee.add)&&(0,c.m)(Ee.unsubscribe)}function Te(Ee){(0,c.m)(Ee)?Ee():Ee.unsubscribe()}},2416:(Et,Fe,B)=>{B.d(Fe,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Et,Fe,B)=>{B.d(Fe,{E:()=>re});const re=new(B(8306).y)(de=>de.complete())},8996:(Et,Fe,B)=>{B.d(Fe,{D:()=>Ie});var c=B(8421),re=B(5363),V=B(9468),ye=B(8306),Te=B(2202),Ee=B(576),Y=B(9672);function J(Ce,Qe){if(!Ce)throw new Error("Iterable cannot be null");return new ye.y(qe=>{(0,Y.f)(qe,Qe,()=>{const ot=Ce[Symbol.asyncIterator]();(0,Y.f)(qe,Qe,()=>{ot.next().then(se=>{se.done?qe.complete():qe.next(se.value)})},0,!0)})})}var et=B(3670),Re=B(8239),Le=B(1144),Ke=B(6495),we=B(2206),Ae=B(4532),ht=B(3260);function Ie(Ce,Qe){return Qe?function Ve(Ce,Qe){if(null!=Ce){if((0,et.c)(Ce))return function pe(Ce,Qe){return(0,c.Xf)(Ce).pipe((0,V.R)(Qe),(0,re.Q)(Qe))}(Ce,Qe);if((0,Le.z)(Ce))return function ce(Ce,Qe){return new ye.y(qe=>{let ot=0;return Qe.schedule(function(){ot===Ce.length?qe.complete():(qe.next(Ce[ot++]),qe.closed||this.schedule())})})}(Ce,Qe);if((0,Re.t)(Ce))return function de(Ce,Qe){return(0,c.Xf)(Ce).pipe((0,V.R)(Qe),(0,re.Q)(Qe))}(Ce,Qe);if((0,we.D)(Ce))return J(Ce,Qe);if((0,Ke.T)(Ce))return function W(Ce,Qe){return new ye.y(qe=>{let ot;return(0,Y.f)(qe,Qe,()=>{ot=Ce[Te.h](),(0,Y.f)(qe,Qe,()=>{let se,Nt;try{({value:se,done:Nt}=ot.next())}catch(pt){return void qe.error(pt)}Nt?qe.complete():qe.next(se)},0,!0)}),()=>(0,Ee.m)(ot?.return)&&ot.return()})}(Ce,Qe);if((0,ht.L)(Ce))return function yt(Ce,Qe){return J((0,ht.Q)(Ce),Qe)}(Ce,Qe)}throw(0,Ae.z)(Ce)}(Ce,Qe):(0,c.Xf)(Ce)}},8421:(Et,Fe,B)=>{B.d(Fe,{Xf:()=>et});var c=B(7582),re=B(1144),V=B(8239),pe=B(8306),de=B(3670),ye=B(2206),ce=B(4532),Te=B(6495),Ee=B(3260),Y=B(576),W=B(7849),J=B(8822);function et(Ve){if(Ve instanceof pe.y)return Ve;if(null!=Ve){if((0,de.c)(Ve))return function Re(Ve){return new pe.y(Ie=>{const Ce=Ve[J.L]();if((0,Y.m)(Ce.subscribe))return Ce.subscribe(Ie);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ve);if((0,re.z)(Ve))return function Le(Ve){return new pe.y(Ie=>{for(let Ce=0;Ce<Ve.length&&!Ie.closed;Ce++)Ie.next(Ve[Ce]);Ie.complete()})}(Ve);if((0,V.t)(Ve))return function Ke(Ve){return new pe.y(Ie=>{Ve.then(Ce=>{Ie.closed||(Ie.next(Ce),Ie.complete())},Ce=>Ie.error(Ce)).then(null,W.h)})}(Ve);if((0,ye.D)(Ve))return Ae(Ve);if((0,Te.T)(Ve))return function we(Ve){return new pe.y(Ie=>{for(const Ce of Ve)if(Ie.next(Ce),Ie.closed)return;Ie.complete()})}(Ve);if((0,Ee.L)(Ve))return function ht(Ve){return Ae((0,Ee.Q)(Ve))}(Ve)}throw(0,ce.z)(Ve)}function Ae(Ve){return new pe.y(Ie=>{(function yt(Ve,Ie){var Ce,Qe,qe,ot;return(0,c.mG)(this,void 0,void 0,function*(){try{for(Ce=(0,c.KL)(Ve);!(Qe=yield Ce.next()).done;)if(Ie.next(Qe.value),Ie.closed)return}catch(se){qe={error:se}}finally{try{Qe&&!Qe.done&&(ot=Ce.return)&&(yield ot.call(Ce))}finally{if(qe)throw qe.error}}Ie.complete()})})(Ve,Ie).catch(Ce=>Ie.error(Ce))})}},6451:(Et,Fe,B)=>{B.d(Fe,{T:()=>ye});var c=B(8189),re=B(8421),V=B(515),pe=B(3269),de=B(8996);function ye(...ce){const Te=(0,pe.yG)(ce),Ee=(0,pe._6)(ce,1/0),Y=ce;return Y.length?1===Y.length?(0,re.Xf)(Y[0]):(0,c.J)(Ee)((0,de.D)(Y,Te)):V.E}},5403:(Et,Fe,B)=>{B.d(Fe,{x:()=>re});var c=B(930);function re(pe,de,ye,ce,Te){return new V(pe,de,ye,ce,Te)}class V extends c.Lv{constructor(de,ye,ce,Te,Ee,Y){super(de),this.onFinalize=Ee,this.shouldUnsubscribe=Y,this._next=ye?function(W){try{ye(W)}catch(J){de.error(J)}}:super._next,this._error=Te?function(W){try{Te(W)}catch(J){de.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=ce?function(){try{ce()}catch(W){de.error(W)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var de;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(de=this.onFinalize)||void 0===de||de.call(this))}}}},4004:(Et,Fe,B)=>{B.d(Fe,{U:()=>V});var c=B(4482),re=B(5403);function V(pe,de){return(0,c.e)((ye,ce)=>{let Te=0;ye.subscribe((0,re.x)(ce,Ee=>{ce.next(pe.call(de,Ee,Te++))}))})}},8189:(Et,Fe,B)=>{B.d(Fe,{J:()=>V});var c=B(5577),re=B(4671);function V(pe=1/0){return(0,c.z)(re.y,pe)}},5577:(Et,Fe,B)=>{B.d(Fe,{z:()=>Te});var c=B(4004),re=B(8421),V=B(4482),pe=B(9672),de=B(5403),ce=B(576);function Te(Ee,Y,W=1/0){return(0,ce.m)(Y)?Te((J,et)=>(0,c.U)((Re,Le)=>Y(J,Re,et,Le))((0,re.Xf)(Ee(J,et))),W):("number"==typeof Y&&(W=Y),(0,V.e)((J,et)=>function ye(Ee,Y,W,J,et,Re,Le,Ke){const we=[];let Ae=0,ht=0,yt=!1;const Ve=()=>{yt&&!we.length&&!Ae&&Y.complete()},Ie=Qe=>Ae<J?Ce(Qe):we.push(Qe),Ce=Qe=>{Re&&Y.next(Qe),Ae++;let qe=!1;(0,re.Xf)(W(Qe,ht++)).subscribe((0,de.x)(Y,ot=>{et?.(ot),Re?Ie(ot):Y.next(ot)},()=>{qe=!0},void 0,()=>{if(qe)try{for(Ae--;we.length&&Ae<J;){const ot=we.shift();Le?(0,pe.f)(Y,Le,()=>Ce(ot)):Ce(ot)}Ve()}catch(ot){Y.error(ot)}}))};return Ee.subscribe((0,de.x)(Y,Ie,()=>{yt=!0,Ve()})),()=>{Ke?.()}}(J,et,Ee,W)))}},5363:(Et,Fe,B)=>{B.d(Fe,{Q:()=>pe});var c=B(9672),re=B(4482),V=B(5403);function pe(de,ye=0){return(0,re.e)((ce,Te)=>{ce.subscribe((0,V.x)(Te,Ee=>(0,c.f)(Te,de,()=>Te.next(Ee),ye),()=>(0,c.f)(Te,de,()=>Te.complete(),ye),Ee=>(0,c.f)(Te,de,()=>Te.error(Ee),ye)))})}},3099:(Et,Fe,B)=>{B.d(Fe,{B:()=>de});var c=B(8421),re=B(7579),V=B(930),pe=B(4482);function de(ce={}){const{connector:Te=(()=>new re.x),resetOnError:Ee=!0,resetOnComplete:Y=!0,resetOnRefCountZero:W=!0}=ce;return J=>{let et,Re,Le,Ke=0,we=!1,Ae=!1;const ht=()=>{Re?.unsubscribe(),Re=void 0},yt=()=>{ht(),et=Le=void 0,we=Ae=!1},Ve=()=>{const Ie=et;yt(),Ie?.unsubscribe()};return(0,pe.e)((Ie,Ce)=>{Ke++,!Ae&&!we&&ht();const Qe=Le=Le??Te();Ce.add(()=>{Ke--,0===Ke&&!Ae&&!we&&(Re=ye(Ve,W))}),Qe.subscribe(Ce),!et&&Ke>0&&(et=new V.Hp({next:qe=>Qe.next(qe),error:qe=>{Ae=!0,ht(),Re=ye(yt,Ee,qe),Qe.error(qe)},complete:()=>{we=!0,ht(),Re=ye(yt,Y),Qe.complete()}}),(0,c.Xf)(Ie).subscribe(et))})(J)}}function ye(ce,Te,...Ee){if(!0===Te)return void ce();if(!1===Te)return;const Y=new V.Hp({next:()=>{Y.unsubscribe(),ce()}});return(0,c.Xf)(Te(...Ee)).subscribe(Y)}},9468:(Et,Fe,B)=>{B.d(Fe,{R:()=>re});var c=B(4482);function re(V,pe=0){return(0,c.e)((de,ye)=>{ye.add(V.schedule(()=>de.subscribe(ye),pe))})}},8505:(Et,Fe,B)=>{B.d(Fe,{b:()=>de});var c=B(576),re=B(4482),V=B(5403),pe=B(4671);function de(ye,ce,Te){const Ee=(0,c.m)(ye)||ce||Te?{next:ye,error:ce,complete:Te}:ye;return Ee?(0,re.e)((Y,W)=>{var J;null===(J=Ee.subscribe)||void 0===J||J.call(Ee);let et=!0;Y.subscribe((0,V.x)(W,Re=>{var Le;null===(Le=Ee.next)||void 0===Le||Le.call(Ee,Re),W.next(Re)},()=>{var Re;et=!1,null===(Re=Ee.complete)||void 0===Re||Re.call(Ee),W.complete()},Re=>{var Le;et=!1,null===(Le=Ee.error)||void 0===Le||Le.call(Ee,Re),W.error(Re)},()=>{var Re,Le;et&&(null===(Re=Ee.unsubscribe)||void 0===Re||Re.call(Ee)),null===(Le=Ee.finalize)||void 0===Le||Le.call(Ee)}))}):pe.y}},4408:(Et,Fe,B)=>{B.d(Fe,{o:()=>de});var c=B(727);class re extends c.w0{constructor(ce,Te){super()}schedule(ce,Te=0){return this}}const V={setInterval(ye,ce,...Te){const{delegate:Ee}=V;return Ee?.setInterval?Ee.setInterval(ye,ce,...Te):setInterval(ye,ce,...Te)},clearInterval(ye){const{delegate:ce}=V;return(ce?.clearInterval||clearInterval)(ye)},delegate:void 0};var pe=B(8737);class de extends re{constructor(ce,Te){super(ce,Te),this.scheduler=ce,this.work=Te,this.pending=!1}schedule(ce,Te=0){var Ee;if(this.closed)return this;this.state=ce;const Y=this.id,W=this.scheduler;return null!=Y&&(this.id=this.recycleAsyncId(W,Y,Te)),this.pending=!0,this.delay=Te,this.id=null!==(Ee=this.id)&&void 0!==Ee?Ee:this.requestAsyncId(W,this.id,Te),this}requestAsyncId(ce,Te,Ee=0){return V.setInterval(ce.flush.bind(ce,this),Ee)}recycleAsyncId(ce,Te,Ee=0){if(null!=Ee&&this.delay===Ee&&!1===this.pending)return Te;null!=Te&&V.clearInterval(Te)}execute(ce,Te){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ee=this._execute(ce,Te);if(Ee)return Ee;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ce,Te){let Y,Ee=!1;try{this.work(ce)}catch(W){Ee=!0,Y=W||new Error("Scheduled action threw falsy error")}if(Ee)return this.unsubscribe(),Y}unsubscribe(){if(!this.closed){const{id:ce,scheduler:Te}=this,{actions:Ee}=Te;this.work=this.state=this.scheduler=null,this.pending=!1,(0,pe.P)(Ee,this),null!=ce&&(this.id=this.recycleAsyncId(Te,ce,null)),this.delay=null,super.unsubscribe()}}}},7565:(Et,Fe,B)=>{B.d(Fe,{v:()=>V});var c=B(6063);class re{constructor(de,ye=re.now){this.schedulerActionCtor=de,this.now=ye}schedule(de,ye=0,ce){return new this.schedulerActionCtor(this,de).schedule(ce,ye)}}re.now=c.l.now;class V extends re{constructor(de,ye=re.now){super(de,ye),this.actions=[],this._active=!1}flush(de){const{actions:ye}=this;if(this._active)return void ye.push(de);let ce;this._active=!0;do{if(ce=de.execute(de.state,de.delay))break}while(de=ye.shift());if(this._active=!1,ce){for(;de=ye.shift();)de.unsubscribe();throw ce}}}},4986:(Et,Fe,B)=>{B.d(Fe,{P:()=>pe,z:()=>V});var c=B(4408);const V=new(B(7565).v)(c.o),pe=V},6063:(Et,Fe,B)=>{B.d(Fe,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(Et,Fe,B)=>{B.d(Fe,{z:()=>c});const c={setTimeout(re,V,...pe){const{delegate:de}=c;return de?.setTimeout?de.setTimeout(re,V,...pe):setTimeout(re,V,...pe)},clearTimeout(re){const{delegate:V}=c;return(V?.clearTimeout||clearTimeout)(re)},delegate:void 0}},2202:(Et,Fe,B)=>{B.d(Fe,{h:()=>re});const re=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Et,Fe,B)=>{B.d(Fe,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(Et,Fe,B)=>{B.d(Fe,{_6:()=>ye,jO:()=>pe,yG:()=>de});var c=B(576),re=B(3532);function V(ce){return ce[ce.length-1]}function pe(ce){return(0,c.m)(V(ce))?ce.pop():void 0}function de(ce){return(0,re.K)(V(ce))?ce.pop():void 0}function ye(ce,Te){return"number"==typeof V(ce)?ce.pop():Te}},8737:(Et,Fe,B)=>{function c(re,V){if(re){const pe=re.indexOf(V);0<=pe&&re.splice(pe,1)}}B.d(Fe,{P:()=>c})},3888:(Et,Fe,B)=>{function c(re){const pe=re(de=>{Error.call(de),de.stack=(new Error).stack});return pe.prototype=Object.create(Error.prototype),pe.prototype.constructor=pe,pe}B.d(Fe,{d:()=>c})},2806:(Et,Fe,B)=>{B.d(Fe,{O:()=>pe,x:()=>V});var c=B(2416);let re=null;function V(de){if(c.v.useDeprecatedSynchronousErrorHandling){const ye=!re;if(ye&&(re={errorThrown:!1,error:null}),de(),ye){const{errorThrown:ce,error:Te}=re;if(re=null,ce)throw Te}}else de()}function pe(de){c.v.useDeprecatedSynchronousErrorHandling&&re&&(re.errorThrown=!0,re.error=de)}},9672:(Et,Fe,B)=>{function c(re,V,pe,de=0,ye=!1){const ce=V.schedule(function(){pe(),ye?re.add(this.schedule(null,de)):this.unsubscribe()},de);if(re.add(ce),!ye)return ce}B.d(Fe,{f:()=>c})},4671:(Et,Fe,B)=>{function c(re){return re}B.d(Fe,{y:()=>c})},1144:(Et,Fe,B)=>{B.d(Fe,{z:()=>c});const c=re=>re&&"number"==typeof re.length&&"function"!=typeof re},2206:(Et,Fe,B)=>{B.d(Fe,{D:()=>re});var c=B(576);function re(V){return Symbol.asyncIterator&&(0,c.m)(V?.[Symbol.asyncIterator])}},576:(Et,Fe,B)=>{function c(re){return"function"==typeof re}B.d(Fe,{m:()=>c})},3670:(Et,Fe,B)=>{B.d(Fe,{c:()=>V});var c=B(8822),re=B(576);function V(pe){return(0,re.m)(pe[c.L])}},6495:(Et,Fe,B)=>{B.d(Fe,{T:()=>V});var c=B(2202),re=B(576);function V(pe){return(0,re.m)(pe?.[c.h])}},8239:(Et,Fe,B)=>{B.d(Fe,{t:()=>re});var c=B(576);function re(V){return(0,c.m)(V?.then)}},3260:(Et,Fe,B)=>{B.d(Fe,{L:()=>pe,Q:()=>V});var c=B(7582),re=B(576);function V(de){return(0,c.FC)(this,arguments,function*(){const ce=de.getReader();try{for(;;){const{value:Te,done:Ee}=yield(0,c.qq)(ce.read());if(Ee)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(Te)}}finally{ce.releaseLock()}})}function pe(de){return(0,re.m)(de?.getReader)}},3532:(Et,Fe,B)=>{B.d(Fe,{K:()=>re});var c=B(576);function re(V){return V&&(0,c.m)(V.schedule)}},4482:(Et,Fe,B)=>{B.d(Fe,{e:()=>V});var c=B(576);function V(pe){return de=>{if(function re(pe){return(0,c.m)(pe?.lift)}(de))return de.lift(function(ye){try{return pe(ye,this)}catch(ce){this.error(ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Et,Fe,B)=>{function c(){}B.d(Fe,{Z:()=>c})},7849:(Et,Fe,B)=>{B.d(Fe,{h:()=>V});var c=B(2416),re=B(3410);function V(pe){re.z.setTimeout(()=>{const{onUnhandledError:de}=c.v;if(!de)throw pe;de(pe)})}},4532:(Et,Fe,B)=>{function c(re){return new TypeError(`You provided ${null!==re&&"object"==typeof re?"an invalid object":`'${re}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}B.d(Fe,{z:()=>c})},4650:(Et,Fe,B)=>{B.d(Fe,{$8M:()=>lu,$Z:()=>jw,AFp:()=>eA,ALo:()=>kI,AaK:()=>Te,BQk:()=>xm,CHM:()=>Us,CRH:()=>LI,CZH:()=>ob,CqO:()=>gE,D6c:()=>YF,EJc:()=>Bh,EiD:()=>xu,EpF:()=>hE,F$t:()=>Ni,F4k:()=>pE,FYo:()=>rl,FiY:()=>Ho,G48:()=>LF,Gf:()=>Zv,GfV:()=>hm,GkF:()=>sv,Gpc:()=>W,Gre:()=>Nm,Hsn:()=>av,Ikx:()=>LE,JOm:()=>Ws,JVY:()=>Mu,KtG:()=>Ml,L6k:()=>Qd,LAX:()=>wy,LFG:()=>qn,Lbi:()=>Vx,Lck:()=>lC,MAs:()=>uE,NdJ:()=>mE,O4$:()=>Ed,OlP:()=>bn,Oqu:()=>hv,Q6J:()=>dE,QGY:()=>fE,QbO:()=>Bx,Qsj:()=>Zo,R0b:()=>no,RDi:()=>Xf,Rgc:()=>Fh,SBq:()=>il,Suo:()=>Kv,TTD:()=>Yr,TgZ:()=>wp,Udp:()=>cv,VKq:()=>yC,WFA:()=>_E,X6Q:()=>qx,XFs:()=>gt,Xpm:()=>Kn,Y36:()=>up,YNc:()=>nv,Yjl:()=>Q,Yz7:()=>be,ZZ4:()=>nD,_Bn:()=>wI,_UZ:()=>vh,_Vd:()=>Ys,_c5:()=>cR,_uU:()=>bc,aQg:()=>iD,cJS:()=>Lt,cg1:()=>VE,d8E:()=>Ev,dDg:()=>aA,dqk:()=>In,eBb:()=>lm,eFA:()=>cA,ekj:()=>Cp,eoX:()=>Up,f3M:()=>hu,g9A:()=>iA,h0i:()=>Ku,hGG:()=>uR,hij:()=>fv,iGM:()=>Yv,ifc:()=>Tt,ip1:()=>jC,kL8:()=>qu,kcU:()=>Cd,lG2:()=>z,lcZ:()=>zv,lri:()=>l_,mCW:()=>E,n5z:()=>Jn,n_E:()=>Np,oAB:()=>Rr,oxw:()=>yE,pB0:()=>_w,q3G:()=>Zn,q4F:()=>sp,qLn:()=>fm,qOj:()=>lE,qZA:()=>zu,qzn:()=>hn,rWj:()=>c_,sBO:()=>BF,sIi:()=>Ia,s_b:()=>Fp,soG:()=>zC,tp0:()=>bi,uIk:()=>Qy,vHH:()=>Le,vpe:()=>hl,wAp:()=>Vt,xi3:()=>bC,xp6:()=>Ek,ynx:()=>bh,z2F:()=>f_,z3N:()=>rr,zSh:()=>Ay,zs3:()=>sl});var c=B(7579),re=B(727),V=B(8306),pe=B(6451),de=B(3099);function ye(a){for(let l in a)if(a[l]===ye)return l;throw Error("Could not find renamed property on target object.")}function ce(a,l){for(const u in l)l.hasOwnProperty(u)&&!a.hasOwnProperty(u)&&(a[u]=l[u])}function Te(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(Te).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const l=a.toString();if(null==l)return""+l;const u=l.indexOf("\n");return-1===u?l:l.substring(0,u)}function Ee(a,l){return null==a||""===a?null===l?"":l:null==l||""===l?a:a+" "+l}const Y=ye({__forward_ref__:ye});function W(a){return a.__forward_ref__=W,a.toString=function(){return Te(this())},a}function J(a){return et(a)?a():a}function et(a){return"function"==typeof a&&a.hasOwnProperty(Y)&&a.__forward_ref__===W}class Le extends Error{constructor(l,u){super(function Ke(a,l){return`NG0${Math.abs(a)}${l?": "+l.trim():""}`}(l,u)),this.code=l}}function we(a){return"string"==typeof a?a:null==a?"":String(a)}function Ie(a,l){throw new Le(-201,!1)}function le(a,l){null==a&&function ie(a,l,u,h){throw new Error(`ASSERTION ERROR: ${a}`+(null==h?"":` [Expected=> ${u} ${h} ${l} <=Actual]`))}(l,a,null,"!=")}function be(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function Lt(a){return{providers:a.providers||[],imports:a.imports||[]}}function un(a){return sn(a,Nn)||sn(a,Zi)}function sn(a,l){return a.hasOwnProperty(l)?a[l]:null}function tn(a){return a&&(a.hasOwnProperty(Gn)||a.hasOwnProperty(pr))?a[Gn]:null}const Nn=ye({\u0275prov:ye}),Gn=ye({\u0275inj:ye}),Zi=ye({ngInjectableDef:ye}),pr=ye({ngInjectorDef:ye});var gt=(()=>((gt=gt||{})[gt.Default=0]="Default",gt[gt.Host=1]="Host",gt[gt.Self=2]="Self",gt[gt.SkipSelf=4]="SkipSelf",gt[gt.Optional=8]="Optional",gt))();let gr;function mr(a){const l=gr;return gr=a,l}function Ba(a,l,u){const h=un(a);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&gt.Optional?null:void 0!==l?l:void Ie(Te(a))}function Si(a){return{toString:a}.toString()}var Pn=(()=>((Pn=Pn||{})[Pn.OnPush=0]="OnPush",Pn[Pn.Default=1]="Default",Pn))(),Tt=(()=>{return(a=Tt||(Tt={}))[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",Tt;var a})();const In=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ui={},Rt=[],Bi=ye({\u0275cmp:ye}),En=ye({\u0275dir:ye}),ia=ye({\u0275pipe:ye}),dn=ye({\u0275mod:ye}),Ii=ye({\u0275fac:ye}),Ki=ye({__NG_ELEMENT_ID__:ye});let ms=0;function Kn(a){return Si(()=>{const u=!0===a.standalone,h={},p={type:a.type,providersResolver:null,decls:a.decls,vars:a.vars,factory:null,template:a.template||null,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:h,inputs:null,outputs:null,exportAs:a.exportAs||null,onPush:a.changeDetection===Pn.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&a.dependencies||null,getStandaloneInjector:null,selectors:a.selectors||Rt,viewQuery:a.viewQuery||null,features:a.features||null,data:a.data||{},encapsulation:a.encapsulation||Tt.Emulated,id:"c"+ms++,styles:a.styles||Rt,_:null,setInput:null,schemas:a.schemas||null,tView:null},y=a.dependencies,w=a.features;return p.inputs=$(a.inputs,h),p.outputs=$(a.outputs),w&&w.forEach(D=>D(p)),p.directiveDefs=y?()=>("function"==typeof y?y():y).map(Ls).filter(ni):null,p.pipeDefs=y?()=>("function"==typeof y?y():y).map(Je).filter(ni):null,p})}function Ls(a){return he(a)||ee(a)}function ni(a){return null!==a}function Rr(a){return Si(()=>({type:a.type,bootstrap:a.bootstrap||Rt,declarations:a.declarations||Rt,imports:a.imports||Rt,exports:a.exports||Rt,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null}))}function $(a,l){if(null==a)return ui;const u={};for(const h in a)if(a.hasOwnProperty(h)){let p=a[h],y=p;Array.isArray(p)&&(y=p[1],p=p[0]),u[p]=h,l&&(l[p]=y)}return u}const z=Kn;function Q(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,standalone:!0===a.standalone,onDestroy:a.type.prototype.ngOnDestroy||null}}function he(a){return a[Bi]||null}function ee(a){return a[En]||null}function Je(a){return a[ia]||null}function Ai(a){return Array.isArray(a)&&"object"==typeof a[1]}function vr(a){return Array.isArray(a)&&!0===a[1]}function co(a){return 0!=(8&a.flags)}function sa(a){return 2==(2&a.flags)}function Bs(a){return 1==(1&a.flags)}function ys(a){return null!==a.template}function Ua(a){return 0!=(256&a[2])}function uo(a,l){return a.hasOwnProperty(Ii)?a[Ii]:null}class Ig{constructor(l,u,h){this.previousValue=l,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function Yr(){return gd}function gd(a){return a.type.prototype.ngOnChanges&&(a.setInput=md),Sl}function Sl(){const a=Ag(this),l=a?.current;if(l){const u=a.previous;if(u===ui)a.previous=l;else for(let h in l)u[h]=l[h];a.current=null,this.ngOnChanges(l)}}function md(a,l,u,h){const p=Ag(a)||function xo(a,l){return a[zc]=l}(a,{previous:ui,current:null}),y=p.current||(p.current={}),w=p.previous,D=this.declaredInputs[u],I=w[D];y[D]=new Ig(I&&I.currentValue,l,w===ui),a[h]=l}Yr.ngInherit=!0;const zc="__ngSimpleChanges__";function Ag(a){return a[zc]||null}function ri(a){for(;Array.isArray(a);)a=a[0];return a}function Zr(a,l){return ri(l[a])}function br(a,l){return ri(l[a.index])}function qc(a,l){return a.data[l]}function Il(a,l){return a[l]}function si(a,l){const u=l[a];return Ai(u)?u:u[0]}function Oo(a){return 64==(64&a[2])}function bs(a,l){return null==l?null:a[l]}function oa(a){a[18]=0}function Nr(a,l){a[5]+=l;let u=a,h=a[3];for(;null!==h&&(1===l&&1===u[5]||-1===l&&0===u[5]);)h[5]+=l,u=h,h=h[3]}const Mt={lFrame:Ef(null),bindingsEnabled:!0};function yf(){return Mt.bindingsEnabled}function Ne(){return Mt.lFrame.lView}function Xt(){return Mt.lFrame.tView}function Us(a){return Mt.lFrame.contextLView=a,a[8]}function Ml(a){return Mt.lFrame.contextLView=null,a}function Qn(){let a=Yc();for(;null!==a&&64===a.type;)a=a.parent;return a}function Yc(){return Mt.lFrame.currentTNode}function ur(a,l){const u=Mt.lFrame;u.currentTNode=a,u.isParent=l}function aa(){return Mt.lFrame.isParent}function bd(){Mt.lFrame.isParent=!1}function er(){const a=Mt.lFrame;let l=a.bindingRootIndex;return-1===l&&(l=a.bindingRootIndex=a.tView.bindingStartIndex),l}function ws(){return Mt.lFrame.bindingIndex++}function Kr(a){const l=Mt.lFrame,u=l.bindingIndex;return l.bindingIndex=l.bindingIndex+a,u}function bf(a,l){const u=Mt.lFrame;u.bindingIndex=u.bindingRootIndex=a,Qc(l)}function Qc(a){Mt.lFrame.currentDirectiveIndex=a}function kl(a){const l=Mt.lFrame.currentDirectiveIndex;return-1===l?null:a[l]}function Xc(){return Mt.lFrame.currentQueryIndex}function Es(a){Mt.lFrame.currentQueryIndex=a}function wf(a){const l=a[1];return 2===l.type?l.declTNode:1===l.type?a[6]:null}function xl(a,l,u){if(u&gt.SkipSelf){let p=l,y=a;for(;!(p=p.parent,null!==p||u&gt.Host||(p=wf(y),null===p||(y=y[15],10&p.type))););if(null===p)return!1;l=p,a=y}const h=Mt.lFrame=la();return h.currentTNode=l,h.lView=a,!0}function Jc(a){const l=la(),u=a[1];Mt.lFrame=l,l.currentTNode=u.firstChild,l.lView=a,l.tView=u,l.contextLView=a,l.bindingIndex=u.bindingStartIndex,l.inI18n=!1}function la(){const a=Mt.lFrame,l=null===a?null:a.child;return null===l?Ef(a):l}function Ef(a){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=l),l}function Rl(){const a=Mt.lFrame;return Mt.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const Cf=Rl;function za(){const a=Rl();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function wr(){return Mt.lFrame.selectedIndex}function fo(a){Mt.lFrame.selectedIndex=a}function Xn(){const a=Mt.lFrame;return qc(a.tView,a.selectedIndex)}function Ed(){Mt.lFrame.currentNamespace="svg"}function Cd(){!function Sf(){Mt.lFrame.currentNamespace=null}()}function ca(a,l){for(let u=l.directiveStart,h=l.directiveEnd;u<h;u++){const y=a.data[u].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:D,ngAfterViewInit:I,ngAfterViewChecked:x,ngOnDestroy:N}=y;w&&(a.contentHooks||(a.contentHooks=[])).push(-u,w),D&&((a.contentHooks||(a.contentHooks=[])).push(u,D),(a.contentCheckHooks||(a.contentCheckHooks=[])).push(u,D)),I&&(a.viewHooks||(a.viewHooks=[])).push(-u,I),x&&((a.viewHooks||(a.viewHooks=[])).push(u,x),(a.viewCheckHooks||(a.viewCheckHooks=[])).push(u,x)),null!=N&&(a.destroyHooks||(a.destroyHooks=[])).push(u,N)}}function eu(a,l,u){Ol(a,l,3,u)}function Po(a,l,u,h){(3&a[2])===u&&Ol(a,l,u,h)}function Tf(a,l){let u=a[2];(3&u)===l&&(u&=2047,u+=1,a[2]=u)}function Ol(a,l,u,h){const y=h??-1,w=l.length-1;let D=0;for(let I=void 0!==h?65535&a[18]:0;I<w;I++)if("number"==typeof l[I+1]){if(D=l[I],null!=h&&D>=h)break}else l[I]<0&&(a[18]+=65536),(D<y||-1==y)&&(Og(a,u,l,I),a[18]=(4294901760&a[18])+I+2),I++}function Og(a,l,u,h){const p=u[h]<0,y=u[h+1],D=a[p?-u[h]:u[h]];if(p){if(a[2]>>11<a[18]>>16&&(3&a[2])===l){a[2]+=2048;try{y.call(D)}finally{}}}else try{y.call(D)}finally{}}class Nl{constructor(l,u,h){this.factory=l,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function iu(a,l,u){let h=0;for(;h<u.length;){const p=u[h];if("number"==typeof p){if(0!==p)break;h++;const y=u[h++],w=u[h++],D=u[h++];a.setAttribute(l,w,D,y)}else{const y=p,w=u[++h];Dd(y)?a.setProperty(l,y,w):a.setAttribute(l,y,w),h++}}return h}function Fl(a){return 3===a||4===a||6===a}function Dd(a){return 64===a.charCodeAt(0)}function Ll(a,l){if(null!==l&&0!==l.length)if(null===a||0===a.length)a=l.slice();else{let u=-1;for(let h=0;h<l.length;h++){const p=l[h];"number"==typeof p?u=p:0===u||ru(a,u,p,null,-1===u||2===u?l[++h]:null)}}return a}function ru(a,l,u,h,p){let y=0,w=a.length;if(-1===l)w=-1;else for(;y<a.length;){const D=a[y++];if("number"==typeof D){if(D===l){w=-1;break}if(D>l){w=y-1;break}}}for(;y<a.length;){const D=a[y];if("number"==typeof D)break;if(D===u){if(null===h)return void(null!==p&&(a[y+1]=p));if(h===a[y+1])return void(a[y+2]=p)}y++,null!==h&&y++,null!==p&&y++}-1!==w&&(a.splice(w,0,l),y=w+1),a.splice(y++,0,u),null!==h&&a.splice(y++,0,h),null!==p&&a.splice(y++,0,p)}function Pg(a){return-1!==a}function su(a){return 32767&a}function zs(a,l){let u=function lw(a){return a>>16}(a),h=l;for(;u>0;)h=h[15],u--;return h}let ou=!0;function Ga(a){const l=ou;return ou=a,l}let Id=0;const Qr={};function Wn(a,l){const u=vi(a,l);if(-1!==u)return u;const h=l[1];h.firstCreatePass&&(a.injectorIndex=l.length,Td(h.data,a),Td(l,null),Td(h.blueprint,null));const p=$a(a,l),y=a.injectorIndex;if(Pg(p)){const w=su(p),D=zs(p,l),I=D[1].data;for(let x=0;x<8;x++)l[y+x]=D[w+x]|I[w+x]}return l[y+8]=p,y}function Td(a,l){a.push(0,0,0,0,0,0,0,0,l)}function vi(a,l){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===l[a.injectorIndex+8]?-1:a.injectorIndex}function $a(a,l){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let u=0,h=null,p=l;for(;null!==p;){if(h=kd(p),null===h)return-1;if(u++,p=p[15],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return-1}function Vl(a,l,u){!function Ad(a,l,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(Ki)&&(h=u[Ki]),null==h&&(h=u[Ki]=Id++);const p=255&h;l.data[a+(p>>5)]|=1<<p}(a,l,u)}function au(a,l,u){if(u&gt.Optional||void 0!==a)return a;Ie()}function Fg(a,l,u,h){if(u&gt.Optional&&void 0===h&&(h=null),0==(u&(gt.Self|gt.Host))){const p=a[9],y=mr(void 0);try{return p?p.get(l,h,u&gt.Optional):Ba(l,h,u&gt.Optional)}finally{mr(y)}}return au(h,0,u)}function Bl(a,l,u,h=gt.Default,p){if(null!==a){if(1024&l[2]){const w=function Ul(a,l,u,h,p){let y=a,w=l;for(;null!==y&&null!==w&&1024&w[2]&&!(256&w[2]);){const D=Wa(y,w,u,h|gt.Self,Qr);if(D!==Qr)return D;let I=y.parent;if(!I){const x=w[21];if(x){const N=x.get(u,Qr,h);if(N!==Qr)return N}I=kd(w),w=w[15]}y=I}return p}(a,l,u,h,Qr);if(w!==Qr)return w}const y=Wa(a,l,u,h,Qr);if(y!==Qr)return y}return Fg(l,u,h,p)}function Wa(a,l,u,h,p){const y=function Lo(a){if("string"==typeof a)return a.charCodeAt(0)||0;const l=a.hasOwnProperty(Ki)?a[Ki]:void 0;return"number"==typeof l?l>=0?255&l:Lg:l}(u);if("function"==typeof y){if(!xl(l,a,h))return h&gt.Host?au(p,0,h):Fg(l,u,h,p);try{const w=y(h);if(null!=w||h&gt.Optional)return w;Ie()}finally{Cf()}}else if("number"==typeof y){let w=null,D=vi(a,l),I=-1,x=h&gt.Host?l[16][6]:null;for((-1===D||h&gt.SkipSelf)&&(I=-1===D?$a(a,l):l[D+8],-1!==I&&Rf(h,!1)?(w=l[1],D=su(I),l=zs(I,l)):D=-1);-1!==D;){const N=l[1];if(xf(y,D,N.data)){const L=ny(D,l,u,w,h,x);if(L!==Qr)return L}I=l[D+8],-1!==I&&Rf(h,l[1].data[D+8]===x)&&xf(y,D,l)?(w=N,D=su(I),l=zs(I,l)):D=-1}}return p}function ny(a,l,u,h,p,y){const w=l[1],D=w.data[a+8],N=$s(D,w,u,null==h?sa(D)&&ou:h!=w&&0!=(3&D.type),p&gt.Host&&y===D);return null!==N?Hl(l,w,N,D):Qr}function $s(a,l,u,h,p){const y=a.providerIndexes,w=l.data,D=1048575&y,I=a.directiveStart,N=y>>20,Z=p?D+N:a.directiveEnd;for(let ne=h?D:D+N;ne<Z;ne++){const Se=w[ne];if(ne<I&&u===Se||ne>=I&&Se.type===u)return ne}if(p){const ne=w[I];if(ne&&ys(ne)&&ne.type===u)return I}return null}function Hl(a,l,u,h){let p=a[u];const y=l.data;if(function tu(a){return a instanceof Nl}(p)){const w=p;w.resolving&&function ht(a,l){const u=l?`. Dependency path: ${l.join(" > ")} > ${a}`:"";throw new Le(-200,`Circular dependency in DI detected for ${a}${u}`)}(function Ae(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():we(a)}(y[u]));const D=Ga(w.canSeeViewProviders);w.resolving=!0;const I=w.injectImpl?mr(w.injectImpl):null;xl(a,h,gt.Default);try{p=a[u]=w.factory(void 0,y,a,h),l.firstCreatePass&&u>=h.directiveStart&&function Af(a,l,u){const{ngOnChanges:h,ngOnInit:p,ngDoCheck:y}=l.type.prototype;if(h){const w=gd(l);(u.preOrderHooks||(u.preOrderHooks=[])).push(a,w),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,w)}p&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-a,p),y&&((u.preOrderHooks||(u.preOrderHooks=[])).push(a,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,y))}(u,y[u],l)}finally{null!==I&&mr(I),Ga(D),w.resolving=!1,Cf()}}return p}function xf(a,l,u){return!!(u[l+(a>>5)]&1<<a)}function Rf(a,l){return!(a&gt.Self||a&gt.Host&&l)}class Cs{constructor(l,u){this._tNode=l,this._lView=u}get(l,u,h){return Bl(this._tNode,this._lView,l,h,u)}}function Lg(){return new Cs(Qn(),Ne())}function Jn(a){return Si(()=>{const l=a.prototype.constructor,u=l[Ii]||Md(l),h=Object.prototype;let p=Object.getPrototypeOf(a.prototype).constructor;for(;p&&p!==h;){const y=p[Ii]||Md(p);if(y&&y!==u)return y;p=Object.getPrototypeOf(p)}return y=>new y})}function Md(a){return et(a)?()=>{const l=Md(J(a));return l&&l()}:uo(a)}function kd(a){const l=a[1],u=l.type;return 2===u?l.declTNode:1===u?a[6]:null}function lu(a){return function ua(a,l){if("class"===l)return a.classes;if("style"===l)return a.styles;const u=a.attrs;if(u){const h=u.length;let p=0;for(;p<h;){const y=u[p];if(Fl(y))break;if(0===y)p+=2;else if("number"==typeof y)for(p++;p<h&&"string"==typeof u[p];)p++;else{if(y===l)return u[p+1];p+=2}}}return null}(Qn(),a)}const qa="__parameters__";function Vo(a,l,u){return Si(()=>{const h=function Ya(a){return function(...u){if(a){const h=a(...u);for(const p in h)this[p]=h[p]}}}(l);function p(...y){if(this instanceof p)return h.apply(this,y),this;const w=new p(...y);return D.annotation=w,D;function D(I,x,N){const L=I.hasOwnProperty(qa)?I[qa]:Object.defineProperty(I,qa,{value:[]})[qa];for(;L.length<=N;)L.push(null);return(L[N]=L[N]||[]).push(w),I}}return u&&(p.prototype=Object.create(u.prototype)),p.prototype.ngMetadataName=a,p.annotationCls=p,p})}class bn{constructor(l,u){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=be({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ti(a,l){void 0===l&&(l=a);for(let u=0;u<a.length;u++){let h=a[u];Array.isArray(h)?(l===a&&(l=a.slice(0,u)),Ti(h,l)):l!==a&&l.push(h)}return l}function Xr(a,l){a.forEach(u=>Array.isArray(u)?Xr(u,l):l(u))}function Hg(a,l,u){l>=a.length?a.push(u):a.splice(l,0,u)}function Jr(a,l){return l>=a.length-1?a.pop():a.splice(l,1)[0]}function ha(a,l){const u=[];for(let h=0;h<a;h++)u.push(l);return u}function es(a,l,u){let h=Gl(a,l);return h>=0?a[1|h]=u:(h=~h,function Ug(a,l,u,h){let p=a.length;if(p==l)a.push(u,h);else if(1===p)a.push(h,a[0]),a[0]=u;else{for(p--,a.push(a[p-1],a[p]);p>l;)a[p]=a[p-2],p--;a[l]=u,a[l+1]=h}}(a,h,l,u)),h}function Ff(a,l){const u=Gl(a,l);if(u>=0)return a[1|u]}function Gl(a,l){return function jg(a,l,u){let h=0,p=a.length>>u;for(;p!==h;){const y=h+(p-h>>1),w=a[y<<u];if(l===w)return y<<u;w>l?p=y:h=y+1}return~(p<<u)}(a,l,1)}const hi={},Er="__NG_DI_FLAG__",Sn="ngTempTokenPath",zg=/\n/gm,$l="__source";let ei;function ki(a){const l=ei;return ei=a,l}function fi(a,l=gt.Default){if(void 0===ei)throw new Le(-203,!1);return null===ei?Ba(a,void 0,l):ei.get(a,l&gt.Optional?null:void 0,l)}function qn(a,l=gt.Default){return(function gs(){return gr}()||fi)(J(a),l)}function hu(a,l=gt.Default){return"number"!=typeof l&&(l=0|(l.optional&&8)|(l.host&&1)|(l.self&&2)|(l.skipSelf&&4)),qn(a,l)}function pa(a){const l=[];for(let u=0;u<a.length;u++){const h=J(a[u]);if(Array.isArray(h)){if(0===h.length)throw new Le(900,!1);let p,y=gt.Default;for(let w=0;w<h.length;w++){const D=h[w],I=Xa(D);"number"==typeof I?-1===I?p=D.token:y|=I:p=D}l.push(qn(p,y))}else l.push(qn(h))}return l}function Ds(a,l){return a[Er]=l,a.prototype[Er]=l,a}function Xa(a){return a[Er]}const Ho=Ds(Vo("Optional"),8),bi=Ds(Vo("SkipSelf"),4);var Ws=(()=>((Ws=Ws||{})[Ws.Important=1]="Important",Ws[Ws.DashCase=2]="DashCase",Ws))();const Zl=new Map;let dw=0;const Kl="__ngContext__";function xi(a,l){Ai(l)?(a[Kl]=l[20],function jf(a){Zl.set(a[20],a)}(l)):a[Kl]=l}function vu(a,l){return undefined(a,l)}function Xl(a){const l=a[3];return vr(l)?l[3]:l}function Yg(a){return el(a[13])}function Zg(a){return el(a[4])}function el(a){for(;null!==a&&!vr(a);)a=a[4];return a}function bu(a,l,u,h,p){if(null!=h){let y,w=!1;vr(h)?y=h:Ai(h)&&(w=!0,h=h[0]);const D=ri(h);0===a&&null!==u?null==p?Kf(l,u,D):ya(l,u,D,p||null,!0):1===a&&null!==u?ya(l,u,D,p||null,!0):2===a?function tc(a,l,u){const h=jd(a,l);h&&function yy(a,l,u,h){a.removeChild(l,u,h)}(a,h,l,u)}(l,D,w):3===a&&l.destroyNode(D),null!=y&&function ic(a,l,u,h,p){const y=u[7];y!==ri(u)&&bu(l,a,h,y,p);for(let D=10;D<u.length;D++){const I=u[D];nc(I[1],I,a,l,h,y)}}(l,a,y,u,p)}}function Wf(a,l,u){return a.createElement(l,u)}function Cu(a,l){const u=a[9],h=u.indexOf(l),p=l[3];512&l[2]&&(l[2]&=-513,Nr(p,-1)),u.splice(h,1)}function Yf(a,l){if(a.length<=10)return;const u=10+l,h=a[u];if(h){const p=h[17];null!==p&&p!==a&&Cu(p,h),l>0&&(a[u-1][4]=h[4]);const y=Jr(a,10+l);!function gw(a,l){nc(a,l,l[11],2,null,null),l[0]=null,l[6]=null}(h[1],h);const w=y[19];null!==w&&w.detachView(y[1]),h[3]=null,h[4]=null,h[2]&=-65}return h}function Xg(a,l){if(!(128&l[2])){const u=l[11];u.destroyNode&&nc(a,l,u,3,null,null),function Qg(a){let l=a[13];if(!l)return Zf(a[1],a);for(;l;){let u=null;if(Ai(l))u=l[13];else{const h=l[10];h&&(u=h)}if(!u){for(;l&&!l[4]&&l!==a;)Ai(l)&&Zf(l[1],l),l=l[3];null===l&&(l=a),Ai(l)&&Zf(l[1],l),u=l&&l[4]}l=u}}(l)}}function Zf(a,l){if(!(128&l[2])){l[2]&=-65,l[2]|=128,function Jg(a,l){let u;if(null!=a&&null!=(u=a.destroyHooks))for(let h=0;h<u.length;h+=2){const p=l[u[h]];if(!(p instanceof Nl)){const y=u[h+1];if(Array.isArray(y))for(let w=0;w<y.length;w+=2){const D=p[y[w]],I=y[w+1];try{I.call(D)}finally{}}else try{y.call(p)}finally{}}}}(a,l),function Ud(a,l){const u=a.cleanup,h=l[7];let p=-1;if(null!==u)for(let y=0;y<u.length-1;y+=2)if("string"==typeof u[y]){const w=u[y+1],D="function"==typeof w?w(l):ri(l[w]),I=h[p=u[y+2]],x=u[y+3];"boolean"==typeof x?D.removeEventListener(u[y],I,x):x>=0?h[p=x]():h[p=-x].unsubscribe(),y+=2}else{const w=h[p=u[y+1]];u[y].call(w)}if(null!==h){for(let y=p+1;y<h.length;y++)(0,h[y])();l[7]=null}}(a,l),1===l[1].type&&l[11].destroy();const u=l[17];if(null!==u&&vr(l[3])){u!==l[3]&&Cu(u,l);const h=l[19];null!==h&&h.detachView(a)}!function fw(a){Zl.delete(a[20])}(l)}}function _y(a,l,u){return function Jl(a,l,u){let h=l;for(;null!==h&&40&h.type;)h=(l=h).parent;if(null===h)return u[0];if(2&h.flags){const p=a.data[h.directiveStart].encapsulation;if(p===Tt.None||p===Tt.Emulated)return null}return br(h,u)}(a,l.parent,u)}function ya(a,l,u,h,p){a.insertBefore(l,u,h,p)}function Kf(a,l,u){a.appendChild(l,u)}function tl(a,l,u,h,p){null!==h?ya(a,l,u,h,p):Kf(a,l,u)}function jd(a,l){return a.parentNode(l)}function em(a,l,u){return tm(a,l,u)}let va,Au,tm=function dr(a,l,u){return 40&a.type?br(a,u):null};function $d(a,l,u,h){const p=_y(a,h,l),y=l[11],D=em(h.parent||l[6],h,l);if(null!=p)if(Array.isArray(u))for(let I=0;I<u.length;I++)tl(y,p,u[I],D,!1);else tl(y,p,u,D,!1)}function $o(a,l){if(null!==l){const u=l.type;if(3&u)return br(l,a);if(4&u)return Wd(-1,a[l.index]);if(8&u){const h=l.child;if(null!==h)return $o(a,h);{const p=a[l.index];return vr(p)?Wd(-1,p):ri(p)}}if(32&u)return vu(l,a)()||ri(a[l.index]);{const h=nm(a,l);return null!==h?Array.isArray(h)?h[0]:$o(Xl(a[16]),h):$o(a,l.next)}}return null}function nm(a,l){return null!==l?a[16][6].projection[l.projection]:null}function Wd(a,l){const u=10+a+1;if(u<l.length){const h=l[u],p=h[1].firstChild;if(null!==p)return $o(h,p)}return l[7]}function qd(a,l,u,h,p,y,w){for(;null!=u;){const D=h[u.index],I=u.type;if(w&&0===l&&(D&&xi(ri(D),h),u.flags|=4),64!=(64&u.flags))if(8&I)qd(a,l,u.child,h,p,y,!1),bu(l,a,p,D,y);else if(32&I){const x=vu(u,h);let N;for(;N=x();)bu(l,a,p,N,y);bu(l,a,p,D,y)}else 16&I?Su(a,l,h,u,p,y):bu(l,a,p,D,y);u=w?u.projectionNext:u.next}}function nc(a,l,u,h,p,y){qd(u,h,a.firstChild,l,p,y,!1)}function Su(a,l,u,h,p,y){const w=u[16],I=w[6].projection[h.projection];if(Array.isArray(I))for(let x=0;x<I.length;x++)bu(l,a,p,I[x],y);else qd(a,l,I,w[3],p,y,!0)}function rm(a,l,u){a.setAttribute(l,"style",u)}function Yd(a,l,u){""===u?a.removeAttribute(l,"class"):a.setAttribute(l,"class",u)}function Ri(a){return function Zd(){if(void 0===va&&(va=null,In.trustedTypes))try{va=In.trustedTypes.createPolicy("angular",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch{}return va}()?.createHTML(a)||a}function Xf(a){Au=a}class nl{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class by extends nl{getTypeName(){return"HTML"}}class Oi extends nl{getTypeName(){return"Style"}}class vo extends nl{getTypeName(){return"Script"}}class Tu extends nl{getTypeName(){return"URL"}}class Jf extends nl{getTypeName(){return"ResourceURL"}}function rr(a){return a instanceof nl?a.changingThisBreaksApplicationSecurity:a}function hn(a,l){const u=function Kd(a){return a instanceof nl&&a.getTypeName()||null}(a);if(null!=u&&u!==l){if("ResourceURL"===u&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===l}function Mu(a){return new by(a)}function Qd(a){return new Oi(a)}function lm(a){return new vo(a)}function wy(a){return new Tu(a)}function _w(a){return new Jf(a)}class yw{constructor(l){this.inertDocumentHelper=l}getInertBodyElement(l){l="<body><remove></remove>"+l;try{const u=(new window.DOMParser).parseFromString(Ri(l),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(l):(u.removeChild(u.firstChild),u)}catch{return null}}}class b{constructor(l){if(this.defaultDoc=l,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const h=this.inertDocument.createElement("body");u.appendChild(h)}}getInertBodyElement(l){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=Ri(l),u;const h=this.inertDocument.createElement("body");return h.innerHTML=Ri(l),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(h),h}stripCustomNsAttrs(l){const u=l.attributes;for(let p=u.length-1;0<p;p--){const w=u.item(p).name;("xmlns:ns1"===w||0===w.indexOf("ns1:"))&&l.removeAttribute(w)}let h=l.firstChild;for(;h;)h.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(h),h=h.nextSibling}}const _=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function E(a){return(a=String(a)).match(_)?a:"unsafe:"+a}function k(a){const l={};for(const u of a.split(","))l[u]=!0;return l}function O(...a){const l={};for(const u of a)for(const h in u)u.hasOwnProperty(h)&&(l[h]=!0);return l}const G=k("area,br,col,hr,img,wbr"),X=k("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Be=k("rp,rt"),Un=O(G,O(X,k("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),O(Be,k("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),O(Be,X)),Hr=k("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Jd=O(Hr,k("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),k("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Dy=k("script,style,template");class Sy{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(l){let u=l.firstChild,h=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?h=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,h&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let p=this.checkClobberedElement(u,u.nextSibling);if(p){u=p;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(l){const u=l.nodeName.toLowerCase();if(!Un.hasOwnProperty(u))return this.sanitizedSomething=!0,!Dy.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const h=l.attributes;for(let p=0;p<h.length;p++){const y=h.item(p),w=y.name,D=w.toLowerCase();if(!Jd.hasOwnProperty(D)){this.sanitizedSomething=!0;continue}let I=y.value;Hr[D]&&(I=E(I)),this.buf.push(" ",w,'="',ku(I),'"')}return this.buf.push(">"),!0}endElement(l){const u=l.nodeName.toLowerCase();Un.hasOwnProperty(u)&&!G.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(l){this.buf.push(ku(l))}checkClobberedElement(l,u){if(u&&(l.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${l.outerHTML}`);return u}}const cm=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Iy=/([^\#-~ |!])/g;function ku(a){return a.replace(/&/g,"&amp;").replace(cm,function(l){return"&#"+(1024*(l.charCodeAt(0)-55296)+(l.charCodeAt(1)-56320)+65536)+";"}).replace(Iy,function(l){return"&#"+l.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let qo;function xu(a,l){let u=null;try{qo=qo||function Ey(a){const l=new b(a);return function g(){try{return!!(new window.DOMParser).parseFromString(Ri(""),"text/html")}catch{return!1}}()?new yw(l):l}(a);let h=l?String(l):"";u=qo.getInertBodyElement(h);let p=5,y=h;do{if(0===p)throw new Error("Failed to sanitize html because the input is unstable");p--,h=y,y=u.innerHTML,u=qo.getInertBodyElement(h)}while(h!==y);return Ri((new Sy).sanitizeChildren(eh(u)||u))}finally{if(u){const h=eh(u)||u;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function eh(a){return"content"in a&&function ep(a){return a.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===a.nodeName}(a)?a.content:null}var Zn=(()=>((Zn=Zn||{})[Zn.NONE=0]="NONE",Zn[Zn.HTML=1]="HTML",Zn[Zn.STYLE=2]="STYLE",Zn[Zn.SCRIPT=3]="SCRIPT",Zn[Zn.URL=4]="URL",Zn[Zn.RESOURCE_URL=5]="RESOURCE_URL",Zn))();const ba=new bn("ENVIRONMENT_INITIALIZER"),ww=new bn("INJECTOR",-1),O0=new bn("INJECTOR_DEF_TYPES");class Ew{get(l,u=hi){if(u===hi){const h=new Error(`NullInjectorError: No provider for ${Te(l)}!`);throw h.name="NullInjectorError",h}return u}}function Cw(...a){return{\u0275providers:np(0,a)}}function np(a,...l){const u=[],h=new Set;let p;return Xr(l,y=>{const w=y;dm(w,u,[],h)&&(p||(p=[]),p.push(w))}),void 0!==p&&Dw(p,u),u}function Dw(a,l){for(let u=0;u<a.length;u++){const{providers:p}=a[u];Xr(p,y=>{l.push(y)})}}function dm(a,l,u,h){if(!(a=J(a)))return!1;let p=null,y=tn(a);const w=!y&&he(a);if(y||w){if(w&&!w.standalone)return!1;p=a}else{const I=a.ngModule;if(y=tn(I),!y)return!1;p=I}const D=h.has(p);if(w){if(D)return!1;if(h.add(p),w.dependencies){const I="function"==typeof w.dependencies?w.dependencies():w.dependencies;for(const x of I)dm(x,l,u,h)}}else{if(!y)return!1;{if(null!=y.imports&&!D){let x;h.add(p);try{Xr(y.imports,N=>{dm(N,l,u,h)&&(x||(x=[]),x.push(N))})}finally{}void 0!==x&&Dw(x,l)}if(!D){const x=uo(p)||(()=>new p);l.push({provide:p,useFactory:x,deps:Rt},{provide:O0,useValue:p,multi:!0},{provide:ba,useValue:()=>qn(p),multi:!0})}const I=y.providers;null==I||D||Xr(I,N=>{l.push(N)})}}return p!==a&&void 0!==a.providers}const N0=ye({provide:String,useValue:ye});function ip(a){return null!==a&&"object"==typeof a&&N0 in a}function wa(a){return"function"==typeof a}const Ay=new bn("Set Injector scope."),rp={},Aw={};let Ty;function th(){return void 0===Ty&&(Ty=new Ew),Ty}class nh{}class Tw extends nh{constructor(l,u,h,p){super(),this.parent=u,this.source=h,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ru(l,w=>this.processProvider(w)),this.records.set(ww,ih(void 0,this)),p.has("environment")&&this.records.set(nh,ih(void 0,this));const y=this.records.get(Ay);null!=y&&"string"==typeof y.value&&this.scopes.add(y.value),this.injectorDefTypes=new Set(this.get(O0.multi,Rt,gt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const l of this._ngOnDestroyHooks)l.ngOnDestroy();for(const l of this._onDestroyHooks)l()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(l){this._onDestroyHooks.push(l)}runInContext(l){this.assertNotDestroyed();const u=ki(this),h=mr(void 0);try{return l()}finally{ki(u),mr(h)}}get(l,u=hi,h=gt.Default){this.assertNotDestroyed();const p=ki(this),y=mr(void 0);try{if(!(h&gt.SkipSelf)){let D=this.records.get(l);if(void 0===D){const I=function B0(a){return"function"==typeof a||"object"==typeof a&&a instanceof bn}(l)&&un(l);D=I&&this.injectableDefInScope(I)?ih(oc(l),rp):null,this.records.set(l,D)}if(null!=D)return this.hydrate(l,D)}return(h&gt.Self?th():this.parent).get(l,u=h&gt.Optional&&u===hi?null:u)}catch(w){if("NullInjectorError"===w.name){if((w[Sn]=w[Sn]||[]).unshift(Te(l)),p)throw w;return function Pd(a,l,u,h){const p=a[Sn];throw l[$l]&&p.unshift(l[$l]),a.message=function oi(a,l,u,h=null){a=a&&"\n"===a.charAt(0)&&"\u0275"==a.charAt(1)?a.slice(2):a;let p=Te(l);if(Array.isArray(l))p=l.map(Te).join(" -> ");else if("object"==typeof l){let y=[];for(let w in l)if(l.hasOwnProperty(w)){let D=l[w];y.push(w+":"+("string"==typeof D?JSON.stringify(D):Te(D)))}p=`{${y.join(", ")}}`}return`${u}${h?"("+h+")":""}[${p}]: ${a.replace(zg,"\n  ")}`}("\n"+a.message,p,u,h),a.ngTokenPath=p,a[Sn]=null,a}(w,l,"R3InjectorError",this.source)}throw w}finally{mr(y),ki(p)}}resolveInjectorInitializers(){const l=ki(this),u=mr(void 0);try{const h=this.get(ba.multi,Rt,gt.Self);for(const p of h)p()}finally{ki(l),mr(u)}}toString(){const l=[],u=this.records;for(const h of u.keys())l.push(Te(h));return`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Le(205,!1)}processProvider(l){let u=wa(l=J(l))?l:J(l&&l.provide);const h=function V0(a){return ip(a)?ih(void 0,a.useValue):ih(Mw(a),rp)}(l);if(wa(l)||!0!==l.multi)this.records.get(u);else{let p=this.records.get(u);p||(p=ih(void 0,rp,!0),p.factory=()=>pa(p.multi),this.records.set(u,p)),u=l,p.multi.push(l)}this.records.set(u,h)}hydrate(l,u){return u.value===rp&&(u.value=Aw,u.value=u.factory()),"object"==typeof u.value&&u.value&&function bo(a){return null!==a&&"object"==typeof a&&"function"==typeof a.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(l){if(!l.providedIn)return!1;const u=J(l.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function oc(a){const l=un(a),u=null!==l?l.factory:uo(a);if(null!==u)return u;if(a instanceof bn)throw new Le(204,!1);if(a instanceof Function)return function L0(a){const l=a.length;if(l>0)throw ha(l,"?"),new Le(204,!1);const u=function zn(a){const l=a&&(a[Nn]||a[Zi]);if(l){const u=function ps(a){if(a.hasOwnProperty("name"))return a.name;const l=(""+a).match(/^function\s*([^\s(]+)/);return null===l?"":l[1]}(a);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),l}return null}(a);return null!==u?()=>u.factory(a):()=>new a}(a);throw new Le(204,!1)}function Mw(a,l,u){let h;if(wa(a)){const p=J(a);return uo(p)||oc(p)}if(ip(a))h=()=>J(a.useValue);else if(function Iw(a){return!(!a||!a.useFactory)}(a))h=()=>a.useFactory(...pa(a.deps||[]));else if(function P0(a){return!(!a||!a.useExisting)}(a))h=()=>qn(J(a.useExisting));else{const p=J(a&&(a.useClass||a.provide));if(!function My(a){return!!a.deps}(a))return uo(p)||oc(p);h=()=>new p(...pa(a.deps))}return h}function ih(a,l,u=!1){return{factory:a,value:l,multi:u?[]:void 0}}function H0(a){return!!a.\u0275providers}function Ru(a,l){for(const u of a)Array.isArray(u)?Ru(u,l):H0(u)?Ru(u.\u0275providers,l):l(u)}class Yo{}class xw{resolveComponentFactory(l){throw function kw(a){const l=Error(`No component factory found for ${Te(a)}. Did you add it to @NgModule.entryComponents?`);return l.ngComponent=a,l}(l)}}let Ys=(()=>{class a{}return a.NULL=new xw,a})();function U0(){return Ou(Qn(),Ne())}function Ou(a,l){return new il(br(a,l))}let il=(()=>{class a{constructor(u){this.nativeElement=u}}return a.__NG_ELEMENT_ID__=U0,a})();function Rw(a){return a instanceof il?a.nativeElement:a}class rl{}let Zo=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>function Ur(){const a=Ne(),u=si(Qn().index,a);return(Ai(u)?u:a)[11]}(),a})(),ky=(()=>{class a{}return a.\u0275prov=be({token:a,providedIn:"root",factory:()=>null}),a})();class hm{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const sp=new hm("14.3.0"),op={};function Ow(a){return a.ngOriginalError}class fm{constructor(){this._console=console}handleError(l){const u=this._findOriginalError(l);this._console.error("ERROR",l),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(l){let u=l&&Ow(l);for(;u&&Ow(u);)u=Ow(u);return u||null}}function Ge(a,l,u){let h=a.length;for(;;){const p=a.indexOf(l,u);if(-1===p)return p;if(0===p||a.charCodeAt(p-1)<=32){const y=l.length;if(p+y===h||a.charCodeAt(p+y)<=32)return p}u=p+1}}const wo="ng-template";function Pw(a,l,u){let h=0;for(;h<a.length;){let p=a[h++];if(u&&"class"===p){if(p=a[h],-1!==Ge(p.toLowerCase(),l,0))return!0}else if(1===p){for(;h<a.length&&"string"==typeof(p=a[h++]);)if(p.toLowerCase()===l)return!0;return!1}}return!1}function ut(a){return 4===a.type&&a.value!==wo}function Dt(a,l,u){return l===(4!==a.type||u?a.value:wo)}function _k(a,l,u){let h=4;const p=a.attrs||[],y=function G0(a){for(let l=0;l<a.length;l++)if(Fl(a[l]))return l;return a.length}(p);let w=!1;for(let D=0;D<l.length;D++){const I=l[D];if("number"!=typeof I){if(!w)if(4&h){if(h=2|1&h,""!==I&&!Dt(a,I,u)||""===I&&1===l.length){if(Ze(h))return!1;w=!0}}else{const x=8&h?I:l[++D];if(8&h&&null!==a.attrs){if(!Pw(a.attrs,x,u)){if(Ze(h))return!1;w=!0}continue}const L=fe(8&h?"class":I,p,ut(a),u);if(-1===L){if(Ze(h))return!1;w=!0;continue}if(""!==x){let Z;Z=L>y?"":p[L+1].toLowerCase();const ne=8&h?Z:null;if(ne&&-1!==Ge(ne,x,0)||2&h&&x!==Z){if(Ze(h))return!1;w=!0}}}}else{if(!w&&!Ze(h)&&!Ze(I))return!1;if(w&&Ze(I))continue;w=!1,h=I|1&h}}return Ze(h)||w}function Ze(a){return 0==(1&a)}function fe(a,l,u,h){if(null===l)return-1;let p=0;if(h||!u){let y=!1;for(;p<l.length;){const w=l[p];if(w===a)return p;if(3===w||6===w)y=!0;else{if(1===w||2===w){let D=l[++p];for(;"string"==typeof D;)D=l[++p];continue}if(4===w)break;if(0===w){p+=4;continue}}p+=y?1:2}return-1}return function yk(a,l){let u=a.indexOf(4);if(u>-1)for(u++;u<a.length;){const h=a[u];if("number"==typeof h)return-1;if(h===l)return u;u++}return-1}(l,a)}function Pe(a,l,u=!1){for(let h=0;h<l.length;h++)if(_k(a,l[h],u))return!0;return!1}function vk(a,l){e:for(let u=0;u<l.length;u++){const h=l[u];if(a.length===h.length){for(let p=0;p<a.length;p++)if(a[p]!==h[p])continue e;return!0}}return!1}function $0(a,l){return a?":not("+l.trim()+")":l}function bk(a){let l=a[0],u=1,h=2,p="",y=!1;for(;u<a.length;){let w=a[u];if("string"==typeof w)if(2&h){const D=a[++u];p+="["+w+(D.length>0?'="'+D+'"':"")+"]"}else 8&h?p+="."+w:4&h&&(p+=" "+w);else""!==p&&!Ze(w)&&(l+=$0(y,p),p=""),h=w,y=y||!Ze(h);u++}return""!==p&&(l+=$0(y,p)),l}const Zt={};function Ek(a){q0(Xt(),Ne(),wr()+a,!1)}function q0(a,l,u,h){if(!h)if(3==(3&l[2])){const y=a.preOrderCheckHooks;null!==y&&eu(l,y,u)}else{const y=a.preOrderHooks;null!==y&&Po(l,y,0,u)}fo(u)}function Ci(a,l=null,u=null,h){const p=it(a,l,u,h);return p.resolveInjectorInitializers(),p}function it(a,l=null,u=null,h,p=new Set){const y=[u||Rt,Cw(a)];return h=h||("object"==typeof a?void 0:Te(a)),new Tw(y,l||th(),h||null,p)}let sl=(()=>{class a{static create(u,h){if(Array.isArray(u))return Ci({name:""},h,u,"");{const p=u.name??"";return Ci({name:p},u.parent,u.providers,p)}}}return a.THROW_IF_NOT_FOUND=hi,a.NULL=new Ew,a.\u0275prov=be({token:a,providedIn:"any",factory:()=>qn(ww)}),a.__NG_ELEMENT_ID__=-1,a})();function up(a,l=gt.Default){const u=Ne();return null===u?qn(a,l):Bl(Qn(),u,J(a),l)}function jw(){throw new Error("invalid")}function _m(a,l){return a<<17|l<<2}function Qs(a){return a>>17&32767}function Gw(a){return 2|a}function lc(a){return(131068&a)>>2}function $w(a,l){return-131069&a|l<<2}function Ww(a){return 1|a}function dc(a,l){const u=a.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const p=u[h],y=u[h+1];if(-1!==y){const w=a.data[y];Es(p),w.contentQueries(2,l[y],y)}}}function fp(a,l,u,h,p,y,w,D,I,x,N){const L=l.blueprint.slice();return L[0]=p,L[2]=76|h,(null!==N||a&&1024&a[2])&&(L[2]|=1024),oa(L),L[3]=L[15]=a,L[8]=u,L[10]=w||a&&a[10],L[11]=D||a&&a[11],L[12]=I||a&&a[12]||null,L[9]=x||a&&a[9]||null,L[6]=y,L[20]=function hw(){return dw++}(),L[21]=N,L[16]=2==l.type?a[16]:L,L}function hc(a,l,u,h,p){let y=a.data[l];if(null===y)y=function fc(a,l,u,h,p){const y=Yc(),w=aa(),I=a.data[l]=function ai(a,l,u,h,p,y){return{type:u,index:h,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?y:y&&y.parent,u,l,h,p);return null===a.firstChild&&(a.firstChild=I),null!==y&&(w?null==y.child&&null!==I.parent&&(y.child=I):null===y.next&&(y.next=I)),I}(a,l,u,h,p),function Kc(){return Mt.lFrame.inI18n}()&&(y.flags|=64);else if(64&y.type){y.type=u,y.value=h,y.attrs=p;const w=function ho(){const a=Mt.lFrame,l=a.currentTNode;return a.isParent?l:l.parent}();y.injectorIndex=null===w?-1:w.injectorIndex}return ur(y,!0),y}function Lu(a,l,u,h){if(0===u)return-1;const p=l.length;for(let y=0;y<u;y++)l.push(h),a.blueprint.push(h),a.data.push(null);return p}function uh(a,l,u){Jc(l);try{const h=a.viewQuery;null!==h&&pp(1,h,u);const p=a.template;null!==p&&Qw(a,l,p,1,u),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&dc(a,l),a.staticViewQueries&&pp(2,a.viewQuery,u);const y=a.components;null!==y&&function hp(a,l){for(let u=0;u<l.length;u++)yS(a,l[u])}(l,y)}catch(h){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),h}finally{l[2]&=-5,za()}}function wm(a,l,u,h){const p=l[2];if(128!=(128&p)){Jc(l);try{oa(l),function wd(a){return Mt.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==u&&Qw(a,l,u,2,h);const w=3==(3&p);if(w){const x=a.preOrderCheckHooks;null!==x&&eu(l,x,null)}else{const x=a.preOrderHooks;null!==x&&Po(l,x,0,null),Tf(l,0)}if(function Gy(a){for(let l=Yg(a);null!==l;l=Zg(l)){if(!l[2])continue;const u=l[9];for(let h=0;h<u.length;h++){const p=u[h],y=p[3];0==(512&p[2])&&Nr(y,1),p[2]|=512}}}(l),function Cm(a){for(let l=Yg(a);null!==l;l=Zg(l))for(let u=10;u<l.length;u++){const h=l[u],p=h[1];Oo(h)&&wm(p,h,p.template,h[8])}}(l),null!==a.contentQueries&&dc(a,l),w){const x=a.contentCheckHooks;null!==x&&eu(l,x)}else{const x=a.contentHooks;null!==x&&Po(l,x,1),Tf(l,1)}!function bm(a,l){const u=a.hostBindingOpCodes;if(null!==u)try{for(let h=0;h<u.length;h++){const p=u[h];if(p<0)fo(~p);else{const y=p,w=u[++h],D=u[++h];bf(w,y),D(2,l[y])}}}finally{fo(-1)}}(a,l);const D=a.components;null!==D&&function lS(a,l){for(let u=0;u<l.length;u++)$y(a,l[u])}(l,D);const I=a.viewQuery;if(null!==I&&pp(2,I,h),w){const x=a.viewCheckHooks;null!==x&&eu(l,x)}else{const x=a.viewHooks;null!==x&&Po(l,x,2),Tf(l,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),l[2]&=-41,512&l[2]&&(l[2]&=-513,Nr(l[3],-1))}finally{za()}}}function Qw(a,l,u,h,p){const y=wr(),w=2&h;try{fo(-1),w&&l.length>22&&q0(a,l,22,!1),u(h,p)}finally{fo(y)}}function Em(a,l,u){if(co(l)){const p=l.directiveEnd;for(let y=l.directiveStart;y<p;y++){const w=a.data[y];w.contentQueries&&w.contentQueries(1,u[y],y)}}}function dh(a,l,u){!yf()||(function pS(a,l,u,h){const p=u.directiveStart,y=u.directiveEnd;a.firstCreatePass||Wn(u,l),xi(h,l);const w=u.initialInputs;for(let D=p;D<y;D++){const I=a.data[D],x=ys(I);x&&Nk(l,u,I);const N=Hl(l,a,D,u);xi(N,l),null!==w&&Pk(0,D-p,N,I,0,w),x&&(si(u.index,l)[8]=N)}}(a,l,u,br(u,l)),128==(128&u.flags)&&function nE(a,l,u){const h=u.directiveStart,p=u.directiveEnd,y=u.index,w=function ja(){return Mt.lFrame.currentDirectiveIndex}();try{fo(y);for(let D=h;D<p;D++){const I=a.data[D],x=l[D];Qc(D),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&iE(I,x)}}finally{fo(-1),Qc(w)}}(a,l,u))}function jy(a,l,u=br){const h=l.localNames;if(null!==h){let p=l.index+1;for(let y=0;y<h.length;y+=2){const w=h[y+1],D=-1===w?u(l,a):a[w];a[p++]=D}}}function cS(a){const l=a.tView;return null===l||l.incompleteFirstPass?a.tView=Xw(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):l}function Xw(a,l,u,h,p,y,w,D,I,x){const N=22+h,L=N+p,Z=function uS(a,l){const u=[];for(let h=0;h<l;h++)u.push(h<a?null:Zt);return u}(N,L),ne="function"==typeof x?x():x;return Z[1]={type:a,blueprint:Z,template:u,queries:null,viewQuery:D,declTNode:l,data:Z.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof y?y():y,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:I,consts:ne,incompleteFirstPass:!1}}function Jw(a,l,u,h){const p=Uu(l);null===u?p.push(h):(p.push(u),a.firstCreatePass&&is(a).push(h,p.length-1))}function pc(a,l,u){for(let h in a)if(a.hasOwnProperty(h)){const p=a[h];(u=null===u?{}:u).hasOwnProperty(h)?u[h].push(l,p):u[h]=[l,p]}return u}function eE(a,l){const h=l.directiveEnd,p=a.data,y=l.attrs,w=[];let D=null,I=null;for(let x=l.directiveStart;x<h;x++){const N=p[x],L=N.inputs,Z=null===y||ut(l)?null:Fk(L,y);w.push(Z),D=pc(L,x,D),I=pc(N.outputs,x,I)}null!==D&&(D.hasOwnProperty("class")&&(l.flags|=16),D.hasOwnProperty("style")&&(l.flags|=32)),l.initialInputs=w,l.inputs=D,l.outputs=I}function Ar(a,l,u,h,p,y,w,D){const I=br(l,u);let N,x=l.inputs;!D&&null!=x&&(N=x[h])?(hh(a,u,N,h,p),sa(l)&&hS(u,l.index)):3&l.type&&(h=function dS(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(h),p=null!=w?w(p,l.value||"",h):p,y.setProperty(I,h,p))}function hS(a,l){const u=si(l,a);16&u[2]||(u[2]|=32)}function Vu(a,l,u,h){let p=!1;if(yf()){const y=function gS(a,l,u){const h=a.directiveRegistry;let p=null;if(h)for(let y=0;y<h.length;y++){const w=h[y];Pe(u,w.selectors,!1)&&(p||(p=[]),Vl(Wn(u,l),a,w.type),ys(w)?(rE(a,u),p.unshift(w)):p.push(w))}return p}(a,l,u),w=null===h?null:{"":-1};if(null!==y){p=!0,mS(u,a.data.length,y.length);for(let N=0;N<y.length;N++){const L=y[N];L.providersResolver&&L.providersResolver(L)}let D=!1,I=!1,x=Lu(a,l,y.length,null);for(let N=0;N<y.length;N++){const L=y[N];u.mergedAttrs=Ll(u.mergedAttrs,L.hostAttrs),sE(a,u,l,x,L),Ok(x,L,w),null!==L.contentQueries&&(u.flags|=8),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(u.flags|=128);const Z=L.type.prototype;!D&&(Z.ngOnChanges||Z.ngOnInit||Z.ngDoCheck)&&((a.preOrderHooks||(a.preOrderHooks=[])).push(u.index),D=!0),!I&&(Z.ngOnChanges||Z.ngDoCheck)&&((a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(u.index),I=!0),x++}eE(a,u)}w&&function Rk(a,l,u){if(l){const h=a.localNames=[];for(let p=0;p<l.length;p+=2){const y=u[l[p+1]];if(null==y)throw new Le(-301,!1);h.push(l[p],y)}}}(u,h,w)}return u.mergedAttrs=Ll(u.mergedAttrs,u.attrs),p}function zy(a,l,u,h,p,y){const w=y.hostBindings;if(w){let D=a.hostBindingOpCodes;null===D&&(D=a.hostBindingOpCodes=[]);const I=~l.index;(function tE(a){let l=a.length;for(;l>0;){const u=a[--l];if("number"==typeof u&&u<0)return u}return 0})(D)!=I&&D.push(I),D.push(h,p,w)}}function iE(a,l){null!==a.hostBindings&&a.hostBindings(1,l)}function rE(a,l){l.flags|=2,(a.components||(a.components=[])).push(l.index)}function Ok(a,l,u){if(u){if(l.exportAs)for(let h=0;h<l.exportAs.length;h++)u[l.exportAs[h]]=a;ys(l)&&(u[""]=a)}}function mS(a,l,u){a.flags|=1,a.directiveStart=l,a.directiveEnd=l+u,a.providerIndexes=l}function sE(a,l,u,h,p){a.data[h]=p;const y=p.factory||(p.factory=uo(p.type)),w=new Nl(y,ys(p),up);a.blueprint[h]=w,u[h]=w,zy(a,l,0,h,Lu(a,u,p.hostVars,Zt),p)}function Nk(a,l,u){const h=br(l,a),p=cS(u),y=a[10],w=Dm(a,fp(a,p,null,u.onPush?32:16,h,l,y,y.createRenderer(h,u),null,null,null));a[l.index]=w}function Sa(a,l,u,h,p,y){const w=br(a,l);!function oE(a,l,u,h,p,y,w){if(null==y)a.removeAttribute(l,p,u);else{const D=null==w?we(y):w(y,h||"",p);a.setAttribute(l,p,D,u)}}(l[11],w,y,a.value,u,h,p)}function Pk(a,l,u,h,p,y){const w=y[l];if(null!==w){const D=h.setInput;for(let I=0;I<w.length;){const x=w[I++],N=w[I++],L=w[I++];null!==D?h.setInput(u,L,x,N):u[N]=L}}}function Fk(a,l){let u=null,h=0;for(;h<l.length;){const p=l[h];if(0!==p)if(5!==p){if("number"==typeof p)break;a.hasOwnProperty(p)&&(null===u&&(u=[]),u.push(p,a[p],l[h+1])),h+=2}else h+=2;else h+=4}return u}function Bu(a,l,u,h){return new Array(a,!0,!1,l,null,0,h,u,null,null)}function $y(a,l){const u=si(l,a);if(Oo(u)){const h=u[1];48&u[2]?wm(h,u,h.template,u[8]):u[5]>0&&Wy(u)}}function Wy(a){for(let h=Yg(a);null!==h;h=Zg(h))for(let p=10;p<h.length;p++){const y=h[p];if(Oo(y))if(512&y[2]){const w=y[1];wm(w,y,w.template,y[8])}else y[5]>0&&Wy(y)}const u=a[1].components;if(null!==u)for(let h=0;h<u.length;h++){const p=si(u[h],a);Oo(p)&&p[5]>0&&Wy(p)}}function yS(a,l){const u=si(l,a),h=u[1];(function gc(a,l){for(let u=l.length;u<a.blueprint.length;u++)l.push(a.blueprint[u])})(h,u),uh(h,u,u[8])}function Dm(a,l){return a[13]?a[14][4]=l:a[13]=l,a[14]=l,l}function Hu(a){for(;a;){a[2]|=32;const l=Xl(a);if(Ua(a)&&!l)return a;a=l}return null}function Sm(a,l,u,h=!0){const p=l[10];p.begin&&p.begin();try{wm(a,l,a.template,u)}catch(w){throw h&&Im(l,w),w}finally{p.end&&p.end()}}function pp(a,l,u){Es(0),l(a,u)}function Uu(a){return a[7]||(a[7]=[])}function is(a){return a.cleanup||(a.cleanup=[])}function qy(a,l,u){return(null===a||ys(a))&&(u=function Ro(a){for(;Array.isArray(a);){if("object"==typeof a[1])return a;a=a[0]}return null}(u[l.index])),u[11]}function Im(a,l){const u=a[9],h=u?u.get(fm,null):null;h&&h.handleError(l)}function hh(a,l,u,h,p){for(let y=0;y<u.length;){const w=u[y++],D=u[y++],I=l[w],x=a.data[w];null!==x.setInput?x.setInput(I,p,h,D):I[D]=p}}function gp(a,l,u){let h=u?a.styles:null,p=u?a.classes:null,y=0;if(null!==l)for(let w=0;w<l.length;w++){const D=l[w];"number"==typeof D?y=D:1==y?p=Ee(p,D):2==y&&(h=Ee(h,D+": "+l[++w]+";"))}u?a.styles=h:a.stylesWithoutHost=h,u?a.classes=p:a.classesWithoutHost=p}function ju(a,l,u,h,p=!1){for(;null!==u;){const y=l[u.index];if(null!==y&&h.push(ri(y)),vr(y))for(let D=10;D<y.length;D++){const I=y[D],x=I[1].firstChild;null!==x&&ju(I[1],I,x,h)}const w=u.type;if(8&w)ju(a,l,u.child,h);else if(32&w){const D=vu(u,l);let I;for(;I=D();)h.push(I)}else if(16&w){const D=nm(l,u);if(Array.isArray(D))h.push(...D);else{const I=Xl(l[16]);ju(I[1],I,D,h,!0)}}u=p?u.projectionNext:u.next}return h}class mp{constructor(l,u){this._lView=l,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const l=this._lView,u=l[1];return ju(u,l,u.firstChild,[])}get context(){return this._lView[8]}set context(l){this._lView[8]=l}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[3];if(vr(l)){const u=l[8],h=u?u.indexOf(this):-1;h>-1&&(Yf(l,h),Jr(u,h))}this._attachedToViewContainer=!1}Xg(this._lView[1],this._lView)}onDestroy(l){Jw(this._lView[1],this._lView,null,l)}markForCheck(){Hu(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Sm(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Le(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Kg(a,l){nc(a,l,l[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new Le(902,!1);this._appRef=l}}class wS extends mp{constructor(l){super(l),this._view=l}detectChanges(){const l=this._view;Sm(l[1],l,l[8],!1)}checkNoChanges(){}get context(){return null}}class aE extends Ys{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const u=he(l);return new _p(u,this.ngModule)}}function cl(a){const l=[];for(let u in a)a.hasOwnProperty(u)&&l.push({propName:a[u],templateName:u});return l}class Xs{constructor(l,u){this.injector=l,this.parentInjector=u}get(l,u,h){const p=this.injector.get(l,op,h);return p!==op||u===op?p:this.parentInjector.get(l,u,h)}}class _p extends Yo{constructor(l,u){super(),this.componentDef=l,this.ngModule=u,this.componentType=l.type,this.selector=function wk(a){return a.map(bk).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return cl(this.componentDef.inputs)}get outputs(){return cl(this.componentDef.outputs)}create(l,u,h,p){let y=(p=p||this.ngModule)instanceof nh?p:p?.injector;y&&null!==this.componentDef.getStandaloneInjector&&(y=this.componentDef.getStandaloneInjector(y)||y);const w=y?new Xs(l,y):l,D=w.get(rl,null);if(null===D)throw new Le(407,!1);const I=w.get(ky,null),x=D.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",L=h?function jr(a,l,u){return a.selectRootElement(l,u===Tt.ShadowDom)}(x,h,this.componentDef.encapsulation):Wf(x,N,function Lk(a){const l=a.toLowerCase();return"svg"===l?"svg":"math"===l?"math":null}(N)),Z=this.componentDef.onPush?288:272,ne=Xw(0,null,null,1,0,null,null,null,null,null),Se=fp(null,ne,null,Z,null,null,D,x,I,w,null);let $e,nt;Jc(Se);try{const dt=function Tm(a,l,u,h,p,y){const w=u[1];u[22]=a;const I=hc(w,22,2,"#host",null),x=I.mergedAttrs=l.hostAttrs;null!==x&&(gp(I,x,!0),null!==a&&(iu(p,a,x),null!==I.classes&&Yd(p,a,I.classes),null!==I.styles&&rm(p,a,I.styles)));const N=h.createRenderer(a,l),L=fp(u,cS(l),null,l.onPush?32:16,u[22],I,h,N,y||null,null,null);return w.firstCreatePass&&(Vl(Wn(I,u),w,l.type),rE(w,I),mS(I,u.length,1)),Dm(u,L),u[22]=L}(L,this.componentDef,Se,D,x);if(L)if(h)iu(x,L,["ng-version",sp.full]);else{const{attrs:Ft,classes:He}=function W0(a){const l=[],u=[];let h=1,p=2;for(;h<a.length;){let y=a[h];if("string"==typeof y)2===p?""!==y&&l.push(y,a[++h]):8===p&&u.push(y);else{if(!Ze(p))break;p=y}h++}return{attrs:l,classes:u}}(this.componentDef.selectors[0]);Ft&&iu(x,L,Ft),He&&He.length>0&&Yd(x,L,He.join(" "))}if(nt=qc(ne,22),void 0!==u){const Ft=nt.projection=[];for(let He=0;He<this.ngContentSelectors.length;He++){const jt=u[He];Ft.push(null!=jt?Array.from(jt):null)}}$e=function Hk(a,l,u,h){const p=u[1],y=function Bn(a,l,u){const h=Qn();a.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),sE(a,h,l,Lu(a,l,1,null),u),eE(a,h));const p=Hl(l,a,h.directiveStart,h);xi(p,l);const y=br(h,l);return y&&xi(y,l),p}(p,u,l);if(a[8]=u[8]=y,null!==h)for(const D of h)D(y,l);if(l.contentQueries){const D=Qn();l.contentQueries(1,y,D.directiveStart)}const w=Qn();return!p.firstCreatePass||null===l.hostBindings&&null===l.hostAttrs||(fo(w.index),zy(u[1],w,0,w.directiveStart,w.directiveEnd,l),iE(l,y)),y}(dt,this.componentDef,Se,[Uk]),uh(ne,Se,null)}finally{za()}return new ul(this.componentType,$e,Ou(nt,Se),Se,nt)}}class ul extends class dk{}{constructor(l,u,h,p,y){super(),this.location=h,this._rootLView=p,this._tNode=y,this.instance=u,this.hostView=this.changeDetectorRef=new wS(p),this.componentType=l}setInput(l,u){const h=this._tNode.inputs;let p;if(null!==h&&(p=h[l])){const y=this._rootLView;hh(y[1],y,p,l,u),hS(y,this._tNode.index)}}get injector(){return new Cs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}function Uk(){const a=Qn();ca(Ne()[1],a)}function lE(a){let l=function Qt(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),u=!0;const h=[a];for(;l;){let p;if(ys(a))p=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new Le(903,!1);p=l.\u0275dir}if(p){if(u){h.push(p);const w=a;w.inputs=Yy(a.inputs),w.declaredInputs=Yy(a.declaredInputs),w.outputs=Yy(a.outputs);const D=p.hostBindings;D&&Zy(a,D);const I=p.viewQuery,x=p.contentQueries;if(I&&ES(a,I),x&&CS(a,x),ce(a.inputs,p.inputs),ce(a.declaredInputs,p.declaredInputs),ce(a.outputs,p.outputs),ys(p)&&p.data.animation){const N=a.data;N.animation=(N.animation||[]).concat(p.data.animation)}}const y=p.features;if(y)for(let w=0;w<y.length;w++){const D=y[w];D&&D.ngInherit&&D(a),D===lE&&(u=!1)}}l=Object.getPrototypeOf(l)}!function cE(a){let l=0,u=null;for(let h=a.length-1;h>=0;h--){const p=a[h];p.hostVars=l+=p.hostVars,p.hostAttrs=Ll(p.hostAttrs,u=Ll(u,p.hostAttrs))}}(h)}function Yy(a){return a===ui?{}:a===Rt?[]:a}function ES(a,l){const u=a.viewQuery;a.viewQuery=u?(h,p)=>{l(h,p),u(h,p)}:l}function CS(a,l){const u=a.contentQueries;a.contentQueries=u?(h,p,y)=>{l(h,p,y),u(h,p,y)}:l}function Zy(a,l){const u=a.hostBindings;a.hostBindings=u?(h,p)=>{l(h,p),u(h,p)}:l}let mc=null;function Co(){if(!mc){const a=In.Symbol;if(a&&a.iterator)mc=a.iterator;else{const l=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<l.length;++u){const h=l[u];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(mc=h)}}}return mc}function Ia(a){return!!Ky(a)&&(Array.isArray(a)||!(a instanceof Map)&&Co()in a)}function Ky(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function Js(a,l,u){return a[l]=u}function rs(a,l,u){return!Object.is(a[l],u)&&(a[l]=u,!0)}function Qy(a,l,u,h){const p=Ne();return rs(p,ws(),l)&&(Xt(),Sa(Xn(),p,a,l,u,h)),Qy}function dl(a,l,u,h){return rs(a,ws(),u)?l+we(u)+h:Zt}function nv(a,l,u,h,p,y,w,D){const I=Ne(),x=Xt(),N=a+22,L=x.firstCreatePass?function kS(a,l,u,h,p,y,w,D,I){const x=l.consts,N=hc(l,a,4,w||null,bs(x,D));Vu(l,u,N,bs(x,I)),ca(l,N);const L=N.tViews=Xw(2,N,h,p,y,l.directiveRegistry,l.pipeRegistry,null,l.schemas,x);return null!==l.queries&&(l.queries.template(l,N),L.queries=l.queries.embeddedTView(N)),N}(N,x,I,l,u,h,p,y,w):x.data[N];ur(L,!1);const Z=I[11].createComment("");$d(x,I,Z,L),xi(Z,I),Dm(I,I[N]=Bu(Z,I,Z,L)),Bs(L)&&dh(x,I,L),null!=w&&jy(I,L,D)}function uE(a){return Il(function Hn(){return Mt.lFrame.contextLView}(),22+a)}function dE(a,l,u){const h=Ne();return rs(h,ws(),l)&&Ar(Xt(),Xn(),h,a,l,h[11],u,!1),dE}function rv(a,l,u,h,p){const w=p?"class":"style";hh(a,u,l.inputs[w],w,h)}function wp(a,l,u,h){const p=Ne(),y=Xt(),w=22+a,D=p[11],I=p[w]=Wf(D,l,function If(){return Mt.lFrame.currentNamespace}()),x=y.firstCreatePass?function xS(a,l,u,h,p,y,w){const D=l.consts,x=hc(l,a,2,p,bs(D,y));return Vu(l,u,x,bs(D,w)),null!==x.attrs&&gp(x,x.attrs,!1),null!==x.mergedAttrs&&gp(x,x.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,x),x}(w,y,p,0,l,u,h):y.data[w];ur(x,!0);const N=x.mergedAttrs;null!==N&&iu(D,I,N);const L=x.classes;null!==L&&Yd(D,I,L);const Z=x.styles;return null!==Z&&rm(D,I,Z),64!=(64&x.flags)&&$d(y,p,I,x),0===function Al(){return Mt.lFrame.elementDepthCount}()&&xi(I,p),function _f(){Mt.lFrame.elementDepthCount++}(),Bs(x)&&(dh(y,p,x),Em(y,x,p)),null!==h&&jy(p,x),wp}function zu(){let a=Qn();aa()?bd():(a=a.parent,ur(a,!1));const l=a;!function vd(){Mt.lFrame.elementDepthCount--}();const u=Xt();return u.firstCreatePass&&(ca(u,a),co(a)&&u.queries.elementEnd(a)),null!=l.classesWithoutHost&&function Ng(a){return 0!=(16&a.flags)}(l)&&rv(u,l,Ne(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function Mf(a){return 0!=(32&a.flags)}(l)&&rv(u,l,Ne(),l.stylesWithoutHost,!1),zu}function vh(a,l,u,h){return wp(a,l,u,h),zu(),vh}function bh(a,l,u){const h=Ne(),p=Xt(),y=a+22,w=p.firstCreatePass?function km(a,l,u,h,p){const y=l.consts,w=bs(y,h),D=hc(l,a,8,"ng-container",w);return null!==w&&gp(D,w,!0),Vu(l,u,D,bs(y,p)),null!==l.queries&&l.queries.elementStart(l,D),D}(y,p,h,l,u):p.data[y];ur(w,!0);const D=h[y]=h[11].createComment("");return $d(p,h,D,w),xi(D,h),Bs(w)&&(dh(p,h,w),Em(p,w,h)),null!=u&&jy(h,w),bh}function xm(){let a=Qn();const l=Xt();return aa()?bd():(a=a.parent,ur(a,!1)),l.firstCreatePass&&(ca(l,a),co(a)&&l.queries.elementEnd(a)),xm}function sv(a,l,u){return bh(a,l,u),xm(),sv}function hE(){return Ne()}function fE(a){return!!a&&"function"==typeof a.then}function pE(a){return!!a&&"function"==typeof a.subscribe}const gE=pE;function mE(a,l,u,h){const p=Ne(),y=Xt(),w=Qn();return RS(y,p,p[11],w,a,l,0,h),mE}function _E(a,l){const u=Qn(),h=Ne(),p=Xt();return RS(p,h,qy(kl(p.data),u,h),u,a,l),_E}function RS(a,l,u,h,p,y,w,D){const I=Bs(h),N=a.firstCreatePass&&is(a),L=l[8],Z=Uu(l);let ne=!0;if(3&h.type||D){const nt=br(h,l),dt=D?D(nt):nt,Ft=Z.length,He=D?st=>D(ri(st[h.index])):h.index;let jt=null;if(!D&&I&&(jt=function $k(a,l,u,h){const p=a.cleanup;if(null!=p)for(let y=0;y<p.length-1;y+=2){const w=p[y];if(w===u&&p[y+1]===h){const D=l[7],I=p[y+2];return D.length>I?D[I]:null}"string"==typeof w&&(y+=2)}return null}(a,l,p,h.index)),null!==jt)(jt.__ngLastListenerFn__||jt).__ngNextListenerFn__=y,jt.__ngLastListenerFn__=y,ne=!1;else{y=wh(h,l,L,y,!1);const st=u.listen(dt,p,y);Z.push(y,st),N&&N.push(p,He,Ft,Ft+1)}}else y=wh(h,l,L,y,!1);const Se=h.outputs;let $e;if(ne&&null!==Se&&($e=Se[p])){const nt=$e.length;if(nt)for(let dt=0;dt<nt;dt+=2){const rn=l[$e[dt]][$e[dt+1]].subscribe(y),fl=Z.length;Z.push(y,rn),N&&N.push(p,h.index,fl,-(fl+1))}}}function ov(a,l,u,h){try{return!1!==u(h)}catch(p){return Im(a,p),!1}}function wh(a,l,u,h,p){return function y(w){if(w===Function)return h;Hu(2&a.flags?si(a.index,l):l);let I=ov(l,0,h,w),x=y.__ngNextListenerFn__;for(;x;)I=ov(l,0,x,w)&&I,x=x.__ngNextListenerFn__;return p&&!1===I&&(w.preventDefault(),w.returnValue=!1),I}}function yE(a=1){return function Df(a){return(Mt.lFrame.contextLView=function xg(a,l){for(;a>0;)l=l[15],a--;return l}(a,Mt.lFrame.contextLView))[8]}(a)}function Wk(a,l){let u=null;const h=function hr(a){const l=a.attrs;if(null!=l){const u=l.indexOf(5);if(0==(1&u))return l[u+1]}return null}(a);for(let p=0;p<l.length;p++){const y=l[p];if("*"!==y){if(null===h?Pe(a,y,!0):vk(h,y))return p}else u=p}return u}function Ni(a){const l=Ne()[16][6];if(!l.projection){const h=l.projection=ha(a?a.length:1,null),p=h.slice();let y=l.child;for(;null!==y;){const w=a?Wk(y,a):0;null!==w&&(p[w]?p[w].projectionNext=y:h[w]=y,p[w]=y),y=y.next}}}function av(a,l=0,u){const h=Ne(),p=Xt(),y=hc(p,22+a,16,null,u||null);null===y.projection&&(y.projection=l),bd(),64!=(64&y.flags)&&function im(a,l,u){Su(l[11],0,l,u,_y(a,u,l),em(u.parent||l[6],u,l))}(p,h,y)}function NS(a,l,u,h,p){const y=a[u+1],w=null===l;let D=h?Qs(y):lc(y),I=!1;for(;0!==D&&(!1===I||w);){const N=a[D+1];PS(a[D],l)&&(I=!0,a[D+1]=h?Ww(N):Gw(N)),D=h?Qs(N):lc(N)}I&&(a[u+1]=h?Gw(y):Ww(y))}function PS(a,l){return null===a||null==l||(Array.isArray(a)?a[1]:a)===l||!(!Array.isArray(a)||"string"!=typeof l)&&Gl(a,l)>=0}const Gi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function SE(a){return a.substring(Gi.key,Gi.keyEnd)}function LS(a,l){const u=Gi.textEnd;return u===l?-1:(l=Gi.keyEnd=function BS(a,l,u){for(;l<u&&a.charCodeAt(l)>32;)l++;return l}(a,Gi.key=l,u),Ma(a,l,u))}function Ma(a,l,u){for(;l<u&&a.charCodeAt(l)<=32;)l++;return l}function cv(a,l,u){return Qo(a,l,u,!1),cv}function Cp(a,l){return Qo(a,l,null,!0),Cp}function to(a,l){for(let u=function FS(a){return function _c(a){Gi.key=0,Gi.keyEnd=0,Gi.value=0,Gi.valueEnd=0,Gi.textEnd=a.length}(a),LS(a,Ma(a,0,Gi.textEnd))}(l);u>=0;u=LS(l,u))es(a,SE(l),!0)}function Qo(a,l,u,h){const p=Ne(),y=Xt(),w=Kr(2);y.firstUpdatePass&&TE(y,a,w,h),l!==Zt&&rs(p,w,l)&&$S(y,y.data[wr()],p,p[11],a,p[w+1]=function Om(a,l){return null==a||("string"==typeof l?a+=l:"object"==typeof a&&(a=Te(rr(a)))),a}(l,u),h,w)}function uv(a,l){return l>=a.expandoStartIndex}function TE(a,l,u,h){const p=a.data;if(null===p[u+1]){const y=p[wr()],w=uv(a,u);Gu(y,h)&&null===l&&!w&&(l=!1),l=function HS(a,l,u,h){const p=kl(a);let y=h?l.residualClasses:l.residualStyles;if(null===p)0===(h?l.classBindings:l.styleBindings)&&(u=vc(u=Dp(null,a,l,u,h),l.attrs,h),y=null);else{const w=l.directiveStylingLast;if(-1===w||a[w]!==p)if(u=Dp(p,a,l,u,h),null===y){let I=function Kk(a,l,u){const h=u?l.classBindings:l.styleBindings;if(0!==lc(h))return a[Qs(h)]}(a,l,h);void 0!==I&&Array.isArray(I)&&(I=Dp(null,a,l,I[1],h),I=vc(I,l.attrs,h),function US(a,l,u,h){a[Qs(u?l.classBindings:l.styleBindings)]=h}(a,l,h,I))}else y=function jS(a,l,u){let h;const p=l.directiveEnd;for(let y=1+l.directiveStylingLast;y<p;y++)h=vc(h,a[y].hostAttrs,u);return vc(h,l.attrs,u)}(a,l,h)}return void 0!==y&&(h?l.residualClasses=y:l.residualStyles=y),u}(p,y,l,h),function Rm(a,l,u,h,p,y){let w=y?l.classBindings:l.styleBindings,D=Qs(w),I=lc(w);a[h]=u;let N,x=!1;if(Array.isArray(u)){const L=u;N=L[1],(null===N||Gl(L,N)>0)&&(x=!0)}else N=u;if(p)if(0!==I){const Z=Qs(a[D+1]);a[h+1]=_m(Z,D),0!==Z&&(a[Z+1]=$w(a[Z+1],h)),a[D+1]=function Ik(a,l){return 131071&a|l<<17}(a[D+1],h)}else a[h+1]=_m(D,0),0!==D&&(a[D+1]=$w(a[D+1],h)),D=h;else a[h+1]=_m(I,0),0===D?D=h:a[I+1]=$w(a[I+1],h),I=h;x&&(a[h+1]=Gw(a[h+1])),NS(a,N,h,!0),NS(a,N,h,!1),function DE(a,l,u,h,p){const y=p?a.residualClasses:a.residualStyles;null!=y&&"string"==typeof l&&Gl(y,l)>=0&&(u[h+1]=Ww(u[h+1]))}(l,N,a,h,y),w=_m(D,I),y?l.classBindings=w:l.styleBindings=w}(p,y,l,u,w,h)}}function Dp(a,l,u,h,p){let y=null;const w=u.directiveEnd;let D=u.directiveStylingLast;for(-1===D?D=u.directiveStart:D++;D<w&&(y=l[D],h=vc(h,y.hostAttrs,p),y!==a);)D++;return null!==a&&(u.directiveStylingLast=D),h}function vc(a,l,u){const h=u?1:2;let p=-1;if(null!==l)for(let y=0;y<l.length;y++){const w=l[y];"number"==typeof w?p=w:p===h&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),es(a,w,!!u||l[++y]))}return void 0===a?null:a}function $S(a,l,u,h,p,y,w,D){if(!(3&l.type))return;const I=a.data,x=I[D+1];dv(function eS(a){return 1==(1&a)}(x)?WS(I,l,u,p,lc(x),w):void 0)||(dv(y)||function zw(a){return 2==(2&a)}(x)&&(y=WS(I,null,u,p,D,w)),function Qf(a,l,u,h,p){if(l)p?a.addClass(u,h):a.removeClass(u,h);else{let y=-1===h.indexOf("-")?void 0:Ws.DashCase;null==p?a.removeStyle(u,h,y):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),y|=Ws.Important),a.setStyle(u,h,p,y))}}(h,w,Zr(wr(),u),p,y))}function WS(a,l,u,h,p,y){const w=null===l;let D;for(;p>0;){const I=a[p],x=Array.isArray(I),N=x?I[1]:I,L=null===N;let Z=u[p+1];Z===Zt&&(Z=L?Rt:void 0);let ne=L?Ff(Z,h):N===h?Z:void 0;if(x&&!dv(ne)&&(ne=Ff(I,h)),dv(ne)&&(D=ne,w))return D;const Se=a[p+1];p=w?Qs(Se):lc(Se)}if(null!==l){let I=y?l.residualClasses:l.residualStyles;null!=I&&(D=Ff(I,h))}return D}function dv(a){return void 0!==a}function Gu(a,l){return 0!=(a.flags&(l?16:32))}function bc(a,l=""){const u=Ne(),h=Xt(),p=a+22,y=h.firstCreatePass?hc(h,p,1,l,null):h.data[p],w=u[p]=function _a(a,l){return a.createText(l)}(u[11],l);$d(h,u,w,y),ur(y,!1)}function hv(a){return fv("",a,""),hv}function fv(a,l,u){const h=Ne(),p=dl(h,a,l,u);return p!==Zt&&function ll(a,l,u){const h=Zr(l,a);!function wu(a,l,u){a.setValue(l,u)}(a[11],h,u)}(h,wr(),p),fv}function Nm(a,l,u){!function Do(a,l,u,h){const p=Xt(),y=Kr(2);p.firstUpdatePass&&TE(p,null,y,h);const w=Ne();if(u!==Zt&&rs(w,y,u)){const D=p.data[wr()];if(Gu(D,h)&&!uv(p,y)){let I=h?D.classesWithoutHost:D.stylesWithoutHost;null!==I&&(u=Ee(I,u||"")),rv(p,D,w,u,h)}else!function GS(a,l,u,h,p,y,w,D){p===Zt&&(p=Rt);let I=0,x=0,N=0<p.length?p[0]:null,L=0<y.length?y[0]:null;for(;null!==N||null!==L;){const Z=I<p.length?p[I+1]:void 0,ne=x<y.length?y[x+1]:void 0;let $e,Se=null;N===L?(I+=2,x+=2,Z!==ne&&(Se=L,$e=ne)):null===L||null!==N&&N<L?(I+=2,Se=N):(x+=2,Se=L,$e=ne),null!==Se&&$S(a,l,u,h,Se,$e,w,D),N=I<p.length?p[I]:null,L=x<y.length?y[x]:null}}(p,D,w,w[11],w[y+1],w[y+1]=function Sh(a,l,u){if(null==u||""===u)return Rt;const h=[],p=rr(u);if(Array.isArray(p))for(let y=0;y<p.length;y++)a(h,p[y],!0);else if("object"==typeof p)for(const y in p)p.hasOwnProperty(y)&&a(h,y,p[y]);else"string"==typeof p&&l(h,p);return h}(a,l,u),h,y)}}(es,to,dl(Ne(),a,l,u),!0)}function LE(a,l,u){const h=Ne();return rs(h,ws(),l)&&Ar(Xt(),Xn(),h,a,l,h[11],u,!0),LE}function Ev(a,l,u){const h=Ne();if(rs(h,ws(),l)){const y=Xt(),w=Xn();Ar(y,w,h,a,l,qy(kl(y.data),w,h),u,!0)}return Ev}const Ah=void 0;var tI=["en",[["a","p"],["AM","PM"],Ah],[["AM","PM"],Ah,Ah],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ah,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ah,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ah,"{1} 'at' {0}",Ah],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Cv(a){const u=Math.floor(Math.abs(a)),h=a.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let Ip={};function VE(a){const l=function nx(a){return a.toLowerCase().replace(/_/g,"-")}(a);let u=Ap(l);if(u)return u;const h=l.split("-")[0];if(u=Ap(h),u)return u;if("en"===h)return tI;throw new Le(701,!1)}function qu(a){return VE(a)[Vt.PluralCase]}function Ap(a){return a in Ip||(Ip[a]=In.ng&&In.ng.common&&In.ng.common.locales&&In.ng.common.locales[a]),Ip[a]}var Vt=(()=>((Vt=Vt||{})[Vt.LocaleId=0]="LocaleId",Vt[Vt.DayPeriodsFormat=1]="DayPeriodsFormat",Vt[Vt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Vt[Vt.DaysFormat=3]="DaysFormat",Vt[Vt.DaysStandalone=4]="DaysStandalone",Vt[Vt.MonthsFormat=5]="MonthsFormat",Vt[Vt.MonthsStandalone=6]="MonthsStandalone",Vt[Vt.Eras=7]="Eras",Vt[Vt.FirstDayOfWeek=8]="FirstDayOfWeek",Vt[Vt.WeekendRange=9]="WeekendRange",Vt[Vt.DateFormat=10]="DateFormat",Vt[Vt.TimeFormat=11]="TimeFormat",Vt[Vt.DateTimeFormat=12]="DateTimeFormat",Vt[Vt.NumberSymbols=13]="NumberSymbols",Vt[Vt.NumberFormats=14]="NumberFormats",Vt[Vt.CurrencyCode=15]="CurrencyCode",Vt[Vt.CurrencySymbol=16]="CurrencySymbol",Vt[Vt.CurrencyName=17]="CurrencyName",Vt[Vt.Currencies=18]="Currencies",Vt[Vt.Directionality=19]="Directionality",Vt[Vt.PluralCase=20]="PluralCase",Vt[Vt.ExtraData=21]="ExtraData",Vt))();const Tp="en-US";let iI=Tp;function Zm(a,l,u,h,p){if(a=J(a),Array.isArray(a))for(let y=0;y<a.length;y++)Zm(a[y],l,u,h,p);else{const y=Xt(),w=Ne();let D=wa(a)?a:J(a.provide),I=Mw(a);const x=Qn(),N=1048575&x.providerIndexes,L=x.directiveStart,Z=x.providerIndexes>>20;if(wa(a)||!a.multi){const ne=new Nl(I,p,up),Se=Km(D,l,p?N:N+Z,L);-1===Se?(Vl(Wn(x,w),y,D),Nv(y,a,l.length),l.push(D),x.directiveStart++,x.directiveEnd++,p&&(x.providerIndexes+=1048576),u.push(ne),w.push(ne)):(u[Se]=ne,w[Se]=ne)}else{const ne=Km(D,l,N+Z,L),Se=Km(D,l,N,N+Z),$e=ne>=0&&u[ne],nt=Se>=0&&u[Se];if(p&&!nt||!p&&!$e){Vl(Wn(x,w),y,D);const dt=function bI(a,l,u,h,p){const y=new Nl(a,u,up);return y.multi=[],y.index=l,y.componentProviders=0,Rh(y,p,h&&!u),y}(p?_x:mx,u.length,p,h,I);!p&&nt&&(u[Se].providerFactory=dt),Nv(y,a,l.length,0),l.push(D),x.directiveStart++,x.directiveEnd++,p&&(x.providerIndexes+=1048576),u.push(dt),w.push(dt)}else Nv(y,a,ne>-1?ne:Se,Rh(u[p?Se:ne],I,!p&&h));!p&&h&&nt&&u[Se].componentProviders++}}}function Nv(a,l,u,h){const p=wa(l),y=function F0(a){return!!a.useClass}(l);if(p||y){const I=(y?J(l.useClass):l).prototype.ngOnDestroy;if(I){const x=a.destroyHooks||(a.destroyHooks=[]);if(!p&&l.multi){const N=x.indexOf(u);-1===N?x.push(u,[h,I]):x[N+1].push(h,I)}else x.push(u,I)}}}function Rh(a,l,u){return u&&a.componentProviders++,a.multi.push(l)-1}function Km(a,l,u,h){for(let p=u;p<h;p++)if(l[p]===a)return p;return-1}function mx(a,l,u,h){return Pv(this.multi,[])}function _x(a,l,u,h){const p=this.multi;let y;if(this.providerFactory){const w=this.providerFactory.componentProviders,D=Hl(u,u[1],this.providerFactory.index,h);y=D.slice(0,w),Pv(p,y);for(let I=w;I<D.length;I++)y.push(D[I])}else y=[],Pv(p,y);return y}function Pv(a,l){for(let u=0;u<a.length;u++)l.push((0,a[u])());return l}function wI(a,l=[]){return u=>{u.providersResolver=(h,p)=>function Ov(a,l,u){const h=Xt();if(h.firstCreatePass){const p=ys(a);Zm(u,h.data,h.blueprint,p,!0),Zm(l,h.data,h.blueprint,p,!1)}}(h,p?p(a):a,l)}}class Ku{}function lC(a,l){return new Fv(a,l??null)}class Fv extends Ku{constructor(l,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new aE(this);const h=function zt(a,l){const u=a[dn]||null;if(!u&&!0===l)throw new Error(`Type ${Te(a)} does not have '\u0275mod' property.`);return u}(l);this._bootstrapComponents=function Zs(a){return a instanceof Function?a():a}(h.bootstrap),this._r3Injector=it(l,u,[{provide:Ku,useValue:this},{provide:Ys,useValue:this.componentFactoryResolver}],Te(l),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(l)}get injector(){return this._r3Injector}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class cC extends class yx{}{constructor(l){super(),this.moduleType=l}create(l){return new Fv(this.moduleType,l)}}function yC(a,l,u,h){return Bv(Ne(),er(),a,l,u,h)}function Xm(a,l){const u=a[l];return u===Zt?void 0:u}function Bv(a,l,u,h,p,y){const w=l+u;return rs(a,w,p)?Js(a,w+1,y?h.call(y,p):h(p)):Xm(a,w+1)}function Hv(a,l,u,h,p,y,w){const D=l+u;return function Rn(a,l,u,h){const p=rs(a,l,u);return rs(a,l+1,h)||p}(a,D,p,y)?Js(a,D+2,w?h.call(w,p,y):h(p,y)):Xm(a,D+2)}function kI(a,l){const u=Xt();let h;const p=a+22;u.firstCreatePass?(h=function vC(a,l){if(l)for(let u=l.length-1;u>=0;u--){const h=l[u];if(a===h.name)return h}}(l,u.pipeRegistry),u.data[p]=h,h.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(p,h.onDestroy)):h=u.data[p];const y=h.factory||(h.factory=uo(h.type)),w=mr(up);try{const D=Ga(!1),I=y();return Ga(D),function iv(a,l,u,h){u>=a.data.length&&(a.data[u]=null,a.blueprint[u]=null),l[u]=h}(u,Ne(),p,I),I}finally{mr(w)}}function zv(a,l,u){const h=a+22,p=Ne(),y=Il(p,h);return Ph(p,h)?Bv(p,er(),l,y.transform,u,y):y.transform(u)}function bC(a,l,u,h){const p=a+22,y=Ne(),w=Il(y,p);return Ph(y,p)?Hv(y,er(),l,w.transform,u,h,w):w.transform(u,h)}function Ph(a,l){return a[1].data[l].pure}function Jm(a){return l=>{setTimeout(a,void 0,l)}}const hl=class Tx extends c.x{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,u,h){let p=l,y=u||(()=>null),w=h;if(l&&"object"==typeof l){const I=l;p=I.next?.bind(I),y=I.error?.bind(I),w=I.complete?.bind(I)}this.__isAsync&&(y=Jm(y),p&&(p=Jm(p)),w&&(w=Jm(w)));const D=super.subscribe({next:p,error:y,complete:w});return l instanceof re.w0&&l.add(D),D}};function EC(){return this._results[Co()]()}class Np{constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Co(),h=Np.prototype;h[u]||(h[u]=EC)}get changes(){return this._changes||(this._changes=new hl)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,u){return this._results.reduce(l,u)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,u){const h=this;h.dirty=!1;const p=Ti(l);(this._changesDetected=!function Rd(a,l,u){if(a.length!==l.length)return!1;for(let h=0;h<a.length;h++){let p=a[h],y=l[h];if(u&&(p=u(p),y=u(y)),y!==p)return!1}return!0}(h._results,p,u))&&(h._results=p,h.length=p.length,h.last=p[this.length-1],h.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Fh=(()=>{class a{}return a.__NG_ELEMENT_ID__=CC,a})();const Pp=Fh,xI=class extends Pp{constructor(l,u,h){super(),this._declarationLView=l,this._declarationTContainer=u,this.elementRef=h}createEmbeddedView(l,u){const h=this._declarationTContainer.tViews,p=fp(this._declarationLView,h,l,16,null,h.declTNode,null,null,null,null,u||null);p[17]=this._declarationLView[this._declarationTContainer.index];const w=this._declarationLView[19];return null!==w&&(p[19]=w.createEmbeddedView(h)),uh(h,p,l),new mp(p)}};function CC(){return Gv(Qn(),Ne())}function Gv(a,l){return 4&a.type?new xI(l,a,Ou(a,l)):null}let Fp=(()=>{class a{}return a.__NG_ELEMENT_ID__=Cc,a})();function Cc(){return OI(Qn(),Ne())}const DC=Fp,RI=class extends DC{constructor(l,u,h){super(),this._lContainer=l,this._hostTNode=u,this._hostLView=h}get element(){return Ou(this._hostTNode,this._hostLView)}get injector(){return new Cs(this._hostTNode,this._hostLView)}get parentInjector(){const l=$a(this._hostTNode,this._hostLView);if(Pg(l)){const u=zs(l,this._hostLView),h=su(l);return new Cs(u[1].data[h+8],u)}return new Cs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const u=$v(this._lContainer);return null!==u&&u[l]||null}get length(){return this._lContainer.length-10}createEmbeddedView(l,u,h){let p,y;"number"==typeof h?p=h:null!=h&&(p=h.index,y=h.injector);const w=l.createEmbeddedView(u||{},y);return this.insert(w,p),w}createComponent(l,u,h,p,y){const w=l&&!function Pr(a){return"function"==typeof a}(l);let D;if(w)D=u;else{const L=u||{};D=L.index,h=L.injector,p=L.projectableNodes,y=L.environmentInjector||L.ngModuleRef}const I=w?l:new _p(he(l)),x=h||this.parentInjector;if(!y&&null==I.ngModule){const Z=(w?x:this.parentInjector).get(nh,null);Z&&(y=Z)}const N=I.create(x,p,void 0,y);return this.insert(N.hostView,D),N}insert(l,u){const h=l._lView,p=h[1];if(function gf(a){return vr(a[3])}(h)){const N=this.indexOf(l);if(-1!==N)this.detach(N);else{const L=h[3],Z=new RI(L,L[6],L[3]);Z.detach(Z.indexOf(l))}}const y=this._adjustIndex(u),w=this._lContainer;!function qf(a,l,u,h){const p=10+h,y=u.length;h>0&&(u[p-1][4]=l),h<y-10?(l[4]=u[p],Hg(u,10+h,l)):(u.push(l),l[4]=null),l[3]=u;const w=l[17];null!==w&&u!==w&&function mw(a,l){const u=a[9];l[16]!==l[3][3][16]&&(a[2]=!0),null===u?a[9]=[l]:u.push(l)}(w,l);const D=l[19];null!==D&&D.insertView(a),l[2]|=64}(p,h,w,y);const D=Wd(y,w),I=h[11],x=jd(I,w[7]);return null!==x&&function Eu(a,l,u,h,p,y){h[0]=p,h[6]=l,nc(a,h,u,1,p,y)}(p,w[6],I,h,x,D),l.attachToViewContainerRef(),Hg(SC(w),y,l),l}move(l,u){return this.insert(l,u)}indexOf(l){const u=$v(this._lContainer);return null!==u?u.indexOf(l):-1}remove(l){const u=this._adjustIndex(l,-1),h=Yf(this._lContainer,u);h&&(Jr(SC(this._lContainer),u),Xg(h[1],h))}detach(l){const u=this._adjustIndex(l,-1),h=Yf(this._lContainer,u);return h&&null!=Jr(SC(this._lContainer),u)?new mp(h):null}_adjustIndex(l,u=0){return l??this.length+u}};function $v(a){return a[8]}function SC(a){return a[8]||(a[8]=[])}function OI(a,l){let u;const h=l[a.index];if(vr(h))u=h;else{let p;if(8&a.type)p=ri(h);else{const y=l[11];p=y.createComment("");const w=br(a,l);ya(y,jd(y,w),p,function zd(a,l){return a.nextSibling(l)}(y,w),!1)}l[a.index]=u=Bu(h,l,p,a),Dm(l,u)}return new RI(u,a,l)}class AC{constructor(l){this.queryList=l,this.matches=null}clone(){return new AC(this.queryList)}setDirty(){this.queryList.setDirty()}}class e_{constructor(l=[]){this.queries=l}createEmbeddedView(l){const u=l.queries;if(null!==u){const h=null!==l.contentQueries?l.contentQueries[0]:u.length,p=[];for(let y=0;y<h;y++){const w=u.getByIndex(y);p.push(this.queries[w.indexInDeclarationView].clone())}return new e_(p)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let u=0;u<this.queries.length;u++)null!==Lh(l,u).matches&&this.queries[u].setDirty()}}class PI{constructor(l,u,h=null){this.predicate=l,this.flags=u,this.read=h}}class t_{constructor(l=[]){this.queries=l}elementStart(l,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(l,u)}elementEnd(l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(l)}embeddedTView(l){let u=null;for(let h=0;h<this.length;h++){const p=null!==u?u.length:0,y=this.getByIndex(h).embeddedTView(l,p);y&&(y.indexInDeclarationView=h,null!==u?u.push(y):u=[y])}return null!==u?new t_(u):null}template(l,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(l,u)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class Wv{constructor(l,u=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(l,u){this.isApplyingToNode(u)&&this.matchTNode(l,u)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,u){this.elementStart(l,u)}embeddedTView(l,u){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,u),new Wv(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=l.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(l,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let p=0;p<h.length;p++){const y=h[p];this.matchTNodeWithReadOption(l,u,TC(u,y)),this.matchTNodeWithReadOption(l,u,$s(u,l,y,!1,!1))}else h===Fh?4&u.type&&this.matchTNodeWithReadOption(l,u,-1):this.matchTNodeWithReadOption(l,u,$s(u,l,h,!1,!1))}matchTNodeWithReadOption(l,u,h){if(null!==h){const p=this.metadata.read;if(null!==p)if(p===il||p===Fp||p===Fh&&4&u.type)this.addMatch(u.index,-2);else{const y=$s(u,l,p,!1,!1);null!==y&&this.addMatch(u.index,y)}else this.addMatch(u.index,h)}}addMatch(l,u){null===this.matches?this.matches=[l,u]:this.matches.push(l,u)}}function TC(a,l){const u=a.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===l)return u[h+1];return null}function kx(a,l,u,h){return-1===u?function FI(a,l){return 11&a.type?Ou(a,l):4&a.type?Gv(a,l):null}(l,a):-2===u?function xx(a,l,u){return u===il?Ou(l,a):u===Fh?Gv(l,a):u===Fp?OI(l,a):void 0}(a,l,h):Hl(a,a[1],u,l)}function qv(a,l,u,h){const p=l[19].queries[h];if(null===p.matches){const y=a.data,w=u.matches,D=[];for(let I=0;I<w.length;I+=2){const x=w[I];D.push(x<0?null:kx(l,y[x],w[I+1],u.metadata.read))}p.matches=D}return p.matches}function MC(a,l,u,h){const p=a.queries.getByIndex(u),y=p.matches;if(null!==y){const w=qv(a,l,p,u);for(let D=0;D<y.length;D+=2){const I=y[D];if(I>0)h.push(w[D/2]);else{const x=y[D+1],N=l[-I];for(let L=10;L<N.length;L++){const Z=N[L];Z[17]===Z[3]&&MC(Z[1],Z,x,h)}if(null!==N[9]){const L=N[9];for(let Z=0;Z<L.length;Z++){const ne=L[Z];MC(ne[1],ne,x,h)}}}}}return h}function Yv(a){const l=Ne(),u=Xt(),h=Xc();Es(h+1);const p=Lh(u,h);if(a.dirty&&function ey(a){return 4==(4&a[2])}(l)===(2==(2&p.metadata.flags))){if(null===p.matches)a.reset([]);else{const y=p.crossesNgTemplate?MC(u,l,h,[]):qv(u,l,p,h);a.reset(y,Rw),a.notifyOnChanges()}return!0}return!1}function Zv(a,l,u){const h=Xt();h.firstCreatePass&&(Qv(h,new PI(a,l,u),-1),2==(2&l)&&(h.staticViewQueries=!0)),VI(h,Ne(),l)}function Kv(a,l,u,h){const p=Xt();if(p.firstCreatePass){const y=Qn();Qv(p,new PI(l,u,h),y.index),function BI(a,l){const u=a.contentQueries||(a.contentQueries=[]);l!==(u.length?u[u.length-1]:-1)&&u.push(a.queries.length-1,l)}(p,a),2==(2&u)&&(p.staticContentQueries=!0)}VI(p,Ne(),u)}function LI(){return function n_(a,l){return a[19].queries[l].queryList}(Ne(),Xc())}function VI(a,l,u){const h=new Np(4==(4&u));Jw(a,l,h,h.destroy),null===l[19]&&(l[19]=new e_),l[19].queries.push(new AC(h))}function Qv(a,l,u){null===a.queries&&(a.queries=new t_),a.queries.track(new Wv(l,u))}function Lh(a,l){return a.queries.getByIndex(l)}function sb(...a){}const jC=new bn("Application Initializer");let ob=(()=>{class a{constructor(u){this.appInits=u,this.resolve=sb,this.reject=sb,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,p)=>{this.resolve=h,this.reject=p})}runInitializers(){if(this.initialized)return;const u=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const y=this.appInits[p]();if(fE(y))u.push(y);else if(gE(y)){const w=new Promise((D,I)=>{y.subscribe({complete:D,error:I})});u.push(w)}}Promise.all(u).then(()=>{h()}).catch(p=>{this.reject(p)}),0===u.length&&h(),this.initialized=!0}}return a.\u0275fac=function(u){return new(u||a)(qn(jC,8))},a.\u0275prov=be({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const eA=new bn("AppId",{providedIn:"root",factory:function tA(){return`${nA()}${nA()}${nA()}`}});function nA(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const iA=new bn("Platform Initializer"),Vx=new bn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),rA=new bn("appBootstrapListener"),Bx=new bn("AnimationModuleType"),zC=new bn("LocaleId",{providedIn:"root",factory:()=>hu(zC,gt.Optional|gt.SkipSelf)||function Ic(){return typeof $localize<"u"&&$localize.locale||Tp}()}),Bh=new bn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"}),jx=(()=>Promise.resolve(0))();function $C(a){typeof Zone>"u"?jx.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class no{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new hl(!1),this.onMicrotaskEmpty=new hl(!1),this.onStable=new hl(!1),this.onError=new hl(!1),typeof Zone>"u")throw new Le(908,!1);Zone.assertZonePatched();const p=this;if(p._nesting=0,p._outer=p._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const y=Zone.AsyncStackTaggingZoneSpec;p._inner=p._inner.fork(new y("Angular"))}Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!h&&u,p.shouldCoalesceRunChangeDetection=h,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function zx(){let a=In.requestAnimationFrame,l=In.cancelAnimationFrame;if(typeof Zone<"u"&&a&&l){const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u);const h=l[Zone.__symbol__("OriginalDelegate")];h&&(l=h)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function oA(a){const l=()=>{!function Uh(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(In,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,ub(a),a.isCheckStableRunning=!0,cb(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),ub(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,p,y,w,D)=>{try{return db(a),u.invokeTask(p,y,w,D)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===y.type||a.shouldCoalesceRunChangeDetection)&&l(),Hp(a)}},onInvoke:(u,h,p,y,w,D,I)=>{try{return db(a),u.invoke(p,y,w,D,I)}finally{a.shouldCoalesceRunChangeDetection&&l(),Hp(a)}},onHasTask:(u,h,p,y)=>{u.hasTask(p,y),h===p&&("microTask"==y.change?(a._hasPendingMicrotasks=y.microTask,ub(a),cb(a)):"macroTask"==y.change&&(a.hasPendingMacrotasks=y.macroTask))},onHandleError:(u,h,p,y)=>(u.handleError(p,y),a.runOutsideAngular(()=>a.onError.emit(y)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!no.isInAngularZone())throw new Le(909,!1)}static assertNotInAngularZone(){if(no.isInAngularZone())throw new Le(909,!1)}run(l,u,h){return this._inner.run(l,u,h)}runTask(l,u,h,p){const y=this._inner,w=y.scheduleEventTask("NgZoneEvent: "+p,l,WC,sb,sb);try{return y.runTask(w,u,h)}finally{y.cancelTask(w)}}runGuarded(l,u,h){return this._inner.runGuarded(l,u,h)}runOutsideAngular(l){return this._outer.run(l)}}const WC={};function cb(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function ub(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function db(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function Hp(a){a._nesting--,cb(a)}class Gx{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new hl,this.onMicrotaskEmpty=new hl,this.onStable=new hl,this.onError=new hl}run(l,u,h){return l.apply(u,h)}runGuarded(l,u,h){return l.apply(u,h)}runOutsideAngular(l){return l()}runTask(l,u,h,p){return l.apply(u,h)}}const l_=new bn(""),c_=new bn("");let jp,aA=(()=>{class a{constructor(u,h,p){this._ngZone=u,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,jp||(function $x(a){jp=a}(p),p.addToWindow(h)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{no.assertNotInAngularZone(),$C(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())$C(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,p){let y=-1;h&&h>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==y),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:y,updateCb:p})}whenStable(u,h,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,h,p){return[]}}return a.\u0275fac=function(u){return new(u||a)(qn(no),qn(Up),qn(c_))},a.\u0275prov=be({token:a,factory:a.\u0275fac}),a})(),Up=(()=>{class a{constructor(){this._applications=new Map}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return jp?.findTestabilityInTree(this,u,h)??null}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=be({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})(),Ac=null;const hb=new bn("AllowMultipleToken"),jh=new bn("PlatformDestroyListeners");function cA(a,l,u=[]){const h=`Platform: ${l}`,p=new bn(h);return(y=[])=>{let w=ZC();if(!w||w.injector.get(hb,!1)){const D=[...u,...y,{provide:p,useValue:!0}];a?a(D):function PF(a){if(Ac&&!Ac.get(hb,!1))throw new Le(400,!1);Ac=a;const l=a.get(h_);(function lA(a){const l=a.get(iA,null);l&&l.forEach(u=>u())})(a)}(function d_(a=[],l){return sl.create({name:l,providers:[{provide:Ay,useValue:"platform"},{provide:jh,useValue:new Set([()=>Ac=null])},...a]})}(D,h))}return function Wx(a){const l=ZC();if(!l)throw new Le(401,!1);return l}()}}function ZC(){return Ac?.get(h_)??null}let h_=(()=>{class a{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const p=function dA(a,l){let u;return u="noop"===a?new Gx:("zone.js"===a?void 0:a)||new no(l),u}(h?.ngZone,function uA(a){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!a||!a.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!a||!a.ngZoneRunCoalescing)||!1}}(h)),y=[{provide:no,useValue:p}];return p.run(()=>{const w=sl.create({providers:y,parent:this.injector,name:u.moduleType.name}),D=u.create(w),I=D.injector.get(fm,null);if(!I)throw new Le(402,!1);return p.runOutsideAngular(()=>{const x=p.onError.subscribe({next:N=>{I.handleError(N)}});D.onDestroy(()=>{p_(this._modules,D),x.unsubscribe()})}),function KC(a,l,u){try{const h=u();return fE(h)?h.catch(p=>{throw l.runOutsideAngular(()=>a.handleError(p)),p}):h}catch(h){throw l.runOutsideAngular(()=>a.handleError(h)),h}}(I,p,()=>{const x=D.injector.get(ob);return x.runInitializers(),x.donePromise.then(()=>(function Sv(a){le(a,"Expected localeId to be defined"),"string"==typeof a&&(iI=a.toLowerCase().replace(/_/g,"-"))}(D.injector.get(zC,Tp)||Tp),this._moduleDoBootstrap(D),D))})})}bootstrapModule(u,h=[]){const p=QC({},h);return function u_(a,l,u){const h=new cC(u);return Promise.resolve(h)}(0,0,u).then(y=>this.bootstrapModuleFactory(y,p))}_moduleDoBootstrap(u){const h=u.injector.get(f_);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(p=>h.bootstrap(p));else{if(!u.instance.ngDoBootstrap)throw new Le(403,!1);u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Le(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const u=this._injector.get(jh,null);u&&(u.forEach(h=>h()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(u){return new(u||a)(qn(sl))},a.\u0275prov=be({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();function QC(a,l){return Array.isArray(l)?l.reduce(QC,a):{...a,...l}}let f_=(()=>{class a{constructor(u,h,p){this._zone=u,this._injector=h,this._exceptionHandler=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new V.y(D=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{D.next(this._stable),D.complete()})}),w=new V.y(D=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{no.assertNotInAngularZone(),$C(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,D.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{no.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{D.next(!1)}))});return()=>{I.unsubscribe(),x.unsubscribe()}});this.isStable=(0,pe.T)(y,w.pipe((0,de.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,h){const p=u instanceof Yo;if(!this._injector.get(ob).done)throw!p&&function Pt(a){const l=he(a)||ee(a)||Je(a);return null!==l&&l.standalone}(u),new Le(405,false);let w;w=p?u:this._injector.get(Ys).resolveComponentFactory(u),this.componentTypes.push(w.componentType);const D=function zp(a){return a.isBoundToModule}(w)?void 0:this._injector.get(Ku),x=w.create(sl.NULL,[],h||w.selector,D),N=x.location.nativeElement,L=x.injector.get(l_,null);return L?.registerApplication(N),x.onDestroy(()=>{this.detachView(x.hostView),p_(this.components,x),L?.unregisterApplication(N)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new Le(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;p_(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(rA,[]).concat(this._bootstrapListeners).forEach(p=>p(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>p_(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Le(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return a.\u0275fac=function(u){return new(u||a)(qn(no),qn(nh),qn(fm))},a.\u0275prov=be({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function p_(a,l){const u=a.indexOf(l);u>-1&&a.splice(u,1)}let fb=!0,g_=!1;function qx(){return g_=!0,fb}function LF(){if(g_)throw new Error("Cannot enable prod mode after platform setup.");fb=!1}let BF=(()=>{class a{}return a.__NG_ELEMENT_ID__=zh,a})();function zh(a){return function Tc(a,l,u){if(sa(a)&&!u){const h=si(a.index,l);return new mp(h,h)}return 47&a.type?new mp(l[16],l):null}(Qn(),Ne(),16==(16&a))}class gA{constructor(){}supports(l){return Ia(l)}create(l){return new eR(l)}}const Jx=(a,l)=>l;class eR{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||Jx}forEachItem(l){let u;for(u=this._itHead;null!==u;u=u._next)l(u)}forEachOperation(l){let u=this._itHead,h=this._removalsHead,p=0,y=null;for(;u||h;){const w=!h||u&&u.currentIndex<nR(h,p,y)?u:h,D=nR(w,p,y),I=w.currentIndex;if(w===h)p--,h=h._nextRemoved;else if(u=u._next,null==w.previousIndex)p++;else{y||(y=[]);const x=D-p,N=I-p;if(x!=N){for(let Z=0;Z<x;Z++){const ne=Z<y.length?y[Z]:y[Z]=0,Se=ne+Z;N<=Se&&Se<x&&(y[Z]=ne+1)}y[w.previousIndex]=N-x}}D!==I&&l(w,D,I)}}forEachPreviousItem(l){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachMovedItem(l){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}forEachIdentityChange(l){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)l(u)}diff(l){if(null==l&&(l=[]),!Ia(l))throw new Le(900,!1);return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let p,y,w,u=this._itHead,h=!1;if(Array.isArray(l)){this.length=l.length;for(let D=0;D<this.length;D++)y=l[D],w=this._trackByFn(D,y),null!==u&&Object.is(u.trackById,w)?(h&&(u=this._verifyReinsertion(u,y,w,D)),Object.is(u.item,y)||this._addIdentityChange(u,y)):(u=this._mismatch(u,y,w,D),h=!0),u=u._next}else p=0,function yp(a,l){if(Array.isArray(a))for(let u=0;u<a.length;u++)l(a[u]);else{const u=a[Co()]();let h;for(;!(h=u.next()).done;)l(h.value)}}(l,D=>{w=this._trackByFn(p,D),null!==u&&Object.is(u.trackById,w)?(h&&(u=this._verifyReinsertion(u,D,w,p)),Object.is(u.item,D)||this._addIdentityChange(u,D)):(u=this._mismatch(u,D,w,p),h=!0),u=u._next,p++}),this.length=p;return this._truncate(u),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,u,h,p){let y;return null===l?y=this._itTail:(y=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._reinsertAfter(l,y,p)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(h,p))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._moveAfter(l,y,p)):l=this._addAfter(new GF(u,h),y,p),l}_verifyReinsertion(l,u,h,p){let y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==y?l=this._reinsertAfter(y,l._prev,p):l.currentIndex!=p&&(l.currentIndex=p,this._addToMoves(l,p)),l}_truncate(l){for(;null!==l;){const u=l._next;this._addToRemovals(this._unlink(l)),l=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const p=l._prevRemoved,y=l._nextRemoved;return null===p?this._removalsHead=y:p._nextRemoved=y,null===y?this._removalsTail=p:y._prevRemoved=p,this._insertAfter(l,u,h),this._addToMoves(l,h),l}_moveAfter(l,u,h){return this._unlink(l),this._insertAfter(l,u,h),this._addToMoves(l,h),l}_addAfter(l,u,h){return this._insertAfter(l,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,u,h){const p=null===u?this._itHead:u._next;return l._next=p,l._prev=u,null===p?this._itTail=l:p._prev=l,null===u?this._itHead=l:u._next=l,null===this._linkedRecords&&(this._linkedRecords=new tR),this._linkedRecords.put(l),l.currentIndex=h,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const u=l._prev,h=l._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,l}_addToMoves(l,u){return l.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new tR),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,u){return l.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class GF{constructor(l,u){this.item=l,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class $F{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,l))return h;return null}remove(l){const u=l._prevDup,h=l._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class tR{constructor(){this.map=new Map}put(l){const u=l.trackById;let h=this.map.get(u);h||(h=new $F,this.map.set(u,h)),h.add(l)}get(l,u){const p=this.map.get(l);return p?p.get(l,u):null}remove(l){const u=l.trackById;return this.map.get(u).remove(l)&&this.map.delete(u),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function nR(a,l,u){const h=a.previousIndex;if(null===h)return h;let p=0;return u&&h<u.length&&(p=u[h]),h+l+p}class mA{constructor(){}supports(l){return l instanceof Map||Ky(l)}create(){return new iR}}class iR{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let u;for(u=this._mapHead;null!==u;u=u._next)l(u)}forEachPreviousItem(l){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)l(u)}forEachChangedItem(l){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}diff(l){if(l){if(!(l instanceof Map||Ky(l)))throw new Le(900,!1)}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(l,(h,p)=>{if(u&&u.key===p)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const y=this._getOrCreateRecordForKey(p,h);u=this._insertBeforeOrAppend(u,y)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,u){if(l){const h=l._prev;return u._next=l,u._prev=h,l._prev=u,h&&(h._next=u),l===this._mapHead&&(this._mapHead=u),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(l,u){if(this._records.has(l)){const p=this._records.get(l);this._maybeAddToChanges(p,u);const y=p._prev,w=p._next;return y&&(y._next=w),w&&(w._prev=y),p._next=null,p._prev=null,p}const h=new rR(l);return this._records.set(l,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,u){Object.is(u,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=u,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,u){l instanceof Map?l.forEach(u):Object.keys(l).forEach(h=>u(l[h],h))}}class rR{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function sR(){return new nD([new gA])}let nD=(()=>{class a{constructor(u){this.factories=u}static create(u,h){if(null!=h){const p=h.factories.slice();u=u.concat(p)}return new a(u)}static extend(u){return{provide:a,useFactory:h=>a.create(u,h||sR()),deps:[[a,new bi,new Ho]]}}find(u){const h=this.factories.find(p=>p.supports(u));if(null!=h)return h;throw new Le(901,!1)}}return a.\u0275prov=be({token:a,providedIn:"root",factory:sR}),a})();function kc(){return new iD([new mA])}let iD=(()=>{class a{constructor(u){this.factories=u}static create(u,h){if(h){const p=h.factories.slice();u=u.concat(p)}return new a(u)}static extend(u){return{provide:a,useFactory:h=>a.create(u,h||kc()),deps:[[a,new bi,new Ho]]}}find(u){const h=this.factories.find(p=>p.supports(u));if(h)return h;throw new Le(901,!1)}}return a.\u0275prov=be({token:a,providedIn:"root",factory:kc}),a})();const cR=cA(null,"core",[]);let uR=(()=>{class a{constructor(u){}}return a.\u0275fac=function(u){return new(u||a)(qn(f_))},a.\u0275mod=Rr({type:a}),a.\u0275inj=Lt({}),a})();function YF(a){return"boolean"==typeof a?a:null!=a&&"false"!==a}},8140:(Et,Fe,B)=>{B.d(Fe,{C6:()=>c.getApps,Mq:()=>c.getApp});var c=B(2951)},1274:(Et,Fe,B)=>{B.d(Fe,{Z:()=>c.Z});var c=B(3942)},4538:(Et,Fe,B)=>{B.r(Fe);var c=B(5861),re=B(3942),V=B(2090),pe=B(2951),de=B(7582),ye=B(1877),ce=B(4859);const Le=function et(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Ke=function Re(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},we=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ht=new ye.Yd("@firebase/auth");function Ve(b,...g){ht.logLevel<=ye.in.ERROR&&ht.error(`Auth (${pe.SDK_VERSION}): ${b}`,...g)}function Ie(b,...g){throw ot(b,...g)}function Ce(b,...g){return ot(b,...g)}function Qe(b,g,_){const E=Object.assign(Object.assign({},Ke()),{[g]:_});return new V.LL("auth","Firebase",E).create(g,{appName:b.name})}function qe(b,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&Ie(b,"argument-error"),Qe(b,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ot(b,...g){if("string"!=typeof b){const _=g[0],E=[...g.slice(1)];return E[0]&&(E[0].appName=b.name),b._errorFactory.create(_,...E)}return we.create(b,...g)}function se(b,g,..._){if(!b)throw ot(g,..._)}function Nt(b){const g="INTERNAL ASSERTION FAILED: "+b;throw Ve(g),new Error(g)}function pt(b,g){b||Nt(g)}function Kt(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function ft(){return"http:"===lo()||"https:"===lo()}function lo(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class Ps{constructor(g,_){this.shortDelay=g,this.longDelay=_,pt(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function xr(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ft()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function le(b,g){pt(b.emulator,"Emulator should always be set here");const{url:_}=b.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class ie{static initialize(g,_,E){this.fetchImpl=g,_&&(this.headersImpl=_),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Nt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Nt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Nt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ke={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Me=new Ps(3e4,6e4);function xe(b,g){return b.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:b.tenantId}):g}function be(b,g,_,E){return vt.apply(this,arguments)}function vt(){return(vt=(0,c.Z)(function*(b,g,_,E,k={}){return Lt(b,k,(0,c.Z)(function*(){let O={},G={};E&&("GET"===g?G=E:O={body:JSON.stringify(E)});const X=(0,V.xO)(Object.assign({key:b.config.apiKey},G)).slice(1),Be=yield b._getAdditionalHeaders();return Be["Content-Type"]="application/json",b.languageCode&&(Be["X-Firebase-Locale"]=b.languageCode),ie.fetch()(zn(b,b.config.apiHost,_,X),Object.assign({method:g,headers:Be,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function Lt(b,g,_){return un.apply(this,arguments)}function un(){return(un=(0,c.Z)(function*(b,g,_){b._canInitEmulator=!1;const E=Object.assign(Object.assign({},ke),g);try{const k=new ps(b),O=yield Promise.race([_(),k.promise]);k.clearNetworkTimeout();const G=yield O.json();if("needConfirmation"in G)throw tn(b,"account-exists-with-different-credential",G);if(O.ok&&!("errorMessage"in G))return G;{const X=O.ok?G.errorMessage:G.error.message,[Be,Ye]=X.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Be)throw tn(b,"credential-already-in-use",G);if("EMAIL_EXISTS"===Be)throw tn(b,"email-already-in-use",G);if("USER_DISABLED"===Be)throw tn(b,"user-disabled",G);const at=E[Be]||Be.toLowerCase().replace(/[_\s]+/g,"-");if(Ye)throw Qe(b,at,Ye);Ie(b,at)}}catch(k){if(k instanceof V.ZR)throw k;Ie(b,"network-request-failed",{message:String(k)})}})).apply(this,arguments)}function At(b,g,_,E){return sn.apply(this,arguments)}function sn(){return(sn=(0,c.Z)(function*(b,g,_,E,k={}){const O=yield be(b,g,_,E,k);return"mfaPendingCredential"in O&&Ie(b,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function zn(b,g,_,E){const k=`${g}${_}?${E}`;return b.config.emulator?le(b.config,k):`${b.config.apiScheme}://${k}`}class ps{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,E)=>{this.timer=setTimeout(()=>E(Ce(this.auth,"network-request-failed")),Me.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function tn(b,g,_){const E={appName:b.name};_.email&&(E.email=_.email),_.phoneNumber&&(E.phoneNumber=_.phoneNumber);const k=Ce(b,g,E);return k.customData._tokenResponse=_,k}function Gn(){return(Gn=(0,c.Z)(function*(b,g){return be(b,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Zi(b,g){return pr.apply(this,arguments)}function pr(){return(pr=(0,c.Z)(function*(b,g){return be(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function gt(b,g){return gr.apply(this,arguments)}function gr(){return(gr=(0,c.Z)(function*(b,g){return be(b,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function gs(b){if(b)try{const g=new Date(Number(b));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function Wr(){return(Wr=(0,c.Z)(function*(b,g=!1){const _=(0,V.m9)(b),E=yield _.getIdToken(g),k=Pn(E);se(k&&k.exp&&k.auth_time&&k.iat,_.auth,"internal-error");const O="object"==typeof k.firebase?k.firebase:void 0,G=O?.sign_in_provider;return{claims:k,token:E,authTime:gs(Si(k.auth_time)),issuedAtTime:gs(Si(k.iat)),expirationTime:gs(Si(k.exp)),signInProvider:G||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function Si(b){return 1e3*Number(b)}function Pn(b){const[g,_,E]=b.split(".");if(void 0===g||void 0===_||void 0===E)return Ve("JWT malformed, contained fewer than 3 sections"),null;try{const k=(0,V.tV)(_);return k?JSON.parse(k):(Ve("Failed to decode base64 JWT payload"),null)}catch(k){return Ve("Caught error parsing JWT payload as JSON",k?.toString()),null}}function lt(b,g){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,c.Z)(function*(b,g,_=!1){if(_)return g;try{return yield g}catch(E){throw E instanceof V.ZR&&In(E)&&b.auth.currentUser===b&&(yield b.auth.signOut()),E}})).apply(this,arguments)}function In({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class Fs{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const k=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,k)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const E=this.getInterval(g);this.timerId=setTimeout((0,c.Z)(function*(){yield _.iteration()}),E)}iteration(){var g=this;return(0,c.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&g.schedule(!0))}g.schedule()})()}}class _r{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=gs(this.lastLoginAt),this.creationTime=gs(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ui(b){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,c.Z)(function*(b){var g;const _=b.auth,E=yield b.getIdToken(),k=yield lt(b,gt(_,{idToken:E}));se(k?.users.length,_,"internal-error");const O=k.users[0];b._notifyReloadListener(O);const G=null!==(g=O.providerUserInfo)&&void 0!==g&&g.length?dn(O.providerUserInfo):[],X=ia(b.providerData,G),at=!!b.isAnonymous&&!(b.email&&O.passwordHash||X?.length),ct={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:X,metadata:new _r(O.createdAt,O.lastLoginAt),isAnonymous:at};Object.assign(b,ct)})).apply(this,arguments)}function En(){return(En=(0,c.Z)(function*(b){const g=(0,V.m9)(b);yield ui(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function ia(b,g){return[...b.filter(E=>!g.some(k=>k.providerId===E.providerId)),...g]}function dn(b){return b.map(g=>{var{providerId:_}=g,E=(0,de._T)(g,["providerId"]);return{providerId:_,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Ki(){return(Ki=(0,c.Z)(function*(b,g){const _=yield Lt(b,{},(0,c.Z)(function*(){const E=(0,V.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:k,apiKey:O}=b.config,G=zn(b,k,"/v1/token",`key=${O}`),X=yield b._getAdditionalHeaders();return X["Content-Type"]="application/x-www-form-urlencoded",ie.fetch()(G,{method:"POST",headers:X,body:E})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class ms{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){se(g.idToken,"internal-error"),se(typeof g.idToken<"u","internal-error"),se(typeof g.refreshToken<"u","internal-error");const _="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function gn(b){const g=Pn(b);return se(g,"internal-error"),se(typeof g.exp<"u","internal-error"),se(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var E=this;return(0,c.Z)(function*(){return se(!E.accessToken||E.refreshToken,g,"user-token-expired"),_||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(g,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var E=this;return(0,c.Z)(function*(){const{accessToken:k,refreshToken:O,expiresIn:G}=yield function Ii(b,g){return Ki.apply(this,arguments)}(g,_);E.updateTokensAndExpiration(k,O,Number(G))})()}updateTokensAndExpiration(g,_,E){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(g,_){const{refreshToken:E,accessToken:k,expirationTime:O}=_,G=new ms;return E&&(se("string"==typeof E,"internal-error",{appName:g}),G.refreshToken=E),k&&(se("string"==typeof k,"internal-error",{appName:g}),G.accessToken=k),O&&(se("number"==typeof O,"internal-error",{appName:g}),G.expirationTime=O),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new ms,this.toJSON())}_performRefresh(){return Nt("not implemented")}}function Kn(b,g){se("string"==typeof b||typeof b>"u","internal-error",{appName:g})}class Qi{constructor(g){var{uid:_,auth:E,stsTokenManager:k}=g,O=(0,de._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Fs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=E,this.stsTokenManager=k,this.accessToken=k.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new _r(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,c.Z)(function*(){const E=yield lt(_,_.stsTokenManager.getToken(_.auth,g));return se(E,_.auth,"internal-error"),_.accessToken!==E&&(_.accessToken=E,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),E})()}getIdTokenResult(g){return function Ba(b){return Wr.apply(this,arguments)}(this,g)}reload(){return function Bi(b){return En.apply(this,arguments)}(this)}_assign(g){this!==g&&(se(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const _=new Qi(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(g){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var E=this;return(0,c.Z)(function*(){let k=!1;g.idToken&&g.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(g),k=!0),_&&(yield ui(E)),yield E.auth._persistUserIfCurrent(E),k&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var g=this;return(0,c.Z)(function*(){const _=yield g.getIdToken();return yield lt(g,function Nn(b,g){return Gn.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var E,k,O,G,X,Be,Ye,at;const ct=null!==(E=_.displayName)&&void 0!==E?E:void 0,Un=null!==(k=_.email)&&void 0!==k?k:void 0,Hr=null!==(O=_.phoneNumber)&&void 0!==O?O:void 0,Xd=null!==(G=_.photoURL)&&void 0!==G?G:void 0,Cy=null!==(X=_.tenantId)&&void 0!==X?X:void 0,Jd=null!==(Be=_._redirectEventId)&&void 0!==Be?Be:void 0,Dy=null!==(Ye=_.createdAt)&&void 0!==Ye?Ye:void 0,Sy=null!==(at=_.lastLoginAt)&&void 0!==at?at:void 0,{uid:cm,emailVerified:Iy,isAnonymous:ku,providerData:qo,stsTokenManager:xu}=_;se(cm&&xu,g,"internal-error");const eh=ms.fromJSON(this.name,xu);se("string"==typeof cm,g,"internal-error"),Kn(ct,g.name),Kn(Un,g.name),se("boolean"==typeof Iy,g,"internal-error"),se("boolean"==typeof ku,g,"internal-error"),Kn(Hr,g.name),Kn(Xd,g.name),Kn(Cy,g.name),Kn(Jd,g.name),Kn(Dy,g.name),Kn(Sy,g.name);const ep=new Qi({uid:cm,auth:g,email:Un,emailVerified:Iy,displayName:ct,isAnonymous:ku,photoURL:Xd,phoneNumber:Hr,tenantId:Cy,stsTokenManager:eh,createdAt:Dy,lastLoginAt:Sy});return qo&&Array.isArray(qo)&&(ep.providerData=qo.map(Zn=>Object.assign({},Zn))),Jd&&(ep._redirectEventId=Jd),ep}static _fromIdTokenResponse(g,_,E=!1){return(0,c.Z)(function*(){const k=new ms;k.updateFromServerResponse(_);const O=new Qi({uid:_.localId,auth:g,stsTokenManager:k,isAnonymous:E});return yield ui(O),O})()}}const Ls=new Map;function ni(b){pt(b instanceof Function,"Expected a class definition");let g=Ls.get(b);return g?(pt(g instanceof b,"Instance stored in cache mismatched with class"),g):(g=new b,Ls.set(b,g),g)}const yr=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(_,E){var k=this;return(0,c.Z)(function*(){k.storage[_]=E})()}_get(_){var E=this;return(0,c.Z)(function*(){const k=E.storage[_];return void 0===k?null:k})()}_remove(_){var E=this;return(0,c.Z)(function*(){delete E.storage[_]})()}_addListener(_,E){}_removeListener(_,E){}}return b.type="NONE",b})();function $(b,g,_){return`firebase:${b}:${g}:${_}`}class z{constructor(g,_,E){this.persistence=g,this.auth=_,this.userKey=E;const{config:k,name:O}=this.auth;this.fullUserKey=$(this.userKey,k.apiKey,O),this.fullPersistenceKey=$("persistence",k.apiKey,O),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,c.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?Qi._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,c.Z)(function*(){if(_.persistence===g)return;const E=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,E?_.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,E="authUser"){return(0,c.Z)(function*(){if(!_.length)return new z(ni(yr),g,E);const k=(yield Promise.all(_.map(function(){var Ye=(0,c.Z)(function*(at){if(yield at._isAvailable())return at});return function(at){return Ye.apply(this,arguments)}}()))).filter(Ye=>Ye);let O=k[0]||ni(yr);const G=$(E,g.config.apiKey,g.name);let X=null;for(const Ye of _)try{const at=yield Ye._get(G);if(at){const ct=Qi._fromJSON(g,at);Ye!==O&&(X=ct),O=Ye;break}}catch{}const Be=k.filter(Ye=>Ye._shouldAllowMigration);return O._shouldAllowMigration&&Be.length?(O=Be[0],X&&(yield O._set(G,X.toJSON())),yield Promise.all(_.map(function(){var Ye=(0,c.Z)(function*(at){if(at!==O)try{yield at._remove(G)}catch{}});return function(at){return Ye.apply(this,arguments)}}())),new z(O,g,E)):new z(O,g,E)})()}}function Q(b){const g=b.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Pt(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(he(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Cn(g))return"Blackberry";if(We(g))return"Webos";if(ee(g))return"Safari";if((g.includes("chrome/")||Je(g))&&!g.includes("edge/"))return"Chrome";if(zt(g))return"Android";{const E=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function he(b=(0,V.z$)()){return/firefox\//i.test(b)}function ee(b=(0,V.z$)()){const g=b.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Je(b=(0,V.z$)()){return/crios\//i.test(b)}function Pt(b=(0,V.z$)()){return/iemobile/i.test(b)}function zt(b=(0,V.z$)()){return/android/i.test(b)}function Cn(b=(0,V.z$)()){return/blackberry/i.test(b)}function We(b=(0,V.z$)()){return/webos/i.test(b)}function mt(b=(0,V.z$)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function Tn(b=(0,V.z$)()){return mt(b)||zt(b)||We(b)||Cn(b)||/windows phone/i.test(b)||Pt(b)}function ue(b,g=[]){let _;switch(b){case"Browser":_=Q((0,V.z$)());break;case"Worker":_=`${Q((0,V.z$)())}-${b}`;break;default:_=b}const E=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${pe.SDK_VERSION}/${E}`}function Ue(){return(Ue=(0,c.Z)(function*(b){return(yield be(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ze(b,g){return kt.apply(this,arguments)}function kt(){return(kt=(0,c.Z)(function*(b,g){return be(b,"GET","/v2/recaptchaConfig",xe(b,g))})).apply(this,arguments)}function Gt(b){return void 0!==b&&void 0!==b.getResponse}function mn(b){return void 0!==b&&void 0!==b.enterprise}class $n{constructor(g){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===g.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=g.recaptchaKey.split("/")[3],this.emailPasswordEnabled=g.recaptchaEnforcementState.some(_=>"EMAIL_PASSWORD_PROVIDER"===_.provider&&"OFF"!==_.enforcementState)}}function Ji(b){return new Promise((g,_)=>{const E=document.createElement("script");E.setAttribute("src",b),E.onload=g,E.onerror=k=>{const O=Ce("internal-error");O.customData=k,_(O)},E.type="text/javascript",E.charset="UTF-8",function nn(){var b,g;return null!==(g=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==g?g:document}().appendChild(E)})}function qr(b){return`__${b}${Math.floor(1e6*Math.random())}`}class _n{constructor(g){this.type="recaptcha-enterprise",this.auth=Dn(g)}verify(g="verify",_=!1){var E=this;return(0,c.Z)(function*(){function O(){return O=(0,c.Z)(function*(X){if(!_){if(null==X.tenantId&&null!=X._agentRecaptchaConfig)return X._agentRecaptchaConfig.siteKey;if(null!=X.tenantId&&void 0!==X._tenantRecaptchaConfigs[X.tenantId])return X._tenantRecaptchaConfigs[X.tenantId].siteKey}return new Promise(function(){var Be=(0,c.Z)(function*(Ye,at){ze(X,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ct=>{if(void 0!==ct.recaptchaKey){const Un=new $n(ct);return null==X.tenantId?X._agentRecaptchaConfig=Un:X._tenantRecaptchaConfigs[X.tenantId]=Un,Ye(Un.siteKey)}at(new Error("recaptcha Enterprise site key undefined"))}).catch(ct=>{at(ct)})});return function(Ye,at){return Be.apply(this,arguments)}}())}),O.apply(this,arguments)}function G(X,Be,Ye){const at=window.grecaptcha;mn(at)?at.enterprise.ready(()=>{at.enterprise.execute(X,{action:g}).then(ct=>{Be(ct)}).catch(()=>{Be("NO_RECAPTCHA")})}):Ye(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((X,Be)=>{(function k(X){return O.apply(this,arguments)})(E.auth).then(Ye=>{if(!_&&mn(window.grecaptcha))G(Ye,X,Be);else{if(typeof window>"u")return void Be(new Error("RecaptchaVerifier is only supported in browser"));Ji("https://www.google.com/recaptcha/enterprise.js?render="+Ye).then(()=>{G(Ye,X,Be)}).catch(at=>{Be(at)})}}).catch(Ye=>{Be(Ye)})})})()}}function Vs(b,g,_){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,c.Z)(function*(b,g,_,E=!1){const k=new _n(b);let O;try{O=yield k.verify(_)}catch{O=yield k.verify(_,!0)}const G=Object.assign({},g);return Object.assign(G,E?{captchaResp:O}:{captchaResponse:O}),Object.assign(G,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(G,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),G})).apply(this,arguments)}class ra{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const E=O=>new Promise((G,X)=>{try{G(g(O))}catch(Be){X(Be)}});E.onAbort=_,this.queue.push(E);const k=this.queue.length-1;return()=>{this.queue[k]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,c.Z)(function*(){if(_.auth.currentUser===g)return;const E=[];try{for(const k of _.queue)yield k(g),k.onAbort&&E.push(k.onAbort)}catch(k){E.reverse();for(const O of E)try{O()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:k?.message})}})()}}class cd{constructor(g,_,E,k){this.app=g,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=E,this.config=k,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ko(this),this.idTokenSubscription=new ko(this),this.beforeStateQueue=new ra(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=we,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=k.sdkClientVersion}_initializeWithPersistence(g,_){var E=this;return _&&(this._popupRedirectResolver=ni(_)),this._initializationPromise=this.queue((0,c.Z)(function*(){var k,O;if(!E._deleted&&(E.persistenceManager=yield z.create(E,g),!E._deleted)){if(null!==(k=E._popupRedirectResolver)&&void 0!==k&&k._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(_),E.lastNotifiedUid=(null===(O=E.currentUser)||void 0===O?void 0:O.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,c.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,c.Z)(function*(){var E;const k=yield _.assertedPersistence.getCurrentUser();let O=k,G=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const X=null===(E=_.redirectUser)||void 0===E?void 0:E._redirectEventId,Be=O?._redirectEventId,Ye=yield _.tryRedirectSignIn(g);(!X||X===Be)&&Ye?.user&&(O=Ye.user,G=!0)}if(!O)return _.directlySetCurrentUser(null);if(!O._redirectEventId){if(G)try{yield _.beforeStateQueue.runMiddleware(O)}catch(X){O=k,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(X))}return O?_.reloadAndSetCurrentUserOrClear(O):_.directlySetCurrentUser(null)}return se(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===O._redirectEventId?_.directlySetCurrentUser(O):_.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(g){var _=this;return(0,c.Z)(function*(){let E=null;try{E=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch{yield _._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,c.Z)(function*(){try{yield ui(g)}catch(E){if("auth/network-request-failed"!==E?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Mo(){if(typeof navigator>"u")return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var g=this;return(0,c.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,c.Z)(function*(){const E=g?(0,V.m9)(g):null;return E&&se(E.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(E&&E._clone(_))})()}_updateCurrentUser(g,_=!1){var E=this;return(0,c.Z)(function*(){if(!E._deleted)return g&&se(E.tenantId===g.tenantId,E,"tenant-id-mismatch"),_||(yield E.beforeStateQueue.runMiddleware(g)),E.queue((0,c.Z)(function*(){yield E.directlySetCurrentUser(g),E.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,c.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,c.Z)(function*(){yield _.assertedPersistence.setPersistence(ni(g))}))}initializeRecaptchaConfig(){var g=this;return(0,c.Z)(function*(){const _=yield ze(g,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),E=new $n(_);null==g.tenantId?g._agentRecaptchaConfig=E:g._tenantRecaptchaConfigs[g.tenantId]=E,E.emailPasswordEnabled&&new _n(g).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new V.LL("auth","Firebase",g())}onAuthStateChanged(g,_,E){return this.registerStateListener(this.authStateSubscription,g,_,E)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,E){return this.registerStateListener(this.idTokenSubscription,g,_,E)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var E=this;return(0,c.Z)(function*(){const k=yield E.getOrInitRedirectPersistenceManager(_);return null===g?k.removeCurrentUser():k.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,c.Z)(function*(){if(!_.redirectPersistenceManager){const E=g&&ni(g)||_._popupRedirectResolver;se(E,_,"argument-error"),_.redirectPersistenceManager=yield z.create(_,[ni(E._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,c.Z)(function*(){var E,k;return _._isInitialized&&(yield _.queue((0,c.Z)(function*(){}))),(null===(E=_._currentUser)||void 0===E?void 0:E._redirectEventId)===g?_._currentUser:(null===(k=_.redirectUser)||void 0===k?void 0:k._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,c.Z)(function*(){if(g===_.currentUser)return _.queue((0,c.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,E,k){if(this._deleted)return()=>{};const O="function"==typeof _?_:_.next.bind(_),G=this._isInitialized?Promise.resolve():this._initializationPromise;return se(G,this,"internal-error"),G.then(()=>O(this.currentUser)),"function"==typeof _?g.addObserver(_,E,k):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,c.Z)(function*(){_.currentUser&&_.currentUser!==g&&_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh(),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=ue(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,c.Z)(function*(){var _;const E={"X-Client-Version":g.clientVersion};g.app.options.appId&&(E["X-Firebase-gmpid"]=g.app.options.appId);const k=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();k&&(E["X-Firebase-Client"]=k);const O=yield g._getAppCheckToken();return O&&(E["X-Firebase-AppCheck"]=O),E})()}_getAppCheckToken(){var g=this;return(0,c.Z)(function*(){var _;const E=yield null===(_=g.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return E?.error&&function yt(b,...g){ht.logLevel<=ye.in.WARN&&ht.warn(`Auth (${pe.SDK_VERSION}): ${b}`,...g)}(`Error while retrieving App Check token: ${E.error}`),E?.token})()}}function Dn(b){return(0,V.m9)(b)}class ko{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,V.ne)(_=>this.observer=_)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ai(b){const g=b.indexOf(":");return g<0?"":b.substr(0,g+1)}function co(b){if(!b)return null;const g=Number(b);return isNaN(g)?null:g}class Bs{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return Nt("not implemented")}_getIdTokenResponse(g){return Nt("not implemented")}_linkToIdToken(g,_){return Nt("not implemented")}_getReauthenticationResolver(g){return Nt("not implemented")}}function ys(b,g){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,c.Z)(function*(b,g){return be(b,"POST","/v1/accounts:resetPassword",xe(b,g))})).apply(this,arguments)}function lf(b,g){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,c.Z)(function*(b,g){return be(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ud(b,g){return Eg.apply(this,arguments)}function Eg(){return(Eg=(0,c.Z)(function*(b,g){return be(b,"POST","/v1/accounts:update",xe(b,g))})).apply(this,arguments)}function Fn(b,g){return cf.apply(this,arguments)}function cf(){return(cf=(0,c.Z)(function*(b,g){return At(b,"POST","/v1/accounts:signInWithPassword",xe(b,g))})).apply(this,arguments)}function dd(b,g){return uf.apply(this,arguments)}function uf(){return(uf=(0,c.Z)(function*(b,g){return be(b,"POST","/v1/accounts:sendOobCode",xe(b,g))})).apply(this,arguments)}function Cg(b,g){return df.apply(this,arguments)}function df(){return(df=(0,c.Z)(function*(b,g){return dd(b,g)})).apply(this,arguments)}function Uc(b,g){return Dg.apply(this,arguments)}function Dg(){return(Dg=(0,c.Z)(function*(b,g){return dd(b,g)})).apply(this,arguments)}function hf(b,g){return jc.apply(this,arguments)}function jc(){return(jc=(0,c.Z)(function*(b,g){return dd(b,g)})).apply(this,arguments)}function J_(b,g){return hd.apply(this,arguments)}function hd(){return(hd=(0,c.Z)(function*(b,g){return dd(b,g)})).apply(this,arguments)}function fd(){return(fd=(0,c.Z)(function*(b,g){return At(b,"POST","/v1/accounts:signInWithEmailLink",xe(b,g))})).apply(this,arguments)}function Sg(){return(Sg=(0,c.Z)(function*(b,g){return At(b,"POST","/v1/accounts:signInWithEmailLink",xe(b,g))})).apply(this,arguments)}class pd extends Bs{constructor(g,_,E,k=null){super("password",E),this._email=g,this._password=_,this._tenantId=k}static _fromEmailAndPassword(g,_){return new pd(g,_,"password")}static _fromEmailAndCode(g,_,E=null){return new pd(g,_,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,c.Z)(function*(){var E;switch(_.signInMethod){case"password":const k={returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=g._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const O=yield Vs(g,k,"signInWithPassword");return Fn(g,O)}return Fn(g,k).catch(function(){var O=(0,c.Z)(function*(G){if("auth/missing-recaptcha-token"===G.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const X=yield Vs(g,k,"signInWithPassword");return Fn(g,X)}return Promise.reject(G)});return function(G){return O.apply(this,arguments)}}());case"emailLink":return function ff(b,g){return fd.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:Ie(g,"internal-error")}})()}_linkToIdToken(g,_){var E=this;return(0,c.Z)(function*(){switch(E.signInMethod){case"password":return lf(g,{idToken:_,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function pf(b,g){return Sg.apply(this,arguments)}(g,{idToken:_,email:E._email,oobCode:E._password});default:Ie(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function vs(b,g){return uo.apply(this,arguments)}function uo(){return(uo=(0,c.Z)(function*(b,g){return At(b,"POST","/v1/accounts:signInWithIdp",xe(b,g))})).apply(this,arguments)}class Yr extends Bs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new Yr(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):Ie("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:k}=_,O=(0,de._T)(_,["providerId","signInMethod"]);if(!E||!k)return null;const G=new Yr(E,k);return G.idToken=O.idToken||void 0,G.accessToken=O.accessToken||void 0,G.secret=O.secret,G.nonce=O.nonce,G.pendingToken=O.pendingToken||null,G}_getIdTokenResponse(g){return vs(g,this.buildRequest())}_linkToIdToken(g,_){const E=this.buildRequest();return E.idToken=_,vs(g,E)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,vs(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,V.xO)(_)}return g}}function gd(b,g){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,c.Z)(function*(b,g){return be(b,"POST","/v1/accounts:sendVerificationCode",xe(b,g))})).apply(this,arguments)}function zc(){return(zc=(0,c.Z)(function*(b,g){return At(b,"POST","/v1/accounts:signInWithPhoneNumber",xe(b,g))})).apply(this,arguments)}function xo(){return(xo=(0,c.Z)(function*(b,g){const _=yield At(b,"POST","/v1/accounts:signInWithPhoneNumber",xe(b,g));if(_.temporaryProof)throw tn(b,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Gc={USER_NOT_FOUND:"user-not-found"};function Hi(){return(Hi=(0,c.Z)(function*(b,g){return At(b,"POST","/v1/accounts:signInWithPhoneNumber",xe(b,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Gc)})).apply(this,arguments)}class cr extends Bs{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new cr({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new cr({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function md(b,g){return zc.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function Ag(b,g){return xo.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Tg(b,g){return Hi.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:E,verificationCode:k}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:E,code:k}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:E,phoneNumber:k,temporaryProof:O}=g;return E||_||k||O?new cr({verificationId:_,verificationCode:E,phoneNumber:k,temporaryProof:O}):null}}class Wc{constructor(g){var _,E,k,O,G,X;const Be=(0,V.zd)((0,V.pd)(g)),Ye=null!==(_=Be.apiKey)&&void 0!==_?_:null,at=null!==(E=Be.oobCode)&&void 0!==E?E:null,ct=function Mg(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(k=Be.mode)&&void 0!==k?k:null);se(Ye&&at&&ct,"argument-error"),this.apiKey=Ye,this.operation=ct,this.code=at,this.continueUrl=null!==(O=Be.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(G=Be.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(X=Be.tenantId)&&void 0!==X?X:null}static parseLink(g){const _=function $c(b){const g=(0,V.zd)((0,V.pd)(b)).link,_=g?(0,V.zd)((0,V.pd)(g)).deep_link_id:null,E=(0,V.zd)((0,V.pd)(b)).deep_link_id;return(E?(0,V.zd)((0,V.pd)(E)).link:null)||E||_||g||b}(g);try{return new Wc(_)}catch{return null}}}let ri=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(_,E){return pd._fromEmailAndPassword(_,E)}static credentialWithLink(_,E){const k=Wc.parseLink(E);return se(k,"argument-error"),pd._fromEmailAndCode(_,k.code,k.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class Ro{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class _d extends Ro{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Zr extends _d{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return se("providerId"in _&&"signInMethod"in _,"argument-error"),Yr._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return se(g.idToken||g.accessToken,"argument-error"),Yr._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Zr.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Zr.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:E,oauthTokenSecret:k,pendingToken:O,nonce:G,providerId:X}=g;if(!E&&!k&&!_&&!O||!X)return null;try{return new Zr(X)._credential({idToken:_,accessToken:E,nonce:G,pendingToken:O})}catch{return null}}}let br=(()=>{class b extends _d{constructor(){super("facebook.com")}static credential(_){return Yr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch{return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),yd=(()=>{class b extends _d{constructor(){super("google.com"),this.addScope("profile")}static credential(_,E){return Yr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:E})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:E,oauthAccessToken:k}=_;if(!E&&!k)return null;try{return b.credential(E,k)}catch{return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),qc=(()=>{class b extends _d{constructor(){super("github.com")}static credential(_){return Yr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch{return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class si extends Bs{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return vs(g,this.buildRequest())}_linkToIdToken(g,_){const E=this.buildRequest();return E.idToken=_,vs(g,E)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,vs(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:k,pendingToken:O}=_;return E&&k&&O&&E===k?new si(E,O):null}static _create(g,_){return new si(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Oo extends Ro{constructor(g){se(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Oo.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Oo.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=si.fromJSON(g);return se(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:E}=g;if(!_||!E)return null;try{return si._create(E,_)}catch{return null}}}let gf=(()=>{class b extends _d{constructor(){super("twitter.com")}static credential(_,E){return Yr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:E})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:E,oauthTokenSecret:k}=_;if(!E||!k)return null;try{return b.credential(E,k)}catch{return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function bs(b,g){return oa.apply(this,arguments)}function oa(){return(oa=(0,c.Z)(function*(b,g){return At(b,"POST","/v1/accounts:signUp",xe(b,g))})).apply(this,arguments)}class Nr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,E,k=!1){return(0,c.Z)(function*(){const O=yield Qi._fromIdTokenResponse(g,E,k),G=Mt(E);return new Nr({user:O,providerId:G,_tokenResponse:E,operationType:_})})()}static _forOperation(g,_,E){return(0,c.Z)(function*(){yield g._updateTokensIfNecessary(E,!0);const k=Mt(E);return new Nr({user:g,providerId:k,_tokenResponse:E,operationType:_})})()}}function Mt(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function mf(){return(mf=(0,c.Z)(function*(b){var g;const _=Dn(b);if(yield _._initializationPromise,null!==(g=_.currentUser)&&void 0!==g&&g.isAnonymous)return new Nr({user:_.currentUser,providerId:null,operationType:"signIn"});const E=yield bs(_,{returnSecureToken:!0}),k=yield Nr._fromIdTokenResponse(_,"signIn",E,!0);return yield _._updateCurrentUser(k.user),k})).apply(this,arguments)}class Al extends V.ZR{constructor(g,_,E,k){var O;super(_.code,_.message),this.operationType=E,this.user=k,Object.setPrototypeOf(this,Al.prototype),this.customData={appName:g.name,tenantId:null!==(O=g.tenantId)&&void 0!==O?O:void 0,_serverResponse:_.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(g,_,E,k){return new Al(g,_,E,k)}}function _f(b,g,_,E){return("reauthenticate"===g?_._getReauthenticationResolver(b):_._getIdTokenResponse(b)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Al._fromErrorAndOperation(b,O,g,E):O})}function vd(b){return new Set(b.map(({providerId:g})=>g).filter(g=>!!g))}function Tl(){return(Tl=(0,c.Z)(function*(b,g){const _=(0,V.m9)(b);yield Xt(!0,_,g);const{providerUserInfo:E}=yield Zi(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),k=vd(E||[]);return _.providerData=_.providerData.filter(O=>k.has(O.providerId)),k.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function vf(b,g){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,c.Z)(function*(b,g,_=!1){const E=yield lt(b,g._linkToIdToken(b.auth,yield b.getIdToken()),_);return Nr._forOperation(b,"link",E)})).apply(this,arguments)}function Xt(b,g,_){return Us.apply(this,arguments)}function Us(){return(Us=(0,c.Z)(function*(b,g,_){yield ui(g);const k=!1===b?"provider-already-linked":"no-such-provider";se(vd(g.providerData).has(_)===b,g.auth,k)})).apply(this,arguments)}function Ml(b,g){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,c.Z)(function*(b,g,_=!1){const{auth:E}=b,k="reauthenticate";try{const O=yield lt(b,_f(E,k,g,b),_);se(O.idToken,E,"internal-error");const G=Pn(O.idToken);se(G,E,"internal-error");const{sub:X}=G;return se(b.uid===X,E,"user-mismatch"),Nr._forOperation(b,k,O)}catch(O){throw"auth/user-not-found"===O?.code&&Ie(E,"user-mismatch"),O}})).apply(this,arguments)}function Yc(b,g){return ho.apply(this,arguments)}function ho(){return(ho=(0,c.Z)(function*(b,g,_=!1){const E="signIn",k=yield _f(b,E,g),O=yield Nr._fromIdTokenResponse(b,E,k);return _||(yield b._updateCurrentUser(O.user)),O})).apply(this,arguments)}function ur(b,g){return aa.apply(this,arguments)}function aa(){return(aa=(0,c.Z)(function*(b,g){return Yc(Dn(b),g)})).apply(this,arguments)}function bd(b,g){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,c.Z)(function*(b,g){const _=(0,V.m9)(b);return yield Xt(!1,_,g.providerId),vf(_,g)})).apply(this,arguments)}function Hn(b,g){return kg.apply(this,arguments)}function kg(){return(kg=(0,c.Z)(function*(b,g){return Ml((0,V.m9)(b),g)})).apply(this,arguments)}function Ui(b,g){return er.apply(this,arguments)}function er(){return(er=(0,c.Z)(function*(b,g){return At(b,"POST","/v1/accounts:signInWithCustomToken",xe(b,g))})).apply(this,arguments)}function wd(){return(wd=(0,c.Z)(function*(b,g){const _=Dn(b),E=yield Ui(_,{token:g,returnSecureToken:!0}),k=yield Nr._fromIdTokenResponse(_,"signIn",E);return yield _._updateCurrentUser(k.user),k})).apply(this,arguments)}class ws{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?Kr._fromServerResponse(g,_):"totpInfo"in _?Kc._fromServerResponse(g,_):Ie(g,"internal-error")}}class Kr extends ws{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new Kr(_)}}class Kc extends ws{constructor(g){super("totp",g)}static _fromServerResponse(g,_){return new Kc(_)}}function No(b,g,_){var E;se((null===(E=_.url)||void 0===E?void 0:E.length)>0,b,"invalid-continue-uri"),se(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(se(_.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(se(_.android.packageName.length>0,b,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function ja(){return ja=(0,c.Z)(function*(b,g,_){var E;const k=Dn(b),O={requestType:"PASSWORD_RESET",email:g,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=k._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const G=yield Vs(k,O,"getOobCode",!0);_&&No(k,G,_),yield Uc(k,G)}else _&&No(k,O,_),yield Uc(k,O).catch(function(){var G=(0,c.Z)(function*(X){if("auth/missing-recaptcha-token"!==X.code)return Promise.reject(X);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Be=yield Vs(k,O,"getOobCode",!0);_&&No(k,Be,_),yield Uc(k,Be)}});return function(X){return G.apply(this,arguments)}}())}),ja.apply(this,arguments)}function kl(){return(kl=(0,c.Z)(function*(b,g,_){yield ys((0,V.m9)(b),{oobCode:g,newPassword:_})})).apply(this,arguments)}function Es(){return(Es=(0,c.Z)(function*(b,g){yield ud((0,V.m9)(b),{oobCode:g})})).apply(this,arguments)}function wf(b,g){return xl.apply(this,arguments)}function xl(){return(xl=(0,c.Z)(function*(b,g){const _=(0,V.m9)(b),E=yield ys(_,{oobCode:g}),k=E.requestType;switch(se(k,_,"internal-error"),k){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":se(E.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":se(E.mfaInfo,_,"internal-error");default:se(E.email,_,"internal-error")}let O=null;return E.mfaInfo&&(O=ws._fromServerResponse(Dn(_),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:O},operation:k}})).apply(this,arguments)}function la(){return(la=(0,c.Z)(function*(b,g){const{data:_}=yield wf((0,V.m9)(b),g);return _.email})).apply(this,arguments)}function Rl(){return Rl=(0,c.Z)(function*(b,g,_){var E;const k=Dn(b),O={returnSecureToken:!0,email:g,password:_,clientType:"CLIENT_TYPE_WEB"};let G;if(null!==(E=k._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const Ye=yield Vs(k,O,"signUpPassword");G=bs(k,Ye)}else G=bs(k,O).catch(function(){var Ye=(0,c.Z)(function*(at){if("auth/missing-recaptcha-token"===at.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const ct=yield Vs(k,O,"signUpPassword");return bs(k,ct)}return Promise.reject(at)});return function(at){return Ye.apply(this,arguments)}}());const X=yield G.catch(Ye=>Promise.reject(Ye)),Be=yield Nr._fromIdTokenResponse(k,"signIn",X);return yield k._updateCurrentUser(Be.user),Be}),Rl.apply(this,arguments)}function Df(){return Df=(0,c.Z)(function*(b,g,_){var E;const k=Dn(b),O={requestType:"EMAIL_SIGNIN",email:g,clientType:"CLIENT_TYPE_WEB"};function G(X,Be){se(Be.handleCodeInApp,k,"argument-error"),Be&&No(k,X,Be)}if(null!==(E=k._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const X=yield Vs(k,O,"getOobCode",!0);G(X,_),yield hf(k,X)}else G(O,_),yield hf(k,O).catch(function(){var X=(0,c.Z)(function*(Be){if("auth/missing-recaptcha-token"!==Be.code)return Promise.reject(Be);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ye=yield Vs(k,O,"getOobCode",!0);G(Ye,_),yield hf(k,Ye)}});return function(Be){return X.apply(this,arguments)}}())}),Df.apply(this,arguments)}function fo(){return(fo=(0,c.Z)(function*(b,g,_){const E=(0,V.m9)(b),k=ri.credentialWithLink(g,_||Kt());return se(k._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),ur(E,k)})).apply(this,arguments)}function Xn(b,g){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,c.Z)(function*(b,g){return be(b,"POST","/v1/accounts:createAuthUri",xe(b,g))})).apply(this,arguments)}function Cd(){return(Cd=(0,c.Z)(function*(b,g){const E={identifier:g,continueUri:ft()?Kt():"http://localhost"},{signinMethods:k}=yield Xn((0,V.m9)(b),E);return k||[]})).apply(this,arguments)}function If(){return(If=(0,c.Z)(function*(b,g){const _=(0,V.m9)(b),k={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};g&&No(_.auth,k,g);const{email:O}=yield Cg(_.auth,k);O!==b.email&&(yield b.reload())})).apply(this,arguments)}function ca(){return(ca=(0,c.Z)(function*(b,g,_){const E=(0,V.m9)(b),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:g};_&&No(E.auth,O,_);const{email:G}=yield J_(E.auth,O);G!==b.email&&(yield b.reload())})).apply(this,arguments)}function eu(b,g){return Po.apply(this,arguments)}function Po(){return(Po=(0,c.Z)(function*(b,g){return be(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ol(){return(Ol=(0,c.Z)(function*(b,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const E=(0,V.m9)(b),O={idToken:yield E.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},G=yield lt(E,eu(E.auth,O));E.displayName=G.displayName||null,E.photoURL=G.photoUrl||null;const X=E.providerData.find(({providerId:Be})=>"password"===Be);X&&(X.displayName=E.displayName,X.photoURL=E.photoURL),yield E._updateTokensIfNecessary(G)})).apply(this,arguments)}function Nl(b,g,_){return tu.apply(this,arguments)}function tu(){return(tu=(0,c.Z)(function*(b,g,_){const{auth:E}=b,O={idToken:yield b.getIdToken(),returnSecureToken:!0};g&&(O.email=g),_&&(O.password=_);const G=yield lt(b,lf(E,O));yield b._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class go{constructor(g,_,E={}){this.isNewUser=g,this.providerId=_,this.profile=E}}class Pl extends go{constructor(g,_,E,k){super(g,_,E),this.username=k}}class Ng extends go{constructor(g,_){super(g,"facebook.com",_)}}class Mf extends Pl{constructor(g,_){super(g,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class kf extends go{constructor(g,_){super(g,"google.com",_)}}class nu extends Pl{constructor(g,_,E){super(g,"twitter.com",_,E)}}function iu(b){const{user:g,_tokenResponse:_}=b;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function ty(b){var g,_;if(!b)return null;const{providerId:E}=b,k=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},O=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!E&&b?.idToken){const G=null===(_=null===(g=Pn(b.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(G)return new go(O,"anonymous"!==G&&"custom"!==G?G:null)}if(!E)return null;switch(E){case"facebook.com":return new Ng(O,k);case"github.com":return new Mf(O,k);case"google.com":return new kf(O,k);case"twitter.com":return new nu(O,k,b.screenName||null);case"custom":case"anonymous":return new go(O,null);default:return new go(O,E,k)}}(_)}class Gs{constructor(g,_,E){this.type=g,this.credential=_,this.auth=E}static _fromIdtoken(g,_){return new Gs("enroll",g,_)}static _fromMfaPendingCredential(g){return new Gs("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,E;if(g?.multiFactorSession){if(null!==(_=g.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Gs._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(E=g.multiFactorSession)&&void 0!==E&&E.idToken)return Gs._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Fo{constructor(g,_,E){this.session=g,this.hints=_,this.signInResolver=E}static _fromError(g,_){const E=Dn(g),k=_.customData._serverResponse,O=(k.mfaInfo||[]).map(X=>ws._fromServerResponse(E,X));se(k.mfaPendingCredential,E,"internal-error");const G=Gs._fromMfaPendingCredential(k.mfaPendingCredential);return new Fo(G,O,function(){var X=(0,c.Z)(function*(Be){const Ye=yield Be._process(E,G);delete k.mfaInfo,delete k.mfaPendingCredential;const at=Object.assign(Object.assign({},k),{idToken:Ye.idToken,refreshToken:Ye.refreshToken});switch(_.operationType){case"signIn":const ct=yield Nr._fromIdTokenResponse(E,_.operationType,at);return yield E._updateCurrentUser(ct.user),ct;case"reauthenticate":return se(_.user,E,"internal-error"),Nr._forOperation(_.user,_.operationType,at);default:Ie(E,"internal-error")}});return function(Be){return X.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,c.Z)(function*(){return _.signInResolver(g)})()}}function Id(b,g){return be(b,"POST","/v2/accounts/mfaEnrollment:start",xe(b,g))}class vi{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(E=>ws._fromServerResponse(g.auth,E)))})}static _fromUser(g){return new vi(g)}getSession(){var g=this;return(0,c.Z)(function*(){return Gs._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,_){var E=this;return(0,c.Z)(function*(){const k=g,O=yield E.getSession(),G=yield lt(E.user,k._process(E.user.auth,O,_));return yield E.user._updateTokensIfNecessary(G),E.user.reload()})()}unenroll(g){var _=this;return(0,c.Z)(function*(){const E="string"==typeof g?g:g.uid,k=yield _.user.getIdToken();try{const O=yield lt(_.user,function Td(b,g){return be(b,"POST","/v2/accounts/mfaEnrollment:withdraw",xe(b,g))}(_.user.auth,{idToken:k,mfaEnrollmentId:E}));_.enrolledFactors=_.enrolledFactors.filter(({uid:G})=>G!==E),yield _.user._updateTokensIfNecessary(O),yield _.user.reload()}catch(O){throw O}})()}}const $a=new WeakMap,ua="__sak";class au{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(ua,"1"),this.storage.removeItem(ua),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const $s=(()=>{class b extends au{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,E)=>this.onStorageEvent(_,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Fg(){const b=(0,V.z$)();return ee(b)||mt(b)}()&&function _s(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Tn(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const E of Object.keys(this.listeners)){const k=this.storage.getItem(E),O=this.localCache[E];k!==O&&_(E,O,k)}}onStorageEvent(_,E=!1){if(!_.key)return void this.forAllChangedKeys((X,Be,Ye)=>{this.notifyListeners(X,Ye)});const k=_.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const X=this.storage.getItem(k);if(_.newValue!==X)null!==_.newValue?this.storage.setItem(k,_.newValue):this.storage.removeItem(k);else if(this.localCache[k]===_.newValue&&!E)return}const O=()=>{const X=this.storage.getItem(k);!E&&this.localCache[k]===X||this.notifyListeners(k,X)},G=this.storage.getItem(k);!function Xi(){return(0,V.w1)()&&10===document.documentMode}()||G===_.newValue||_.newValue===_.oldValue?O():setTimeout(O,10)}notifyListeners(_,E){this.localCache[_]=E;const k=this.listeners[_];if(k)for(const O of Array.from(k))O(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,E,k)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:E,newValue:k}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,E){var k=()=>super._set,O=this;return(0,c.Z)(function*(){yield k().call(O,_,E),O.localCache[_]=JSON.stringify(E)})()}_get(_){var E=()=>super._get,k=this;return(0,c.Z)(function*(){const O=yield E().call(k,_);return k.localCache[_]=JSON.stringify(O),O})()}_remove(_){var E=()=>super._remove,k=this;return(0,c.Z)(function*(){yield E().call(k,_),delete k.localCache[_]})()}}return b.type="LOCAL",b})(),Lo=(()=>{class b extends au{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,E){}_removeListener(_,E){}}return b.type="SESSION",b})();let Rf=(()=>{class b{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const E=this.receivers.find(O=>O.isListeningto(_));if(E)return E;const k=new b(_);return this.receivers.push(k),k}isListeningto(_){return this.eventTarget===_}handleEvent(_){var E=this;return(0,c.Z)(function*(){const k=_,{eventId:O,eventType:G,data:X}=k.data,Be=E.handlersMap[G];if(!Be?.size)return;k.ports[0].postMessage({status:"ack",eventId:O,eventType:G});const Ye=Array.from(Be).map(function(){var ct=(0,c.Z)(function*(Un){return Un(k.origin,X)});return function(Un){return ct.apply(this,arguments)}}()),at=yield function xf(b){return Promise.all(b.map(function(){var g=(0,c.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(E){return{fulfilled:!1,reason:E}}});return function(_){return g.apply(this,arguments)}}()))}(Ye);k.ports[0].postMessage({status:"done",eventId:O,eventType:G,response:at})})()}_subscribe(_,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(E)}_unsubscribe(_,E){this.handlersMap[_]&&E&&this.handlersMap[_].delete(E),(!E||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function Cs(b="",g=10){let _="";for(let E=0;E<g;E++)_+=Math.floor(10*Math.random());return b+_}class Lg{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,E=50){var k=this;return(0,c.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let G,X;return new Promise((Be,Ye)=>{const at=Cs("",20);O.port1.start();const ct=setTimeout(()=>{Ye(new Error("unsupported_event"))},E);X={messageChannel:O,onMessage(Un){const Hr=Un;if(Hr.data.eventId===at)switch(Hr.data.status){case"ack":clearTimeout(ct),G=setTimeout(()=>{Ye(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),Be(Hr.data.response);break;default:clearTimeout(ct),clearTimeout(G),Ye(new Error("invalid_response"))}}},k.handlers.add(X),O.port1.addEventListener("message",X.onMessage),k.target.postMessage({eventType:g,eventId:at,data:_},[O.port2])}).finally(()=>{X&&k.removeMessageHandler(X)})})()}}function Jn(){return window}function Ul(){return typeof Jn().WorkerGlobalScope<"u"&&"function"==typeof Jn().importScripts}function lu(){return(lu=(0,c.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const _o="firebaseLocalStorageDb",Ya="firebaseLocalStorage",Vo="fbase_key";class Za{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function jl(b,g){return b.transaction([Ya],g?"readwrite":"readonly").objectStore(Ya)}function xd(){const b=indexedDB.open(_o,1);return new Promise((g,_)=>{b.addEventListener("error",()=>{_(b.error)}),b.addEventListener("upgradeneeded",()=>{const E=b.result;try{E.createObjectStore(Ya,{keyPath:Vo})}catch(k){_(k)}}),b.addEventListener("success",(0,c.Z)(function*(){const E=b.result;E.objectStoreNames.contains(Ya)?g(E):(E.close(),yield function bn(){const b=indexedDB.deleteDatabase(_o);return new Za(b).toPromise()}(),g(yield xd()))}))})}function cu(b,g,_){return Vg.apply(this,arguments)}function Vg(){return(Vg=(0,c.Z)(function*(b,g,_){const E=jl(b,!0).put({[Vo]:g,value:_});return new Za(E).toPromise()})).apply(this,arguments)}function Bg(){return(Bg=(0,c.Z)(function*(b,g){const _=jl(b,!1).get(g),E=yield new Za(_).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Pf(b,g){const _=jl(b,!0).delete(g);return new Za(_).toPromise()}const Ka=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,c.Z)(function*(){return _.db||(_.db=yield xd()),_.db})()}_withRetries(_){var E=this;return(0,c.Z)(function*(){let k=0;for(;;)try{const O=yield E._openDb();return yield _(O)}catch(O){if(k++>3)throw O;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,c.Z)(function*(){return Ul()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,c.Z)(function*(){_.receiver=Rf._getInstance(function qa(){return Ul()?self:null}()),_.receiver._subscribe("keyChanged",function(){var E=(0,c.Z)(function*(k,O){return{keyProcessed:(yield _._poll()).includes(O.key)}});return function(k,O){return E.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var E=(0,c.Z)(function*(k,O){return["keyChanged"]});return function(k,O){return E.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,c.Z)(function*(){var E,k;if(_.activeServiceWorker=yield function kd(){return lu.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Lg(_.activeServiceWorker);const O=yield _.sender._send("ping",{},800);!O||(null===(E=O[0])||void 0===E?void 0:E.fulfilled)&&(null===(k=O[0])||void 0===k?void 0:k.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var E=this;return(0,c.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function mo(){var b;return(null===(b=navigator?.serviceWorker)||void 0===b?void 0:b.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:_},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const _=yield xd();return yield cu(_,ua,"1"),yield Pf(_,ua),!0}catch{}return!1})()}_withPendingWrite(_){var E=this;return(0,c.Z)(function*(){E.pendingWrites++;try{yield _()}finally{E.pendingWrites--}})()}_set(_,E){var k=this;return(0,c.Z)(function*(){return k._withPendingWrite((0,c.Z)(function*(){return yield k._withRetries(O=>cu(O,_,E)),k.localCache[_]=E,k.notifyServiceWorker(_)}))})()}_get(_){var E=this;return(0,c.Z)(function*(){const k=yield E._withRetries(O=>function Nf(b,g){return Bg.apply(this,arguments)}(O,_));return E.localCache[_]=k,k})()}_remove(_){var E=this;return(0,c.Z)(function*(){return E._withPendingWrite((0,c.Z)(function*(){return yield E._withRetries(k=>Pf(k,_)),delete E.localCache[_],E.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,c.Z)(function*(){const E=yield _._withRetries(G=>{const X=jl(G,!1).getAll();return new Za(X).toPromise()});if(!E)return[];if(0!==_.pendingWrites)return[];const k=[],O=new Set;for(const{fbase_key:G,value:X}of E)O.add(G),JSON.stringify(_.localCache[G])!==JSON.stringify(X)&&(_.notifyListeners(G,X),k.push(G));for(const G of Object.keys(_.localCache))_.localCache[G]&&!O.has(G)&&(_.notifyListeners(G,null),k.push(G));return k})()}notifyListeners(_,E){this.localCache[_]=E;const k=this.listeners[_];if(k)for(const O of Array.from(k))O(E)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function di(b,g){return be(b,"POST","/v2/accounts/mfaSignIn:start",xe(b,g))}const Ti=1e12;class Xr{constructor(g){this.auth=g,this.counter=Ti,this._widgets=new Map}render(g,_){const E=this.counter;return this._widgets.set(E,new Hg(g,this.auth.name,_||{})),this.counter++,E}reset(g){var _;const E=g||Ti;null===(_=this._widgets.get(E))||void 0===_||_.delete(),this._widgets.delete(E)}getResponse(g){var _;return(null===(_=this._widgets.get(g||Ti))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,c.Z)(function*(){var E;return null===(E=_._widgets.get(g||Ti))||void 0===E||E.execute(),""})()}}class Hg{constructor(g,_,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const k="string"==typeof g?document.getElementById(g):g;se(k,"argument-error",{appName:_}),this.container=k,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Jr(b){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<b;E++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ha=qr("rcb"),Od=new Ps(3e4,6e4);class Ug{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=Jn().grecaptcha)||void 0===g||!g.render)}load(g,_=""){return se(function sy(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(_),g,"argument-error"),this.shouldResolveImmediately(_)&&Gt(Jn().grecaptcha)?Promise.resolve(Jn().grecaptcha):new Promise((E,k)=>{const O=Jn().setTimeout(()=>{k(Ce(g,"network-request-failed"))},Od.get());Jn()[ha]=()=>{Jn().clearTimeout(O),delete Jn()[ha];const X=Jn().grecaptcha;if(!X||!Gt(X))return void k(Ce(g,"internal-error"));const Be=X.render;X.render=(Ye,at)=>{const ct=Be(Ye,at);return this.counter++,ct},this.hostLanguage=_,E(X)},Ji(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:ha,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(O),k(Ce(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var _;return!(null===(_=Jn().grecaptcha)||void 0===_||!_.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Bo{load(g){return(0,c.Z)(function*(){return new Xr(g)})()}clearedOneInstance(){}}const uu="recaptcha",es={theme:"light",type:"image"};class Ff{constructor(g,_=Object.assign({},es),E){this.parameters=_,this.type=uu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Dn(E),this.isInvisible="invisible"===this.parameters.size,se(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const k="string"==typeof g?document.getElementById(g):g;se(k,this.auth,"argument-error"),this.container=k,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Bo:new Ug,this.validateStartingState()}verify(){var g=this;return(0,c.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),E=g.getAssertedRecaptcha();return E.getResponse(_)||new Promise(O=>{const G=X=>{!X||(g.tokenChangeListeners.delete(G),O(X))};g.tokenChangeListeners.add(G),g.isInvisible&&E.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){se(!this.parameters.sitekey,this.auth,"argument-error"),se(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),se(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(E=>E(_)),"function"==typeof g)g(_);else if("string"==typeof g){const E=Jn()[g];"function"==typeof E&&E(_)}}}assertNotDestroyed(){se(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,c.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const E=document.createElement("div");_.appendChild(E),_=E}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,c.Z)(function*(){se(ft()&&!Ul(),g.auth,"internal-error"),yield function Gl(){let b=null;return new Promise(g=>{"complete"!==document.readyState?(b=()=>g(),window.addEventListener("load",b)):g()}).catch(g=>{throw b&&window.removeEventListener("load",b),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function oe(b){return Ue.apply(this,arguments)}(g.auth);se(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return se(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class oy{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=cr._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function Lf(){return(Lf=(0,c.Z)(function*(b,g,_){const E=Dn(b),k=yield Bf(E,g,(0,V.m9)(_));return new oy(k,O=>ur(E,O))})).apply(this,arguments)}function du(){return(du=(0,c.Z)(function*(b,g,_){const E=(0,V.m9)(b);yield Xt(!1,E,"phone");const k=yield Bf(E.auth,g,(0,V.m9)(_));return new oy(k,O=>bd(E,O))})).apply(this,arguments)}function Qa(){return(Qa=(0,c.Z)(function*(b,g,_){const E=(0,V.m9)(b),k=yield Bf(E.auth,g,(0,V.m9)(_));return new oy(k,O=>Hn(E,O))})).apply(this,arguments)}function Bf(b,g,_){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,c.Z)(function*(b,g,_){var E;const k=yield _.verify();try{let O;if(se("string"==typeof k,b,"argument-error"),se(_.type===uu,b,"argument-error"),O="string"==typeof g?{phoneNumber:g}:g,"session"in O){const G=O.session;if("phoneNumber"in O)return se("enroll"===G.type,b,"internal-error"),(yield Id(b,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:k}})).phoneSessionInfo.sessionInfo;{se("signin"===G.type,b,"internal-error");const X=(null===(E=O.multiFactorHint)||void 0===E?void 0:E.uid)||O.multiFactorUid;return se(X,b,"missing-multi-factor-info"),(yield di(b,{mfaPendingCredential:G.credential,mfaEnrollmentId:X,phoneSignInInfo:{recaptchaToken:k}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield gd(b,{phoneNumber:O.phoneNumber,recaptchaToken:k});return G}}finally{_._reset()}})).apply(this,arguments)}function Fr(){return(Fr=(0,c.Z)(function*(b,g){yield vf((0,V.m9)(b),g)})).apply(this,arguments)}let hi=(()=>{class b{constructor(_){this.providerId=b.PROVIDER_ID,this.auth=Dn(_)}verifyPhoneNumber(_,E){return Bf(this.auth,_,(0,V.m9)(E))}static credential(_,E){return cr._fromVerification(_,E)}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:E,temporaryProof:k}=_;return E&&k?cr._fromTokenResponse(E,k):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function Er(b,g){return g?ni(g):(se(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class Sn extends Bs{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return vs(g,this._buildIdpRequest())}_linkToIdToken(g,_){return vs(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return vs(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function Ln(b){return Yc(b.auth,new Sn(b),b.bypassAuthState)}function zg(b){const{auth:g,user:_}=b;return se(_,g,"internal-error"),Ml(_,new Sn(b),b.bypassAuthState)}function Gg(b){return $l.apply(this,arguments)}function $l(){return($l=(0,c.Z)(function*(b){const{auth:g,user:_}=b;return se(_,g,"internal-error"),vf(_,new Sn(b),b.bypassAuthState)})).apply(this,arguments)}class ei{constructor(g,_,E,k,O=!1){this.auth=g,this.resolver=E,this.user=k,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,c.Z)(function*(E,k){g.pendingPromise={resolve:E,reject:k};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(O){g.reject(O)}});return function(E,k){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,c.Z)(function*(){const{urlResponse:E,sessionId:k,postBody:O,tenantId:G,error:X,type:Be}=g;if(X)return void _.reject(X);const Ye={auth:_.auth,requestUri:E,sessionId:k,tenantId:G||void 0,postBody:O||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Be)(Ye))}catch(at){_.reject(at)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Ln;case"linkViaPopup":case"linkViaRedirect":return Gg;case"reauthViaPopup":case"reauthViaRedirect":return zg;default:Ie(this.auth,"internal-error")}}resolve(g){pt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){pt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ki=new Ps(2e3,1e4);function qn(){return(qn=(0,c.Z)(function*(b,g,_){const E=Dn(b);qe(b,g,Ro);const k=Er(E,_);return new Xa(E,"signInViaPopup",g,k).executeNotNull()})).apply(this,arguments)}function hu(){return(hu=(0,c.Z)(function*(b,g,_){const E=(0,V.m9)(b);qe(E.auth,g,Ro);const k=Er(E.auth,_);return new Xa(E.auth,"reauthViaPopup",g,k,E).executeNotNull()})).apply(this,arguments)}function Ds(){return(Ds=(0,c.Z)(function*(b,g,_){const E=(0,V.m9)(b);qe(E.auth,g,Ro);const k=Er(E.auth,_);return new Xa(E.auth,"linkViaPopup",g,k,E).executeNotNull()})).apply(this,arguments)}let Xa=(()=>{class b extends ei{constructor(_,E,k,O,G){super(_,E,O,G),this.provider=k,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var _=this;return(0,c.Z)(function*(){const E=yield _.execute();return se(E,_.auth,"internal-error"),E})()}onExecution(){var _=this;return(0,c.Z)(function*(){pt(1===_.filter.length,"Popup operations only handle one event");const E=Cs();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],E),_.authWindow.associatedEvent=E,_.resolver._originValidation(_.auth).catch(k=>{_.reject(k)}),_.resolver._isIframeWebStorageSupported(_.auth,k=>{k||_.reject(Ce(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Ce(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const _=()=>{var E,k;this.pollId=null!==(k=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==k&&k.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ce(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,ki.get())};_()}}return b.currentPopupAction=null,b})();const oi=new Map;class fu extends ei{constructor(g,_,E=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,E),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,c.Z)(function*(){let E=oi.get(_.auth._key());if(!E){try{const O=(yield function Ho(b,g){return ve.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;E=()=>Promise.resolve(O)}catch(k){E=()=>Promise.reject(k)}oi.set(_.auth._key(),E)}return _.bypassAuthState||oi.set(_.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,E=this;return(0,c.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(E,g);if("unknown"!==g.type){if(g.eventId){const k=yield E.auth._redirectUserForId(g.eventId);if(k)return E.user=k,_().call(E,g);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function ve(){return(ve=(0,c.Z)(function*(b,g){const _=Vr(g),E=pu(b);if(!(yield E._isAvailable()))return!1;const k="true"===(yield E._get(_));return yield E._remove(_),k})).apply(this,arguments)}function bi(b,g){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,c.Z)(function*(b,g){return pu(b)._set(Vr(g),"true")})).apply(this,arguments)}function F(b,g){oi.set(b._key(),g)}function pu(b){return ni(b._redirectPersistence)}function Vr(b){return $("pendingRedirect",b.config.apiKey,b.name)}function xt(){return(xt=(0,c.Z)(function*(b,g,_){const E=Dn(b);qe(b,g,Ro),yield E._initializationPromise;const k=Er(E,_);return yield bi(k,E),k._openRedirect(E,g,"signInViaRedirect")})).apply(this,arguments)}function zo(){return(zo=(0,c.Z)(function*(b,g,_){const E=(0,V.m9)(b);qe(E.auth,g,Ro),yield E.auth._initializationPromise;const k=Er(E.auth,_);yield bi(k,E.auth);const O=yield yo(E);return k._openRedirect(E.auth,g,"reauthViaRedirect",O)})).apply(this,arguments)}function $g(){return($g=(0,c.Z)(function*(b,g,_){const E=(0,V.m9)(b);qe(E.auth,g,Ro),yield E.auth._initializationPromise;const k=Er(E.auth,_);yield Xt(!1,E,g.providerId),yield bi(k,E.auth);const O=yield yo(E);return k._openRedirect(E.auth,g,"linkViaRedirect",O)})).apply(this,arguments)}function wi(){return(wi=(0,c.Z)(function*(b,g){return yield Dn(b)._initializationPromise,ma(b,g,!1)})).apply(this,arguments)}function ma(b,g){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,c.Z)(function*(b,g,_=!1){const E=Dn(b),k=Er(E,g),G=yield new fu(E,k,_).execute();return G&&!_&&(delete G.user._redirectEventId,yield E._persistUserIfCurrent(G.user),yield E._setRedirectUser(null,g)),G})).apply(this,arguments)}function yo(b){return S.apply(this,arguments)}function S(){return(S=(0,c.Z)(function*(b){const g=Cs(`${b.uid}:::`);return b._redirectEventId=g,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),g})).apply(this,arguments)}class R{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(g,E)&&(_=!0,this.sendToConsumer(g,E),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function te(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return q(b);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var E;if(g.error&&!q(g)){const k=(null===(E=g.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";_.onError(Ce(this.auth,k))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const E=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&E}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(j(g))}saveEventToCache(g){this.cachedEventUids.add(j(g)),this.lastProcessedEventTime=Date.now()}}function j(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(g=>g).join("-")}function q({type:b,error:g}){return"unknown"===b&&"auth/no-auth-event"===g?.code}function De(b){return tt.apply(this,arguments)}function tt(){return(tt=(0,c.Z)(function*(b,g={}){return be(b,"GET","/v1/projects",g)})).apply(this,arguments)}const Xe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bt=/^https?/;function Ut(){return(Ut=(0,c.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:g}=yield De(b);for(const _ of g)try{if(tr(_))return}catch{}Ie(b,"unauthorized-domain")})).apply(this,arguments)}function tr(b){const g=Kt(),{protocol:_,hostname:E}=new URL(g);if(b.startsWith("chrome-extension://")){const G=new URL(b);return""===G.hostname&&""===E?"chrome-extension:"===_&&b.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&G.hostname===E}if(!bt.test(_))return!1;if(Xe.test(b))return E===b;const k=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+k+"|"+k+")$","i").test(E)}const ji=new Ps(3e4,6e4);function Ja(){const b=Jn().___jsl;if(b?.H)for(const g of Object.keys(b.H))if(b.H[g].r=b.H[g].r||[],b.H[g].L=b.H[g].L||[],b.H[g].r=[...b.H[g].L],b.CP)for(let _=0;_<b.CP.length;_++)b.CP[_]=null}let Go=null;function Br(b){return Go=Go||function Fd(b){return new Promise((g,_)=>{var E,k,O;function G(){Ja(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Ja(),_(Ce(b,"network-request-failed"))},timeout:ji.get()})}if(null!==(k=null===(E=Jn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==k&&k.Iframe)g(gapi.iframes.getContext());else{if(null===(O=Jn().gapi)||void 0===O||!O.load){const X=qr("iframefcb");return Jn()[X]=()=>{gapi.load?G():_(Ce(b,"network-request-failed"))},Ji(`https://apis.google.com/js/api.js?onload=${X}`).catch(Be=>_(Be))}G()}}).catch(g=>{throw Go=null,g})}(b),Go}const ts=new Ps(5e3,15e3),Uf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ws=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cy(b){const g=b.config;se(g.authDomain,b,"auth-domain-config-required");const _=g.emulator?le(g,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,E={apiKey:g.apiKey,appName:b.name,v:pe.SDK_VERSION},k=Ws.get(b.config.apiHost);k&&(E.eid=k);const O=b._getFrameworks();return O.length&&(E.fw=O.join(",")),`${_}?${(0,V.xO)(E).slice(1)}`}function Yl(){return Yl=(0,c.Z)(function*(b){const g=yield Br(b),_=Jn().gapi;return se(_,b,"internal-error"),g.open({where:document.body,url:cy(b),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Uf,dontclear:!0},E=>new Promise(function(){var k=(0,c.Z)(function*(O,G){yield E.restyle({setHideOnLeave:!1});const X=Ce(b,"network-request-failed"),Be=Jn().setTimeout(()=>{G(X)},ts.get());function Ye(){Jn().clearTimeout(Be),O(E)}E.ping(Ye).then(Ye,()=>{G(X)})});return function(O,G){return k.apply(this,arguments)}}()))}),Yl.apply(this,arguments)}const uy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ld{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Vd=encodeURIComponent("fac");function Kl(b,g,_,E,k,O){return xi.apply(this,arguments)}function xi(){return(xi=(0,c.Z)(function*(b,g,_,E,k,O){se(b.config.authDomain,b,"auth-domain-config-required"),se(b.config.apiKey,b,"invalid-api-key");const G={apiKey:b.config.apiKey,appName:b.name,authType:_,redirectUrl:E,v:pe.SDK_VERSION,eventId:k};if(g instanceof Ro){g.setDefaultLanguage(b.languageCode),G.providerId=g.providerId||"",(0,V.xb)(g.getCustomParameters())||(G.customParameters=JSON.stringify(g.getCustomParameters()));for(const[at,ct]of Object.entries(O||{}))G[at]=ct}if(g instanceof _d){const at=g.getScopes().filter(ct=>""!==ct);at.length>0&&(G.scopes=at.join(","))}b.tenantId&&(G.tid=b.tenantId);const X=G;for(const at of Object.keys(X))void 0===X[at]&&delete X[at];const Be=yield b._getAppCheckToken(),Ye=Be?`#${Vd}=${encodeURIComponent(Be)}`:"";return`${Ql(b)}?${(0,V.xO)(X).slice(1)}${Ye}`})).apply(this,arguments)}function Ql({config:b}){return b.emulator?le(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}const mu="webStorageSupport";class Gf extends class fy{constructor(g){this.factorId=g}_process(g,_,E){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,E);case"signin":return this._finalizeSignIn(g,_.credential);default:return Nt("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Gf(g)}_finalizeEnroll(g,_,E){return function Qr(b,g){return be(b,"POST","/v2/accounts/mfaEnrollment:finalize",xe(b,g))}(g,{idToken:_,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function zl(b,g){return be(b,"POST","/v2/accounts/mfaSignIn:finalize",xe(b,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let qg=(()=>{class b{constructor(){}static assertion(_){return Gf._fromCredential(_)}}return b.FACTOR_ID="phone",b})();var yu="@firebase/auth";class nr{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,c.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(E=>{g(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function el(){return window}function _a(){return(_a=(0,c.Z)(function*(b,g,_){var E;const{BuildInfo:k}=el();pt(g.sessionId,"AuthEvent did not contain a session ID");const O=yield Qg(g.sessionId),G={};return mt()?G.ibi=k.packageName:zt()?G.apn=k.packageName:Ie(b,"operation-not-supported-in-this-environment"),k.displayName&&(G.appDisplayName=k.displayName),G.sessionId=O,Kl(b,_,g.type,void 0,null!==(E=g.eventId)&&void 0!==E?E:void 0,G)})).apply(this,arguments)}function Hd(){return(Hd=(0,c.Z)(function*(b){const{BuildInfo:g}=el(),_={};mt()?_.iosBundleId=g.packageName:zt()?_.androidPackageName=g.packageName:Ie(b,"operation-not-supported-in-this-environment"),yield De(b,_)})).apply(this,arguments)}function Eu(){return(Eu=(0,c.Z)(function*(b,g,_){const{cordova:E}=el();let k=()=>{};try{yield new Promise((O,G)=>{let X=null;function Be(){var ct;O();const Un=null===(ct=E.plugins.browsertab)||void 0===ct?void 0:ct.close;"function"==typeof Un&&Un(),"function"==typeof _?.close&&_.close()}function Ye(){X||(X=window.setTimeout(()=>{G(Ce(b,"redirect-cancelled-by-user"))},2e3))}function at(){"visible"===document?.visibilityState&&Ye()}g.addPassiveListener(Be),document.addEventListener("resume",Ye,!1),zt()&&document.addEventListener("visibilitychange",at,!1),k=()=>{g.removePassiveListener(Be),document.removeEventListener("resume",Ye,!1),document.removeEventListener("visibilitychange",at,!1),X&&window.clearTimeout(X)}})}finally{k()}})).apply(this,arguments)}function Qg(b){return qf.apply(this,arguments)}function qf(){return(qf=(0,c.Z)(function*(b){const g=mw(b),_=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(_)).map(k=>k.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function mw(b){if(pt(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(b);const g=new ArrayBuffer(b.length),_=new Uint8Array(g);for(let E=0;E<b.length;E++)_[E]=b.charCodeAt(E);return _}(0,V.Pz)("authIdTokenMaxAge"),function $f(b){(0,pe._registerComponent)(new ce.wA("auth",(g,{options:_})=>{const E=g.getProvider("app").getImmediate(),k=g.getProvider("heartbeat"),O=g.getProvider("app-check-internal"),{apiKey:G,authDomain:X}=E.options;se(G&&!G.includes(":"),"invalid-api-key",{appName:E.name});const Be={apiKey:G,authDomain:X,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ue(b)},Ye=new cd(E,k,O,Be);return function ii(b,g){const _=g?.persistence||[],E=(Array.isArray(_)?_:[_]).map(ni);g?.errorMap&&b._updateErrorMap(g.errorMap),b._initializeWithPersistence(E,g?.popupRedirectResolver)}(Ye,_),Ye},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,E)=>{g.getProvider("auth-internal").initialize()})),(0,pe._registerComponent)(new ce.wA("auth-internal",g=>{const _=Dn(g.getProvider("auth").getImmediate());return new nr(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,pe.registerVersion)(yu,"0.23.2",function ir(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,pe.registerVersion)(yu,"0.23.2","esm2017")}("Browser");class Yf extends R{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(g)),super.onEvent(g)}initialized(){var g=this;return(0,c.Z)(function*(){yield g.initPromise})()}}function Ud(b){return Jg.apply(this,arguments)}function Jg(){return(Jg=(0,c.Z)(function*(b){const g=yield ya()._get(Kf(b));return g&&(yield ya()._remove(Kf(b))),g})).apply(this,arguments)}function Jl(){const b=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const E=Math.floor(Math.random()*g.length);b.push(g.charAt(E))}return b.join("")}function ya(){return ni($s)}function Kf(b){return $("authEvent",b.config.apiKey,b.name)}function Du(b){if(!b?.includes("?"))return{};const[g,..._]=b.split("?");return(0,V.zd)(_.join("?"))}function dr(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ce("no-auth-event")}}function $o(){var b;return(null===(b=self?.location)||void 0===b?void 0:b.protocol)||null}function Wd(b=(0,V.z$)()){return!("file:"!==$o()&&"ionic:"!==$o()&&"capacitor:"!==$o()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function Su(){try{const b=self.localStorage,g=Cs();if(b)return b.setItem(g,"1"),b.removeItem(g),!function im(b=(0,V.z$)()){return function qd(){return(0,V.w1)()&&11===document?.documentMode}()||function nc(b=(0,V.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,V.hl)()}catch{return ic()&&(0,V.hl)()}return!1}function ic(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Qf(){return(function nm(){return"http:"===$o()||"https:"===$o()}()||(0,V.ru)()||Wd())&&!function tc(){return(0,V.b$)()||(0,V.UG)()}()&&Su()&&!ic()}function rm(){return Wd()&&typeof document<"u"}function va(){return(va=(0,c.Z)(function*(){return!!rm()&&new Promise(b=>{const g=setTimeout(()=>{b(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),b(!0)})})})).apply(this,arguments)}const Ri={LOCAL:"local",NONE:"none",SESSION:"session"},Iu=se,sm="persistence";function rc(b){return Au.apply(this,arguments)}function Au(){return(Au=(0,c.Z)(function*(b){yield b._initializationPromise;const g=sc(),_=$(sm,b.config.apiKey,b.name);g&&g.setItem(_,b._getPersistence())})).apply(this,arguments)}function sc(){var b;try{return(null===(b=function Zd(){return typeof window<"u"?window:null}())||void 0===b?void 0:b.sessionStorage)||null}catch{return null}}const Wo=se;class qs{constructor(){this.browserResolver=ni(class hy{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Lo,this._completeRedirectFn=ma,this._overrideRedirectResult=F}_openPopup(g,_,E,k){var O=this;return(0,c.Z)(function*(){var G;pt(null===(G=O.eventManagers[g._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const X=yield Kl(g,_,E,Kt(),k);return function fw(b,g,_,E=500,k=600){const O=Math.max((window.screen.availHeight-k)/2,0).toString(),G=Math.max((window.screen.availWidth-E)/2,0).toString();let X="";const Be=Object.assign(Object.assign({},uy),{width:E.toString(),height:k.toString(),top:O,left:G}),Ye=(0,V.z$)().toLowerCase();_&&(X=Je(Ye)?"_blank":_),he(Ye)&&(g=g||"http://localhost",Be.scrollbars="yes");const at=Object.entries(Be).reduce((Un,[Hr,Xd])=>`${Un}${Hr}=${Xd},`,"");if(function An(b=(0,V.z$)()){var g;return mt(b)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(Ye)&&"_self"!==X)return function dy(b,g){const _=document.createElement("a");_.href=b,_.target=g;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(E)}(g||"",X),new Ld(null);const ct=window.open(g||"",X,at);se(ct,b,"popup-blocked");try{ct.focus()}catch{}return new Ld(ct)}(g,X,Cs())})()}_openRedirect(g,_,E,k){var O=this;return(0,c.Z)(function*(){return yield O._originValidation(g),function Md(b){Jn().location.href=b}(yield Kl(g,_,E,Kt(),k)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:k,promise:O}=this.eventManagers[_];return k?Promise.resolve(k):(pt(O,"If manager is not set, promise should be"),O)}const E=this.initAndGetManager(g);return this.eventManagers[_]={promise:E},E.catch(()=>{delete this.eventManagers[_]}),E}initAndGetManager(g){var _=this;return(0,c.Z)(function*(){const E=yield function uw(b){return Yl.apply(this,arguments)}(g),k=new R(g);return E.register("authEvent",O=>(se(O?.authEvent,g,"invalid-auth-event"),{status:k.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:k},_.iframes[g._key()]=E,k})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(mu,{type:mu},k=>{var O;const G=null===(O=k?.[0])||void 0===O?void 0:O[mu];void 0!==G&&_(!!G),Ie(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function $t(b){return Ut.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return Tn()||ee()||mt()}}),this.cordovaResolver=ni(class zd{constructor(){this._redirectPersistence=Lo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ma,this._overrideRedirectResult=F}_initialize(g){var _=this;return(0,c.Z)(function*(){const E=g._key();let k=_.eventManagers.get(E);return k||(k=new Yf(g),_.eventManagers.set(E,k),_.attachCallbackListeners(g,k)),k})()}_openPopup(g){Ie(g,"operation-not-supported-in-this-environment")}_openRedirect(g,_,E,k){var O=this;return(0,c.Z)(function*(){!function Kg(b){var g,_,E,k,O,G,X,Be,Ye,at;const ct=el();se("function"==typeof(null===(g=ct?.universalLinks)||void 0===g?void 0:g.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),se(typeof(null===(_=ct?.BuildInfo)||void 0===_?void 0:_.packageName)<"u",b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),se("function"==typeof(null===(O=null===(k=null===(E=ct?.cordova)||void 0===E?void 0:E.plugins)||void 0===k?void 0:k.browsertab)||void 0===O?void 0:O.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),se("function"==typeof(null===(Be=null===(X=null===(G=ct?.cordova)||void 0===G?void 0:G.plugins)||void 0===X?void 0:X.browsertab)||void 0===Be?void 0:Be.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),se("function"==typeof(null===(at=null===(Ye=ct?.cordova)||void 0===Ye?void 0:Ye.InAppBrowser)||void 0===at?void 0:at.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const G=yield O._initialize(g);yield G.initialized(),G.resetRedirect(),function Ss(){oi.clear()}(),yield O._originValidation(g);const X=function Xg(b,g,_=null){return{type:g,eventId:_,urlResponse:null,sessionId:Jl(),postBody:null,tenantId:b.tenantId,error:Ce(b,"no-auth-event")}}(g,E,k);yield function Zf(b,g){return ya()._set(Kf(b),g)}(g,X);const Be=yield function bu(b,g,_){return _a.apply(this,arguments)}(g,X,_),Ye=yield function Wf(b){const{cordova:g}=el();return new Promise(_=>{g.plugins.browsertab.isAvailable(E=>{let k=null;E?g.plugins.browsertab.openUrl(b):k=g.InAppBrowser.open(b,function Ct(b=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}()?"_blank":"_system","location=yes"),_(k)})})}(Be);return function gw(b,g,_){return Eu.apply(this,arguments)}(g,G,Ye)})()}_isIframeWebStorageSupported(g,_){throw new Error("Method not implemented.")}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function wu(b){return Hd.apply(this,arguments)}(g)),this.originValidationPromises[_]}attachCallbackListeners(g,_){const{universalLinks:E,handleOpenURL:k,BuildInfo:O}=el(),G=setTimeout((0,c.Z)(function*(){yield Ud(g),_.onEvent(dr())}),500),X=function(){var at=(0,c.Z)(function*(ct){clearTimeout(G);const Un=yield Ud(g);let Hr=null;Un&&ct?.url&&(Hr=function _y(b,g){var _,E;const k=function yy(b){const g=Du(b),_=g.link?decodeURIComponent(g.link):void 0,E=Du(_).link,k=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return Du(k).link||k||E||_||b}(g);if(k.includes("/__/auth/callback")){const O=Du(k),G=O.firebaseError?function tl(b){try{return JSON.parse(b)}catch{return null}}(decodeURIComponent(O.firebaseError)):null,X=null===(E=null===(_=G?.code)||void 0===_?void 0:_.split("auth/"))||void 0===E?void 0:E[1],Be=X?Ce(X):null;return Be?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:Be,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:k,postBody:null}}return null}(Un,ct.url)),_.onEvent(Hr||dr())});return function(Un){return at.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,X);const Be=k,Ye=`${O.packageName.toLowerCase()}://`;el().handleOpenURL=function(){var at=(0,c.Z)(function*(ct){if(ct.toLowerCase().startsWith(Ye)&&X({url:ct}),"function"==typeof Be)try{Be(ct)}catch(Un){console.error(Un)}});return function(ct){return at.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Lo,this._completeRedirectFn=ma,this._overrideRedirectResult=F}_initialize(g){var _=this;return(0,c.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,_,E,k){var O=this;return(0,c.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(g,_,E,k)})()}_openRedirect(g,_,E,k){var O=this;return(0,c.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(g,_,E,k)})()}_isIframeWebStorageSupported(g,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,_)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return rm()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Wo(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,c.Z)(function*(){if(g.underlyingResolver)return;const _=yield function Yd(){return va.apply(this,arguments)}();g.underlyingResolver=_?g.cordovaResolver:g.browserResolver})()}}function om(b){return b.unwrap()}function am(b){return by(b)}function by(b){const{_tokenResponse:g}=b instanceof V.ZR?b.customData:b;if(!g)return null;if(!(b instanceof V.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return hi.credentialFromResult(b);const _=g.providerId;if(!_||"password"===_)return null;let E;switch(_){case"google.com":E=yd;break;case"facebook.com":E=br;break;case"github.com":E=qc;break;case"twitter.com":E=gf;break;default:const{oauthIdToken:k,oauthAccessToken:O,oauthTokenSecret:G,pendingToken:X,nonce:Be}=g;return O||G||k||X?X?_.startsWith("saml.")?si._create(_,X):Yr._fromParams({providerId:_,signInMethod:_,pendingToken:X,idToken:k,accessToken:O}):new Zr(_).credential({idToken:k,accessToken:O,rawNonce:Be}):null}return b instanceof V.ZR?E.credentialFromError(b):E.credentialFromResult(b)}function Oi(b,g){return g.catch(_=>{throw _ instanceof V.ZR&&function nl(b,g){var _;const E=null===(_=g.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===g?.code)g.resolver=new Jf(b,function Sd(b,g){var _;const E=(0,V.m9)(b),k=g;return se(g.customData.operationType,E,"argument-error"),se(null===(_=k.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,E,"argument-error"),Fo._fromError(E,k)}(b,g));else if(E){const k=by(g),O=g;k&&(O.credential=k,O.tenantId=E.tenantId||void 0,O.email=E.email||void 0,O.phoneNumber=E.phoneNumber||void 0)}}(b,_),_}).then(_=>{const k=_.user;return{operationType:_.operationType,credential:am(_),additionalUserInfo:iu(_),user:rr.getOrCreate(k)}})}function vo(b,g){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,c.Z)(function*(b,g){const _=yield g;return{verificationId:_.verificationId,confirm:E=>Oi(b,_.confirm(E))}})).apply(this,arguments)}class Jf{constructor(g,_){this.resolver=_,this.auth=function vy(b){return b.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return Oi(om(this.auth),this.resolver.resolveSignIn(g))}}class rr{constructor(g){this._delegate=g,this.multiFactor=function Vl(b){const g=(0,V.m9)(b);return $a.has(g)||$a.set(g,vi._fromUser(g)),$a.get(g)}(g)}static getOrCreate(g){return rr.USER_MAP.has(g)||rr.USER_MAP.set(g,new rr(g)),rr.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var _=this;return(0,c.Z)(function*(){return Oi(_.auth,bd(_._delegate,g))})()}linkWithPhoneNumber(g,_){var E=this;return(0,c.Z)(function*(){return vo(E.auth,function Vf(b,g,_){return du.apply(this,arguments)}(E._delegate,g,_))})()}linkWithPopup(g){var _=this;return(0,c.Z)(function*(){return Oi(_.auth,function pa(b,g,_){return Ds.apply(this,arguments)}(_._delegate,g,qs))})()}linkWithRedirect(g){var _=this;return(0,c.Z)(function*(){return yield rc(Dn(_.auth)),function gu(b,g,_){return function ga(b,g,_){return $g.apply(this,arguments)}(b,g,_)}(_._delegate,g,qs)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var _=this;return(0,c.Z)(function*(){return Oi(_.auth,Hn(_._delegate,g))})()}reauthenticateWithPhoneNumber(g,_){return vo(this.auth,function ay(b,g,_){return Qa.apply(this,arguments)}(this._delegate,g,_))}reauthenticateWithPopup(g){return Oi(this.auth,function Jt(b,g,_){return hu.apply(this,arguments)}(this._delegate,g,qs))}reauthenticateWithRedirect(g){var _=this;return(0,c.Z)(function*(){return yield rc(Dn(_.auth)),function jo(b,g,_){return function Wl(b,g,_){return zo.apply(this,arguments)}(b,g,_)}(_._delegate,g,qs)})()}sendEmailVerification(g){return function Sf(b,g){return If.apply(this,arguments)}(this._delegate,g)}unlink(g){var _=this;return(0,c.Z)(function*(){return yield function yf(b,g){return Tl.apply(this,arguments)}(_._delegate,g),_})()}updateEmail(g){return function Og(b,g){return Nl((0,V.m9)(b),g,null)}(this._delegate,g)}updatePassword(g){return function po(b,g){return Nl((0,V.m9)(b),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function fa(b,g){return Fr.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function Tf(b,g){return Ol.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,_){return function Af(b,g,_){return ca.apply(this,arguments)}(this._delegate,g,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}rr.USER_MAP=new WeakMap;const hn=se;let Kd=(()=>{class b{constructor(_,E){if(this.app=_,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:k}=_.options;hn(k,"invalid-api-key",{appName:_.name}),hn(k,"invalid-api-key",{appName:_.name});const O=typeof window<"u"?qs:void 0;this._delegate=E.initialize({options:{persistence:Qd(k,_.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(Le),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?rr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,E){!function af(b,g,_){const E=Dn(b);se(E._canInitEmulator,E,"emulator-config-failed"),se(/^https?:\/\//.test(g),E,"invalid-emulator-scheme");const k=!!_?.disableWarnings,O=Ai(g),{host:G,port:X}=function vr(b){const g=Ai(b),_=/(\/\/)?([^?#/]+)/.exec(b.substr(g.length));if(!_)return{host:"",port:null};const E=_[2].split("@").pop()||"",k=/^(\[[^\]]+\])(:|$)/.exec(E);if(k){const O=k[1];return{host:O,port:co(E.substr(O.length+1))}}{const[O,G]=E.split(":");return{host:O,port:co(G)}}}(g);E.config.emulator={url:`${O}//${G}${null===X?"":`:${X}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:G,port:X,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:k})}),k||function sa(){function b(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}(this._delegate,_,E)}applyActionCode(_){return function Xc(b,g){return Es.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return wf(this._delegate,_)}confirmPasswordReset(_,E){return function Qc(b,g,_){return kl.apply(this,arguments)}(this._delegate,_,E)}createUserWithEmailAndPassword(_,E){var k=this;return(0,c.Z)(function*(){return Oi(k._delegate,function Ef(b,g,_){return Rl.apply(this,arguments)}(k._delegate,_,E))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function Rg(b,g){return Cd.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function xg(b,g){return"EMAIL_SIGNIN"===Wc.parseLink(g)?.operation}(0,_)}getRedirectResult(){var _=this;return(0,c.Z)(function*(){hn(Qf(),_._delegate,"operation-not-supported-in-this-environment");const E=yield function ly(b,g){return wi.apply(this,arguments)}(_._delegate,qs);return E?Oi(_._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function tm(b,g){Dn(b)._logFramework(g)}(this._delegate,_)}onAuthStateChanged(_,E,k){const{next:O,error:G,complete:X}=Mu(_,E,k);return this._delegate.onAuthStateChanged(O,G,X)}onIdTokenChanged(_,E,k){const{next:O,error:G,complete:X}=Mu(_,E,k);return this._delegate.onIdTokenChanged(O,G,X)}sendSignInLinkToEmail(_,E){return function za(b,g,_){return Df.apply(this,arguments)}(this._delegate,_,E)}sendPasswordResetEmail(_,E){return function bf(b,g,_){return ja.apply(this,arguments)}(this._delegate,_,E||void 0)}setPersistence(_){var E=this;return(0,c.Z)(function*(){let k;switch(function k0(b,g){Iu(Object.values(Ri).includes(g),b,"invalid-persistence-type"),(0,V.b$)()?Iu(g!==Ri.SESSION,b,"unsupported-persistence-type"):(0,V.UG)()?Iu(g===Ri.NONE,b,"unsupported-persistence-type"):ic()?Iu(g===Ri.NONE||g===Ri.LOCAL&&(0,V.hl)(),b,"unsupported-persistence-type"):Iu(g===Ri.NONE||Su(),b,"unsupported-persistence-type")}(E._delegate,_),_){case Ri.SESSION:k=Lo;break;case Ri.LOCAL:k=(yield ni(Ka)._isAvailable())?Ka:$s;break;case Ri.NONE:k=yr;break;default:return Ie("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(k)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return Oi(this._delegate,function Hs(b){return mf.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return Oi(this._delegate,ur(this._delegate,_))}signInWithCustomToken(_){return Oi(this._delegate,function js(b,g){return wd.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,E){return Oi(this._delegate,function Cf(b,g,_){return ur((0,V.m9)(b),ri.credential(g,_))}(this._delegate,_,E))}signInWithEmailLink(_,E){return Oi(this._delegate,function wr(b,g,_){return fo.apply(this,arguments)}(this._delegate,_,E))}signInWithPhoneNumber(_,E){return vo(this._delegate,function jg(b,g,_){return Lf.apply(this,arguments)}(this._delegate,_,E))}signInWithPopup(_){var E=this;return(0,c.Z)(function*(){return hn(Qf(),E._delegate,"operation-not-supported-in-this-environment"),Oi(E._delegate,function fi(b,g,_){return qn.apply(this,arguments)}(E._delegate,_,qs))})()}signInWithRedirect(_){var E=this;return(0,c.Z)(function*(){return hn(Qf(),E._delegate,"operation-not-supported-in-this-environment"),yield rc(E._delegate),function rt(b,g,_){return function Uo(b,g,_){return xt.apply(this,arguments)}(b,g,_)}(E._delegate,_,qs)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function Jc(b,g){return la.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=Ri,b})();function Mu(b,g,_){let E=b;"function"!=typeof b&&({next:E,error:g,complete:_}=b);const k=E;return{next:G=>k(G&&rr.getOrCreate(G)),error:g,complete:_}}function Qd(b,g){const _=function Xf(b,g){const _=sc();if(!_)return[];const E=$(sm,b,g);switch(_.getItem(E)){case Ri.NONE:return[yr];case Ri.LOCAL:return[Ka,Lo];case Ri.SESSION:return[Lo];default:return[]}}(b,g);if(typeof self<"u"&&!_.includes(Ka)&&_.push(Ka),typeof window<"u")for(const E of[$s,Lo])_.includes(E)||_.push(E);return _.includes(yr)||_.push(yr),_}class lm{constructor(){this.providerId="phone",this._delegate=new hi(om(re.Z.auth()))}static credential(g,_){return hi.credential(g,_)}verifyPhoneNumber(g,_){return this._delegate.verifyPhoneNumber(g,_)}unwrap(){return this._delegate}}lm.PHONE_SIGN_IN_METHOD=hi.PHONE_SIGN_IN_METHOD,lm.PROVIDER_ID=hi.PROVIDER_ID;const wy=se;class _w{constructor(g,_,E=re.Z.app()){var k;wy(null===(k=E.options)||void 0===k?void 0:k.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Ff(g,_,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function yw(b){b.INTERNAL.registerComponent(new ce.wA("auth-compat",g=>{const _=g.getProvider("app-compat").getImmediate(),E=g.getProvider("auth");return new Kd(_,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ri,FacebookAuthProvider:br,GithubAuthProvider:qc,GoogleAuthProvider:yd,OAuthProvider:Zr,SAMLAuthProvider:Oo,PhoneAuthProvider:lm,PhoneMultiFactorGenerator:qg,RecaptchaVerifier:_w,TwitterAuthProvider:gf,Auth:Kd,AuthCredential:Bs,Error:V.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.4.2")}(re.Z)},3942:(Et,Fe,B)=>{B.d(Fe,{Z:()=>Le});var c=B(2090),re=B(4859),V=B(2951),pe=B(1877);class de{constructor(we,Ae){this._delegate=we,this.firebase=Ae,(0,V._addComponent)(we,new re.wA("app-compat",()=>this,"PUBLIC")),this.container=we.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(we){this._delegate.automaticDataCollectionEnabled=we}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(we=>{this._delegate.checkDestroyed(),we()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,V.deleteApp)(this._delegate)))}_getService(we,Ae=V._DEFAULT_ENTRY_NAME){var ht;this._delegate.checkDestroyed();const yt=this._delegate.container.getProvider(we);return!yt.isInitialized()&&"EXPLICIT"===(null===(ht=yt.getComponent())||void 0===ht?void 0:ht.instantiationMode)&&yt.initialize(),yt.getImmediate({identifier:Ae})}_removeServiceInstance(we,Ae=V._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(we).clearInstance(Ae)}_addComponent(we){(0,V._addComponent)(this._delegate,we)}_addOrOverwriteComponent(we){(0,V._addOrOverwriteComponent)(this._delegate,we)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ce=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Y=function Ee(){const Ke=function Te(Ke){const we={},Ae={__esModule:!0,initializeApp:function Ve(qe,ot={}){const se=V.initializeApp(qe,ot);if((0,c.r3)(we,se.name))return we[se.name];const Nt=new Ke(se,Ae);return we[se.name]=Nt,Nt},app:yt,registerVersion:V.registerVersion,setLogLevel:V.setLogLevel,onLog:V.onLog,apps:null,SDK_VERSION:V.SDK_VERSION,INTERNAL:{registerComponent:function Ce(qe){const ot=qe.name,se=ot.replace("-compat","");if(V._registerComponent(qe)&&"PUBLIC"===qe.type){const Nt=(pt=yt())=>{if("function"!=typeof pt[se])throw ce.create("invalid-app-argument",{appName:ot});return pt[se]()};void 0!==qe.serviceProps&&(0,c.ZB)(Nt,qe.serviceProps),Ae[se]=Nt,Ke.prototype[se]=function(...pt){return this._getService.bind(this,ot).apply(this,qe.multipleInstances?pt:[])}}return"PUBLIC"===qe.type?Ae[se]:null},removeApp:function ht(qe){delete we[qe]},useAsService:function Qe(qe,ot){return"serverAuth"===ot?null:ot},modularAPIs:V}};function yt(qe){if(!(0,c.r3)(we,qe=qe||V._DEFAULT_ENTRY_NAME))throw ce.create("no-app",{appName:qe});return we[qe]}return Ae.default=Ae,Object.defineProperty(Ae,"apps",{get:function Ie(){return Object.keys(we).map(qe=>we[qe])}}),yt.App=Ke,Ae}(de);return Ke.INTERNAL=Object.assign(Object.assign({},Ke.INTERNAL),{createFirebaseNamespace:Ee,extendNamespace:function we(Ae){(0,c.ZB)(Ke,Ae)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),Ke}(),W=new pe.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){W.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ke=self.firebase.SDK_VERSION;Ke&&Ke.indexOf("LITE")>=0&&W.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Le=Y;!function Re(Ke){(0,V.registerVersion)("@firebase/app-compat","0.2.13",Ke)}()},2951:(Et,Fe,B)=>{B.r(Fe),B.d(Fe,{FirebaseError:()=>pe.ZR,SDK_VERSION:()=>ia,_DEFAULT_ENTRY_NAME:()=>Wr,_addComponent:()=>lt,_addOrOverwriteComponent:()=>Tt,_apps:()=>Pn,_clearComponents:()=>ui,_components:()=>gn,_getProvider:()=>Fs,_registerComponent:()=>In,_removeServiceInstance:()=>_r,deleteApp:()=>ms,getApp:()=>Ii,getApps:()=>Ki,initializeApp:()=>dn,onLog:()=>Ls,registerVersion:()=>Qi,setLogLevel:()=>ni});var c=B(5861),re=B(4859),V=B(1877),pe=B(2090);let ye,ce;const Y=new WeakMap,W=new WeakMap,J=new WeakMap,et=new WeakMap,Re=new WeakMap;let we={get(ue,oe,Ue){if(ue instanceof IDBTransaction){if("done"===oe)return W.get(ue);if("objectStoreNames"===oe)return ue.objectStoreNames||J.get(ue);if("store"===oe)return Ue.objectStoreNames[1]?void 0:Ue.objectStore(Ue.objectStoreNames[0])}return Ve(ue[oe])},set:(ue,oe,Ue)=>(ue[oe]=Ue,!0),has:(ue,oe)=>ue instanceof IDBTransaction&&("done"===oe||"store"===oe)||oe in ue};function yt(ue){return"function"==typeof ue?function ht(ue){return ue!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ee(){return ce||(ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ue)?function(...oe){return ue.apply(Ie(this),oe),Ve(Y.get(this))}:function(...oe){return Ve(ue.apply(Ie(this),oe))}:function(oe,...Ue){const ze=ue.call(Ie(this),oe,...Ue);return J.set(ze,oe.sort?oe.sort():[oe]),Ve(ze)}}(ue):(ue instanceof IDBTransaction&&function Ke(ue){if(W.has(ue))return;const oe=new Promise((Ue,ze)=>{const kt=()=>{ue.removeEventListener("complete",Gt),ue.removeEventListener("error",mn),ue.removeEventListener("abort",mn)},Gt=()=>{Ue(),kt()},mn=()=>{ze(ue.error||new DOMException("AbortError","AbortError")),kt()};ue.addEventListener("complete",Gt),ue.addEventListener("error",mn),ue.addEventListener("abort",mn)});W.set(ue,oe)}(ue),((ue,oe)=>oe.some(Ue=>ue instanceof Ue))(ue,function Te(){return ye||(ye=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ue,we):ue)}function Ve(ue){if(ue instanceof IDBRequest)return function Le(ue){const oe=new Promise((Ue,ze)=>{const kt=()=>{ue.removeEventListener("success",Gt),ue.removeEventListener("error",mn)},Gt=()=>{Ue(Ve(ue.result)),kt()},mn=()=>{ze(ue.error),kt()};ue.addEventListener("success",Gt),ue.addEventListener("error",mn)});return oe.then(Ue=>{Ue instanceof IDBCursor&&Y.set(Ue,ue)}).catch(()=>{}),Re.set(oe,ue),oe}(ue);if(et.has(ue))return et.get(ue);const oe=yt(ue);return oe!==ue&&(et.set(ue,oe),Re.set(oe,ue)),oe}const Ie=ue=>Re.get(ue),qe=["get","getKey","getAll","getAllKeys","count"],ot=["put","add","delete","clear"],se=new Map;function Nt(ue,oe){if(!(ue instanceof IDBDatabase)||oe in ue||"string"!=typeof oe)return;if(se.get(oe))return se.get(oe);const Ue=oe.replace(/FromIndex$/,""),ze=oe!==Ue,kt=ot.includes(Ue);if(!(Ue in(ze?IDBIndex:IDBObjectStore).prototype)||!kt&&!qe.includes(Ue))return;const Gt=function(){var mn=(0,c.Z)(function*($n,...nn){const Ji=this.transaction($n,kt?"readwrite":"readonly");let qr=Ji.store;return ze&&(qr=qr.index(nn.shift())),(yield Promise.all([qr[Ue](...nn),kt&&Ji.done]))[0]});return function(nn){return mn.apply(this,arguments)}}();return se.set(oe,Gt),Gt}!function Ae(ue){we=ue(we)}(ue=>({...ue,get:(oe,Ue,ze)=>Nt(oe,Ue)||ue.get(oe,Ue,ze),has:(oe,Ue)=>!!Nt(oe,Ue)||ue.has(oe,Ue)}));class pt{constructor(oe){this.container=oe}getPlatformInfoString(){return this.container.getProviders().map(Ue=>{if(function Kt(ue){return"VERSION"===ue.getComponent()?.type}(Ue)){const ze=Ue.getImmediate();return`${ze.library}/${ze.version}`}return null}).filter(Ue=>Ue).join(" ")}}const ft="@firebase/app",xr=new V.Yd("@firebase/app"),Wr="[DEFAULT]",Si={[ft]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Pn=new Map,gn=new Map;function lt(ue,oe){try{ue.container.addComponent(oe)}catch(Ue){xr.debug(`Component ${oe.name} failed to register with FirebaseApp ${ue.name}`,Ue)}}function Tt(ue,oe){ue.container.addOrOverwriteComponent(oe)}function In(ue){const oe=ue.name;if(gn.has(oe))return xr.debug(`There were multiple attempts to register component ${oe}.`),!1;gn.set(oe,ue);for(const Ue of Pn.values())lt(Ue,ue);return!0}function Fs(ue,oe){const Ue=ue.container.getProvider("heartbeat").getImmediate({optional:!0});return Ue&&Ue.triggerHeartbeat(),ue.container.getProvider(oe)}function _r(ue,oe,Ue=Wr){Fs(ue,oe).clearInstance(Ue)}function ui(){gn.clear()}const Bi=new pe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class En{constructor(oe,Ue,ze){this._isDeleted=!1,this._options=Object.assign({},oe),this._config=Object.assign({},Ue),this._name=Ue.name,this._automaticDataCollectionEnabled=Ue.automaticDataCollectionEnabled,this._container=ze,this.container.addComponent(new re.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(oe){this.checkDestroyed(),this._automaticDataCollectionEnabled=oe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(oe){this._isDeleted=oe}checkDestroyed(){if(this.isDeleted)throw Bi.create("app-deleted",{appName:this._name})}}const ia="9.23.0";function dn(ue,oe={}){let Ue=ue;"object"!=typeof oe&&(oe={name:oe});const ze=Object.assign({name:Wr,automaticDataCollectionEnabled:!1},oe),kt=ze.name;if("string"!=typeof kt||!kt)throw Bi.create("bad-app-name",{appName:String(kt)});if(Ue||(Ue=(0,pe.aH)()),!Ue)throw Bi.create("no-options");const Gt=Pn.get(kt);if(Gt){if((0,pe.vZ)(Ue,Gt.options)&&(0,pe.vZ)(ze,Gt.config))return Gt;throw Bi.create("duplicate-app",{appName:kt})}const mn=new re.H0(kt);for(const nn of gn.values())mn.addComponent(nn);const $n=new En(Ue,ze,mn);return Pn.set(kt,$n),$n}function Ii(ue=Wr){const oe=Pn.get(ue);if(!oe&&ue===Wr&&(0,pe.aH)())return dn();if(!oe)throw Bi.create("no-app",{appName:ue});return oe}function Ki(){return Array.from(Pn.values())}function ms(ue){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,c.Z)(function*(ue){const oe=ue.name;Pn.has(oe)&&(Pn.delete(oe),yield Promise.all(ue.container.getProviders().map(Ue=>Ue.delete())),ue.isDeleted=!0)})).apply(this,arguments)}function Qi(ue,oe,Ue){var ze;let kt=null!==(ze=Si[ue])&&void 0!==ze?ze:ue;Ue&&(kt+=`-${Ue}`);const Gt=kt.match(/\s|\//),mn=oe.match(/\s|\//);if(Gt||mn){const $n=[`Unable to register library "${kt}" with version "${oe}":`];return Gt&&$n.push(`library name "${kt}" contains illegal characters (whitespace or "/")`),Gt&&mn&&$n.push("and"),mn&&$n.push(`version name "${oe}" contains illegal characters (whitespace or "/")`),void xr.warn($n.join(" "))}In(new re.wA(`${kt}-version`,()=>({library:kt,version:oe}),"VERSION"))}function Ls(ue,oe){if(null!==ue&&"function"!=typeof ue)throw Bi.create("invalid-log-argument");(0,V.Am)(ue,oe)}function ni(ue){(0,V.Ub)(ue)}const $="firebase-heartbeat-store";let z=null;function Q(){return z||(z=function Ce(ue,oe,{blocked:Ue,upgrade:ze,blocking:kt,terminated:Gt}={}){const mn=indexedDB.open(ue,oe),$n=Ve(mn);return ze&&mn.addEventListener("upgradeneeded",nn=>{ze(Ve(mn.result),nn.oldVersion,nn.newVersion,Ve(mn.transaction),nn)}),Ue&&mn.addEventListener("blocked",nn=>Ue(nn.oldVersion,nn.newVersion,nn)),$n.then(nn=>{Gt&&nn.addEventListener("close",()=>Gt()),kt&&nn.addEventListener("versionchange",Ji=>kt(Ji.oldVersion,Ji.newVersion,Ji))}).catch(()=>{}),$n}("firebase-heartbeat-database",1,{upgrade:(ue,oe)=>{0===oe&&ue.createObjectStore($)}}).catch(ue=>{throw Bi.create("idb-open",{originalErrorMessage:ue.message})})),z}function ee(){return(ee=(0,c.Z)(function*(ue){try{return yield(yield Q()).transaction($).objectStore($).get(zt(ue))}catch(oe){if(oe instanceof pe.ZR)xr.warn(oe.message);else{const Ue=Bi.create("idb-get",{originalErrorMessage:oe?.message});xr.warn(Ue.message)}}})).apply(this,arguments)}function Je(ue,oe){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,c.Z)(function*(ue,oe){try{const ze=(yield Q()).transaction($,"readwrite");yield ze.objectStore($).put(oe,zt(ue)),yield ze.done}catch(Ue){if(Ue instanceof pe.ZR)xr.warn(Ue.message);else{const ze=Bi.create("idb-set",{originalErrorMessage:Ue?.message});xr.warn(ze.message)}}})).apply(this,arguments)}function zt(ue){return`${ue.name}!${ue.options.appId}`}class mt{constructor(oe){this.container=oe,this._heartbeatsCache=null;const Ue=this.container.getProvider("app").getImmediate();this._storage=new Xi(Ue),this._heartbeatsCachePromise=this._storage.read().then(ze=>(this._heartbeatsCache=ze,ze))}triggerHeartbeat(){var oe=this;return(0,c.Z)(function*(){const ze=oe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),kt=Ct();if(null===oe._heartbeatsCache&&(oe._heartbeatsCache=yield oe._heartbeatsCachePromise),oe._heartbeatsCache.lastSentHeartbeatDate!==kt&&!oe._heartbeatsCache.heartbeats.some(Gt=>Gt.date===kt))return oe._heartbeatsCache.heartbeats.push({date:kt,agent:ze}),oe._heartbeatsCache.heartbeats=oe._heartbeatsCache.heartbeats.filter(Gt=>{const mn=new Date(Gt.date).valueOf();return Date.now()-mn<=2592e6}),oe._storage.overwrite(oe._heartbeatsCache)})()}getHeartbeatsHeader(){var oe=this;return(0,c.Z)(function*(){if(null===oe._heartbeatsCache&&(yield oe._heartbeatsCachePromise),null===oe._heartbeatsCache||0===oe._heartbeatsCache.heartbeats.length)return"";const Ue=Ct(),{heartbeatsToSend:ze,unsentEntries:kt}=function An(ue,oe=1024){const Ue=[];let ze=ue.slice();for(const kt of ue){const Gt=Ue.find(mn=>mn.agent===kt.agent);if(Gt){if(Gt.dates.push(kt.date),Tn(Ue)>oe){Gt.dates.pop();break}}else if(Ue.push({agent:kt.agent,dates:[kt.date]}),Tn(Ue)>oe){Ue.pop();break}ze=ze.slice(1)}return{heartbeatsToSend:Ue,unsentEntries:ze}}(oe._heartbeatsCache.heartbeats),Gt=(0,pe.L)(JSON.stringify({version:2,heartbeats:ze}));return oe._heartbeatsCache.lastSentHeartbeatDate=Ue,kt.length>0?(oe._heartbeatsCache.heartbeats=kt,yield oe._storage.overwrite(oe._heartbeatsCache)):(oe._heartbeatsCache.heartbeats=[],oe._storage.overwrite(oe._heartbeatsCache)),Gt})()}}function Ct(){return(new Date).toISOString().substring(0,10)}class Xi{constructor(oe){this.app=oe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,pe.hl)()&&(0,pe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var oe=this;return(0,c.Z)(function*(){return(yield oe._canUseIndexedDBPromise)&&(yield function he(ue){return ee.apply(this,arguments)}(oe.app))||{heartbeats:[]}})()}overwrite(oe){var Ue=this;return(0,c.Z)(function*(){var ze;if(yield Ue._canUseIndexedDBPromise){const Gt=yield Ue.read();return Je(Ue.app,{lastSentHeartbeatDate:null!==(ze=oe.lastSentHeartbeatDate)&&void 0!==ze?ze:Gt.lastSentHeartbeatDate,heartbeats:oe.heartbeats})}})()}add(oe){var Ue=this;return(0,c.Z)(function*(){var ze;if(yield Ue._canUseIndexedDBPromise){const Gt=yield Ue.read();return Je(Ue.app,{lastSentHeartbeatDate:null!==(ze=oe.lastSentHeartbeatDate)&&void 0!==ze?ze:Gt.lastSentHeartbeatDate,heartbeats:[...Gt.heartbeats,...oe.heartbeats]})}})()}}function Tn(ue){return(0,pe.L)(JSON.stringify({version:2,heartbeats:ue})).length}!function _s(ue){In(new re.wA("platform-logger",oe=>new pt(oe),"PRIVATE")),In(new re.wA("heartbeat",oe=>new mt(oe),"PRIVATE")),Qi(ft,"0.9.13",ue),Qi(ft,"0.9.13","esm2017"),Qi("fire-js","")}("")},4859:(Et,Fe,B)=>{B.d(Fe,{H0:()=>Te,wA:()=>V,zt:()=>de});var c=B(5861),re=B(2090);class V{constructor(Y,W,J){this.name=Y,this.instanceFactory=W,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Y){return this.instantiationMode=Y,this}setMultipleInstances(Y){return this.multipleInstances=Y,this}setServiceProps(Y){return this.serviceProps=Y,this}setInstanceCreatedCallback(Y){return this.onInstanceCreated=Y,this}}const pe="[DEFAULT]";class de{constructor(Y,W){this.name=Y,this.container=W,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Y){const W=this.normalizeInstanceIdentifier(Y);if(!this.instancesDeferred.has(W)){const J=new re.BH;if(this.instancesDeferred.set(W,J),this.isInitialized(W)||this.shouldAutoInitialize())try{const et=this.getOrInitializeService({instanceIdentifier:W});et&&J.resolve(et)}catch{}}return this.instancesDeferred.get(W).promise}getImmediate(Y){var W;const J=this.normalizeInstanceIdentifier(Y?.identifier),et=null!==(W=Y?.optional)&&void 0!==W&&W;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(et)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Re){if(et)return null;throw Re}}getComponent(){return this.component}setComponent(Y){if(Y.name!==this.name)throw Error(`Mismatching Component ${Y.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Y,this.shouldAutoInitialize()){if(function ce(Ee){return"EAGER"===Ee.instantiationMode}(Y))try{this.getOrInitializeService({instanceIdentifier:pe})}catch{}for(const[W,J]of this.instancesDeferred.entries()){const et=this.normalizeInstanceIdentifier(W);try{const Re=this.getOrInitializeService({instanceIdentifier:et});J.resolve(Re)}catch{}}}}clearInstance(Y=pe){this.instancesDeferred.delete(Y),this.instancesOptions.delete(Y),this.instances.delete(Y)}delete(){var Y=this;return(0,c.Z)(function*(){const W=Array.from(Y.instances.values());yield Promise.all([...W.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...W.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Y=pe){return this.instances.has(Y)}getOptions(Y=pe){return this.instancesOptions.get(Y)||{}}initialize(Y={}){const{options:W={}}=Y,J=this.normalizeInstanceIdentifier(Y.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const et=this.getOrInitializeService({instanceIdentifier:J,options:W});for(const[Re,Le]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Re)&&Le.resolve(et);return et}onInit(Y,W){var J;const et=this.normalizeInstanceIdentifier(W),Re=null!==(J=this.onInitCallbacks.get(et))&&void 0!==J?J:new Set;Re.add(Y),this.onInitCallbacks.set(et,Re);const Le=this.instances.get(et);return Le&&Y(Le,et),()=>{Re.delete(Y)}}invokeOnInitCallbacks(Y,W){const J=this.onInitCallbacks.get(W);if(J)for(const et of J)try{et(Y,W)}catch{}}getOrInitializeService({instanceIdentifier:Y,options:W={}}){let J=this.instances.get(Y);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(Ee=Y,Ee===pe?void 0:Ee),options:W}),this.instances.set(Y,J),this.instancesOptions.set(Y,W),this.invokeOnInitCallbacks(J,Y),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Y,J)}catch{}var Ee;return J||null}normalizeInstanceIdentifier(Y=pe){return this.component?this.component.multipleInstances?Y:pe:Y}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Te{constructor(Y){this.name=Y,this.providers=new Map}addComponent(Y){const W=this.getProvider(Y.name);if(W.isComponentSet())throw new Error(`Component ${Y.name} has already been registered with ${this.name}`);W.setComponent(Y)}addOrOverwriteComponent(Y){this.getProvider(Y.name).isComponentSet()&&this.providers.delete(Y.name),this.addComponent(Y)}getProvider(Y){if(this.providers.has(Y))return this.providers.get(Y);const W=new de(Y,this);return this.providers.set(Y,W),W}getProviders(){return Array.from(this.providers.values())}}},1877:(Et,Fe,B)=>{B.d(Fe,{Am:()=>Ee,Ub:()=>Te,Yd:()=>ce,in:()=>re});const c=[];var re=(()=>{return(Y=re||(re={}))[Y.DEBUG=0]="DEBUG",Y[Y.VERBOSE=1]="VERBOSE",Y[Y.INFO=2]="INFO",Y[Y.WARN=3]="WARN",Y[Y.ERROR=4]="ERROR",Y[Y.SILENT=5]="SILENT",re;var Y})();const V={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},pe=re.INFO,de={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},ye=(Y,W,...J)=>{if(W<Y.logLevel)return;const et=(new Date).toISOString(),Re=de[W];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${W})`);console[Re](`[${et}]  ${Y.name}:`,...J)};class ce{constructor(W){this.name=W,this._logLevel=pe,this._logHandler=ye,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(W){if(!(W in re))throw new TypeError(`Invalid value "${W}" assigned to \`logLevel\``);this._logLevel=W}setLogLevel(W){this._logLevel="string"==typeof W?V[W]:W}get logHandler(){return this._logHandler}set logHandler(W){if("function"!=typeof W)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=W}get userLogHandler(){return this._userLogHandler}set userLogHandler(W){this._userLogHandler=W}debug(...W){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...W),this._logHandler(this,re.DEBUG,...W)}log(...W){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...W),this._logHandler(this,re.VERBOSE,...W)}info(...W){this._userLogHandler&&this._userLogHandler(this,re.INFO,...W),this._logHandler(this,re.INFO,...W)}warn(...W){this._userLogHandler&&this._userLogHandler(this,re.WARN,...W),this._logHandler(this,re.WARN,...W)}error(...W){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...W),this._logHandler(this,re.ERROR,...W)}}function Te(Y){c.forEach(W=>{W.setLogLevel(Y)})}function Ee(Y,W){for(const J of c){let et=null;W&&W.level&&(et=V[W.level]),J.userLogHandler=null===Y?null:(Re,Le,...Ke)=>{const we=Ke.map(Ae=>{if(null==Ae)return null;if("string"==typeof Ae)return Ae;if("number"==typeof Ae||"boolean"==typeof Ae)return Ae.toString();if(Ae instanceof Error)return Ae.message;try{return JSON.stringify(Ae)}catch{return null}}).filter(Ae=>Ae).join(" ");Le>=(et??Re.logLevel)&&Y({level:re[Le].toLowerCase(),message:we,args:Ke,type:Re.name})}}}},5861:(Et,Fe,B)=>{function c(V,pe,de,ye,ce,Te,Ee){try{var Y=V[Te](Ee),W=Y.value}catch(J){return void de(J)}Y.done?pe(W):Promise.resolve(W).then(ye,ce)}function re(V){return function(){var pe=this,de=arguments;return new Promise(function(ye,ce){var Te=V.apply(pe,de);function Ee(W){c(Te,ye,ce,Ee,Y,"next",W)}function Y(W){c(Te,ye,ce,Ee,Y,"throw",W)}Ee(void 0)})}}B.d(Fe,{Z:()=>re})},7582:(Et,Fe,B)=>{function pe(le,ie){var ke={};for(var Me in le)Object.prototype.hasOwnProperty.call(le,Me)&&ie.indexOf(Me)<0&&(ke[Me]=le[Me]);if(null!=le&&"function"==typeof Object.getOwnPropertySymbols){var xe=0;for(Me=Object.getOwnPropertySymbols(le);xe<Me.length;xe++)ie.indexOf(Me[xe])<0&&Object.prototype.propertyIsEnumerable.call(le,Me[xe])&&(ke[Me[xe]]=le[Me[xe]])}return ke}function J(le,ie,ke,Me){return new(ke||(ke=Promise))(function(be,vt){function Lt(sn){try{At(Me.next(sn))}catch(zn){vt(zn)}}function un(sn){try{At(Me.throw(sn))}catch(zn){vt(zn)}}function At(sn){sn.done?be(sn.value):function xe(be){return be instanceof ke?be:new ke(function(vt){vt(be)})}(sn.value).then(Lt,un)}At((Me=Me.apply(le,ie||[])).next())})}function Ve(le){return this instanceof Ve?(this.v=le,this):new Ve(le)}function Ie(le,ie,ke){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xe,Me=ke.apply(le,ie||[]),be=[];return xe={},Lt("next"),Lt("throw"),Lt("return",function vt(tn){return function(Nn){return Promise.resolve(Nn).then(tn,zn)}}),xe[Symbol.asyncIterator]=function(){return this},xe;function Lt(tn,Nn){Me[tn]&&(xe[tn]=function(Gn){return new Promise(function(Zi,pr){be.push([tn,Gn,Zi,pr])>1||un(tn,Gn)})},Nn&&(xe[tn]=Nn(xe[tn])))}function un(tn,Nn){try{!function At(tn){tn.value instanceof Ve?Promise.resolve(tn.value.v).then(sn,zn):ps(be[0][2],tn)}(Me[tn](Nn))}catch(Gn){ps(be[0][3],Gn)}}function sn(tn){un("next",tn)}function zn(tn){un("throw",tn)}function ps(tn,Nn){tn(Nn),be.shift(),be.length&&un(be[0][0],be[0][1])}}function Qe(le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ke,ie=le[Symbol.asyncIterator];return ie?ie.call(le):(le=function Ke(le){var ie="function"==typeof Symbol&&Symbol.iterator,ke=ie&&le[ie],Me=0;if(ke)return ke.call(le);if(le&&"number"==typeof le.length)return{next:function(){return le&&Me>=le.length&&(le=void 0),{value:le&&le[Me++],done:!le}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(le),ke={},Me("next"),Me("throw"),Me("return"),ke[Symbol.asyncIterator]=function(){return this},ke);function Me(be){ke[be]=le[be]&&function(vt){return new Promise(function(Lt,un){!function xe(be,vt,Lt,un){Promise.resolve(un).then(function(At){be({value:At,done:Lt})},vt)}(Lt,un,(vt=le[be](vt)).done,vt.value)})}}}B.d(Fe,{FC:()=>Ie,KL:()=>Qe,_T:()=>pe,mG:()=>J,qq:()=>Ve}),"function"==typeof SuppressedError&&SuppressedError}},Et=>{Et(Et.s=9925)}]);